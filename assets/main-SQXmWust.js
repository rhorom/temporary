function _ie(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in e)){const o=Object.getOwnPropertyDescriptor(i,r);o&&Object.defineProperty(e,r,o.get?o:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var b8=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Md(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function w8(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var r=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return e[i]}})}),n}var S8={exports:{}},r2={},C8={exports:{}},Pt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fv=Symbol.for("react.element"),bie=Symbol.for("react.portal"),wie=Symbol.for("react.fragment"),Sie=Symbol.for("react.strict_mode"),Cie=Symbol.for("react.profiler"),Eie=Symbol.for("react.provider"),kie=Symbol.for("react.context"),Rie=Symbol.for("react.forward_ref"),Tie=Symbol.for("react.suspense"),Aie=Symbol.for("react.memo"),Mie=Symbol.for("react.lazy"),DL=Symbol.iterator;function Fie(e){return e===null||typeof e!="object"?null:(e=DL&&e[DL]||e["@@iterator"],typeof e=="function"?e:null)}var E8={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k8=Object.assign,R8={};function mm(e,t,n){this.props=e,this.context=t,this.refs=R8,this.updater=n||E8}mm.prototype.isReactComponent={};mm.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};mm.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function T8(){}T8.prototype=mm.prototype;function sF(e,t,n){this.props=e,this.context=t,this.refs=R8,this.updater=n||E8}var lF=sF.prototype=new T8;lF.constructor=sF;k8(lF,mm.prototype);lF.isPureReactComponent=!0;var LL=Array.isArray,A8=Object.prototype.hasOwnProperty,uF={current:null},M8={key:!0,ref:!0,__self:!0,__source:!0};function F8(e,t,n){var i,r={},o=null,a=null;if(t!=null)for(i in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)A8.call(t,i)&&!M8.hasOwnProperty(i)&&(r[i]=t[i]);var s=arguments.length-2;if(s===1)r.children=n;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];r.children=l}if(e&&e.defaultProps)for(i in s=e.defaultProps,s)r[i]===void 0&&(r[i]=s[i]);return{$$typeof:fv,type:e,key:o,ref:a,props:r,_owner:uF.current}}function Pie(e,t){return{$$typeof:fv,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function cF(e){return typeof e=="object"&&e!==null&&e.$$typeof===fv}function Nie(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var jL=/\/+/g;function gE(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Nie(""+e.key):t.toString(36)}function Qx(e,t,n,i,r){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case fv:case bie:a=!0}}if(a)return a=e,r=r(a),e=i===""?"."+gE(a,0):i,LL(r)?(n="",e!=null&&(n=e.replace(jL,"$&/")+"/"),Qx(r,t,n,"",function(u){return u})):r!=null&&(cF(r)&&(r=Pie(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(jL,"$&/")+"/")+e)),t.push(r)),1;if(a=0,i=i===""?".":i+":",LL(e))for(var s=0;s<e.length;s++){o=e[s];var l=i+gE(o,s);a+=Qx(o,t,n,l,r)}else if(l=Fie(e),typeof l=="function")for(e=l.call(e),s=0;!(o=e.next()).done;)o=o.value,l=i+gE(o,s++),a+=Qx(o,t,n,l,r);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function U1(e,t,n){if(e==null)return e;var i=[],r=0;return Qx(e,i,"","",function(o){return t.call(n,o,r++)}),i}function $ie(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var wr={current:null},e_={transition:null},Oie={ReactCurrentDispatcher:wr,ReactCurrentBatchConfig:e_,ReactCurrentOwner:uF};Pt.Children={map:U1,forEach:function(e,t,n){U1(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return U1(e,function(){t++}),t},toArray:function(e){return U1(e,function(t){return t})||[]},only:function(e){if(!cF(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Pt.Component=mm;Pt.Fragment=wie;Pt.Profiler=Cie;Pt.PureComponent=sF;Pt.StrictMode=Sie;Pt.Suspense=Tie;Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Oie;Pt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=k8({},e.props),r=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=uF.current),t.key!==void 0&&(r=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)A8.call(t,l)&&!M8.hasOwnProperty(l)&&(i[l]=t[l]===void 0&&s!==void 0?s[l]:t[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];i.children=s}return{$$typeof:fv,type:e.type,key:r,ref:o,props:i,_owner:a}};Pt.createContext=function(e){return e={$$typeof:kie,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Eie,_context:e},e.Consumer=e};Pt.createElement=F8;Pt.createFactory=function(e){var t=F8.bind(null,e);return t.type=e,t};Pt.createRef=function(){return{current:null}};Pt.forwardRef=function(e){return{$$typeof:Rie,render:e}};Pt.isValidElement=cF;Pt.lazy=function(e){return{$$typeof:Mie,_payload:{_status:-1,_result:e},_init:$ie}};Pt.memo=function(e,t){return{$$typeof:Aie,type:e,compare:t===void 0?null:t}};Pt.startTransition=function(e){var t=e_.transition;e_.transition={};try{e()}finally{e_.transition=t}};Pt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Pt.useCallback=function(e,t){return wr.current.useCallback(e,t)};Pt.useContext=function(e){return wr.current.useContext(e)};Pt.useDebugValue=function(){};Pt.useDeferredValue=function(e){return wr.current.useDeferredValue(e)};Pt.useEffect=function(e,t){return wr.current.useEffect(e,t)};Pt.useId=function(){return wr.current.useId()};Pt.useImperativeHandle=function(e,t,n){return wr.current.useImperativeHandle(e,t,n)};Pt.useInsertionEffect=function(e,t){return wr.current.useInsertionEffect(e,t)};Pt.useLayoutEffect=function(e,t){return wr.current.useLayoutEffect(e,t)};Pt.useMemo=function(e,t){return wr.current.useMemo(e,t)};Pt.useReducer=function(e,t,n){return wr.current.useReducer(e,t,n)};Pt.useRef=function(e){return wr.current.useRef(e)};Pt.useState=function(e){return wr.current.useState(e)};Pt.useSyncExternalStore=function(e,t,n){return wr.current.useSyncExternalStore(e,t,n)};Pt.useTransition=function(){return wr.current.useTransition()};Pt.version="18.2.0";C8.exports=Pt;var F=C8.exports;const Nt=Md(F),Iie=_ie({__proto__:null,default:Nt},[F]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Die=F,Lie=Symbol.for("react.element"),jie=Symbol.for("react.fragment"),zie=Object.prototype.hasOwnProperty,Bie=Die.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Hie={key:!0,ref:!0,__self:!0,__source:!0};function P8(e,t,n){var i,r={},o=null,a=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(i in t)zie.call(t,i)&&!Hie.hasOwnProperty(i)&&(r[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)r[i]===void 0&&(r[i]=t[i]);return{$$typeof:Lie,type:e,key:o,ref:a,props:r,_owner:Bie.current}}r2.Fragment=jie;r2.jsx=P8;r2.jsxs=P8;S8.exports=r2;var v=S8.exports,ER={},N8={exports:{}},Eo={},$8={exports:{}},O8={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(H,J){var Q=H.length;H.push(J);e:for(;0<Q;){var oe=Q-1>>>1,me=H[oe];if(0<r(me,J))H[oe]=J,H[Q]=me,Q=oe;else break e}}function n(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var J=H[0],Q=H.pop();if(Q!==J){H[0]=Q;e:for(var oe=0,me=H.length,ke=me>>>1;oe<ke;){var ge=2*(oe+1)-1,Se=H[ge],Me=ge+1,It=H[Me];if(0>r(Se,Q))Me<me&&0>r(It,Se)?(H[oe]=It,H[Me]=Q,oe=Me):(H[oe]=Se,H[ge]=Q,oe=ge);else if(Me<me&&0>r(It,Q))H[oe]=It,H[Me]=Q,oe=Me;else break e}}return J}function r(H,J){var Q=H.sortIndex-J.sortIndex;return Q!==0?Q:H.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var l=[],u=[],c=1,d=null,h=3,m=!1,g=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(H){for(var J=n(u);J!==null;){if(J.callback===null)i(u);else if(J.startTime<=H)i(u),J.sortIndex=J.expirationTime,t(l,J);else break;J=n(u)}}function k(H){if(y=!1,S(H),!g)if(n(l)!==null)g=!0,V(R);else{var J=n(u);J!==null&&K(k,J.startTime-H)}}function R(H,J){g=!1,y&&(y=!1,b(N),N=-1),m=!0;var Q=h;try{for(S(J),d=n(l);d!==null&&(!(d.expirationTime>J)||H&&!z());){var oe=d.callback;if(typeof oe=="function"){d.callback=null,h=d.priorityLevel;var me=oe(d.expirationTime<=J);J=e.unstable_now(),typeof me=="function"?d.callback=me:d===n(l)&&i(l),S(J)}else i(l);d=n(l)}if(d!==null)var ke=!0;else{var ge=n(u);ge!==null&&K(k,ge.startTime-J),ke=!1}return ke}finally{d=null,h=Q,m=!1}}var M=!1,T=null,N=-1,D=5,I=-1;function z(){return!(e.unstable_now()-I<D)}function X(){if(T!==null){var H=e.unstable_now();I=H;var J=!0;try{J=T(!0,H)}finally{J?W():(M=!1,T=null)}}else M=!1}var W;if(typeof w=="function")W=function(){w(X)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,B=U.port2;U.port1.onmessage=X,W=function(){B.postMessage(null)}}else W=function(){x(X,0)};function V(H){T=H,M||(M=!0,W())}function K(H,J){N=x(function(){H(e.unstable_now())},J)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(H){H.callback=null},e.unstable_continueExecution=function(){g||m||(g=!0,V(R))},e.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<H?Math.floor(1e3/H):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(H){switch(h){case 1:case 2:case 3:var J=3;break;default:J=h}var Q=h;h=J;try{return H()}finally{h=Q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(H,J){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var Q=h;h=H;try{return J()}finally{h=Q}},e.unstable_scheduleCallback=function(H,J,Q){var oe=e.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?oe+Q:oe):Q=oe,H){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=Q+me,H={id:c++,callback:J,priorityLevel:H,startTime:Q,expirationTime:me,sortIndex:-1},Q>oe?(H.sortIndex=Q,t(u,H),n(l)===null&&H===n(u)&&(y?(b(N),N=-1):y=!0,K(k,Q-oe))):(H.sortIndex=me,t(l,H),g||m||(g=!0,V(R))),H},e.unstable_shouldYield=z,e.unstable_wrapCallback=function(H){var J=h;return function(){var Q=h;h=J;try{return H.apply(this,arguments)}finally{h=Q}}}})(O8);$8.exports=O8;var Uie=$8.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I8=F,vo=Uie;function _e(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var D8=new Set,ay={};function Fd(e,t){Cp(e,t),Cp(e+"Capture",t)}function Cp(e,t){for(ay[e]=t,e=0;e<t.length;e++)D8.add(t[e])}var $l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kR=Object.prototype.hasOwnProperty,Wie=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zL={},BL={};function Gie(e){return kR.call(BL,e)?!0:kR.call(zL,e)?!1:Wie.test(e)?BL[e]=!0:(zL[e]=!0,!1)}function qie(e,t,n,i){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Vie(e,t,n,i){if(t===null||typeof t>"u"||qie(e,t,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Sr(e,t,n,i,r,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var Ni={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ni[e]=new Sr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ni[t]=new Sr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ni[e]=new Sr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ni[e]=new Sr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ni[e]=new Sr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ni[e]=new Sr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ni[e]=new Sr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ni[e]=new Sr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ni[e]=new Sr(e,5,!1,e.toLowerCase(),null,!1,!1)});var fF=/[\-:]([a-z])/g;function dF(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(fF,dF);Ni[t]=new Sr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(fF,dF);Ni[t]=new Sr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(fF,dF);Ni[t]=new Sr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ni[e]=new Sr(e,1,!1,e.toLowerCase(),null,!1,!1)});Ni.xlinkHref=new Sr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ni[e]=new Sr(e,1,!1,e.toLowerCase(),null,!0,!0)});function hF(e,t,n,i){var r=Ni.hasOwnProperty(t)?Ni[t]:null;(r!==null?r.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Vie(t,n,r,i)&&(n=null),i||r===null?Gie(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=n===null?r.type===3?!1:"":n:(t=r.attributeName,i=r.attributeNamespace,n===null?e.removeAttribute(t):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}var Gl=I8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,W1=Symbol.for("react.element"),Bh=Symbol.for("react.portal"),Hh=Symbol.for("react.fragment"),pF=Symbol.for("react.strict_mode"),RR=Symbol.for("react.profiler"),L8=Symbol.for("react.provider"),j8=Symbol.for("react.context"),mF=Symbol.for("react.forward_ref"),TR=Symbol.for("react.suspense"),AR=Symbol.for("react.suspense_list"),gF=Symbol.for("react.memo"),xu=Symbol.for("react.lazy"),z8=Symbol.for("react.offscreen"),HL=Symbol.iterator;function vg(e){return e===null||typeof e!="object"?null:(e=HL&&e[HL]||e["@@iterator"],typeof e=="function"?e:null)}var An=Object.assign,yE;function i0(e){if(yE===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);yE=t&&t[1]||""}return`
`+yE+e}var vE=!1;function xE(e,t){if(!e||vE)return"";vE=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var i=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){i=u}e.call(t.prototype)}else{try{throw Error()}catch(u){i=u}e()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),o=i.stack.split(`
`),a=r.length-1,s=o.length-1;1<=a&&0<=s&&r[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(r[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||r[a]!==o[s]){var l=`
`+r[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=a&&0<=s);break}}}finally{vE=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?i0(e):""}function Yie(e){switch(e.tag){case 5:return i0(e.type);case 16:return i0("Lazy");case 13:return i0("Suspense");case 19:return i0("SuspenseList");case 0:case 2:case 15:return e=xE(e.type,!1),e;case 11:return e=xE(e.type.render,!1),e;case 1:return e=xE(e.type,!0),e;default:return""}}function MR(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Hh:return"Fragment";case Bh:return"Portal";case RR:return"Profiler";case pF:return"StrictMode";case TR:return"Suspense";case AR:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case j8:return(e.displayName||"Context")+".Consumer";case L8:return(e._context.displayName||"Context")+".Provider";case mF:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case gF:return t=e.displayName||null,t!==null?t:MR(e.type)||"Memo";case xu:t=e._payload,e=e._init;try{return MR(e(t))}catch{}}return null}function Zie(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return MR(t);case 8:return t===pF?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function oc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function B8(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Xie(e){var t=B8(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function G1(e){e._valueTracker||(e._valueTracker=Xie(e))}function H8(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=B8(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function L_(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function FR(e,t){var n=t.checked;return An({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function UL(e,t){var n=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;n=oc(t.value!=null?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function U8(e,t){t=t.checked,t!=null&&hF(e,"checked",t,!1)}function PR(e,t){U8(e,t);var n=oc(t.value),i=t.type;if(n!=null)i==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?NR(e,t.type,n):t.hasOwnProperty("defaultValue")&&NR(e,t.type,oc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function WL(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function NR(e,t,n){(t!=="number"||L_(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var r0=Array.isArray;function ap(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+oc(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,i&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function $R(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(_e(91));return An({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function GL(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(_e(92));if(r0(n)){if(1<n.length)throw Error(_e(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:oc(n)}}function W8(e,t){var n=oc(t.value),i=oc(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),i!=null&&(e.defaultValue=""+i)}function qL(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function G8(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function OR(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?G8(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var q1,q8=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,i,r){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,r)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(q1=q1||document.createElement("div"),q1.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=q1.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function sy(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var N0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Kie=["Webkit","ms","Moz","O"];Object.keys(N0).forEach(function(e){Kie.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),N0[t]=N0[e]})});function V8(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||N0.hasOwnProperty(e)&&N0[e]?(""+t).trim():t+"px"}function Y8(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=V8(n,t[n],i);n==="float"&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}var Jie=An({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function IR(e,t){if(t){if(Jie[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(_e(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(_e(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(_e(61))}if(t.style!=null&&typeof t.style!="object")throw Error(_e(62))}}function DR(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var LR=null;function yF(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var jR=null,sp=null,lp=null;function VL(e){if(e=pv(e)){if(typeof jR!="function")throw Error(_e(280));var t=e.stateNode;t&&(t=u2(t),jR(e.stateNode,e.type,t))}}function Z8(e){sp?lp?lp.push(e):lp=[e]:sp=e}function X8(){if(sp){var e=sp,t=lp;if(lp=sp=null,VL(e),t)for(e=0;e<t.length;e++)VL(t[e])}}function K8(e,t){return e(t)}function J8(){}var _E=!1;function Q8(e,t,n){if(_E)return e(t,n);_E=!0;try{return K8(e,t,n)}finally{_E=!1,(sp!==null||lp!==null)&&(J8(),X8())}}function ly(e,t){var n=e.stateNode;if(n===null)return null;var i=u2(n);if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(_e(231,t,typeof n));return n}var zR=!1;if($l)try{var xg={};Object.defineProperty(xg,"passive",{get:function(){zR=!0}}),window.addEventListener("test",xg,xg),window.removeEventListener("test",xg,xg)}catch{zR=!1}function Qie(e,t,n,i,r,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var $0=!1,j_=null,z_=!1,BR=null,ere={onError:function(e){$0=!0,j_=e}};function tre(e,t,n,i,r,o,a,s,l){$0=!1,j_=null,Qie.apply(ere,arguments)}function nre(e,t,n,i,r,o,a,s,l){if(tre.apply(this,arguments),$0){if($0){var u=j_;$0=!1,j_=null}else throw Error(_e(198));z_||(z_=!0,BR=u)}}function Pd(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function e9(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function YL(e){if(Pd(e)!==e)throw Error(_e(188))}function ire(e){var t=e.alternate;if(!t){if(t=Pd(e),t===null)throw Error(_e(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return YL(r),e;if(o===i)return YL(r),t;o=o.sibling}throw Error(_e(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,s=r.child;s;){if(s===n){a=!0,n=r,i=o;break}if(s===i){a=!0,i=r,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,i=r;break}if(s===i){a=!0,i=o,n=r;break}s=s.sibling}if(!a)throw Error(_e(189))}}if(n.alternate!==i)throw Error(_e(190))}if(n.tag!==3)throw Error(_e(188));return n.stateNode.current===n?e:t}function t9(e){return e=ire(e),e!==null?n9(e):null}function n9(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=n9(e);if(t!==null)return t;e=e.sibling}return null}var i9=vo.unstable_scheduleCallback,ZL=vo.unstable_cancelCallback,rre=vo.unstable_shouldYield,ore=vo.unstable_requestPaint,jn=vo.unstable_now,are=vo.unstable_getCurrentPriorityLevel,vF=vo.unstable_ImmediatePriority,r9=vo.unstable_UserBlockingPriority,B_=vo.unstable_NormalPriority,sre=vo.unstable_LowPriority,o9=vo.unstable_IdlePriority,o2=null,ys=null;function lre(e){if(ys&&typeof ys.onCommitFiberRoot=="function")try{ys.onCommitFiberRoot(o2,e,void 0,(e.current.flags&128)===128)}catch{}}var Fa=Math.clz32?Math.clz32:fre,ure=Math.log,cre=Math.LN2;function fre(e){return e>>>=0,e===0?32:31-(ure(e)/cre|0)|0}var V1=64,Y1=4194304;function o0(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function H_(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,r=e.suspendedLanes,o=e.pingedLanes,a=n&268435455;if(a!==0){var s=a&~r;s!==0?i=o0(s):(o&=a,o!==0&&(i=o0(o)))}else a=n&~r,a!==0?i=o0(a):o!==0&&(i=o0(o));if(i===0)return 0;if(t!==0&&t!==i&&!(t&r)&&(r=i&-i,o=t&-t,r>=o||r===16&&(o&4194240)!==0))return t;if(i&4&&(i|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)n=31-Fa(t),r=1<<n,i|=e[n],t&=~r;return i}function dre(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hre(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-Fa(o),s=1<<a,l=r[a];l===-1?(!(s&n)||s&i)&&(r[a]=dre(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}function HR(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function a9(){var e=V1;return V1<<=1,!(V1&4194240)&&(V1=64),e}function bE(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function dv(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Fa(t),e[t]=n}function pre(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-Fa(n),o=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~o}}function xF(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Fa(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var tn=0;function s9(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var l9,_F,u9,c9,f9,UR=!1,Z1=[],Wu=null,Gu=null,qu=null,uy=new Map,cy=new Map,Ru=[],mre="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function XL(e,t){switch(e){case"focusin":case"focusout":Wu=null;break;case"dragenter":case"dragleave":Gu=null;break;case"mouseover":case"mouseout":qu=null;break;case"pointerover":case"pointerout":uy.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":cy.delete(t.pointerId)}}function _g(e,t,n,i,r,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},t!==null&&(t=pv(t),t!==null&&_F(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function gre(e,t,n,i,r){switch(t){case"focusin":return Wu=_g(Wu,e,t,n,i,r),!0;case"dragenter":return Gu=_g(Gu,e,t,n,i,r),!0;case"mouseover":return qu=_g(qu,e,t,n,i,r),!0;case"pointerover":var o=r.pointerId;return uy.set(o,_g(uy.get(o)||null,e,t,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,cy.set(o,_g(cy.get(o)||null,e,t,n,i,r)),!0}return!1}function d9(e){var t=Tf(e.target);if(t!==null){var n=Pd(t);if(n!==null){if(t=n.tag,t===13){if(t=e9(n),t!==null){e.blockedOn=t,f9(e.priority,function(){u9(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function t_(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=WR(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);LR=i,n.target.dispatchEvent(i),LR=null}else return t=pv(n),t!==null&&_F(t),e.blockedOn=n,!1;t.shift()}return!0}function KL(e,t,n){t_(e)&&n.delete(t)}function yre(){UR=!1,Wu!==null&&t_(Wu)&&(Wu=null),Gu!==null&&t_(Gu)&&(Gu=null),qu!==null&&t_(qu)&&(qu=null),uy.forEach(KL),cy.forEach(KL)}function bg(e,t){e.blockedOn===t&&(e.blockedOn=null,UR||(UR=!0,vo.unstable_scheduleCallback(vo.unstable_NormalPriority,yre)))}function fy(e){function t(r){return bg(r,e)}if(0<Z1.length){bg(Z1[0],e);for(var n=1;n<Z1.length;n++){var i=Z1[n];i.blockedOn===e&&(i.blockedOn=null)}}for(Wu!==null&&bg(Wu,e),Gu!==null&&bg(Gu,e),qu!==null&&bg(qu,e),uy.forEach(t),cy.forEach(t),n=0;n<Ru.length;n++)i=Ru[n],i.blockedOn===e&&(i.blockedOn=null);for(;0<Ru.length&&(n=Ru[0],n.blockedOn===null);)d9(n),n.blockedOn===null&&Ru.shift()}var up=Gl.ReactCurrentBatchConfig,U_=!0;function vre(e,t,n,i){var r=tn,o=up.transition;up.transition=null;try{tn=1,bF(e,t,n,i)}finally{tn=r,up.transition=o}}function xre(e,t,n,i){var r=tn,o=up.transition;up.transition=null;try{tn=4,bF(e,t,n,i)}finally{tn=r,up.transition=o}}function bF(e,t,n,i){if(U_){var r=WR(e,t,n,i);if(r===null)FE(e,t,i,W_,n),XL(e,i);else if(gre(r,e,t,n,i))i.stopPropagation();else if(XL(e,i),t&4&&-1<mre.indexOf(e)){for(;r!==null;){var o=pv(r);if(o!==null&&l9(o),o=WR(e,t,n,i),o===null&&FE(e,t,i,W_,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else FE(e,t,i,null,n)}}var W_=null;function WR(e,t,n,i){if(W_=null,e=yF(i),e=Tf(e),e!==null)if(t=Pd(e),t===null)e=null;else if(n=t.tag,n===13){if(e=e9(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return W_=e,null}function h9(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(are()){case vF:return 1;case r9:return 4;case B_:case sre:return 16;case o9:return 536870912;default:return 16}default:return 16}}var Fu=null,wF=null,n_=null;function p9(){if(n_)return n_;var e,t=wF,n=t.length,i,r="value"in Fu?Fu.value:Fu.textContent,o=r.length;for(e=0;e<n&&t[e]===r[e];e++);var a=n-e;for(i=1;i<=a&&t[n-i]===r[o-i];i++);return n_=r.slice(e,1<i?1-i:void 0)}function i_(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function X1(){return!0}function JL(){return!1}function ko(e){function t(n,i,r,o,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?X1:JL,this.isPropagationStopped=JL,this}return An(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=X1)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=X1)},persist:function(){},isPersistent:X1}),t}var gm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},SF=ko(gm),hv=An({},gm,{view:0,detail:0}),_re=ko(hv),wE,SE,wg,a2=An({},hv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:CF,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==wg&&(wg&&e.type==="mousemove"?(wE=e.screenX-wg.screenX,SE=e.screenY-wg.screenY):SE=wE=0,wg=e),wE)},movementY:function(e){return"movementY"in e?e.movementY:SE}}),QL=ko(a2),bre=An({},a2,{dataTransfer:0}),wre=ko(bre),Sre=An({},hv,{relatedTarget:0}),CE=ko(Sre),Cre=An({},gm,{animationName:0,elapsedTime:0,pseudoElement:0}),Ere=ko(Cre),kre=An({},gm,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Rre=ko(kre),Tre=An({},gm,{data:0}),e5=ko(Tre),Are={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mre={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fre={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pre(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Fre[e])?!!t[e]:!1}function CF(){return Pre}var Nre=An({},hv,{key:function(e){if(e.key){var t=Are[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=i_(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Mre[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:CF,charCode:function(e){return e.type==="keypress"?i_(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?i_(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),$re=ko(Nre),Ore=An({},a2,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),t5=ko(Ore),Ire=An({},hv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:CF}),Dre=ko(Ire),Lre=An({},gm,{propertyName:0,elapsedTime:0,pseudoElement:0}),jre=ko(Lre),zre=An({},a2,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Bre=ko(zre),Hre=[9,13,27,32],EF=$l&&"CompositionEvent"in window,O0=null;$l&&"documentMode"in document&&(O0=document.documentMode);var Ure=$l&&"TextEvent"in window&&!O0,m9=$l&&(!EF||O0&&8<O0&&11>=O0),n5=" ",i5=!1;function g9(e,t){switch(e){case"keyup":return Hre.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function y9(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Uh=!1;function Wre(e,t){switch(e){case"compositionend":return y9(t);case"keypress":return t.which!==32?null:(i5=!0,n5);case"textInput":return e=t.data,e===n5&&i5?null:e;default:return null}}function Gre(e,t){if(Uh)return e==="compositionend"||!EF&&g9(e,t)?(e=p9(),n_=wF=Fu=null,Uh=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return m9&&t.locale!=="ko"?null:t.data;default:return null}}var qre={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function r5(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!qre[e.type]:t==="textarea"}function v9(e,t,n,i){Z8(i),t=G_(t,"onChange"),0<t.length&&(n=new SF("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var I0=null,dy=null;function Vre(e){A9(e,0)}function s2(e){var t=qh(e);if(H8(t))return e}function Yre(e,t){if(e==="change")return t}var x9=!1;if($l){var EE;if($l){var kE="oninput"in document;if(!kE){var o5=document.createElement("div");o5.setAttribute("oninput","return;"),kE=typeof o5.oninput=="function"}EE=kE}else EE=!1;x9=EE&&(!document.documentMode||9<document.documentMode)}function a5(){I0&&(I0.detachEvent("onpropertychange",_9),dy=I0=null)}function _9(e){if(e.propertyName==="value"&&s2(dy)){var t=[];v9(t,dy,e,yF(e)),Q8(Vre,t)}}function Zre(e,t,n){e==="focusin"?(a5(),I0=t,dy=n,I0.attachEvent("onpropertychange",_9)):e==="focusout"&&a5()}function Xre(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return s2(dy)}function Kre(e,t){if(e==="click")return s2(t)}function Jre(e,t){if(e==="input"||e==="change")return s2(t)}function Qre(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ia=typeof Object.is=="function"?Object.is:Qre;function hy(e,t){if(Ia(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!kR.call(t,r)||!Ia(e[r],t[r]))return!1}return!0}function s5(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function l5(e,t){var n=s5(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=s5(n)}}function b9(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?b9(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function w9(){for(var e=window,t=L_();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=L_(e.document)}return t}function kF(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function eoe(e){var t=w9(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&b9(n.ownerDocument.documentElement,n)){if(i!==null&&kF(n)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!e.extend&&o>i&&(r=i,i=o,o=r),r=l5(n,o);var a=l5(n,i);r&&a&&(e.rangeCount!==1||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(r.node,r.offset),e.removeAllRanges(),o>i?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var toe=$l&&"documentMode"in document&&11>=document.documentMode,Wh=null,GR=null,D0=null,qR=!1;function u5(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;qR||Wh==null||Wh!==L_(i)||(i=Wh,"selectionStart"in i&&kF(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),D0&&hy(D0,i)||(D0=i,i=G_(GR,"onSelect"),0<i.length&&(t=new SF("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=Wh)))}function K1(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Gh={animationend:K1("Animation","AnimationEnd"),animationiteration:K1("Animation","AnimationIteration"),animationstart:K1("Animation","AnimationStart"),transitionend:K1("Transition","TransitionEnd")},RE={},S9={};$l&&(S9=document.createElement("div").style,"AnimationEvent"in window||(delete Gh.animationend.animation,delete Gh.animationiteration.animation,delete Gh.animationstart.animation),"TransitionEvent"in window||delete Gh.transitionend.transition);function l2(e){if(RE[e])return RE[e];if(!Gh[e])return e;var t=Gh[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in S9)return RE[e]=t[n];return e}var C9=l2("animationend"),E9=l2("animationiteration"),k9=l2("animationstart"),R9=l2("transitionend"),T9=new Map,c5="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tc(e,t){T9.set(e,t),Fd(t,[e])}for(var TE=0;TE<c5.length;TE++){var AE=c5[TE],noe=AE.toLowerCase(),ioe=AE[0].toUpperCase()+AE.slice(1);Tc(noe,"on"+ioe)}Tc(C9,"onAnimationEnd");Tc(E9,"onAnimationIteration");Tc(k9,"onAnimationStart");Tc("dblclick","onDoubleClick");Tc("focusin","onFocus");Tc("focusout","onBlur");Tc(R9,"onTransitionEnd");Cp("onMouseEnter",["mouseout","mouseover"]);Cp("onMouseLeave",["mouseout","mouseover"]);Cp("onPointerEnter",["pointerout","pointerover"]);Cp("onPointerLeave",["pointerout","pointerover"]);Fd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fd("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var a0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),roe=new Set("cancel close invalid load scroll toggle".split(" ").concat(a0));function f5(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,nre(i,t,void 0,e),e.currentTarget=null}function A9(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var o=void 0;if(t)for(var a=i.length-1;0<=a;a--){var s=i[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&r.isPropagationStopped())break e;f5(r,s,u),o=l}else for(a=0;a<i.length;a++){if(s=i[a],l=s.instance,u=s.currentTarget,s=s.listener,l!==o&&r.isPropagationStopped())break e;f5(r,s,u),o=l}}}if(z_)throw e=BR,z_=!1,BR=null,e}function pn(e,t){var n=t[KR];n===void 0&&(n=t[KR]=new Set);var i=e+"__bubble";n.has(i)||(M9(t,e,2,!1),n.add(i))}function ME(e,t,n){var i=0;t&&(i|=4),M9(n,e,i,t)}var J1="_reactListening"+Math.random().toString(36).slice(2);function py(e){if(!e[J1]){e[J1]=!0,D8.forEach(function(n){n!=="selectionchange"&&(roe.has(n)||ME(n,!1,e),ME(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[J1]||(t[J1]=!0,ME("selectionchange",!1,t))}}function M9(e,t,n,i){switch(h9(t)){case 1:var r=vre;break;case 4:r=xre;break;default:r=bF}n=r.bind(null,t,n,e),r=void 0,!zR||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),i?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function FE(e,t,n,i,r){var o=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var s=i.stateNode.containerInfo;if(s===r||s.nodeType===8&&s.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;a=a.return}for(;s!==null;){if(a=Tf(s),a===null)return;if(l=a.tag,l===5||l===6){i=o=a;continue e}s=s.parentNode}}i=i.return}Q8(function(){var u=o,c=yF(n),d=[];e:{var h=T9.get(e);if(h!==void 0){var m=SF,g=e;switch(e){case"keypress":if(i_(n)===0)break e;case"keydown":case"keyup":m=$re;break;case"focusin":g="focus",m=CE;break;case"focusout":g="blur",m=CE;break;case"beforeblur":case"afterblur":m=CE;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=QL;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=wre;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Dre;break;case C9:case E9:case k9:m=Ere;break;case R9:m=jre;break;case"scroll":m=_re;break;case"wheel":m=Bre;break;case"copy":case"cut":case"paste":m=Rre;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=t5}var y=(t&4)!==0,x=!y&&e==="scroll",b=y?h!==null?h+"Capture":null:h;y=[];for(var w=u,S;w!==null;){S=w;var k=S.stateNode;if(S.tag===5&&k!==null&&(S=k,b!==null&&(k=ly(w,b),k!=null&&y.push(my(w,k,S)))),x)break;w=w.return}0<y.length&&(h=new m(h,g,null,n,c),d.push({event:h,listeners:y}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&n!==LR&&(g=n.relatedTarget||n.fromElement)&&(Tf(g)||g[Ol]))break e;if((m||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,m?(g=n.relatedTarget||n.toElement,m=u,g=g?Tf(g):null,g!==null&&(x=Pd(g),g!==x||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(y=QL,k="onMouseLeave",b="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(y=t5,k="onPointerLeave",b="onPointerEnter",w="pointer"),x=m==null?h:qh(m),S=g==null?h:qh(g),h=new y(k,w+"leave",m,n,c),h.target=x,h.relatedTarget=S,k=null,Tf(c)===u&&(y=new y(b,w+"enter",g,n,c),y.target=S,y.relatedTarget=x,k=y),x=k,m&&g)t:{for(y=m,b=g,w=0,S=y;S;S=vh(S))w++;for(S=0,k=b;k;k=vh(k))S++;for(;0<w-S;)y=vh(y),w--;for(;0<S-w;)b=vh(b),S--;for(;w--;){if(y===b||b!==null&&y===b.alternate)break t;y=vh(y),b=vh(b)}y=null}else y=null;m!==null&&d5(d,h,m,y,!1),g!==null&&x!==null&&d5(d,x,g,y,!0)}}e:{if(h=u?qh(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var R=Yre;else if(r5(h))if(x9)R=Jre;else{R=Xre;var M=Zre}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(R=Kre);if(R&&(R=R(e,u))){v9(d,R,n,c);break e}M&&M(e,h,u),e==="focusout"&&(M=h._wrapperState)&&M.controlled&&h.type==="number"&&NR(h,"number",h.value)}switch(M=u?qh(u):window,e){case"focusin":(r5(M)||M.contentEditable==="true")&&(Wh=M,GR=u,D0=null);break;case"focusout":D0=GR=Wh=null;break;case"mousedown":qR=!0;break;case"contextmenu":case"mouseup":case"dragend":qR=!1,u5(d,n,c);break;case"selectionchange":if(toe)break;case"keydown":case"keyup":u5(d,n,c)}var T;if(EF)e:{switch(e){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Uh?g9(e,n)&&(N="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(m9&&n.locale!=="ko"&&(Uh||N!=="onCompositionStart"?N==="onCompositionEnd"&&Uh&&(T=p9()):(Fu=c,wF="value"in Fu?Fu.value:Fu.textContent,Uh=!0)),M=G_(u,N),0<M.length&&(N=new e5(N,e,null,n,c),d.push({event:N,listeners:M}),T?N.data=T:(T=y9(n),T!==null&&(N.data=T)))),(T=Ure?Wre(e,n):Gre(e,n))&&(u=G_(u,"onBeforeInput"),0<u.length&&(c=new e5("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=T))}A9(d,t)})}function my(e,t,n){return{instance:e,listener:t,currentTarget:n}}function G_(e,t){for(var n=t+"Capture",i=[];e!==null;){var r=e,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=ly(e,n),o!=null&&i.unshift(my(e,o,r)),o=ly(e,t),o!=null&&i.push(my(e,o,r))),e=e.return}return i}function vh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function d5(e,t,n,i,r){for(var o=t._reactName,a=[];n!==null&&n!==i;){var s=n,l=s.alternate,u=s.stateNode;if(l!==null&&l===i)break;s.tag===5&&u!==null&&(s=u,r?(l=ly(n,o),l!=null&&a.unshift(my(n,l,s))):r||(l=ly(n,o),l!=null&&a.push(my(n,l,s)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var ooe=/\r\n?/g,aoe=/\u0000|\uFFFD/g;function h5(e){return(typeof e=="string"?e:""+e).replace(ooe,`
`).replace(aoe,"")}function Q1(e,t,n){if(t=h5(t),h5(e)!==t&&n)throw Error(_e(425))}function q_(){}var VR=null,YR=null;function ZR(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var XR=typeof setTimeout=="function"?setTimeout:void 0,soe=typeof clearTimeout=="function"?clearTimeout:void 0,p5=typeof Promise=="function"?Promise:void 0,loe=typeof queueMicrotask=="function"?queueMicrotask:typeof p5<"u"?function(e){return p5.resolve(null).then(e).catch(uoe)}:XR;function uoe(e){setTimeout(function(){throw e})}function PE(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){e.removeChild(r),fy(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);fy(t)}function Vu(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function m5(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ym=Math.random().toString(36).slice(2),ds="__reactFiber$"+ym,gy="__reactProps$"+ym,Ol="__reactContainer$"+ym,KR="__reactEvents$"+ym,coe="__reactListeners$"+ym,foe="__reactHandles$"+ym;function Tf(e){var t=e[ds];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ol]||n[ds]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=m5(e);e!==null;){if(n=e[ds])return n;e=m5(e)}return t}e=n,n=e.parentNode}return null}function pv(e){return e=e[ds]||e[Ol],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function qh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(_e(33))}function u2(e){return e[gy]||null}var JR=[],Vh=-1;function Ac(e){return{current:e}}function yn(e){0>Vh||(e.current=JR[Vh],JR[Vh]=null,Vh--)}function cn(e,t){Vh++,JR[Vh]=e.current,e.current=t}var ac={},er=Ac(ac),Hr=Ac(!1),Qf=ac;function Ep(e,t){var n=e.type.contextTypes;if(!n)return ac;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=t[o];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function Ur(e){return e=e.childContextTypes,e!=null}function V_(){yn(Hr),yn(er)}function g5(e,t,n){if(er.current!==ac)throw Error(_e(168));cn(er,t),cn(Hr,n)}function F9(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in t))throw Error(_e(108,Zie(e)||"Unknown",r));return An({},n,i)}function Y_(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ac,Qf=er.current,cn(er,e),cn(Hr,Hr.current),!0}function y5(e,t,n){var i=e.stateNode;if(!i)throw Error(_e(169));n?(e=F9(e,t,Qf),i.__reactInternalMemoizedMergedChildContext=e,yn(Hr),yn(er),cn(er,e)):yn(Hr),cn(Hr,n)}var ll=null,c2=!1,NE=!1;function P9(e){ll===null?ll=[e]:ll.push(e)}function doe(e){c2=!0,P9(e)}function Mc(){if(!NE&&ll!==null){NE=!0;var e=0,t=tn;try{var n=ll;for(tn=1;e<n.length;e++){var i=n[e];do i=i(!0);while(i!==null)}ll=null,c2=!1}catch(r){throw ll!==null&&(ll=ll.slice(e+1)),i9(vF,Mc),r}finally{tn=t,NE=!1}}return null}var Yh=[],Zh=0,Z_=null,X_=0,$o=[],Oo=0,ed=null,ml=1,gl="";function gf(e,t){Yh[Zh++]=X_,Yh[Zh++]=Z_,Z_=e,X_=t}function N9(e,t,n){$o[Oo++]=ml,$o[Oo++]=gl,$o[Oo++]=ed,ed=e;var i=ml;e=gl;var r=32-Fa(i)-1;i&=~(1<<r),n+=1;var o=32-Fa(t)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,ml=1<<32-Fa(t)+r|n<<r|i,gl=o+e}else ml=1<<o|n<<r|i,gl=e}function RF(e){e.return!==null&&(gf(e,1),N9(e,1,0))}function TF(e){for(;e===Z_;)Z_=Yh[--Zh],Yh[Zh]=null,X_=Yh[--Zh],Yh[Zh]=null;for(;e===ed;)ed=$o[--Oo],$o[Oo]=null,gl=$o[--Oo],$o[Oo]=null,ml=$o[--Oo],$o[Oo]=null}var mo=null,co=null,wn=!1,_a=null;function $9(e,t){var n=Lo(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function v5(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,mo=e,co=Vu(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,mo=e,co=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ed!==null?{id:ml,overflow:gl}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Lo(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,mo=e,co=null,!0):!1;default:return!1}}function QR(e){return(e.mode&1)!==0&&(e.flags&128)===0}function eT(e){if(wn){var t=co;if(t){var n=t;if(!v5(e,t)){if(QR(e))throw Error(_e(418));t=Vu(n.nextSibling);var i=mo;t&&v5(e,t)?$9(i,n):(e.flags=e.flags&-4097|2,wn=!1,mo=e)}}else{if(QR(e))throw Error(_e(418));e.flags=e.flags&-4097|2,wn=!1,mo=e}}}function x5(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;mo=e}function ex(e){if(e!==mo)return!1;if(!wn)return x5(e),wn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ZR(e.type,e.memoizedProps)),t&&(t=co)){if(QR(e))throw O9(),Error(_e(418));for(;t;)$9(e,t),t=Vu(t.nextSibling)}if(x5(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(_e(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){co=Vu(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}co=null}}else co=mo?Vu(e.stateNode.nextSibling):null;return!0}function O9(){for(var e=co;e;)e=Vu(e.nextSibling)}function kp(){co=mo=null,wn=!1}function AF(e){_a===null?_a=[e]:_a.push(e)}var hoe=Gl.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){t=An({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var K_=Ac(null),J_=null,Xh=null,MF=null;function FF(){MF=Xh=J_=null}function PF(e){var t=K_.current;yn(K_),e._currentValue=t}function tT(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function cp(e,t){J_=e,MF=Xh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(zr=!0),e.firstContext=null)}function qo(e){var t=e._currentValue;if(MF!==e)if(e={context:e,memoizedValue:t,next:null},Xh===null){if(J_===null)throw Error(_e(308));Xh=e,J_.dependencies={lanes:0,firstContext:e}}else Xh=Xh.next=e;return t}var Af=null;function NF(e){Af===null?Af=[e]:Af.push(e)}function I9(e,t,n,i){var r=t.interleaved;return r===null?(n.next=n,NF(t)):(n.next=r.next,r.next=n),t.interleaved=n,Il(e,i)}function Il(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var _u=!1;function $F(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function D9(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Cl(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Yu(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,jt&2){var r=i.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),i.pending=t,Il(e,n)}return r=i.interleaved,r===null?(t.next=t,NF(i)):(t.next=r.next,r.next=t),i.interleaved=t,Il(e,n)}function r_(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,xF(e,n)}}function _5(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?r=o=t:o=o.next=t}else r=o=t;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Q_(e,t,n,i){var r=e.updateQueue;_u=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,s=r.shared.pending;if(s!==null){r.shared.pending=null;var l=s,u=l.next;l.next=null,a===null?o=u:a.next=u,a=l;var c=e.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==a&&(s===null?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(o!==null){var d=r.baseState;a=0,c=u=l=null,s=o;do{var h=s.lane,m=s.eventTime;if((i&h)===h){c!==null&&(c=c.next={eventTime:m,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var g=e,y=s;switch(h=t,m=n,y.tag){case 1:if(g=y.payload,typeof g=="function"){d=g.call(m,d,h);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,h=typeof g=="function"?g.call(m,d,h):g,h==null)break e;d=An({},d,h);break e;case 2:_u=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,h=r.effects,h===null?r.effects=[s]:h.push(s))}else m={eventTime:m,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(u=c=m,l=d):c=c.next=m,a|=h;if(s=s.next,s===null){if(s=r.shared.pending,s===null)break;h=s,s=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(!0);if(c===null&&(l=d),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=c,t=r.shared.interleaved,t!==null){r=t;do a|=r.lane,r=r.next;while(r!==t)}else o===null&&(r.shared.lanes=0);nd|=a,e.lanes=a,e.memoizedState=d}}function b5(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(_e(191,r));r.call(i)}}}var L9=new I8.Component().refs;function nT(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:An({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var f2={isMounted:function(e){return(e=e._reactInternals)?Pd(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=mr(),r=Xu(e),o=Cl(i,r);o.payload=t,n!=null&&(o.callback=n),t=Yu(e,o,r),t!==null&&(Pa(t,e,r,i),r_(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=mr(),r=Xu(e),o=Cl(i,r);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Yu(e,o,r),t!==null&&(Pa(t,e,r,i),r_(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=mr(),i=Xu(e),r=Cl(n,i);r.tag=2,t!=null&&(r.callback=t),t=Yu(e,r,i),t!==null&&(Pa(t,e,i,n),r_(t,e,i))}};function w5(e,t,n,i,r,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,o,a):t.prototype&&t.prototype.isPureReactComponent?!hy(n,i)||!hy(r,o):!0}function j9(e,t,n){var i=!1,r=ac,o=t.contextType;return typeof o=="object"&&o!==null?o=qo(o):(r=Ur(t)?Qf:er.current,i=t.contextTypes,o=(i=i!=null)?Ep(e,r):ac),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=f2,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=o),t}function S5(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&f2.enqueueReplaceState(t,t.state,null)}function iT(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=L9,$F(e);var o=t.contextType;typeof o=="object"&&o!==null?r.context=qo(o):(o=Ur(t)?Qf:er.current,r.context=Ep(e,o)),r.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(nT(e,t,o,n),r.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(t=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),t!==r.state&&f2.enqueueReplaceState(r,r.state,null),Q_(e,n,r,i),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308)}function Sg(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(_e(309));var i=n.stateNode}if(!i)throw Error(_e(147,e));var r=i,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var s=r.refs;s===L9&&(s=r.refs={}),a===null?delete s[o]:s[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(_e(284));if(!n._owner)throw Error(_e(290,e))}return e}function tx(e,t){throw e=Object.prototype.toString.call(t),Error(_e(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function C5(e){var t=e._init;return t(e._payload)}function z9(e){function t(b,w){if(e){var S=b.deletions;S===null?(b.deletions=[w],b.flags|=16):S.push(w)}}function n(b,w){if(!e)return null;for(;w!==null;)t(b,w),w=w.sibling;return null}function i(b,w){for(b=new Map;w!==null;)w.key!==null?b.set(w.key,w):b.set(w.index,w),w=w.sibling;return b}function r(b,w){return b=Ku(b,w),b.index=0,b.sibling=null,b}function o(b,w,S){return b.index=S,e?(S=b.alternate,S!==null?(S=S.index,S<w?(b.flags|=2,w):S):(b.flags|=2,w)):(b.flags|=1048576,w)}function a(b){return e&&b.alternate===null&&(b.flags|=2),b}function s(b,w,S,k){return w===null||w.tag!==6?(w=zE(S,b.mode,k),w.return=b,w):(w=r(w,S),w.return=b,w)}function l(b,w,S,k){var R=S.type;return R===Hh?c(b,w,S.props.children,k,S.key):w!==null&&(w.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===xu&&C5(R)===w.type)?(k=r(w,S.props),k.ref=Sg(b,w,S),k.return=b,k):(k=c_(S.type,S.key,S.props,null,b.mode,k),k.ref=Sg(b,w,S),k.return=b,k)}function u(b,w,S,k){return w===null||w.tag!==4||w.stateNode.containerInfo!==S.containerInfo||w.stateNode.implementation!==S.implementation?(w=BE(S,b.mode,k),w.return=b,w):(w=r(w,S.children||[]),w.return=b,w)}function c(b,w,S,k,R){return w===null||w.tag!==7?(w=Lf(S,b.mode,k,R),w.return=b,w):(w=r(w,S),w.return=b,w)}function d(b,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return w=zE(""+w,b.mode,S),w.return=b,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case W1:return S=c_(w.type,w.key,w.props,null,b.mode,S),S.ref=Sg(b,null,w),S.return=b,S;case Bh:return w=BE(w,b.mode,S),w.return=b,w;case xu:var k=w._init;return d(b,k(w._payload),S)}if(r0(w)||vg(w))return w=Lf(w,b.mode,S,null),w.return=b,w;tx(b,w)}return null}function h(b,w,S,k){var R=w!==null?w.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return R!==null?null:s(b,w,""+S,k);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case W1:return S.key===R?l(b,w,S,k):null;case Bh:return S.key===R?u(b,w,S,k):null;case xu:return R=S._init,h(b,w,R(S._payload),k)}if(r0(S)||vg(S))return R!==null?null:c(b,w,S,k,null);tx(b,S)}return null}function m(b,w,S,k,R){if(typeof k=="string"&&k!==""||typeof k=="number")return b=b.get(S)||null,s(w,b,""+k,R);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case W1:return b=b.get(k.key===null?S:k.key)||null,l(w,b,k,R);case Bh:return b=b.get(k.key===null?S:k.key)||null,u(w,b,k,R);case xu:var M=k._init;return m(b,w,S,M(k._payload),R)}if(r0(k)||vg(k))return b=b.get(S)||null,c(w,b,k,R,null);tx(w,k)}return null}function g(b,w,S,k){for(var R=null,M=null,T=w,N=w=0,D=null;T!==null&&N<S.length;N++){T.index>N?(D=T,T=null):D=T.sibling;var I=h(b,T,S[N],k);if(I===null){T===null&&(T=D);break}e&&T&&I.alternate===null&&t(b,T),w=o(I,w,N),M===null?R=I:M.sibling=I,M=I,T=D}if(N===S.length)return n(b,T),wn&&gf(b,N),R;if(T===null){for(;N<S.length;N++)T=d(b,S[N],k),T!==null&&(w=o(T,w,N),M===null?R=T:M.sibling=T,M=T);return wn&&gf(b,N),R}for(T=i(b,T);N<S.length;N++)D=m(T,b,N,S[N],k),D!==null&&(e&&D.alternate!==null&&T.delete(D.key===null?N:D.key),w=o(D,w,N),M===null?R=D:M.sibling=D,M=D);return e&&T.forEach(function(z){return t(b,z)}),wn&&gf(b,N),R}function y(b,w,S,k){var R=vg(S);if(typeof R!="function")throw Error(_e(150));if(S=R.call(S),S==null)throw Error(_e(151));for(var M=R=null,T=w,N=w=0,D=null,I=S.next();T!==null&&!I.done;N++,I=S.next()){T.index>N?(D=T,T=null):D=T.sibling;var z=h(b,T,I.value,k);if(z===null){T===null&&(T=D);break}e&&T&&z.alternate===null&&t(b,T),w=o(z,w,N),M===null?R=z:M.sibling=z,M=z,T=D}if(I.done)return n(b,T),wn&&gf(b,N),R;if(T===null){for(;!I.done;N++,I=S.next())I=d(b,I.value,k),I!==null&&(w=o(I,w,N),M===null?R=I:M.sibling=I,M=I);return wn&&gf(b,N),R}for(T=i(b,T);!I.done;N++,I=S.next())I=m(T,b,N,I.value,k),I!==null&&(e&&I.alternate!==null&&T.delete(I.key===null?N:I.key),w=o(I,w,N),M===null?R=I:M.sibling=I,M=I);return e&&T.forEach(function(X){return t(b,X)}),wn&&gf(b,N),R}function x(b,w,S,k){if(typeof S=="object"&&S!==null&&S.type===Hh&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case W1:e:{for(var R=S.key,M=w;M!==null;){if(M.key===R){if(R=S.type,R===Hh){if(M.tag===7){n(b,M.sibling),w=r(M,S.props.children),w.return=b,b=w;break e}}else if(M.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===xu&&C5(R)===M.type){n(b,M.sibling),w=r(M,S.props),w.ref=Sg(b,M,S),w.return=b,b=w;break e}n(b,M);break}else t(b,M);M=M.sibling}S.type===Hh?(w=Lf(S.props.children,b.mode,k,S.key),w.return=b,b=w):(k=c_(S.type,S.key,S.props,null,b.mode,k),k.ref=Sg(b,w,S),k.return=b,b=k)}return a(b);case Bh:e:{for(M=S.key;w!==null;){if(w.key===M)if(w.tag===4&&w.stateNode.containerInfo===S.containerInfo&&w.stateNode.implementation===S.implementation){n(b,w.sibling),w=r(w,S.children||[]),w.return=b,b=w;break e}else{n(b,w);break}else t(b,w);w=w.sibling}w=BE(S,b.mode,k),w.return=b,b=w}return a(b);case xu:return M=S._init,x(b,w,M(S._payload),k)}if(r0(S))return g(b,w,S,k);if(vg(S))return y(b,w,S,k);tx(b,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,w!==null&&w.tag===6?(n(b,w.sibling),w=r(w,S),w.return=b,b=w):(n(b,w),w=zE(S,b.mode,k),w.return=b,b=w),a(b)):n(b,w)}return x}var Rp=z9(!0),B9=z9(!1),mv={},vs=Ac(mv),yy=Ac(mv),vy=Ac(mv);function Mf(e){if(e===mv)throw Error(_e(174));return e}function OF(e,t){switch(cn(vy,t),cn(yy,e),cn(vs,mv),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:OR(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=OR(t,e)}yn(vs),cn(vs,t)}function Tp(){yn(vs),yn(yy),yn(vy)}function H9(e){Mf(vy.current);var t=Mf(vs.current),n=OR(t,e.type);t!==n&&(cn(yy,e),cn(vs,n))}function IF(e){yy.current===e&&(yn(vs),yn(yy))}var Rn=Ac(0);function eb(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var $E=[];function DF(){for(var e=0;e<$E.length;e++)$E[e]._workInProgressVersionPrimary=null;$E.length=0}var o_=Gl.ReactCurrentDispatcher,OE=Gl.ReactCurrentBatchConfig,td=0,Tn=null,Xn=null,ci=null,tb=!1,L0=!1,xy=0,poe=0;function Li(){throw Error(_e(321))}function LF(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ia(e[n],t[n]))return!1;return!0}function jF(e,t,n,i,r,o){if(td=o,Tn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,o_.current=e===null||e.memoizedState===null?voe:xoe,e=n(i,r),L0){o=0;do{if(L0=!1,xy=0,25<=o)throw Error(_e(301));o+=1,ci=Xn=null,t.updateQueue=null,o_.current=_oe,e=n(i,r)}while(L0)}if(o_.current=nb,t=Xn!==null&&Xn.next!==null,td=0,ci=Xn=Tn=null,tb=!1,t)throw Error(_e(300));return e}function zF(){var e=xy!==0;return xy=0,e}function ls(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ci===null?Tn.memoizedState=ci=e:ci=ci.next=e,ci}function Vo(){if(Xn===null){var e=Tn.alternate;e=e!==null?e.memoizedState:null}else e=Xn.next;var t=ci===null?Tn.memoizedState:ci.next;if(t!==null)ci=t,Xn=e;else{if(e===null)throw Error(_e(310));Xn=e,e={memoizedState:Xn.memoizedState,baseState:Xn.baseState,baseQueue:Xn.baseQueue,queue:Xn.queue,next:null},ci===null?Tn.memoizedState=ci=e:ci=ci.next=e}return ci}function _y(e,t){return typeof t=="function"?t(e):t}function IE(e){var t=Vo(),n=t.queue;if(n===null)throw Error(_e(311));n.lastRenderedReducer=e;var i=Xn,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var s=a=null,l=null,u=o;do{var c=u.lane;if((td&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=d,a=i):l=l.next=d,Tn.lanes|=c,nd|=c}u=u.next}while(u!==null&&u!==o);l===null?a=i:l.next=s,Ia(i,t.memoizedState)||(zr=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=l,n.lastRenderedState=i}if(e=n.interleaved,e!==null){r=e;do o=r.lane,Tn.lanes|=o,nd|=o,r=r.next;while(r!==e)}else r===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function DE(e){var t=Vo(),n=t.queue;if(n===null)throw Error(_e(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,o=t.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do o=e(o,a.action),a=a.next;while(a!==r);Ia(o,t.memoizedState)||(zr=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,i]}function U9(){}function W9(e,t){var n=Tn,i=Vo(),r=t(),o=!Ia(i.memoizedState,r);if(o&&(i.memoizedState=r,zr=!0),i=i.queue,BF(V9.bind(null,n,i,e),[e]),i.getSnapshot!==t||o||ci!==null&&ci.memoizedState.tag&1){if(n.flags|=2048,by(9,q9.bind(null,n,i,r,t),void 0,null),vi===null)throw Error(_e(349));td&30||G9(n,t,r)}return r}function G9(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Tn.updateQueue,t===null?(t={lastEffect:null,stores:null},Tn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function q9(e,t,n,i){t.value=n,t.getSnapshot=i,Y9(t)&&Z9(e)}function V9(e,t,n){return n(function(){Y9(t)&&Z9(e)})}function Y9(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ia(e,n)}catch{return!0}}function Z9(e){var t=Il(e,1);t!==null&&Pa(t,e,1,-1)}function E5(e){var t=ls();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_y,lastRenderedState:e},t.queue=e,e=e.dispatch=yoe.bind(null,Tn,e),[t.memoizedState,e]}function by(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},t=Tn.updateQueue,t===null?(t={lastEffect:null,stores:null},Tn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e)),e}function X9(){return Vo().memoizedState}function a_(e,t,n,i){var r=ls();Tn.flags|=e,r.memoizedState=by(1|t,n,void 0,i===void 0?null:i)}function d2(e,t,n,i){var r=Vo();i=i===void 0?null:i;var o=void 0;if(Xn!==null){var a=Xn.memoizedState;if(o=a.destroy,i!==null&&LF(i,a.deps)){r.memoizedState=by(t,n,o,i);return}}Tn.flags|=e,r.memoizedState=by(1|t,n,o,i)}function k5(e,t){return a_(8390656,8,e,t)}function BF(e,t){return d2(2048,8,e,t)}function K9(e,t){return d2(4,2,e,t)}function J9(e,t){return d2(4,4,e,t)}function Q9(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function e7(e,t,n){return n=n!=null?n.concat([e]):null,d2(4,4,Q9.bind(null,t,e),n)}function HF(){}function t7(e,t){var n=Vo();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&LF(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function n7(e,t){var n=Vo();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&LF(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function i7(e,t,n){return td&21?(Ia(n,t)||(n=a9(),Tn.lanes|=n,nd|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,zr=!0),e.memoizedState=n)}function moe(e,t){var n=tn;tn=n!==0&&4>n?n:4,e(!0);var i=OE.transition;OE.transition={};try{e(!1),t()}finally{tn=n,OE.transition=i}}function r7(){return Vo().memoizedState}function goe(e,t,n){var i=Xu(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},o7(e))a7(t,n);else if(n=I9(e,t,n,i),n!==null){var r=mr();Pa(n,e,i,r),s7(n,t,i)}}function yoe(e,t,n){var i=Xu(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(o7(e))a7(t,r);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,s=o(a,n);if(r.hasEagerState=!0,r.eagerState=s,Ia(s,a)){var l=t.interleaved;l===null?(r.next=r,NF(t)):(r.next=l.next,l.next=r),t.interleaved=r;return}}catch{}finally{}n=I9(e,t,r,i),n!==null&&(r=mr(),Pa(n,e,i,r),s7(n,t,i))}}function o7(e){var t=e.alternate;return e===Tn||t!==null&&t===Tn}function a7(e,t){L0=tb=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function s7(e,t,n){if(n&4194240){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,xF(e,n)}}var nb={readContext:qo,useCallback:Li,useContext:Li,useEffect:Li,useImperativeHandle:Li,useInsertionEffect:Li,useLayoutEffect:Li,useMemo:Li,useReducer:Li,useRef:Li,useState:Li,useDebugValue:Li,useDeferredValue:Li,useTransition:Li,useMutableSource:Li,useSyncExternalStore:Li,useId:Li,unstable_isNewReconciler:!1},voe={readContext:qo,useCallback:function(e,t){return ls().memoizedState=[e,t===void 0?null:t],e},useContext:qo,useEffect:k5,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,a_(4194308,4,Q9.bind(null,t,e),n)},useLayoutEffect:function(e,t){return a_(4194308,4,e,t)},useInsertionEffect:function(e,t){return a_(4,2,e,t)},useMemo:function(e,t){var n=ls();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=ls();return t=n!==void 0?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=goe.bind(null,Tn,e),[i.memoizedState,e]},useRef:function(e){var t=ls();return e={current:e},t.memoizedState=e},useState:E5,useDebugValue:HF,useDeferredValue:function(e){return ls().memoizedState=e},useTransition:function(){var e=E5(!1),t=e[0];return e=moe.bind(null,e[1]),ls().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=Tn,r=ls();if(wn){if(n===void 0)throw Error(_e(407));n=n()}else{if(n=t(),vi===null)throw Error(_e(349));td&30||G9(i,t,n)}r.memoizedState=n;var o={value:n,getSnapshot:t};return r.queue=o,k5(V9.bind(null,i,o,e),[e]),i.flags|=2048,by(9,q9.bind(null,i,o,n,t),void 0,null),n},useId:function(){var e=ls(),t=vi.identifierPrefix;if(wn){var n=gl,i=ml;n=(i&~(1<<32-Fa(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=xy++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=poe++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},xoe={readContext:qo,useCallback:t7,useContext:qo,useEffect:BF,useImperativeHandle:e7,useInsertionEffect:K9,useLayoutEffect:J9,useMemo:n7,useReducer:IE,useRef:X9,useState:function(){return IE(_y)},useDebugValue:HF,useDeferredValue:function(e){var t=Vo();return i7(t,Xn.memoizedState,e)},useTransition:function(){var e=IE(_y)[0],t=Vo().memoizedState;return[e,t]},useMutableSource:U9,useSyncExternalStore:W9,useId:r7,unstable_isNewReconciler:!1},_oe={readContext:qo,useCallback:t7,useContext:qo,useEffect:BF,useImperativeHandle:e7,useInsertionEffect:K9,useLayoutEffect:J9,useMemo:n7,useReducer:DE,useRef:X9,useState:function(){return DE(_y)},useDebugValue:HF,useDeferredValue:function(e){var t=Vo();return Xn===null?t.memoizedState=e:i7(t,Xn.memoizedState,e)},useTransition:function(){var e=DE(_y)[0],t=Vo().memoizedState;return[e,t]},useMutableSource:U9,useSyncExternalStore:W9,useId:r7,unstable_isNewReconciler:!1};function Ap(e,t){try{var n="",i=t;do n+=Yie(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:r,digest:null}}function LE(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function rT(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var boe=typeof WeakMap=="function"?WeakMap:Map;function l7(e,t,n){n=Cl(-1,n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){rb||(rb=!0,pT=i),rT(e,t)},n}function u7(e,t,n){n=Cl(-1,n),n.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){rT(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){rT(e,t),typeof i!="function"&&(Zu===null?Zu=new Set([this]):Zu.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function R5(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new boe;var r=new Set;i.set(t,r)}else r=i.get(t),r===void 0&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Ooe.bind(null,e,t,n),t.then(e,e))}function T5(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function A5(e,t,n,i,r){return e.mode&1?(e.flags|=65536,e.lanes=r,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Cl(-1,1),t.tag=2,Yu(n,t,1))),n.lanes|=1),e)}var woe=Gl.ReactCurrentOwner,zr=!1;function lr(e,t,n,i){t.child=e===null?B9(t,null,n,i):Rp(t,e.child,n,i)}function M5(e,t,n,i,r){n=n.render;var o=t.ref;return cp(t,r),i=jF(e,t,n,i,o,r),n=zF(),e!==null&&!zr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Dl(e,t,r)):(wn&&n&&RF(t),t.flags|=1,lr(e,t,i,r),t.child)}function F5(e,t,n,i,r){if(e===null){var o=n.type;return typeof o=="function"&&!XF(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,c7(e,t,o,i,r)):(e=c_(n.type,null,i,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&r)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:hy,n(a,i)&&e.ref===t.ref)return Dl(e,t,r)}return t.flags|=1,e=Ku(o,i),e.ref=t.ref,e.return=t,t.child=e}function c7(e,t,n,i,r){if(e!==null){var o=e.memoizedProps;if(hy(o,i)&&e.ref===t.ref)if(zr=!1,t.pendingProps=i=o,(e.lanes&r)!==0)e.flags&131072&&(zr=!0);else return t.lanes=e.lanes,Dl(e,t,r)}return oT(e,t,n,i,r)}function f7(e,t,n){var i=t.pendingProps,r=i.children,o=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},cn(Jh,oo),oo|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,cn(Jh,oo),oo|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,cn(Jh,oo),oo|=i}else o!==null?(i=o.baseLanes|n,t.memoizedState=null):i=n,cn(Jh,oo),oo|=i;return lr(e,t,r,n),t.child}function d7(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function oT(e,t,n,i,r){var o=Ur(n)?Qf:er.current;return o=Ep(t,o),cp(t,r),n=jF(e,t,n,i,o,r),i=zF(),e!==null&&!zr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Dl(e,t,r)):(wn&&i&&RF(t),t.flags|=1,lr(e,t,n,r),t.child)}function P5(e,t,n,i,r){if(Ur(n)){var o=!0;Y_(t)}else o=!1;if(cp(t,r),t.stateNode===null)s_(e,t),j9(t,n,i),iT(t,n,i,r),i=!0;else if(e===null){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=qo(u):(u=Ur(n)?Qf:er.current,u=Ep(t,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==i||l!==u)&&S5(t,a,i,u),_u=!1;var h=t.memoizedState;a.state=h,Q_(t,i,a,r),l=t.memoizedState,s!==i||h!==l||Hr.current||_u?(typeof c=="function"&&(nT(t,n,c,i),l=t.memoizedState),(s=_u||w5(t,n,s,i,h,l,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),a.props=i,a.state=l,a.context=u,i=s):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,D9(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:ma(t.type,s),a.props=u,d=t.pendingProps,h=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=qo(l):(l=Ur(n)?Qf:er.current,l=Ep(t,l));var m=n.getDerivedStateFromProps;(c=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==d||h!==l)&&S5(t,a,i,l),_u=!1,h=t.memoizedState,a.state=h,Q_(t,i,a,r);var g=t.memoizedState;s!==d||h!==g||Hr.current||_u?(typeof m=="function"&&(nT(t,n,m,i),g=t.memoizedState),(u=_u||w5(t,n,u,i,h,g,l)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,g,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,g,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=g),a.props=i,a.state=g,a.context=l,i=u):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return aT(e,t,n,i,o,r)}function aT(e,t,n,i,r,o){d7(e,t);var a=(t.flags&128)!==0;if(!i&&!a)return r&&y5(t,n,!1),Dl(e,t,o);i=t.stateNode,woe.current=t;var s=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&a?(t.child=Rp(t,e.child,null,o),t.child=Rp(t,null,s,o)):lr(e,t,s,o),t.memoizedState=i.state,r&&y5(t,n,!0),t.child}function h7(e){var t=e.stateNode;t.pendingContext?g5(e,t.pendingContext,t.pendingContext!==t.context):t.context&&g5(e,t.context,!1),OF(e,t.containerInfo)}function N5(e,t,n,i,r){return kp(),AF(r),t.flags|=256,lr(e,t,n,i),t.child}var sT={dehydrated:null,treeContext:null,retryLane:0};function lT(e){return{baseLanes:e,cachePool:null,transitions:null}}function p7(e,t,n){var i=t.pendingProps,r=Rn.current,o=!1,a=(t.flags&128)!==0,s;if((s=a)||(s=e!==null&&e.memoizedState===null?!1:(r&2)!==0),s?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(r|=1),cn(Rn,r&1),e===null)return eT(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=i.children,e=i.fallback,o?(i=t.mode,o=t.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=m2(a,i,0,null),e=Lf(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=lT(n),t.memoizedState=sT,e):UF(t,a));if(r=e.memoizedState,r!==null&&(s=r.dehydrated,s!==null))return Soe(e,t,a,i,s,r,n);if(o){o=i.fallback,a=t.mode,r=e.child,s=r.sibling;var l={mode:"hidden",children:i.children};return!(a&1)&&t.child!==r?(i=t.child,i.childLanes=0,i.pendingProps=l,t.deletions=null):(i=Ku(r,l),i.subtreeFlags=r.subtreeFlags&14680064),s!==null?o=Ku(s,o):(o=Lf(o,a,n,null),o.flags|=2),o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,a=e.child.memoizedState,a=a===null?lT(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=sT,i}return o=e.child,e=o.sibling,i=Ku(o,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=n),i.return=t,i.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function UF(e,t){return t=m2({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function nx(e,t,n,i){return i!==null&&AF(i),Rp(t,e.child,null,n),e=UF(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Soe(e,t,n,i,r,o,a){if(n)return t.flags&256?(t.flags&=-257,i=LE(Error(_e(422))),nx(e,t,a,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=i.fallback,r=t.mode,i=m2({mode:"visible",children:i.children},r,0,null),o=Lf(o,r,a,null),o.flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,t.mode&1&&Rp(t,e.child,null,a),t.child.memoizedState=lT(a),t.memoizedState=sT,o);if(!(t.mode&1))return nx(e,t,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var s=i.dgst;return i=s,o=Error(_e(419)),i=LE(o,i,void 0),nx(e,t,a,i)}if(s=(a&e.childLanes)!==0,zr||s){if(i=vi,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,Il(e,r),Pa(i,e,r,-1))}return ZF(),i=LE(Error(_e(421))),nx(e,t,a,i)}return r.data==="$?"?(t.flags|=128,t.child=e.child,t=Ioe.bind(null,e),r._reactRetry=t,null):(e=o.treeContext,co=Vu(r.nextSibling),mo=t,wn=!0,_a=null,e!==null&&($o[Oo++]=ml,$o[Oo++]=gl,$o[Oo++]=ed,ml=e.id,gl=e.overflow,ed=t),t=UF(t,i.children),t.flags|=4096,t)}function $5(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),tT(e.return,t,n)}function jE(e,t,n,i,r){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function m7(e,t,n){var i=t.pendingProps,r=i.revealOrder,o=i.tail;if(lr(e,t,i.children,n),i=Rn.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&$5(e,n,t);else if(e.tag===19)$5(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(cn(Rn,i),!(t.mode&1))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&eb(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),jE(t,!1,r,n,o);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&eb(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}jE(t,!0,n,null,o);break;case"together":jE(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function s_(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Dl(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),nd|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(_e(153));if(t.child!==null){for(e=t.child,n=Ku(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ku(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Coe(e,t,n){switch(t.tag){case 3:h7(t),kp();break;case 5:H9(t);break;case 1:Ur(t.type)&&Y_(t);break;case 4:OF(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;cn(K_,i._currentValue),i._currentValue=r;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(cn(Rn,Rn.current&1),t.flags|=128,null):n&t.child.childLanes?p7(e,t,n):(cn(Rn,Rn.current&1),e=Dl(e,t,n),e!==null?e.sibling:null);cn(Rn,Rn.current&1);break;case 19:if(i=(n&t.childLanes)!==0,e.flags&128){if(i)return m7(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),cn(Rn,Rn.current),i)break;return null;case 22:case 23:return t.lanes=0,f7(e,t,n)}return Dl(e,t,n)}var g7,uT,y7,v7;g7=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};uT=function(){};y7=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,Mf(vs.current);var o=null;switch(n){case"input":r=FR(e,r),i=FR(e,i),o=[];break;case"select":r=An({},r,{value:void 0}),i=An({},i,{value:void 0}),o=[];break;case"textarea":r=$R(e,r),i=$R(e,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=q_)}IR(n,i);var a;n=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var s=r[u];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ay.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in i){var l=i[u];if(s=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(a in s)!s.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&s[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(o||(o=[]),o.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ay.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&pn("scroll",e),o||s===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};v7=function(e,t,n,i){n!==i&&(t.flags|=4)};function Cg(e,t){if(!wn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function ji(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Eoe(e,t,n){var i=t.pendingProps;switch(TF(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ji(t),null;case 1:return Ur(t.type)&&V_(),ji(t),null;case 3:return i=t.stateNode,Tp(),yn(Hr),yn(er),DF(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(ex(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,_a!==null&&(yT(_a),_a=null))),uT(e,t),ji(t),null;case 5:IF(t);var r=Mf(vy.current);if(n=t.type,e!==null&&t.stateNode!=null)y7(e,t,n,i,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(_e(166));return ji(t),null}if(e=Mf(vs.current),ex(t)){i=t.stateNode,n=t.type;var o=t.memoizedProps;switch(i[ds]=t,i[gy]=o,e=(t.mode&1)!==0,n){case"dialog":pn("cancel",i),pn("close",i);break;case"iframe":case"object":case"embed":pn("load",i);break;case"video":case"audio":for(r=0;r<a0.length;r++)pn(a0[r],i);break;case"source":pn("error",i);break;case"img":case"image":case"link":pn("error",i),pn("load",i);break;case"details":pn("toggle",i);break;case"input":UL(i,o),pn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},pn("invalid",i);break;case"textarea":GL(i,o),pn("invalid",i)}IR(n,o),r=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?i.textContent!==s&&(o.suppressHydrationWarning!==!0&&Q1(i.textContent,s,e),r=["children",s]):typeof s=="number"&&i.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&Q1(i.textContent,s,e),r=["children",""+s]):ay.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&pn("scroll",i)}switch(n){case"input":G1(i),WL(i,o,!0);break;case"textarea":G1(i),qL(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=q_)}i=r,t.updateQueue=i,i!==null&&(t.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=G8(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=a.createElement(n,{is:i.is}):(e=a.createElement(n),n==="select"&&(a=e,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):e=a.createElementNS(e,n),e[ds]=t,e[gy]=i,g7(e,t,!1,!1),t.stateNode=e;e:{switch(a=DR(n,i),n){case"dialog":pn("cancel",e),pn("close",e),r=i;break;case"iframe":case"object":case"embed":pn("load",e),r=i;break;case"video":case"audio":for(r=0;r<a0.length;r++)pn(a0[r],e);r=i;break;case"source":pn("error",e),r=i;break;case"img":case"image":case"link":pn("error",e),pn("load",e),r=i;break;case"details":pn("toggle",e),r=i;break;case"input":UL(e,i),r=FR(e,i),pn("invalid",e);break;case"option":r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=An({},i,{value:void 0}),pn("invalid",e);break;case"textarea":GL(e,i),r=$R(e,i),pn("invalid",e);break;default:r=i}IR(n,r),s=r;for(o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="style"?Y8(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&q8(e,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&sy(e,l):typeof l=="number"&&sy(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(ay.hasOwnProperty(o)?l!=null&&o==="onScroll"&&pn("scroll",e):l!=null&&hF(e,o,l,a))}switch(n){case"input":G1(e),WL(e,i,!1);break;case"textarea":G1(e),qL(e);break;case"option":i.value!=null&&e.setAttribute("value",""+oc(i.value));break;case"select":e.multiple=!!i.multiple,o=i.value,o!=null?ap(e,!!i.multiple,o,!1):i.defaultValue!=null&&ap(e,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(e.onclick=q_)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ji(t),null;case 6:if(e&&t.stateNode!=null)v7(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(_e(166));if(n=Mf(vy.current),Mf(vs.current),ex(t)){if(i=t.stateNode,n=t.memoizedProps,i[ds]=t,(o=i.nodeValue!==n)&&(e=mo,e!==null))switch(e.tag){case 3:Q1(i.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Q1(i.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[ds]=t,t.stateNode=i}return ji(t),null;case 13:if(yn(Rn),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(wn&&co!==null&&t.mode&1&&!(t.flags&128))O9(),kp(),t.flags|=98560,o=!1;else if(o=ex(t),i!==null&&i.dehydrated!==null){if(e===null){if(!o)throw Error(_e(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(_e(317));o[ds]=t}else kp(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ji(t),o=!1}else _a!==null&&(yT(_a),_a=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||Rn.current&1?Qn===0&&(Qn=3):ZF())),t.updateQueue!==null&&(t.flags|=4),ji(t),null);case 4:return Tp(),uT(e,t),e===null&&py(t.stateNode.containerInfo),ji(t),null;case 10:return PF(t.type._context),ji(t),null;case 17:return Ur(t.type)&&V_(),ji(t),null;case 19:if(yn(Rn),o=t.memoizedState,o===null)return ji(t),null;if(i=(t.flags&128)!==0,a=o.rendering,a===null)if(i)Cg(o,!1);else{if(Qn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=eb(e),a!==null){for(t.flags|=128,Cg(o,!1),i=a.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;n!==null;)o=n,e=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return cn(Rn,Rn.current&1|2),t.child}e=e.sibling}o.tail!==null&&jn()>Mp&&(t.flags|=128,i=!0,Cg(o,!1),t.lanes=4194304)}else{if(!i)if(e=eb(a),e!==null){if(t.flags|=128,i=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Cg(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!wn)return ji(t),null}else 2*jn()-o.renderingStartTime>Mp&&n!==1073741824&&(t.flags|=128,i=!0,Cg(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=jn(),t.sibling=null,n=Rn.current,cn(Rn,i?n&1|2:n&1),t):(ji(t),null);case 22:case 23:return YF(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?oo&1073741824&&(ji(t),t.subtreeFlags&6&&(t.flags|=8192)):ji(t),null;case 24:return null;case 25:return null}throw Error(_e(156,t.tag))}function koe(e,t){switch(TF(t),t.tag){case 1:return Ur(t.type)&&V_(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Tp(),yn(Hr),yn(er),DF(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return IF(t),null;case 13:if(yn(Rn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(_e(340));kp()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return yn(Rn),null;case 4:return Tp(),null;case 10:return PF(t.type._context),null;case 22:case 23:return YF(),null;case 24:return null;default:return null}}var ix=!1,Gi=!1,Roe=typeof WeakSet=="function"?WeakSet:Set,ze=null;function Kh(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Nn(e,t,i)}else n.current=null}function cT(e,t,n){try{n()}catch(i){Nn(e,t,i)}}var O5=!1;function Toe(e,t){if(VR=U_,e=w9(),kF(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,s=-1,l=-1,u=0,c=0,d=e,h=null;t:for(;;){for(var m;d!==n||r!==0&&d.nodeType!==3||(s=a+r),d!==o||i!==0&&d.nodeType!==3||(l=a+i),d.nodeType===3&&(a+=d.nodeValue.length),(m=d.firstChild)!==null;)h=d,d=m;for(;;){if(d===e)break t;if(h===n&&++u===r&&(s=a),h===o&&++c===i&&(l=a),(m=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=m}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(YR={focusedElem:e,selectionRange:n},U_=!1,ze=t;ze!==null;)if(t=ze,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ze=e;else for(;ze!==null;){t=ze;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,x=g.memoizedState,b=t.stateNode,w=b.getSnapshotBeforeUpdate(t.elementType===t.type?y:ma(t.type,y),x);b.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var S=t.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(_e(163))}}catch(k){Nn(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,ze=e;break}ze=t.return}return g=O5,O5=!1,g}function j0(e,t,n){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&e)===e){var o=r.destroy;r.destroy=void 0,o!==void 0&&cT(t,n,o)}r=r.next}while(r!==i)}}function h2(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function fT(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function x7(e){var t=e.alternate;t!==null&&(e.alternate=null,x7(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ds],delete t[gy],delete t[KR],delete t[coe],delete t[foe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function _7(e){return e.tag===5||e.tag===3||e.tag===4}function I5(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||_7(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function dT(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=q_));else if(i!==4&&(e=e.child,e!==null))for(dT(e,t,n),e=e.sibling;e!==null;)dT(e,t,n),e=e.sibling}function hT(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(hT(e,t,n),e=e.sibling;e!==null;)hT(e,t,n),e=e.sibling}var Ei=null,ya=!1;function du(e,t,n){for(n=n.child;n!==null;)b7(e,t,n),n=n.sibling}function b7(e,t,n){if(ys&&typeof ys.onCommitFiberUnmount=="function")try{ys.onCommitFiberUnmount(o2,n)}catch{}switch(n.tag){case 5:Gi||Kh(n,t);case 6:var i=Ei,r=ya;Ei=null,du(e,t,n),Ei=i,ya=r,Ei!==null&&(ya?(e=Ei,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ei.removeChild(n.stateNode));break;case 18:Ei!==null&&(ya?(e=Ei,n=n.stateNode,e.nodeType===8?PE(e.parentNode,n):e.nodeType===1&&PE(e,n),fy(e)):PE(Ei,n.stateNode));break;case 4:i=Ei,r=ya,Ei=n.stateNode.containerInfo,ya=!0,du(e,t,n),Ei=i,ya=r;break;case 0:case 11:case 14:case 15:if(!Gi&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&cT(n,t,a),r=r.next}while(r!==i)}du(e,t,n);break;case 1:if(!Gi&&(Kh(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(s){Nn(n,t,s)}du(e,t,n);break;case 21:du(e,t,n);break;case 22:n.mode&1?(Gi=(i=Gi)||n.memoizedState!==null,du(e,t,n),Gi=i):du(e,t,n);break;default:du(e,t,n)}}function D5(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Roe),t.forEach(function(i){var r=Doe.bind(null,e,i);n.has(i)||(n.add(i),i.then(r,r))})}}function ca(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=e,a=t,s=a;e:for(;s!==null;){switch(s.tag){case 5:Ei=s.stateNode,ya=!1;break e;case 3:Ei=s.stateNode.containerInfo,ya=!0;break e;case 4:Ei=s.stateNode.containerInfo,ya=!0;break e}s=s.return}if(Ei===null)throw Error(_e(160));b7(o,a,r),Ei=null,ya=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){Nn(r,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)w7(t,e),t=t.sibling}function w7(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ca(t,e),is(e),i&4){try{j0(3,e,e.return),h2(3,e)}catch(y){Nn(e,e.return,y)}try{j0(5,e,e.return)}catch(y){Nn(e,e.return,y)}}break;case 1:ca(t,e),is(e),i&512&&n!==null&&Kh(n,n.return);break;case 5:if(ca(t,e),is(e),i&512&&n!==null&&Kh(n,n.return),e.flags&32){var r=e.stateNode;try{sy(r,"")}catch(y){Nn(e,e.return,y)}}if(i&4&&(r=e.stateNode,r!=null)){var o=e.memoizedProps,a=n!==null?n.memoizedProps:o,s=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&U8(r,o),DR(s,a);var u=DR(s,o);for(a=0;a<l.length;a+=2){var c=l[a],d=l[a+1];c==="style"?Y8(r,d):c==="dangerouslySetInnerHTML"?q8(r,d):c==="children"?sy(r,d):hF(r,c,d,u)}switch(s){case"input":PR(r,o);break;case"textarea":W8(r,o);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var m=o.value;m!=null?ap(r,!!o.multiple,m,!1):h!==!!o.multiple&&(o.defaultValue!=null?ap(r,!!o.multiple,o.defaultValue,!0):ap(r,!!o.multiple,o.multiple?[]:"",!1))}r[gy]=o}catch(y){Nn(e,e.return,y)}}break;case 6:if(ca(t,e),is(e),i&4){if(e.stateNode===null)throw Error(_e(162));r=e.stateNode,o=e.memoizedProps;try{r.nodeValue=o}catch(y){Nn(e,e.return,y)}}break;case 3:if(ca(t,e),is(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{fy(t.containerInfo)}catch(y){Nn(e,e.return,y)}break;case 4:ca(t,e),is(e);break;case 13:ca(t,e),is(e),r=e.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(qF=jn())),i&4&&D5(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(Gi=(u=Gi)||c,ca(t,e),Gi=u):ca(t,e),is(e),i&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(ze=e,c=e.child;c!==null;){for(d=ze=c;ze!==null;){switch(h=ze,m=h.child,h.tag){case 0:case 11:case 14:case 15:j0(4,h,h.return);break;case 1:Kh(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){i=h,n=h.return;try{t=i,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(y){Nn(i,n,y)}}break;case 5:Kh(h,h.return);break;case 22:if(h.memoizedState!==null){j5(d);continue}}m!==null?(m.return=h,ze=m):j5(d)}c=c.sibling}e:for(c=null,d=e;;){if(d.tag===5){if(c===null){c=d;try{r=d.stateNode,u?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=V8("display",a))}catch(y){Nn(e,e.return,y)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(y){Nn(e,e.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ca(t,e),is(e),i&4&&D5(e);break;case 21:break;default:ca(t,e),is(e)}}function is(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(_7(n)){var i=n;break e}n=n.return}throw Error(_e(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(sy(r,""),i.flags&=-33);var o=I5(e);hT(e,o,r);break;case 3:case 4:var a=i.stateNode.containerInfo,s=I5(e);dT(e,s,a);break;default:throw Error(_e(161))}}catch(l){Nn(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Aoe(e,t,n){ze=e,S7(e)}function S7(e,t,n){for(var i=(e.mode&1)!==0;ze!==null;){var r=ze,o=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||ix;if(!a){var s=r.alternate,l=s!==null&&s.memoizedState!==null||Gi;s=ix;var u=Gi;if(ix=a,(Gi=l)&&!u)for(ze=r;ze!==null;)a=ze,l=a.child,a.tag===22&&a.memoizedState!==null?z5(r):l!==null?(l.return=a,ze=l):z5(r);for(;o!==null;)ze=o,S7(o),o=o.sibling;ze=r,ix=s,Gi=u}L5(e)}else r.subtreeFlags&8772&&o!==null?(o.return=r,ze=o):L5(e)}}function L5(e){for(;ze!==null;){var t=ze;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Gi||h2(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!Gi)if(n===null)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&b5(t,o,i);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}b5(t,a,n)}break;case 5:var s=t.stateNode;if(n===null&&t.flags&4){n=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&fy(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(_e(163))}Gi||t.flags&512&&fT(t)}catch(h){Nn(t,t.return,h)}}if(t===e){ze=null;break}if(n=t.sibling,n!==null){n.return=t.return,ze=n;break}ze=t.return}}function j5(e){for(;ze!==null;){var t=ze;if(t===e){ze=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ze=n;break}ze=t.return}}function z5(e){for(;ze!==null;){var t=ze;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{h2(4,t)}catch(l){Nn(t,n,l)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var r=t.return;try{i.componentDidMount()}catch(l){Nn(t,r,l)}}var o=t.return;try{fT(t)}catch(l){Nn(t,o,l)}break;case 5:var a=t.return;try{fT(t)}catch(l){Nn(t,a,l)}}}catch(l){Nn(t,t.return,l)}if(t===e){ze=null;break}var s=t.sibling;if(s!==null){s.return=t.return,ze=s;break}ze=t.return}}var Moe=Math.ceil,ib=Gl.ReactCurrentDispatcher,WF=Gl.ReactCurrentOwner,Uo=Gl.ReactCurrentBatchConfig,jt=0,vi=null,qn=null,Mi=0,oo=0,Jh=Ac(0),Qn=0,wy=null,nd=0,p2=0,GF=0,z0=null,Ir=null,qF=0,Mp=1/0,ol=null,rb=!1,pT=null,Zu=null,rx=!1,Pu=null,ob=0,B0=0,mT=null,l_=-1,u_=0;function mr(){return jt&6?jn():l_!==-1?l_:l_=jn()}function Xu(e){return e.mode&1?jt&2&&Mi!==0?Mi&-Mi:hoe.transition!==null?(u_===0&&(u_=a9()),u_):(e=tn,e!==0||(e=window.event,e=e===void 0?16:h9(e.type)),e):1}function Pa(e,t,n,i){if(50<B0)throw B0=0,mT=null,Error(_e(185));dv(e,n,i),(!(jt&2)||e!==vi)&&(e===vi&&(!(jt&2)&&(p2|=n),Qn===4&&Tu(e,Mi)),Wr(e,i),n===1&&jt===0&&!(t.mode&1)&&(Mp=jn()+500,c2&&Mc()))}function Wr(e,t){var n=e.callbackNode;hre(e,t);var i=H_(e,e===vi?Mi:0);if(i===0)n!==null&&ZL(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(n!=null&&ZL(n),t===1)e.tag===0?doe(B5.bind(null,e)):P9(B5.bind(null,e)),loe(function(){!(jt&6)&&Mc()}),n=null;else{switch(s9(i)){case 1:n=vF;break;case 4:n=r9;break;case 16:n=B_;break;case 536870912:n=o9;break;default:n=B_}n=F7(n,C7.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function C7(e,t){if(l_=-1,u_=0,jt&6)throw Error(_e(327));var n=e.callbackNode;if(fp()&&e.callbackNode!==n)return null;var i=H_(e,e===vi?Mi:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=ab(e,i);else{t=i;var r=jt;jt|=2;var o=k7();(vi!==e||Mi!==t)&&(ol=null,Mp=jn()+500,Df(e,t));do try{Noe();break}catch(s){E7(e,s)}while(!0);FF(),ib.current=o,jt=r,qn!==null?t=0:(vi=null,Mi=0,t=Qn)}if(t!==0){if(t===2&&(r=HR(e),r!==0&&(i=r,t=gT(e,r))),t===1)throw n=wy,Df(e,0),Tu(e,i),Wr(e,jn()),n;if(t===6)Tu(e,i);else{if(r=e.current.alternate,!(i&30)&&!Foe(r)&&(t=ab(e,i),t===2&&(o=HR(e),o!==0&&(i=o,t=gT(e,o))),t===1))throw n=wy,Df(e,0),Tu(e,i),Wr(e,jn()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(_e(345));case 2:yf(e,Ir,ol);break;case 3:if(Tu(e,i),(i&130023424)===i&&(t=qF+500-jn(),10<t)){if(H_(e,0)!==0)break;if(r=e.suspendedLanes,(r&i)!==i){mr(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=XR(yf.bind(null,e,Ir,ol),t);break}yf(e,Ir,ol);break;case 4:if(Tu(e,i),(i&4194240)===i)break;for(t=e.eventTimes,r=-1;0<i;){var a=31-Fa(i);o=1<<a,a=t[a],a>r&&(r=a),i&=~o}if(i=r,i=jn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Moe(i/1960))-i,10<i){e.timeoutHandle=XR(yf.bind(null,e,Ir,ol),i);break}yf(e,Ir,ol);break;case 5:yf(e,Ir,ol);break;default:throw Error(_e(329))}}}return Wr(e,jn()),e.callbackNode===n?C7.bind(null,e):null}function gT(e,t){var n=z0;return e.current.memoizedState.isDehydrated&&(Df(e,t).flags|=256),e=ab(e,t),e!==2&&(t=Ir,Ir=n,t!==null&&yT(t)),e}function yT(e){Ir===null?Ir=e:Ir.push.apply(Ir,e)}function Foe(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!Ia(o(),r))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Tu(e,t){for(t&=~GF,t&=~p2,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Fa(t),i=1<<n;e[n]=-1,t&=~i}}function B5(e){if(jt&6)throw Error(_e(327));fp();var t=H_(e,0);if(!(t&1))return Wr(e,jn()),null;var n=ab(e,t);if(e.tag!==0&&n===2){var i=HR(e);i!==0&&(t=i,n=gT(e,i))}if(n===1)throw n=wy,Df(e,0),Tu(e,t),Wr(e,jn()),n;if(n===6)throw Error(_e(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,yf(e,Ir,ol),Wr(e,jn()),null}function VF(e,t){var n=jt;jt|=1;try{return e(t)}finally{jt=n,jt===0&&(Mp=jn()+500,c2&&Mc())}}function id(e){Pu!==null&&Pu.tag===0&&!(jt&6)&&fp();var t=jt;jt|=1;var n=Uo.transition,i=tn;try{if(Uo.transition=null,tn=1,e)return e()}finally{tn=i,Uo.transition=n,jt=t,!(jt&6)&&Mc()}}function YF(){oo=Jh.current,yn(Jh)}function Df(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,soe(n)),qn!==null)for(n=qn.return;n!==null;){var i=n;switch(TF(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&V_();break;case 3:Tp(),yn(Hr),yn(er),DF();break;case 5:IF(i);break;case 4:Tp();break;case 13:yn(Rn);break;case 19:yn(Rn);break;case 10:PF(i.type._context);break;case 22:case 23:YF()}n=n.return}if(vi=e,qn=e=Ku(e.current,null),Mi=oo=t,Qn=0,wy=null,GF=p2=nd=0,Ir=z0=null,Af!==null){for(t=0;t<Af.length;t++)if(n=Af[t],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var a=o.next;o.next=r,i.next=a}n.pending=i}Af=null}return e}function E7(e,t){do{var n=qn;try{if(FF(),o_.current=nb,tb){for(var i=Tn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}tb=!1}if(td=0,ci=Xn=Tn=null,L0=!1,xy=0,WF.current=null,n===null||n.return===null){Qn=1,wy=t,qn=null;break}e:{var o=e,a=n.return,s=n,l=t;if(t=Mi,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=s,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=T5(a);if(m!==null){m.flags&=-257,A5(m,a,s,o,t),m.mode&1&&R5(o,u,t),t=m,l=u;var g=t.updateQueue;if(g===null){var y=new Set;y.add(l),t.updateQueue=y}else g.add(l);break e}else{if(!(t&1)){R5(o,u,t),ZF();break e}l=Error(_e(426))}}else if(wn&&s.mode&1){var x=T5(a);if(x!==null){!(x.flags&65536)&&(x.flags|=256),A5(x,a,s,o,t),AF(Ap(l,s));break e}}o=l=Ap(l,s),Qn!==4&&(Qn=2),z0===null?z0=[o]:z0.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var b=l7(o,l,t);_5(o,b);break e;case 1:s=l;var w=o.type,S=o.stateNode;if(!(o.flags&128)&&(typeof w.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Zu===null||!Zu.has(S)))){o.flags|=65536,t&=-t,o.lanes|=t;var k=u7(o,s,t);_5(o,k);break e}}o=o.return}while(o!==null)}T7(n)}catch(R){t=R,qn===n&&n!==null&&(qn=n=n.return);continue}break}while(!0)}function k7(){var e=ib.current;return ib.current=nb,e===null?nb:e}function ZF(){(Qn===0||Qn===3||Qn===2)&&(Qn=4),vi===null||!(nd&268435455)&&!(p2&268435455)||Tu(vi,Mi)}function ab(e,t){var n=jt;jt|=2;var i=k7();(vi!==e||Mi!==t)&&(ol=null,Df(e,t));do try{Poe();break}catch(r){E7(e,r)}while(!0);if(FF(),jt=n,ib.current=i,qn!==null)throw Error(_e(261));return vi=null,Mi=0,Qn}function Poe(){for(;qn!==null;)R7(qn)}function Noe(){for(;qn!==null&&!rre();)R7(qn)}function R7(e){var t=M7(e.alternate,e,oo);e.memoizedProps=e.pendingProps,t===null?T7(e):qn=t,WF.current=null}function T7(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=koe(n,t),n!==null){n.flags&=32767,qn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Qn=6,qn=null;return}}else if(n=Eoe(n,t,oo),n!==null){qn=n;return}if(t=t.sibling,t!==null){qn=t;return}qn=t=e}while(t!==null);Qn===0&&(Qn=5)}function yf(e,t,n){var i=tn,r=Uo.transition;try{Uo.transition=null,tn=1,$oe(e,t,n,i)}finally{Uo.transition=r,tn=i}return null}function $oe(e,t,n,i){do fp();while(Pu!==null);if(jt&6)throw Error(_e(327));n=e.finishedWork;var r=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(_e(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(pre(e,o),e===vi&&(qn=vi=null,Mi=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||rx||(rx=!0,F7(B_,function(){return fp(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Uo.transition,Uo.transition=null;var a=tn;tn=1;var s=jt;jt|=4,WF.current=null,Toe(e,n),w7(n,e),eoe(YR),U_=!!VR,YR=VR=null,e.current=n,Aoe(n),ore(),jt=s,tn=a,Uo.transition=o}else e.current=n;if(rx&&(rx=!1,Pu=e,ob=r),o=e.pendingLanes,o===0&&(Zu=null),lre(n.stateNode),Wr(e,jn()),t!==null)for(i=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(rb)throw rb=!1,e=pT,pT=null,e;return ob&1&&e.tag!==0&&fp(),o=e.pendingLanes,o&1?e===mT?B0++:(B0=0,mT=e):B0=0,Mc(),null}function fp(){if(Pu!==null){var e=s9(ob),t=Uo.transition,n=tn;try{if(Uo.transition=null,tn=16>e?16:e,Pu===null)var i=!1;else{if(e=Pu,Pu=null,ob=0,jt&6)throw Error(_e(331));var r=jt;for(jt|=4,ze=e.current;ze!==null;){var o=ze,a=o.child;if(ze.flags&16){var s=o.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(ze=u;ze!==null;){var c=ze;switch(c.tag){case 0:case 11:case 15:j0(8,c,o)}var d=c.child;if(d!==null)d.return=c,ze=d;else for(;ze!==null;){c=ze;var h=c.sibling,m=c.return;if(x7(c),c===u){ze=null;break}if(h!==null){h.return=m,ze=h;break}ze=m}}}var g=o.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var x=y.sibling;y.sibling=null,y=x}while(y!==null)}}ze=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,ze=a;else e:for(;ze!==null;){if(o=ze,o.flags&2048)switch(o.tag){case 0:case 11:case 15:j0(9,o,o.return)}var b=o.sibling;if(b!==null){b.return=o.return,ze=b;break e}ze=o.return}}var w=e.current;for(ze=w;ze!==null;){a=ze;var S=a.child;if(a.subtreeFlags&2064&&S!==null)S.return=a,ze=S;else e:for(a=w;ze!==null;){if(s=ze,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:h2(9,s)}}catch(R){Nn(s,s.return,R)}if(s===a){ze=null;break e}var k=s.sibling;if(k!==null){k.return=s.return,ze=k;break e}ze=s.return}}if(jt=r,Mc(),ys&&typeof ys.onPostCommitFiberRoot=="function")try{ys.onPostCommitFiberRoot(o2,e)}catch{}i=!0}return i}finally{tn=n,Uo.transition=t}}return!1}function H5(e,t,n){t=Ap(n,t),t=l7(e,t,1),e=Yu(e,t,1),t=mr(),e!==null&&(dv(e,1,t),Wr(e,t))}function Nn(e,t,n){if(e.tag===3)H5(e,e,n);else for(;t!==null;){if(t.tag===3){H5(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Zu===null||!Zu.has(i))){e=Ap(n,e),e=u7(t,e,1),t=Yu(t,e,1),e=mr(),t!==null&&(dv(t,1,e),Wr(t,e));break}}t=t.return}}function Ooe(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),t=mr(),e.pingedLanes|=e.suspendedLanes&n,vi===e&&(Mi&n)===n&&(Qn===4||Qn===3&&(Mi&130023424)===Mi&&500>jn()-qF?Df(e,0):GF|=n),Wr(e,t)}function A7(e,t){t===0&&(e.mode&1?(t=Y1,Y1<<=1,!(Y1&130023424)&&(Y1=4194304)):t=1);var n=mr();e=Il(e,t),e!==null&&(dv(e,t,n),Wr(e,n))}function Ioe(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),A7(e,n)}function Doe(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(_e(314))}i!==null&&i.delete(t),A7(e,n)}var M7;M7=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Hr.current)zr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return zr=!1,Coe(e,t,n);zr=!!(e.flags&131072)}else zr=!1,wn&&t.flags&1048576&&N9(t,X_,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;s_(e,t),e=t.pendingProps;var r=Ep(t,er.current);cp(t,n),r=jF(null,t,i,e,r,n);var o=zF();return t.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ur(i)?(o=!0,Y_(t)):o=!1,t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,$F(t),r.updater=f2,t.stateNode=r,r._reactInternals=t,iT(t,i,e,n),t=aT(null,t,i,!0,o,n)):(t.tag=0,wn&&o&&RF(t),lr(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(s_(e,t),e=t.pendingProps,r=i._init,i=r(i._payload),t.type=i,r=t.tag=joe(i),e=ma(i,e),r){case 0:t=oT(null,t,i,e,n);break e;case 1:t=P5(null,t,i,e,n);break e;case 11:t=M5(null,t,i,e,n);break e;case 14:t=F5(null,t,i,ma(i.type,e),n);break e}throw Error(_e(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:ma(i,r),oT(e,t,i,r,n);case 1:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:ma(i,r),P5(e,t,i,r,n);case 3:e:{if(h7(t),e===null)throw Error(_e(387));i=t.pendingProps,o=t.memoizedState,r=o.element,D9(e,t),Q_(t,i,null,n);var a=t.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){r=Ap(Error(_e(423)),t),t=N5(e,t,i,n,r);break e}else if(i!==r){r=Ap(Error(_e(424)),t),t=N5(e,t,i,n,r);break e}else for(co=Vu(t.stateNode.containerInfo.firstChild),mo=t,wn=!0,_a=null,n=B9(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(kp(),i===r){t=Dl(e,t,n);break e}lr(e,t,i,n)}t=t.child}return t;case 5:return H9(t),e===null&&eT(t),i=t.type,r=t.pendingProps,o=e!==null?e.memoizedProps:null,a=r.children,ZR(i,r)?a=null:o!==null&&ZR(i,o)&&(t.flags|=32),d7(e,t),lr(e,t,a,n),t.child;case 6:return e===null&&eT(t),null;case 13:return p7(e,t,n);case 4:return OF(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Rp(t,null,i,n):lr(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:ma(i,r),M5(e,t,i,r,n);case 7:return lr(e,t,t.pendingProps,n),t.child;case 8:return lr(e,t,t.pendingProps.children,n),t.child;case 12:return lr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,o=t.memoizedProps,a=r.value,cn(K_,i._currentValue),i._currentValue=a,o!==null)if(Ia(o.value,a)){if(o.children===r.children&&!Hr.current){t=Dl(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var l=s.firstContext;l!==null;){if(l.context===i){if(o.tag===1){l=Cl(-1,n&-n),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),tT(o.return,n,t),s.lanes|=n;break}l=l.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(_e(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),tT(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}lr(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,cp(t,n),r=qo(r),i=i(r),t.flags|=1,lr(e,t,i,n),t.child;case 14:return i=t.type,r=ma(i,t.pendingProps),r=ma(i.type,r),F5(e,t,i,r,n);case 15:return c7(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:ma(i,r),s_(e,t),t.tag=1,Ur(i)?(e=!0,Y_(t)):e=!1,cp(t,n),j9(t,i,r),iT(t,i,r,n),aT(null,t,i,!0,e,n);case 19:return m7(e,t,n);case 22:return f7(e,t,n)}throw Error(_e(156,t.tag))};function F7(e,t){return i9(e,t)}function Loe(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lo(e,t,n,i){return new Loe(e,t,n,i)}function XF(e){return e=e.prototype,!(!e||!e.isReactComponent)}function joe(e){if(typeof e=="function")return XF(e)?1:0;if(e!=null){if(e=e.$$typeof,e===mF)return 11;if(e===gF)return 14}return 2}function Ku(e,t){var n=e.alternate;return n===null?(n=Lo(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function c_(e,t,n,i,r,o){var a=2;if(i=e,typeof e=="function")XF(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Hh:return Lf(n.children,r,o,t);case pF:a=8,r|=8;break;case RR:return e=Lo(12,n,t,r|2),e.elementType=RR,e.lanes=o,e;case TR:return e=Lo(13,n,t,r),e.elementType=TR,e.lanes=o,e;case AR:return e=Lo(19,n,t,r),e.elementType=AR,e.lanes=o,e;case z8:return m2(n,r,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case L8:a=10;break e;case j8:a=9;break e;case mF:a=11;break e;case gF:a=14;break e;case xu:a=16,i=null;break e}throw Error(_e(130,e==null?e:typeof e,""))}return t=Lo(a,n,t,r),t.elementType=e,t.type=i,t.lanes=o,t}function Lf(e,t,n,i){return e=Lo(7,e,i,t),e.lanes=n,e}function m2(e,t,n,i){return e=Lo(22,e,i,t),e.elementType=z8,e.lanes=n,e.stateNode={isHidden:!1},e}function zE(e,t,n){return e=Lo(6,e,null,t),e.lanes=n,e}function BE(e,t,n){return t=Lo(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zoe(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bE(0),this.expirationTimes=bE(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bE(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function KF(e,t,n,i,r,o,a,s,l){return e=new zoe(e,t,n,s,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Lo(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},$F(o),e}function Boe(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bh,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}function P7(e){if(!e)return ac;e=e._reactInternals;e:{if(Pd(e)!==e||e.tag!==1)throw Error(_e(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ur(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(_e(171))}if(e.tag===1){var n=e.type;if(Ur(n))return F9(e,n,t)}return t}function N7(e,t,n,i,r,o,a,s,l){return e=KF(n,i,!0,e,r,o,a,s,l),e.context=P7(null),n=e.current,i=mr(),r=Xu(n),o=Cl(i,r),o.callback=t??null,Yu(n,o,r),e.current.lanes=r,dv(e,r,i),Wr(e,i),e}function g2(e,t,n,i){var r=t.current,o=mr(),a=Xu(r);return n=P7(n),t.context===null?t.context=n:t.pendingContext=n,t=Cl(o,a),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=Yu(r,t,a),e!==null&&(Pa(e,r,a,o),r_(e,r,a)),a}function sb(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function U5(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function JF(e,t){U5(e,t),(e=e.alternate)&&U5(e,t)}function Hoe(){return null}var $7=typeof reportError=="function"?reportError:function(e){console.error(e)};function QF(e){this._internalRoot=e}y2.prototype.render=QF.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(_e(409));g2(e,t,null,null)};y2.prototype.unmount=QF.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;id(function(){g2(null,e,null,null)}),t[Ol]=null}};function y2(e){this._internalRoot=e}y2.prototype.unstable_scheduleHydration=function(e){if(e){var t=c9();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ru.length&&t!==0&&t<Ru[n].priority;n++);Ru.splice(n,0,e),n===0&&d9(e)}};function eP(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function v2(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function W5(){}function Uoe(e,t,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var u=sb(a);o.call(u)}}var a=N7(t,i,e,0,null,!1,!1,"",W5);return e._reactRootContainer=a,e[Ol]=a.current,py(e.nodeType===8?e.parentNode:e),id(),a}for(;r=e.lastChild;)e.removeChild(r);if(typeof i=="function"){var s=i;i=function(){var u=sb(l);s.call(u)}}var l=KF(e,0,!1,null,null,!1,!1,"",W5);return e._reactRootContainer=l,e[Ol]=l.current,py(e.nodeType===8?e.parentNode:e),id(function(){g2(t,l,n,i)}),l}function x2(e,t,n,i,r){var o=n._reactRootContainer;if(o){var a=o;if(typeof r=="function"){var s=r;r=function(){var l=sb(a);s.call(l)}}g2(t,a,e,r)}else a=Uoe(n,t,e,r,i);return sb(a)}l9=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=o0(t.pendingLanes);n!==0&&(xF(t,n|1),Wr(t,jn()),!(jt&6)&&(Mp=jn()+500,Mc()))}break;case 13:id(function(){var i=Il(e,1);if(i!==null){var r=mr();Pa(i,e,1,r)}}),JF(e,1)}};_F=function(e){if(e.tag===13){var t=Il(e,134217728);if(t!==null){var n=mr();Pa(t,e,134217728,n)}JF(e,134217728)}};u9=function(e){if(e.tag===13){var t=Xu(e),n=Il(e,t);if(n!==null){var i=mr();Pa(n,e,t,i)}JF(e,t)}};c9=function(){return tn};f9=function(e,t){var n=tn;try{return tn=e,t()}finally{tn=n}};jR=function(e,t,n){switch(t){case"input":if(PR(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=u2(i);if(!r)throw Error(_e(90));H8(i),PR(i,r)}}}break;case"textarea":W8(e,n);break;case"select":t=n.value,t!=null&&ap(e,!!n.multiple,t,!1)}};K8=VF;J8=id;var Woe={usingClientEntryPoint:!1,Events:[pv,qh,u2,Z8,X8,VF]},Eg={findFiberByHostInstance:Tf,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Goe={bundleType:Eg.bundleType,version:Eg.version,rendererPackageName:Eg.rendererPackageName,rendererConfig:Eg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=t9(e),e===null?null:e.stateNode},findFiberByHostInstance:Eg.findFiberByHostInstance||Hoe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ox=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ox.isDisabled&&ox.supportsFiber)try{o2=ox.inject(Goe),ys=ox}catch{}}Eo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Woe;Eo.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!eP(t))throw Error(_e(200));return Boe(e,t,null,n)};Eo.createRoot=function(e,t){if(!eP(e))throw Error(_e(299));var n=!1,i="",r=$7;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=KF(e,1,!1,null,null,n,!1,i,r),e[Ol]=t.current,py(e.nodeType===8?e.parentNode:e),new QF(t)};Eo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(_e(188)):(e=Object.keys(e).join(","),Error(_e(268,e)));return e=t9(t),e=e===null?null:e.stateNode,e};Eo.flushSync=function(e){return id(e)};Eo.hydrate=function(e,t,n){if(!v2(t))throw Error(_e(200));return x2(null,e,t,!0,n)};Eo.hydrateRoot=function(e,t,n){if(!eP(e))throw Error(_e(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",a=$7;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=N7(t,null,e,1,n??null,r,!1,o,a),e[Ol]=t.current,py(e),i)for(e=0;e<i.length;e++)n=i[e],r=n._getVersion,r=r(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new y2(t)};Eo.render=function(e,t,n){if(!v2(t))throw Error(_e(200));return x2(null,e,t,!1,n)};Eo.unmountComponentAtNode=function(e){if(!v2(e))throw Error(_e(40));return e._reactRootContainer?(id(function(){x2(null,null,e,!1,function(){e._reactRootContainer=null,e[Ol]=null})}),!0):!1};Eo.unstable_batchedUpdates=VF;Eo.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!v2(n))throw Error(_e(200));if(e==null||e._reactInternals===void 0)throw Error(_e(38));return x2(e,t,n,!1,i)};Eo.version="18.2.0-next-9e3b772b8-20220608";function O7(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(O7)}catch(e){console.error(e)}}O7(),N8.exports=Eo;var _2=N8.exports;const Ff=Md(_2);var G5=_2;ER.createRoot=G5.createRoot,ER.hydrateRoot=G5.hydrateRoot;/**
 * @remix-run/router v1.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sy(){return Sy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Sy.apply(this,arguments)}var Nu;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Nu||(Nu={}));const q5="popstate";function qoe(e){e===void 0&&(e={});function t(r,o){let{pathname:a="/",search:s="",hash:l=""}=Nd(r.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),vT("",{pathname:a,search:s,hash:l},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){let a=r.document.querySelector("base"),s="";if(a&&a.getAttribute("href")){let l=r.location.href,u=l.indexOf("#");s=u===-1?l:l.slice(0,u)}return s+"#"+(typeof o=="string"?o:I7(o))}function i(r,o){b2(r.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return Yoe(t,n,i,e)}function ni(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function b2(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Voe(){return Math.random().toString(36).substr(2,8)}function V5(e,t){return{usr:e.state,key:e.key,idx:t}}function vT(e,t,n,i){return n===void 0&&(n=null),Sy({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Nd(t):t,{state:n,key:t&&t.key||i||Voe()})}function I7(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function Nd(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function Yoe(e,t,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:o=!1}=i,a=r.history,s=Nu.Pop,l=null,u=c();u==null&&(u=0,a.replaceState(Sy({},a.state,{idx:u}),""));function c(){return(a.state||{idx:null}).idx}function d(){s=Nu.Pop;let x=c(),b=x==null?null:x-u;u=x,l&&l({action:s,location:y.location,delta:b})}function h(x,b){s=Nu.Push;let w=vT(y.location,x,b);n&&n(w,x),u=c()+1;let S=V5(w,u),k=y.createHref(w);try{a.pushState(S,"",k)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;r.location.assign(k)}o&&l&&l({action:s,location:y.location,delta:1})}function m(x,b){s=Nu.Replace;let w=vT(y.location,x,b);n&&n(w,x),u=c();let S=V5(w,u),k=y.createHref(w);a.replaceState(S,"",k),o&&l&&l({action:s,location:y.location,delta:0})}function g(x){let b=r.location.origin!=="null"?r.location.origin:r.location.href,w=typeof x=="string"?x:I7(x);return ni(b,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,b)}let y={get action(){return s},get location(){return e(r,a)},listen(x){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(q5,d),l=x,()=>{r.removeEventListener(q5,d),l=null}},createHref(x){return t(r,x)},createURL:g,encodeLocation(x){let b=g(x);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:h,replace:m,go(x){return a.go(x)}};return y}var Y5;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Y5||(Y5={}));function Zoe(e,t,n){n===void 0&&(n="/");let i=typeof t=="string"?Nd(t):t,r=j7(i.pathname||"/",n);if(r==null)return null;let o=D7(e);Xoe(o);let a=null;for(let s=0;a==null&&s<o.length;++s)a=oae(o[s],lae(r));return a}function D7(e,t,n,i){t===void 0&&(t=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(o,a,s)=>{let l={relativePath:s===void 0?o.path||"":s,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};l.relativePath.startsWith("/")&&(ni(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let u=jf([i,l.relativePath]),c=n.concat(l);o.children&&o.children.length>0&&(ni(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),D7(o.children,t,c,u)),!(o.path==null&&!o.index)&&t.push({path:u,score:iae(u,o.index),routesMeta:c})};return e.forEach((o,a)=>{var s;if(o.path===""||!((s=o.path)!=null&&s.includes("?")))r(o,a);else for(let l of L7(o.path))r(o,a,l)}),t}function L7(e){let t=e.split("/");if(t.length===0)return[];let[n,...i]=t,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return r?[o,""]:[o];let a=L7(i.join("/")),s=[];return s.push(...a.map(l=>l===""?o:[o,l].join("/"))),r&&s.push(...a),s.map(l=>e.startsWith("/")&&l===""?"/":l)}function Xoe(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:rae(t.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const Koe=/^:[\w-]+$/,Joe=3,Qoe=2,eae=1,tae=10,nae=-2,Z5=e=>e==="*";function iae(e,t){let n=e.split("/"),i=n.length;return n.some(Z5)&&(i+=nae),t&&(i+=Qoe),n.filter(r=>!Z5(r)).reduce((r,o)=>r+(Koe.test(o)?Joe:o===""?eae:tae),i)}function rae(e,t){return e.length===t.length&&e.slice(0,-1).every((i,r)=>i===t[r])?e[e.length-1]-t[t.length-1]:0}function oae(e,t){let{routesMeta:n}=e,i={},r="/",o=[];for(let a=0;a<n.length;++a){let s=n[a],l=a===n.length-1,u=r==="/"?t:t.slice(r.length)||"/",c=aae({path:s.relativePath,caseSensitive:s.caseSensitive,end:l},u);if(!c)return null;Object.assign(i,c.params);let d=s.route;o.push({params:i,pathname:jf([r,c.pathname]),pathnameBase:mae(jf([r,c.pathnameBase])),route:d}),c.pathnameBase!=="/"&&(r=jf([r,c.pathnameBase]))}return o}function aae(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=sae(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let o=r[0],a=o.replace(/(.)\/+$/,"$1"),s=r.slice(1);return{params:i.reduce((u,c,d)=>{let{paramName:h,isOptional:m}=c;if(h==="*"){let y=s[d]||"";a=o.slice(0,o.length-y.length).replace(/(.)\/+$/,"$1")}const g=s[d];return m&&!g?u[h]=void 0:u[h]=uae(g||"",h),u},{}),pathname:o,pathnameBase:a,pattern:e}}function sae(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),b2(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let i=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,s,l)=>(i.push({paramName:s,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),r+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":e!==""&&e!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),i]}function lae(e){try{return decodeURI(e)}catch(t){return b2(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function uae(e,t){try{return decodeURIComponent(e)}catch(n){return b2(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),e}}function j7(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}function cae(e,t){t===void 0&&(t="/");let{pathname:n,search:i="",hash:r=""}=typeof e=="string"?Nd(e):e;return{pathname:n?n.startsWith("/")?n:fae(n,t):t,search:gae(i),hash:yae(r)}}function fae(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function HE(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function dae(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function hae(e,t){let n=dae(e);return t?n.map((i,r)=>r===e.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function pae(e,t,n,i){i===void 0&&(i=!1);let r;typeof e=="string"?r=Nd(e):(r=Sy({},e),ni(!r.pathname||!r.pathname.includes("?"),HE("?","pathname","search",r)),ni(!r.pathname||!r.pathname.includes("#"),HE("#","pathname","hash",r)),ni(!r.search||!r.search.includes("#"),HE("#","search","hash",r)));let o=e===""||r.pathname==="",a=o?"/":r.pathname,s;if(a==null)s=n;else{let d=t.length-1;if(!i&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),d-=1;r.pathname=h.join("/")}s=d>=0?t[d]:"/"}let l=cae(r,s),u=a&&a!=="/"&&a.endsWith("/"),c=(o||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const jf=e=>e.join("/").replace(/\/\/+/g,"/"),mae=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),gae=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,yae=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function vae(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const z7=["post","put","patch","delete"];new Set(z7);const xae=["get",...z7];new Set(xae);/**
 * React Router v6.21.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cy(){return Cy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Cy.apply(this,arguments)}const tP=F.createContext(null),_ae=F.createContext(null),w2=F.createContext(null),S2=F.createContext(null),$d=F.createContext({outlet:null,matches:[],isDataRoute:!1}),B7=F.createContext(null);function C2(){return F.useContext(S2)!=null}function nP(){return C2()||ni(!1),F.useContext(S2).location}function H7(e){F.useContext(w2).static||F.useLayoutEffect(e)}function bae(){let{isDataRoute:e}=F.useContext($d);return e?Iae():wae()}function wae(){C2()||ni(!1);let e=F.useContext(tP),{basename:t,future:n,navigator:i}=F.useContext(w2),{matches:r}=F.useContext($d),{pathname:o}=nP(),a=JSON.stringify(hae(r,n.v7_relativeSplatPath)),s=F.useRef(!1);return H7(()=>{s.current=!0}),F.useCallback(function(u,c){if(c===void 0&&(c={}),!s.current)return;if(typeof u=="number"){i.go(u);return}let d=pae(u,JSON.parse(a),o,c.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:jf([t,d.pathname])),(c.replace?i.replace:i.push)(d,c.state,c)},[t,i,a,o,e])}const Sae=F.createContext(null);function Cae(e){let t=F.useContext($d).outlet;return t&&F.createElement(Sae.Provider,{value:e},t)}function Eae(e,t){return kae(e,t)}function kae(e,t,n,i){C2()||ni(!1);let{navigator:r}=F.useContext(w2),{matches:o}=F.useContext($d),a=o[o.length-1],s=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let u=nP(),c;if(t){var d;let x=typeof t=="string"?Nd(t):t;l==="/"||(d=x.pathname)!=null&&d.startsWith(l)||ni(!1),c=x}else c=u;let h=c.pathname||"/",m=l==="/"?h:h.slice(l.length)||"/",g=Zoe(e,{pathname:m}),y=Fae(g&&g.map(x=>Object.assign({},x,{params:Object.assign({},s,x.params),pathname:jf([l,r.encodeLocation?r.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?l:jf([l,r.encodeLocation?r.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),o,n,i);return t&&y?F.createElement(S2.Provider,{value:{location:Cy({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Nu.Pop}},y):y}function Rae(){let e=Oae(),t=vae(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},t),n?F.createElement("pre",{style:r},n):null,null)}const Tae=F.createElement(Rae,null);class Aae extends F.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?F.createElement($d.Provider,{value:this.props.routeContext},F.createElement(B7.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Mae(e){let{routeContext:t,match:n,children:i}=e,r=F.useContext(tP);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),F.createElement($d.Provider,{value:t},i)}function Fae(e,t,n,i){var r;if(t===void 0&&(t=[]),n===void 0&&(n=null),i===void 0&&(i=null),e==null){var o;if((o=n)!=null&&o.errors)e=n.matches;else return null}let a=e,s=(r=n)==null?void 0:r.errors;if(s!=null){let c=a.findIndex(d=>d.route.id&&(s==null?void 0:s[d.route.id]));c>=0||ni(!1),a=a.slice(0,Math.min(a.length,c+1))}let l=!1,u=-1;if(n&&i&&i.v7_partialHydration)for(let c=0;c<a.length;c++){let d=a[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:h,errors:m}=n,g=d.route.loader&&h[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||g){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((c,d,h)=>{let m,g=!1,y=null,x=null;n&&(m=s&&d.route.id?s[d.route.id]:void 0,y=d.route.errorElement||Tae,l&&(u<0&&h===0?(Dae("route-fallback",!1),g=!0,x=null):u===h&&(g=!0,x=d.route.hydrateFallbackElement||null)));let b=t.concat(a.slice(0,h+1)),w=()=>{let S;return m?S=y:g?S=x:d.route.Component?S=F.createElement(d.route.Component,null):d.route.element?S=d.route.element:S=c,F.createElement(Mae,{match:d,routeContext:{outlet:c,matches:b,isDataRoute:n!=null},children:S})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?F.createElement(Aae,{location:n.location,revalidation:n.revalidation,component:y,error:m,children:w(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):w()},null)}var U7=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(U7||{}),lb=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(lb||{});function Pae(e){let t=F.useContext(tP);return t||ni(!1),t}function Nae(e){let t=F.useContext(_ae);return t||ni(!1),t}function $ae(e){let t=F.useContext($d);return t||ni(!1),t}function W7(e){let t=$ae(),n=t.matches[t.matches.length-1];return n.route.id||ni(!1),n.route.id}function Oae(){var e;let t=F.useContext(B7),n=Nae(lb.UseRouteError),i=W7(lb.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[i]}function Iae(){let{router:e}=Pae(U7.UseNavigateStable),t=W7(lb.UseNavigateStable),n=F.useRef(!1);return H7(()=>{n.current=!0}),F.useCallback(function(r,o){o===void 0&&(o={}),n.current&&(typeof r=="number"?e.navigate(r):e.navigate(r,Cy({fromRouteId:t},o)))},[e,t])}const X5={};function Dae(e,t,n){!t&&!X5[e]&&(X5[e]=!0)}function Lae(e){return Cae(e.context)}function No(e){ni(!1)}function jae(e){let{basename:t="/",children:n=null,location:i,navigationType:r=Nu.Pop,navigator:o,static:a=!1,future:s}=e;C2()&&ni(!1);let l=t.replace(/^\/*/,"/"),u=F.useMemo(()=>({basename:l,navigator:o,static:a,future:Cy({v7_relativeSplatPath:!1},s)}),[l,s,o,a]);typeof i=="string"&&(i=Nd(i));let{pathname:c="/",search:d="",hash:h="",state:m=null,key:g="default"}=i,y=F.useMemo(()=>{let x=j7(c,l);return x==null?null:{location:{pathname:x,search:d,hash:h,state:m,key:g},navigationType:r}},[l,c,d,h,m,g,r]);return y==null?null:F.createElement(w2.Provider,{value:u},F.createElement(S2.Provider,{children:n,value:y}))}function zae(e){let{children:t,location:n}=e;return Eae(xT(t),n)}new Promise(()=>{});function xT(e,t){t===void 0&&(t=[]);let n=[];return F.Children.forEach(e,(i,r)=>{if(!F.isValidElement(i))return;let o=[...t,r];if(i.type===F.Fragment){n.push.apply(n,xT(i.props.children,o));return}i.type!==No&&ni(!1),!i.props.index||!i.props.children||ni(!1);let a={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=xT(i.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.21.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Bae="startTransition",K5=Iie[Bae];function Hae(e){let{basename:t,children:n,future:i,window:r}=e,o=F.useRef();o.current==null&&(o.current=qoe({window:r,v5Compat:!0}));let a=o.current,[s,l]=F.useState({action:a.action,location:a.location}),{v7_startTransition:u}=i||{},c=F.useCallback(d=>{u&&K5?K5(()=>l(d)):l(d)},[l,u]);return F.useLayoutEffect(()=>a.listen(c),[a,c]),F.createElement(jae,{basename:t,children:n,location:s.location,navigationType:s.action,navigator:a,future:i})}var J5;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(J5||(J5={}));var Q5;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Q5||(Q5={}));var G7={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var o="",a=0;a<arguments.length;a++){var s=arguments[a];s&&(o=r(o,i(s)))}return o}function i(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return n.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var a="";for(var s in o)t.call(o,s)&&o[s]&&(a=r(a,s));return a}function r(o,a){return a?o?o+" "+a:o+a:o}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(G7);var Uae=G7.exports;const De=Md(Uae);function _T(){return _T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_T.apply(this,arguments)}function q7(e,t){if(e==null)return{};var n={},i=Object.keys(e),r,o;for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function e3(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function Wae(e){var t=Gae(e,"string");return typeof t=="symbol"?t:String(t)}function Gae(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function V7(e,t,n){var i=F.useRef(e!==void 0),r=F.useState(t),o=r[0],a=r[1],s=e!==void 0,l=i.current;return i.current=s,!s&&l&&o!==t&&a(t),[s?e:o,F.useCallback(function(u){for(var c=arguments.length,d=new Array(c>1?c-1:0),h=1;h<c;h++)d[h-1]=arguments[h];n&&n.apply(void 0,[u].concat(d)),a(u)},[n])]}function gv(e,t){return Object.keys(t).reduce(function(n,i){var r,o=n,a=o[e3(i)],s=o[i],l=q7(o,[e3(i),i].map(Wae)),u=t[i],c=V7(s,a,e[u]),d=c[0],h=c[1];return _T({},l,(r={},r[i]=d,r[u]=h,r))},e)}function bT(e,t){return bT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},bT(e,t)}function qae(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,bT(e,t)}const Vae=["xxl","xl","lg","md","sm","xs"],Yae="xs",E2=F.createContext({prefixes:{},breakpoints:Vae,minBreakpoint:Yae});function We(e,t){const{prefixes:n}=F.useContext(E2);return e||n[t]||t}function Y7(){const{breakpoints:e}=F.useContext(E2);return e}function Z7(){const{minBreakpoint:e}=F.useContext(E2);return e}function k2(){const{dir:e}=F.useContext(E2);return e==="rtl"}function vm(e){return e&&e.ownerDocument||document}function Zae(e){var t=vm(e);return t&&t.defaultView||window}function Xae(e,t){return Zae(e).getComputedStyle(e,t)}var Kae=/([A-Z])/g;function Jae(e){return e.replace(Kae,"-$1").toLowerCase()}var Qae=/^ms-/;function ax(e){return Jae(e).replace(Qae,"-ms-")}var ese=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function tse(e){return!!(e&&ese.test(e))}function El(e,t){var n="",i="";if(typeof t=="string")return e.style.getPropertyValue(ax(t))||Xae(e).getPropertyValue(ax(t));Object.keys(t).forEach(function(r){var o=t[r];!o&&o!==0?e.style.removeProperty(ax(r)):tse(r)?i+=r+"("+o+") ":n+=ax(r)+": "+o+";"}),i&&(n+="transform: "+i+";"),e.style.cssText+=";"+n}var X7={exports:{}},nse="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ise=nse,rse=ise;function K7(){}function J7(){}J7.resetWarningCache=K7;var ose=function(){function e(i,r,o,a,s,l){if(l!==rse){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:J7,resetWarningCache:K7};return n.PropTypes=n,n};X7.exports=ose();var ase=X7.exports;const bn=Md(ase),t3={disabled:!1},Q7=Nt.createContext(null);var sse=function(t){return t.scrollTop},s0="unmounted",bu="exited",ba="entering",dl="entered",Ey="exiting",ql=function(e){qae(t,e);function t(i,r){var o;o=e.call(this,i,r)||this;var a=r,s=a&&!a.isMounting?i.enter:i.appear,l;return o.appearStatus=null,i.in?s?(l=bu,o.appearStatus=ba):l=dl:i.unmountOnExit||i.mountOnEnter?l=s0:l=bu,o.state={status:l},o.nextCallback=null,o}t.getDerivedStateFromProps=function(r,o){var a=r.in;return a&&o.status===s0?{status:bu}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(r){var o=null;if(r!==this.props){var a=this.state.status;this.props.in?a!==ba&&a!==dl&&(o=ba):(a===ba||a===dl)&&(o=Ey)}this.updateStatus(!1,o)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var r=this.props.timeout,o,a,s;return o=a=s=r,r!=null&&typeof r!="number"&&(o=r.exit,a=r.enter,s=r.appear!==void 0?r.appear:a),{exit:o,enter:a,appear:s}},n.updateStatus=function(r,o){if(r===void 0&&(r=!1),o!==null)if(this.cancelNextCallback(),o===ba){if(this.props.unmountOnExit||this.props.mountOnEnter){var a=this.props.nodeRef?this.props.nodeRef.current:Ff.findDOMNode(this);a&&sse(a)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===bu&&this.setState({status:s0})},n.performEnter=function(r){var o=this,a=this.props.enter,s=this.context?this.context.isMounting:r,l=this.props.nodeRef?[s]:[Ff.findDOMNode(this),s],u=l[0],c=l[1],d=this.getTimeouts(),h=s?d.appear:d.enter;if(!r&&!a||t3.disabled){this.safeSetState({status:dl},function(){o.props.onEntered(u)});return}this.props.onEnter(u,c),this.safeSetState({status:ba},function(){o.props.onEntering(u,c),o.onTransitionEnd(h,function(){o.safeSetState({status:dl},function(){o.props.onEntered(u,c)})})})},n.performExit=function(){var r=this,o=this.props.exit,a=this.getTimeouts(),s=this.props.nodeRef?void 0:Ff.findDOMNode(this);if(!o||t3.disabled){this.safeSetState({status:bu},function(){r.props.onExited(s)});return}this.props.onExit(s),this.safeSetState({status:Ey},function(){r.props.onExiting(s),r.onTransitionEnd(a.exit,function(){r.safeSetState({status:bu},function(){r.props.onExited(s)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(r,o){o=this.setNextCallback(o),this.setState(r,o)},n.setNextCallback=function(r){var o=this,a=!0;return this.nextCallback=function(s){a&&(a=!1,o.nextCallback=null,r(s))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},n.onTransitionEnd=function(r,o){this.setNextCallback(o);var a=this.props.nodeRef?this.props.nodeRef.current:Ff.findDOMNode(this),s=r==null&&!this.props.addEndListener;if(!a||s){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],u=l[0],c=l[1];this.props.addEndListener(u,c)}r!=null&&setTimeout(this.nextCallback,r)},n.render=function(){var r=this.state.status;if(r===s0)return null;var o=this.props,a=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var s=q7(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Nt.createElement(Q7.Provider,{value:null},typeof a=="function"?a(r,s):Nt.cloneElement(Nt.Children.only(a),s))},t}(Nt.Component);ql.contextType=Q7;ql.propTypes={};function xh(){}ql.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:xh,onEntering:xh,onEntered:xh,onExit:xh,onExiting:xh,onExited:xh};ql.UNMOUNTED=s0;ql.EXITED=bu;ql.ENTERING=ba;ql.ENTERED=dl;ql.EXITING=Ey;const lse=ql,xm=!!(typeof window<"u"&&window.document&&window.document.createElement);var wT=!1,ST=!1;try{var UE={get passive(){return wT=!0},get once(){return ST=wT=!0}};xm&&(window.addEventListener("test",UE,UE),window.removeEventListener("test",UE,!0))}catch{}function eH(e,t,n,i){if(i&&typeof i!="boolean"&&!ST){var r=i.once,o=i.capture,a=n;!ST&&r&&(a=n.__once||function s(l){this.removeEventListener(t,s,o),n.call(this,l)},n.__once=a),e.addEventListener(t,a,wT?i:o)}e.addEventListener(t,n,i)}function CT(e,t,n,i){var r=i&&typeof i!="boolean"?i.capture:i;e.removeEventListener(t,n,r),n.__once&&e.removeEventListener(t,n.__once,r)}function yl(e,t,n,i){return eH(e,t,n,i),function(){CT(e,t,n,i)}}function use(e,t,n,i){if(n===void 0&&(n=!1),i===void 0&&(i=!0),e){var r=document.createEvent("HTMLEvents");r.initEvent(t,n,i),e.dispatchEvent(r)}}function cse(e){var t=El(e,"transitionDuration")||"",n=t.indexOf("ms")===-1?1e3:1;return parseFloat(t)*n}function fse(e,t,n){n===void 0&&(n=5);var i=!1,r=setTimeout(function(){i||use(e,"transitionend",!0)},t+n),o=yl(e,"transitionend",function(){i=!0},{once:!0});return function(){clearTimeout(r),o()}}function tH(e,t,n,i){n==null&&(n=cse(e)||0);var r=fse(e,n,i),o=yl(e,"transitionend",t);return function(){r(),o()}}function n3(e,t){const n=El(e,t)||"",i=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*i}function R2(e,t){const n=n3(e,"transitionDuration"),i=n3(e,"transitionDelay"),r=tH(e,o=>{o.target===e&&(r(),t(o))},n+i)}function kg(...e){return e.filter(t=>t!=null).reduce((t,n)=>{if(typeof n!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return t===null?n:function(...r){t.apply(this,r),n.apply(this,r)}},null)}function iP(e){e.offsetHeight}const i3=e=>!e||typeof e=="function"?e:t=>{e.current=t};function dse(e,t){const n=i3(e),i=i3(t);return r=>{n&&n(r),i&&i(r)}}function Fc(e,t){return F.useMemo(()=>dse(e,t),[e,t])}function ub(e){return e&&"setState"in e?Ff.findDOMNode(e):e??null}const hse=Nt.forwardRef(({onEnter:e,onEntering:t,onEntered:n,onExit:i,onExiting:r,onExited:o,addEndListener:a,children:s,childRef:l,...u},c)=>{const d=F.useRef(null),h=Fc(d,l),m=M=>{h(ub(M))},g=M=>T=>{M&&d.current&&M(d.current,T)},y=F.useCallback(g(e),[e]),x=F.useCallback(g(t),[t]),b=F.useCallback(g(n),[n]),w=F.useCallback(g(i),[i]),S=F.useCallback(g(r),[r]),k=F.useCallback(g(o),[o]),R=F.useCallback(g(a),[a]);return v.jsx(lse,{ref:c,...u,onEnter:y,onEntered:b,onEntering:x,onExit:w,onExited:k,onExiting:S,addEndListener:R,nodeRef:d,children:typeof s=="function"?(M,T)=>s(M,{...T,ref:m}):Nt.cloneElement(s,{ref:m})})}),T2=hse,pse={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function mse(e,t){const n=`offset${e[0].toUpperCase()}${e.slice(1)}`,i=t[n],r=pse[e];return i+parseInt(El(t,r[0]),10)+parseInt(El(t,r[1]),10)}const gse={[bu]:"collapse",[Ey]:"collapsing",[ba]:"collapsing",[dl]:"collapse show"},yse=Nt.forwardRef(({onEnter:e,onEntering:t,onEntered:n,onExit:i,onExiting:r,className:o,children:a,dimension:s="height",in:l=!1,timeout:u=300,mountOnEnter:c=!1,unmountOnExit:d=!1,appear:h=!1,getDimensionValue:m=mse,...g},y)=>{const x=typeof s=="function"?s():s,b=F.useMemo(()=>kg(M=>{M.style[x]="0"},e),[x,e]),w=F.useMemo(()=>kg(M=>{const T=`scroll${x[0].toUpperCase()}${x.slice(1)}`;M.style[x]=`${M[T]}px`},t),[x,t]),S=F.useMemo(()=>kg(M=>{M.style[x]=null},n),[x,n]),k=F.useMemo(()=>kg(M=>{M.style[x]=`${m(x,M)}px`,iP(M)},i),[i,m,x]),R=F.useMemo(()=>kg(M=>{M.style[x]=null},r),[x,r]);return v.jsx(T2,{ref:y,addEndListener:R2,...g,"aria-expanded":g.role?l:null,onEnter:b,onEntering:w,onEntered:S,onExit:k,onExiting:R,childRef:a.ref,in:l,timeout:u,mountOnEnter:c,unmountOnExit:d,appear:h,children:(M,T)=>Nt.cloneElement(a,{...T,className:De(o,a.props.className,gse[M],x==="width"&&"collapse-horizontal")})})}),nH=yse;function iH(e,t){return Array.isArray(e)?e.includes(t):e===t}const rH=F.createContext({});rH.displayName="AccordionContext";const A2=rH,oH=F.forwardRef(({as:e="div",bsPrefix:t,className:n,children:i,eventKey:r,...o},a)=>{const{activeEventKey:s}=F.useContext(A2);return t=We(t,"accordion-collapse"),v.jsx(nH,{ref:a,in:iH(s,r),...o,className:De(n,t),children:v.jsx(e,{children:F.Children.only(i)})})});oH.displayName="AccordionCollapse";const aH=oH,sH=F.createContext({eventKey:""});sH.displayName="AccordionItemContext";const rP=sH,lH=F.forwardRef(({as:e="div",bsPrefix:t,className:n,onEnter:i,onEntering:r,onEntered:o,onExit:a,onExiting:s,onExited:l,...u},c)=>{t=We(t,"accordion-body");const{eventKey:d}=F.useContext(rP);return v.jsx(aH,{eventKey:d,onEnter:i,onEntering:r,onEntered:o,onExit:a,onExiting:s,onExited:l,children:v.jsx(e,{ref:c,...u,className:De(n,t)})})});lH.displayName="AccordionBody";const vse=lH;function xse(e,t){const{activeEventKey:n,onSelect:i,alwaysOpen:r}=F.useContext(A2);return o=>{let a=e===n?null:e;r&&(Array.isArray(n)?n.includes(e)?a=n.filter(s=>s!==e):a=[...n,e]:a=[e]),i==null||i(a,o),t==null||t(o)}}const uH=F.forwardRef(({as:e="button",bsPrefix:t,className:n,onClick:i,...r},o)=>{t=We(t,"accordion-button");const{eventKey:a}=F.useContext(rP),s=xse(a,i),{activeEventKey:l}=F.useContext(A2);return e==="button"&&(r.type="button"),v.jsx(e,{ref:o,onClick:s,...r,"aria-expanded":Array.isArray(l)?l.includes(a):a===l,className:De(n,t,!iH(l,a)&&"collapsed")})});uH.displayName="AccordionButton";const cH=uH,fH=F.forwardRef(({as:e="h2",bsPrefix:t,className:n,children:i,onClick:r,...o},a)=>(t=We(t,"accordion-header"),v.jsx(e,{ref:a,...o,className:De(n,t),children:v.jsx(cH,{onClick:r,children:i})})));fH.displayName="AccordionHeader";const _se=fH,dH=F.forwardRef(({as:e="div",bsPrefix:t,className:n,eventKey:i,...r},o)=>{t=We(t,"accordion-item");const a=F.useMemo(()=>({eventKey:i}),[i]);return v.jsx(rP.Provider,{value:a,children:v.jsx(e,{ref:o,...r,className:De(n,t)})})});dH.displayName="AccordionItem";const bse=dH,hH=F.forwardRef((e,t)=>{const{as:n="div",activeKey:i,bsPrefix:r,className:o,onSelect:a,flush:s,alwaysOpen:l,...u}=gv(e,{activeKey:"onSelect"}),c=We(r,"accordion"),d=F.useMemo(()=>({activeEventKey:i,onSelect:a,alwaysOpen:l}),[i,a,l]);return v.jsx(A2.Provider,{value:d,children:v.jsx(n,{ref:t,...u,className:De(o,c,s&&`${c}-flush`)})})});hH.displayName="Accordion";const sx=Object.assign(hH,{Button:cH,Collapse:aH,Item:bse,Header:_se,Body:vse});function pH(e){const t=F.useRef(e);return F.useEffect(()=>{t.current=e},[e]),t}function Vn(e){const t=pH(e);return F.useCallback(function(...n){return t.current&&t.current(...n)},[t])}const M2=e=>F.forwardRef((t,n)=>v.jsx("div",{...t,ref:n,className:De(t.className,e)}));function ET(){return F.useState(null)}function oP(){const e=F.useRef(!0),t=F.useRef(()=>e.current);return F.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function wse(e){const t=F.useRef(null);return F.useEffect(()=>{t.current=e}),t.current}const Sse=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",Cse=typeof document<"u",cb=Cse||Sse?F.useLayoutEffect:F.useEffect,Ese=["as","disabled"];function kse(e,t){if(e==null)return{};var n={},i=Object.keys(e),r,o;for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function Rse(e){return!e||e.trim()==="#"}function aP({tagName:e,disabled:t,href:n,target:i,rel:r,role:o,onClick:a,tabIndex:s=0,type:l}){e||(n!=null||i!=null||r!=null?e="a":e="button");const u={tagName:e};if(e==="button")return[{type:l||"button",disabled:t},u];const c=h=>{if((t||e==="a"&&Rse(n))&&h.preventDefault(),t){h.stopPropagation();return}a==null||a(h)},d=h=>{h.key===" "&&(h.preventDefault(),c(h))};return e==="a"&&(n||(n="#"),t&&(n=void 0)),[{role:o??"button",disabled:void 0,tabIndex:t?void 0:s,href:n,target:e==="a"?i:void 0,"aria-disabled":t||void 0,rel:e==="a"?r:void 0,onClick:c,onKeyDown:d},u]}const mH=F.forwardRef((e,t)=>{let{as:n,disabled:i}=e,r=kse(e,Ese);const[o,{tagName:a}]=aP(Object.assign({tagName:n,disabled:i},r));return v.jsx(a,Object.assign({},r,o,{ref:t}))});mH.displayName="Button";const Tse=["onKeyDown"];function Ase(e,t){if(e==null)return{};var n={},i=Object.keys(e),r,o;for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function Mse(e){return!e||e.trim()==="#"}const gH=F.forwardRef((e,t)=>{let{onKeyDown:n}=e,i=Ase(e,Tse);const[r]=aP(Object.assign({tagName:"a"},i)),o=Vn(a=>{r.onKeyDown(a),n==null||n(a)});return Mse(i.href)||i.role==="button"?v.jsx("a",Object.assign({ref:t},i,r,{onKeyDown:o})):v.jsx("a",Object.assign({ref:t},i,{onKeyDown:n}))});gH.displayName="Anchor";const kT=gH,Fse={[ba]:"show",[dl]:"show"},yH=F.forwardRef(({className:e,children:t,transitionClasses:n={},onEnter:i,...r},o)=>{const a={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...r},s=F.useCallback((l,u)=>{iP(l),i==null||i(l,u)},[i]);return v.jsx(T2,{ref:o,addEndListener:R2,...a,onEnter:s,childRef:t.ref,children:(l,u)=>F.cloneElement(t,{...u,className:De("fade",e,t.props.className,Fse[l],n[l])})})});yH.displayName="Fade";const rd=yH,Pse={"aria-label":bn.string,onClick:bn.func,variant:bn.oneOf(["white"])},sP=F.forwardRef(({className:e,variant:t,"aria-label":n="Close",...i},r)=>v.jsx("button",{ref:r,type:"button",className:De("btn-close",t&&`btn-close-${t}`,e),"aria-label":n,...i}));sP.displayName="CloseButton";sP.propTypes=Pse;const Nse=sP,vH=F.forwardRef(({bsPrefix:e,bg:t="primary",pill:n=!1,text:i,className:r,as:o="span",...a},s)=>{const l=We(e,"badge");return v.jsx(o,{ref:s,...a,className:De(r,l,n&&"rounded-pill",i&&`text-${i}`,t&&`bg-${t}`)})});vH.displayName="Badge";const fb=vH,xH=F.forwardRef(({as:e,bsPrefix:t,variant:n="primary",size:i,active:r=!1,disabled:o=!1,className:a,...s},l)=>{const u=We(t,"btn"),[c,{tagName:d}]=aP({tagName:e,disabled:o,...s}),h=d;return v.jsx(h,{...c,...s,ref:l,disabled:o,className:De(a,u,r&&"active",n&&`${u}-${n}`,i&&`${u}-${i}`,s.href&&o&&"disabled")})});xH.displayName="Button";const lP=xH,_H=F.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},r)=>(t=We(t,"card-body"),v.jsx(n,{ref:r,className:De(e,t),...i})));_H.displayName="CardBody";const bH=_H,wH=F.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},r)=>(t=We(t,"card-footer"),v.jsx(n,{ref:r,className:De(e,t),...i})));wH.displayName="CardFooter";const $se=wH,SH=F.createContext(null);SH.displayName="CardHeaderContext";const CH=SH,EH=F.forwardRef(({bsPrefix:e,className:t,as:n="div",...i},r)=>{const o=We(e,"card-header"),a=F.useMemo(()=>({cardHeaderBsPrefix:o}),[o]);return v.jsx(CH.Provider,{value:a,children:v.jsx(n,{ref:r,...i,className:De(t,o)})})});EH.displayName="CardHeader";const Ose=EH,kH=F.forwardRef(({bsPrefix:e,className:t,variant:n,as:i="img",...r},o)=>{const a=We(e,"card-img");return v.jsx(i,{ref:o,className:De(n?`${a}-${n}`:a,t),...r})});kH.displayName="CardImg";const Ise=kH,RH=F.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},r)=>(t=We(t,"card-img-overlay"),v.jsx(n,{ref:r,className:De(e,t),...i})));RH.displayName="CardImgOverlay";const Dse=RH,TH=F.forwardRef(({className:e,bsPrefix:t,as:n="a",...i},r)=>(t=We(t,"card-link"),v.jsx(n,{ref:r,className:De(e,t),...i})));TH.displayName="CardLink";const Lse=TH,jse=M2("h6"),AH=F.forwardRef(({className:e,bsPrefix:t,as:n=jse,...i},r)=>(t=We(t,"card-subtitle"),v.jsx(n,{ref:r,className:De(e,t),...i})));AH.displayName="CardSubtitle";const zse=AH,MH=F.forwardRef(({className:e,bsPrefix:t,as:n="p",...i},r)=>(t=We(t,"card-text"),v.jsx(n,{ref:r,className:De(e,t),...i})));MH.displayName="CardText";const Bse=MH,Hse=M2("h5"),FH=F.forwardRef(({className:e,bsPrefix:t,as:n=Hse,...i},r)=>(t=We(t,"card-title"),v.jsx(n,{ref:r,className:De(e,t),...i})));FH.displayName="CardTitle";const Use=FH,PH=F.forwardRef(({bsPrefix:e,className:t,bg:n,text:i,border:r,body:o=!1,children:a,as:s="div",...l},u)=>{const c=We(e,"card");return v.jsx(s,{ref:u,...l,className:De(t,c,n&&`bg-${n}`,i&&`text-${i}`,r&&`border-${r}`),children:o?v.jsx(bH,{children:a}):a})});PH.displayName="Card";const Dn=Object.assign(PH,{Img:Ise,Title:Use,Subtitle:zse,Body:bH,Link:Lse,Text:Bse,Header:Ose,Footer:$se,ImgOverlay:Dse});function Wse(e,t){const n=F.useRef(!0);F.useEffect(()=>{if(n.current){n.current=!1;return}return e()},t)}function Gse(e){const t=F.useRef(e);return t.current=e,t}function uP(e){const t=Gse(e);F.useEffect(()=>()=>t.current(),[])}const RT=2**31-1;function NH(e,t,n){const i=n-Date.now();e.current=i<=RT?setTimeout(t,i):setTimeout(()=>NH(e,t,n),RT)}function $H(){const e=oP(),t=F.useRef();return uP(()=>clearTimeout(t.current)),F.useMemo(()=>{const n=()=>clearTimeout(t.current);function i(r,o=0){e()&&(n(),o<=RT?t.current=setTimeout(r,o):NH(t,r,Date.now()+o))}return{set:i,clear:n,handleRef:t}},[])}const OH=F.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},r)=>(t=We(t,"carousel-caption"),v.jsx(n,{ref:r,className:De(e,t),...i})));OH.displayName="CarouselCaption";const qse=OH,IH=F.forwardRef(({as:e="div",bsPrefix:t,className:n,...i},r)=>{const o=De(n,We(t,"carousel-item"));return v.jsx(e,{ref:r,...i,className:o})});IH.displayName="CarouselItem";const Vse=IH;function db(e,t){let n=0;return F.Children.map(e,i=>F.isValidElement(i)?t(i,n++):i)}function DH(e,t){let n=0;F.Children.forEach(e,i=>{F.isValidElement(i)&&t(i,n++)})}function Yse(e,t){return F.Children.toArray(e).some(n=>F.isValidElement(n)&&n.type===t)}const Zse=40;function Xse(e){if(!e||!e.style||!e.parentNode||!e.parentNode.style)return!1;const t=getComputedStyle(e);return t.display!=="none"&&t.visibility!=="hidden"&&getComputedStyle(e.parentNode).display!=="none"}const LH=F.forwardRef(({defaultActiveIndex:e=0,...t},n)=>{const{as:i="div",bsPrefix:r,slide:o=!0,fade:a=!1,controls:s=!0,indicators:l=!0,indicatorLabels:u=[],activeIndex:c,onSelect:d,onSlide:h,onSlid:m,interval:g=5e3,keyboard:y=!0,onKeyDown:x,pause:b="hover",onMouseOver:w,onMouseOut:S,wrap:k=!0,touch:R=!0,onTouchStart:M,onTouchMove:T,onTouchEnd:N,prevIcon:D=v.jsx("span",{"aria-hidden":"true",className:"carousel-control-prev-icon"}),prevLabel:I="Previous",nextIcon:z=v.jsx("span",{"aria-hidden":"true",className:"carousel-control-next-icon"}),nextLabel:X="Next",variant:W,className:U,children:B,...V}=gv({defaultActiveIndex:e,...t},{activeIndex:"onSelect"}),K=We(r,"carousel"),H=k2(),J=F.useRef(null),[Q,oe]=F.useState("next"),[me,ke]=F.useState(!1),[ge,Se]=F.useState(!1),[Me,It]=F.useState(c||0);F.useEffect(()=>{!ge&&c!==Me&&(J.current?oe(J.current):oe((c||0)>Me?"next":"prev"),o&&Se(!0),It(c||0))},[c,ge,Me,o]),F.useEffect(()=>{J.current&&(J.current=null)});let Et=0,Re;DH(B,(dt,Gt)=>{++Et,Gt===c&&(Re=dt.props.interval)});const Ye=pH(Re),Be=F.useCallback(dt=>{if(ge)return;let Gt=Me-1;if(Gt<0){if(!k)return;Gt=Et-1}J.current="prev",d==null||d(Gt,dt)},[ge,Me,d,k,Et]),de=Vn(dt=>{if(ge)return;let Gt=Me+1;if(Gt>=Et){if(!k)return;Gt=0}J.current="next",d==null||d(Gt,dt)}),Tt=F.useRef();F.useImperativeHandle(n,()=>({element:Tt.current,prev:Be,next:de}));const ft=Vn(()=>{!document.hidden&&Xse(Tt.current)&&(H?Be():de())}),tt=Q==="next"?"start":"end";Wse(()=>{o||(h==null||h(Me,tt),m==null||m(Me,tt))},[Me]);const Yt=`${K}-item-${Q}`,vn=`${K}-item-${tt}`,ir=F.useCallback(dt=>{iP(dt),h==null||h(Me,tt)},[h,Me,tt]),Ys=F.useCallback(()=>{Se(!1),m==null||m(Me,tt)},[m,Me,tt]),Ii=F.useCallback(dt=>{if(y&&!/input|textarea/i.test(dt.target.tagName))switch(dt.key){case"ArrowLeft":dt.preventDefault(),H?de(dt):Be(dt);return;case"ArrowRight":dt.preventDefault(),H?Be(dt):de(dt);return}x==null||x(dt)},[y,x,Be,de,H]),kr=F.useCallback(dt=>{b==="hover"&&ke(!0),w==null||w(dt)},[b,w]),aa=F.useCallback(dt=>{ke(!1),S==null||S(dt)},[S]),io=F.useRef(0),Rr=F.useRef(0),bt=$H(),ai=F.useCallback(dt=>{io.current=dt.touches[0].clientX,Rr.current=0,b==="hover"&&ke(!0),M==null||M(dt)},[b,M]),To=F.useCallback(dt=>{dt.touches&&dt.touches.length>1?Rr.current=0:Rr.current=dt.touches[0].clientX-io.current,T==null||T(dt)},[T]),Xa=F.useCallback(dt=>{if(R){const Gt=Rr.current;Math.abs(Gt)>Zse&&(Gt>0?Be(dt):de(dt))}b==="hover"&&bt.set(()=>{ke(!1)},g||void 0),N==null||N(dt)},[R,b,Be,de,bt,g,N]),th=g!=null&&!me&&!ge,iu=F.useRef();F.useEffect(()=>{var dt,Gt;if(!th)return;const Di=H?Be:de;return iu.current=window.setInterval(document.visibilityState?ft:Di,(dt=(Gt=Ye.current)!=null?Gt:g)!=null?dt:void 0),()=>{iu.current!==null&&clearInterval(iu.current)}},[th,Be,de,Ye,g,ft,H]);const Yc=F.useMemo(()=>l&&Array.from({length:Et},(dt,Gt)=>Di=>{d==null||d(Gt,Di)}),[l,Et,d]);return v.jsxs(i,{ref:Tt,...V,onKeyDown:Ii,onMouseOver:kr,onMouseOut:aa,onTouchStart:ai,onTouchMove:To,onTouchEnd:Xa,className:De(U,K,o&&"slide",a&&`${K}-fade`,W&&`${K}-${W}`),children:[l&&v.jsx("div",{className:`${K}-indicators`,children:db(B,(dt,Gt)=>v.jsx("button",{type:"button","data-bs-target":"","aria-label":u!=null&&u.length?u[Gt]:`Slide ${Gt+1}`,className:Gt===Me?"active":void 0,onClick:Yc?Yc[Gt]:void 0,"aria-current":Gt===Me},Gt))}),v.jsx("div",{className:`${K}-inner`,children:db(B,(dt,Gt)=>{const Di=Gt===Me;return o?v.jsx(T2,{in:Di,onEnter:Di?ir:void 0,onEntered:Di?Ys:void 0,addEndListener:R2,children:(sa,nh)=>F.cloneElement(dt,{...nh,className:De(dt.props.className,Di&&sa!=="entered"&&Yt,(sa==="entered"||sa==="exiting")&&"active",(sa==="entering"||sa==="exiting")&&vn)})}):F.cloneElement(dt,{className:De(dt.props.className,Di&&"active")})})}),s&&v.jsxs(v.Fragment,{children:[(k||c!==0)&&v.jsxs(kT,{className:`${K}-control-prev`,onClick:Be,children:[D,I&&v.jsx("span",{className:"visually-hidden",children:I})]}),(k||c!==Et-1)&&v.jsxs(kT,{className:`${K}-control-next`,onClick:de,children:[z,X&&v.jsx("span",{className:"visually-hidden",children:X})]})]})]})});LH.displayName="Carousel";const Kse=Object.assign(LH,{Caption:qse,Item:Vse});function Jse({as:e,bsPrefix:t,className:n,...i}){t=We(t,"col");const r=Y7(),o=Z7(),a=[],s=[];return r.forEach(l=>{const u=i[l];delete i[l];let c,d,h;typeof u=="object"&&u!=null?{span:c,offset:d,order:h}=u:c=u;const m=l!==o?`-${l}`:"";c&&a.push(c===!0?`${t}${m}`:`${t}${m}-${c}`),h!=null&&s.push(`order${m}-${h}`),d!=null&&s.push(`offset${m}-${d}`)}),[{...i,className:De(n,...a,...s)},{as:e,bsPrefix:t,spans:a}]}const jH=F.forwardRef((e,t)=>{const[{className:n,...i},{as:r="div",bsPrefix:o,spans:a}]=Jse(e);return v.jsx(r,{...i,ref:t,className:De(n,!a.length&&o)})});jH.displayName="Col";const zf=jH;var Qse=Function.prototype.bind.call(Function.prototype.call,[].slice);function vf(e,t){return Qse(e.querySelectorAll(t))}function ele(e,t,n){const i=F.useRef(e!==void 0),[r,o]=F.useState(t),a=e!==void 0,s=i.current;return i.current=a,!a&&s&&r!==t&&o(t),[a?e:r,F.useCallback((...l)=>{const[u,...c]=l;let d=n==null?void 0:n(u,...c);return o(u),d},[n])]}function tle(){const[,e]=F.useReducer(t=>!t,!1);return e}var r3=Object.prototype.hasOwnProperty;function o3(e,t,n){for(n of e.keys())if(H0(n,t))return n}function H0(e,t){var n,i,r;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((i=e.length)===t.length)for(;i--&&H0(e[i],t[i]););return i===-1}if(n===Set){if(e.size!==t.size)return!1;for(i of e)if(r=i,r&&typeof r=="object"&&(r=o3(t,r),!r)||!t.has(r))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(i of e)if(r=i[0],r&&typeof r=="object"&&(r=o3(t,r),!r)||!H0(i[1],t.get(r)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((i=e.byteLength)===t.byteLength)for(;i--&&e.getInt8(i)===t.getInt8(i););return i===-1}if(ArrayBuffer.isView(e)){if((i=e.byteLength)===t.byteLength)for(;i--&&e[i]===t[i];);return i===-1}if(!n||typeof e=="object"){i=0;for(n in e)if(r3.call(e,n)&&++i&&!r3.call(t,n)||!(n in t)||!H0(e[n],t[n]))return!1;return Object.keys(t).length===i}}return e!==e&&t!==t}function nle(e){const t=oP();return[e[0],F.useCallback(n=>{if(t())return e[1](n)},[t,e[1]])]}var Gr="top",Yo="bottom",Zo="right",qr="left",cP="auto",yv=[Gr,Yo,Zo,qr],Fp="start",ky="end",ile="clippingParents",zH="viewport",Rg="popper",rle="reference",a3=yv.reduce(function(e,t){return e.concat([t+"-"+Fp,t+"-"+ky])},[]),BH=[].concat(yv,[cP]).reduce(function(e,t){return e.concat([t,t+"-"+Fp,t+"-"+ky])},[]),ole="beforeRead",ale="read",sle="afterRead",lle="beforeMain",ule="main",cle="afterMain",fle="beforeWrite",dle="write",hle="afterWrite",ple=[ole,ale,sle,lle,ule,cle,fle,dle,hle];function xs(e){return e.split("-")[0]}function xo(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function od(e){var t=xo(e).Element;return e instanceof t||e instanceof Element}function _s(e){var t=xo(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function fP(e){if(typeof ShadowRoot>"u")return!1;var t=xo(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}var Bf=Math.max,hb=Math.min,Pp=Math.round;function TT(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function HH(){return!/^((?!chrome|android).)*safari/i.test(TT())}function Np(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var i=e.getBoundingClientRect(),r=1,o=1;t&&_s(e)&&(r=e.offsetWidth>0&&Pp(i.width)/e.offsetWidth||1,o=e.offsetHeight>0&&Pp(i.height)/e.offsetHeight||1);var a=od(e)?xo(e):window,s=a.visualViewport,l=!HH()&&n,u=(i.left+(l&&s?s.offsetLeft:0))/r,c=(i.top+(l&&s?s.offsetTop:0))/o,d=i.width/r,h=i.height/o;return{width:d,height:h,top:c,right:u+d,bottom:c+h,left:u,x:u,y:c}}function dP(e){var t=Np(e),n=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:i}}function UH(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&fP(n)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function sc(e){return e?(e.nodeName||"").toLowerCase():null}function Ll(e){return xo(e).getComputedStyle(e)}function mle(e){return["table","td","th"].indexOf(sc(e))>=0}function Pc(e){return((od(e)?e.ownerDocument:e.document)||window.document).documentElement}function F2(e){return sc(e)==="html"?e:e.assignedSlot||e.parentNode||(fP(e)?e.host:null)||Pc(e)}function s3(e){return!_s(e)||Ll(e).position==="fixed"?null:e.offsetParent}function gle(e){var t=/firefox/i.test(TT()),n=/Trident/i.test(TT());if(n&&_s(e)){var i=Ll(e);if(i.position==="fixed")return null}var r=F2(e);for(fP(r)&&(r=r.host);_s(r)&&["html","body"].indexOf(sc(r))<0;){var o=Ll(r);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none")return r;r=r.parentNode}return null}function vv(e){for(var t=xo(e),n=s3(e);n&&mle(n)&&Ll(n).position==="static";)n=s3(n);return n&&(sc(n)==="html"||sc(n)==="body"&&Ll(n).position==="static")?t:n||gle(e)||t}function hP(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function U0(e,t,n){return Bf(e,hb(t,n))}function yle(e,t,n){var i=U0(e,t,n);return i>n?n:i}function WH(){return{top:0,right:0,bottom:0,left:0}}function GH(e){return Object.assign({},WH(),e)}function qH(e,t){return t.reduce(function(n,i){return n[i]=e,n},{})}var vle=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,GH(typeof t!="number"?t:qH(t,yv))};function xle(e){var t,n=e.state,i=e.name,r=e.options,o=n.elements.arrow,a=n.modifiersData.popperOffsets,s=xs(n.placement),l=hP(s),u=[qr,Zo].indexOf(s)>=0,c=u?"height":"width";if(!(!o||!a)){var d=vle(r.padding,n),h=dP(o),m=l==="y"?Gr:qr,g=l==="y"?Yo:Zo,y=n.rects.reference[c]+n.rects.reference[l]-a[l]-n.rects.popper[c],x=a[l]-n.rects.reference[l],b=vv(o),w=b?l==="y"?b.clientHeight||0:b.clientWidth||0:0,S=y/2-x/2,k=d[m],R=w-h[c]-d[g],M=w/2-h[c]/2+S,T=U0(k,M,R),N=l;n.modifiersData[i]=(t={},t[N]=T,t.centerOffset=T-M,t)}}function _le(e){var t=e.state,n=e.options,i=n.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=t.elements.popper.querySelector(r),!r)||UH(t.elements.popper,r)&&(t.elements.arrow=r))}const ble={name:"arrow",enabled:!0,phase:"main",fn:xle,effect:_le,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function $p(e){return e.split("-")[1]}var wle={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Sle(e,t){var n=e.x,i=e.y,r=t.devicePixelRatio||1;return{x:Pp(n*r)/r||0,y:Pp(i*r)/r||0}}function l3(e){var t,n=e.popper,i=e.popperRect,r=e.placement,o=e.variation,a=e.offsets,s=e.position,l=e.gpuAcceleration,u=e.adaptive,c=e.roundOffsets,d=e.isFixed,h=a.x,m=h===void 0?0:h,g=a.y,y=g===void 0?0:g,x=typeof c=="function"?c({x:m,y}):{x:m,y};m=x.x,y=x.y;var b=a.hasOwnProperty("x"),w=a.hasOwnProperty("y"),S=qr,k=Gr,R=window;if(u){var M=vv(n),T="clientHeight",N="clientWidth";if(M===xo(n)&&(M=Pc(n),Ll(M).position!=="static"&&s==="absolute"&&(T="scrollHeight",N="scrollWidth")),M=M,r===Gr||(r===qr||r===Zo)&&o===ky){k=Yo;var D=d&&M===R&&R.visualViewport?R.visualViewport.height:M[T];y-=D-i.height,y*=l?1:-1}if(r===qr||(r===Gr||r===Yo)&&o===ky){S=Zo;var I=d&&M===R&&R.visualViewport?R.visualViewport.width:M[N];m-=I-i.width,m*=l?1:-1}}var z=Object.assign({position:s},u&&wle),X=c===!0?Sle({x:m,y},xo(n)):{x:m,y};if(m=X.x,y=X.y,l){var W;return Object.assign({},z,(W={},W[k]=w?"0":"",W[S]=b?"0":"",W.transform=(R.devicePixelRatio||1)<=1?"translate("+m+"px, "+y+"px)":"translate3d("+m+"px, "+y+"px, 0)",W))}return Object.assign({},z,(t={},t[k]=w?y+"px":"",t[S]=b?m+"px":"",t.transform="",t))}function Cle(e){var t=e.state,n=e.options,i=n.gpuAcceleration,r=i===void 0?!0:i,o=n.adaptive,a=o===void 0?!0:o,s=n.roundOffsets,l=s===void 0?!0:s,u={placement:xs(t.placement),variation:$p(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,l3(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,l3(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const Ele={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Cle,data:{}};var lx={passive:!0};function kle(e){var t=e.state,n=e.instance,i=e.options,r=i.scroll,o=r===void 0?!0:r,a=i.resize,s=a===void 0?!0:a,l=xo(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&u.forEach(function(c){c.addEventListener("scroll",n.update,lx)}),s&&l.addEventListener("resize",n.update,lx),function(){o&&u.forEach(function(c){c.removeEventListener("scroll",n.update,lx)}),s&&l.removeEventListener("resize",n.update,lx)}}const Rle={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:kle,data:{}};var Tle={left:"right",right:"left",bottom:"top",top:"bottom"};function f_(e){return e.replace(/left|right|bottom|top/g,function(t){return Tle[t]})}var Ale={start:"end",end:"start"};function u3(e){return e.replace(/start|end/g,function(t){return Ale[t]})}function pP(e){var t=xo(e),n=t.pageXOffset,i=t.pageYOffset;return{scrollLeft:n,scrollTop:i}}function mP(e){return Np(Pc(e)).left+pP(e).scrollLeft}function Mle(e,t){var n=xo(e),i=Pc(e),r=n.visualViewport,o=i.clientWidth,a=i.clientHeight,s=0,l=0;if(r){o=r.width,a=r.height;var u=HH();(u||!u&&t==="fixed")&&(s=r.offsetLeft,l=r.offsetTop)}return{width:o,height:a,x:s+mP(e),y:l}}function Fle(e){var t,n=Pc(e),i=pP(e),r=(t=e.ownerDocument)==null?void 0:t.body,o=Bf(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),a=Bf(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),s=-i.scrollLeft+mP(e),l=-i.scrollTop;return Ll(r||n).direction==="rtl"&&(s+=Bf(n.clientWidth,r?r.clientWidth:0)-o),{width:o,height:a,x:s,y:l}}function gP(e){var t=Ll(e),n=t.overflow,i=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function VH(e){return["html","body","#document"].indexOf(sc(e))>=0?e.ownerDocument.body:_s(e)&&gP(e)?e:VH(F2(e))}function W0(e,t){var n;t===void 0&&(t=[]);var i=VH(e),r=i===((n=e.ownerDocument)==null?void 0:n.body),o=xo(i),a=r?[o].concat(o.visualViewport||[],gP(i)?i:[]):i,s=t.concat(a);return r?s:s.concat(W0(F2(a)))}function AT(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Ple(e,t){var n=Np(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function c3(e,t,n){return t===zH?AT(Mle(e,n)):od(t)?Ple(t,n):AT(Fle(Pc(e)))}function Nle(e){var t=W0(F2(e)),n=["absolute","fixed"].indexOf(Ll(e).position)>=0,i=n&&_s(e)?vv(e):e;return od(i)?t.filter(function(r){return od(r)&&UH(r,i)&&sc(r)!=="body"}):[]}function $le(e,t,n,i){var r=t==="clippingParents"?Nle(e):[].concat(t),o=[].concat(r,[n]),a=o[0],s=o.reduce(function(l,u){var c=c3(e,u,i);return l.top=Bf(c.top,l.top),l.right=hb(c.right,l.right),l.bottom=hb(c.bottom,l.bottom),l.left=Bf(c.left,l.left),l},c3(e,a,i));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function YH(e){var t=e.reference,n=e.element,i=e.placement,r=i?xs(i):null,o=i?$p(i):null,a=t.x+t.width/2-n.width/2,s=t.y+t.height/2-n.height/2,l;switch(r){case Gr:l={x:a,y:t.y-n.height};break;case Yo:l={x:a,y:t.y+t.height};break;case Zo:l={x:t.x+t.width,y:s};break;case qr:l={x:t.x-n.width,y:s};break;default:l={x:t.x,y:t.y}}var u=r?hP(r):null;if(u!=null){var c=u==="y"?"height":"width";switch(o){case Fp:l[u]=l[u]-(t[c]/2-n[c]/2);break;case ky:l[u]=l[u]+(t[c]/2-n[c]/2);break}}return l}function Ry(e,t){t===void 0&&(t={});var n=t,i=n.placement,r=i===void 0?e.placement:i,o=n.strategy,a=o===void 0?e.strategy:o,s=n.boundary,l=s===void 0?ile:s,u=n.rootBoundary,c=u===void 0?zH:u,d=n.elementContext,h=d===void 0?Rg:d,m=n.altBoundary,g=m===void 0?!1:m,y=n.padding,x=y===void 0?0:y,b=GH(typeof x!="number"?x:qH(x,yv)),w=h===Rg?rle:Rg,S=e.rects.popper,k=e.elements[g?w:h],R=$le(od(k)?k:k.contextElement||Pc(e.elements.popper),l,c,a),M=Np(e.elements.reference),T=YH({reference:M,element:S,strategy:"absolute",placement:r}),N=AT(Object.assign({},S,T)),D=h===Rg?N:M,I={top:R.top-D.top+b.top,bottom:D.bottom-R.bottom+b.bottom,left:R.left-D.left+b.left,right:D.right-R.right+b.right},z=e.modifiersData.offset;if(h===Rg&&z){var X=z[r];Object.keys(I).forEach(function(W){var U=[Zo,Yo].indexOf(W)>=0?1:-1,B=[Gr,Yo].indexOf(W)>=0?"y":"x";I[W]+=X[B]*U})}return I}function Ole(e,t){t===void 0&&(t={});var n=t,i=n.placement,r=n.boundary,o=n.rootBoundary,a=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,u=l===void 0?BH:l,c=$p(i),d=c?s?a3:a3.filter(function(g){return $p(g)===c}):yv,h=d.filter(function(g){return u.indexOf(g)>=0});h.length===0&&(h=d);var m=h.reduce(function(g,y){return g[y]=Ry(e,{placement:y,boundary:r,rootBoundary:o,padding:a})[xs(y)],g},{});return Object.keys(m).sort(function(g,y){return m[g]-m[y]})}function Ile(e){if(xs(e)===cP)return[];var t=f_(e);return[u3(e),t,u3(t)]}function Dle(e){var t=e.state,n=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var r=n.mainAxis,o=r===void 0?!0:r,a=n.altAxis,s=a===void 0?!0:a,l=n.fallbackPlacements,u=n.padding,c=n.boundary,d=n.rootBoundary,h=n.altBoundary,m=n.flipVariations,g=m===void 0?!0:m,y=n.allowedAutoPlacements,x=t.options.placement,b=xs(x),w=b===x,S=l||(w||!g?[f_(x)]:Ile(x)),k=[x].concat(S).reduce(function(ge,Se){return ge.concat(xs(Se)===cP?Ole(t,{placement:Se,boundary:c,rootBoundary:d,padding:u,flipVariations:g,allowedAutoPlacements:y}):Se)},[]),R=t.rects.reference,M=t.rects.popper,T=new Map,N=!0,D=k[0],I=0;I<k.length;I++){var z=k[I],X=xs(z),W=$p(z)===Fp,U=[Gr,Yo].indexOf(X)>=0,B=U?"width":"height",V=Ry(t,{placement:z,boundary:c,rootBoundary:d,altBoundary:h,padding:u}),K=U?W?Zo:qr:W?Yo:Gr;R[B]>M[B]&&(K=f_(K));var H=f_(K),J=[];if(o&&J.push(V[X]<=0),s&&J.push(V[K]<=0,V[H]<=0),J.every(function(ge){return ge})){D=z,N=!1;break}T.set(z,J)}if(N)for(var Q=g?3:1,oe=function(Se){var Me=k.find(function(It){var Et=T.get(It);if(Et)return Et.slice(0,Se).every(function(Re){return Re})});if(Me)return D=Me,"break"},me=Q;me>0;me--){var ke=oe(me);if(ke==="break")break}t.placement!==D&&(t.modifiersData[i]._skip=!0,t.placement=D,t.reset=!0)}}const Lle={name:"flip",enabled:!0,phase:"main",fn:Dle,requiresIfExists:["offset"],data:{_skip:!1}};function f3(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function d3(e){return[Gr,Zo,Yo,qr].some(function(t){return e[t]>=0})}function jle(e){var t=e.state,n=e.name,i=t.rects.reference,r=t.rects.popper,o=t.modifiersData.preventOverflow,a=Ry(t,{elementContext:"reference"}),s=Ry(t,{altBoundary:!0}),l=f3(a,i),u=f3(s,r,o),c=d3(l),d=d3(u);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}const zle={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:jle};function Ble(e,t,n){var i=xs(e),r=[qr,Gr].indexOf(i)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,a=o[0],s=o[1];return a=a||0,s=(s||0)*r,[qr,Zo].indexOf(i)>=0?{x:s,y:a}:{x:a,y:s}}function Hle(e){var t=e.state,n=e.options,i=e.name,r=n.offset,o=r===void 0?[0,0]:r,a=BH.reduce(function(c,d){return c[d]=Ble(d,t.rects,o),c},{}),s=a[t.placement],l=s.x,u=s.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=u),t.modifiersData[i]=a}const Ule={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Hle};function Wle(e){var t=e.state,n=e.name;t.modifiersData[n]=YH({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const Gle={name:"popperOffsets",enabled:!0,phase:"read",fn:Wle,data:{}};function qle(e){return e==="x"?"y":"x"}function Vle(e){var t=e.state,n=e.options,i=e.name,r=n.mainAxis,o=r===void 0?!0:r,a=n.altAxis,s=a===void 0?!1:a,l=n.boundary,u=n.rootBoundary,c=n.altBoundary,d=n.padding,h=n.tether,m=h===void 0?!0:h,g=n.tetherOffset,y=g===void 0?0:g,x=Ry(t,{boundary:l,rootBoundary:u,padding:d,altBoundary:c}),b=xs(t.placement),w=$p(t.placement),S=!w,k=hP(b),R=qle(k),M=t.modifiersData.popperOffsets,T=t.rects.reference,N=t.rects.popper,D=typeof y=="function"?y(Object.assign({},t.rects,{placement:t.placement})):y,I=typeof D=="number"?{mainAxis:D,altAxis:D}:Object.assign({mainAxis:0,altAxis:0},D),z=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,X={x:0,y:0};if(M){if(o){var W,U=k==="y"?Gr:qr,B=k==="y"?Yo:Zo,V=k==="y"?"height":"width",K=M[k],H=K+x[U],J=K-x[B],Q=m?-N[V]/2:0,oe=w===Fp?T[V]:N[V],me=w===Fp?-N[V]:-T[V],ke=t.elements.arrow,ge=m&&ke?dP(ke):{width:0,height:0},Se=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:WH(),Me=Se[U],It=Se[B],Et=U0(0,T[V],ge[V]),Re=S?T[V]/2-Q-Et-Me-I.mainAxis:oe-Et-Me-I.mainAxis,Ye=S?-T[V]/2+Q+Et+It+I.mainAxis:me+Et+It+I.mainAxis,Be=t.elements.arrow&&vv(t.elements.arrow),de=Be?k==="y"?Be.clientTop||0:Be.clientLeft||0:0,Tt=(W=z==null?void 0:z[k])!=null?W:0,ft=K+Re-Tt-de,tt=K+Ye-Tt,Yt=U0(m?hb(H,ft):H,K,m?Bf(J,tt):J);M[k]=Yt,X[k]=Yt-K}if(s){var vn,ir=k==="x"?Gr:qr,Ys=k==="x"?Yo:Zo,Ii=M[R],kr=R==="y"?"height":"width",aa=Ii+x[ir],io=Ii-x[Ys],Rr=[Gr,qr].indexOf(b)!==-1,bt=(vn=z==null?void 0:z[R])!=null?vn:0,ai=Rr?aa:Ii-T[kr]-N[kr]-bt+I.altAxis,To=Rr?Ii+T[kr]+N[kr]-bt-I.altAxis:io,Xa=m&&Rr?yle(ai,Ii,To):U0(m?ai:aa,Ii,m?To:io);M[R]=Xa,X[R]=Xa-Ii}t.modifiersData[i]=X}}const Yle={name:"preventOverflow",enabled:!0,phase:"main",fn:Vle,requiresIfExists:["offset"]};function Zle(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Xle(e){return e===xo(e)||!_s(e)?pP(e):Zle(e)}function Kle(e){var t=e.getBoundingClientRect(),n=Pp(t.width)/e.offsetWidth||1,i=Pp(t.height)/e.offsetHeight||1;return n!==1||i!==1}function Jle(e,t,n){n===void 0&&(n=!1);var i=_s(t),r=_s(t)&&Kle(t),o=Pc(t),a=Np(e,r,n),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!n)&&((sc(t)!=="body"||gP(o))&&(s=Xle(t)),_s(t)?(l=Np(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):o&&(l.x=mP(o))),{x:a.left+s.scrollLeft-l.x,y:a.top+s.scrollTop-l.y,width:a.width,height:a.height}}function Qle(e){var t=new Map,n=new Set,i=[];e.forEach(function(o){t.set(o.name,o)});function r(o){n.add(o.name);var a=[].concat(o.requires||[],o.requiresIfExists||[]);a.forEach(function(s){if(!n.has(s)){var l=t.get(s);l&&r(l)}}),i.push(o)}return e.forEach(function(o){n.has(o.name)||r(o)}),i}function eue(e){var t=Qle(e);return ple.reduce(function(n,i){return n.concat(t.filter(function(r){return r.phase===i}))},[])}function tue(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function nue(e){var t=e.reduce(function(n,i){var r=n[i.name];return n[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,n},{});return Object.keys(t).map(function(n){return t[n]})}var h3={placement:"bottom",modifiers:[],strategy:"absolute"};function p3(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function iue(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,i=n===void 0?[]:n,r=t.defaultOptions,o=r===void 0?h3:r;return function(s,l,u){u===void 0&&(u=o);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},h3,o),modifiersData:{},elements:{reference:s,popper:l},attributes:{},styles:{}},d=[],h=!1,m={state:c,setOptions:function(b){var w=typeof b=="function"?b(c.options):b;y(),c.options=Object.assign({},o,c.options,w),c.scrollParents={reference:od(s)?W0(s):s.contextElement?W0(s.contextElement):[],popper:W0(l)};var S=eue(nue([].concat(i,c.options.modifiers)));return c.orderedModifiers=S.filter(function(k){return k.enabled}),g(),m.update()},forceUpdate:function(){if(!h){var b=c.elements,w=b.reference,S=b.popper;if(p3(w,S)){c.rects={reference:Jle(w,vv(S),c.options.strategy==="fixed"),popper:dP(S)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(I){return c.modifiersData[I.name]=Object.assign({},I.data)});for(var k=0;k<c.orderedModifiers.length;k++){if(c.reset===!0){c.reset=!1,k=-1;continue}var R=c.orderedModifiers[k],M=R.fn,T=R.options,N=T===void 0?{}:T,D=R.name;typeof M=="function"&&(c=M({state:c,options:N,name:D,instance:m})||c)}}}},update:tue(function(){return new Promise(function(x){m.forceUpdate(),x(c)})}),destroy:function(){y(),h=!0}};if(!p3(s,l))return m;m.setOptions(u).then(function(x){!h&&u.onFirstUpdate&&u.onFirstUpdate(x)});function g(){c.orderedModifiers.forEach(function(x){var b=x.name,w=x.options,S=w===void 0?{}:w,k=x.effect;if(typeof k=="function"){var R=k({state:c,name:b,instance:m,options:S}),M=function(){};d.push(R||M)}})}function y(){d.forEach(function(x){return x()}),d=[]}return m}}const rue=iue({defaultModifiers:[zle,Gle,Ele,Rle,Ule,Lle,Yle,ble]}),oue=["enabled","placement","strategy","modifiers"];function aue(e,t){if(e==null)return{};var n={},i=Object.keys(e),r,o;for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}const sue={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},lue={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:e})=>()=>{const{reference:t,popper:n}=e.elements;if("removeAttribute"in t){const i=(t.getAttribute("aria-describedby")||"").split(",").filter(r=>r.trim()!==n.id);i.length?t.setAttribute("aria-describedby",i.join(",")):t.removeAttribute("aria-describedby")}},fn:({state:e})=>{var t;const{popper:n,reference:i}=e.elements,r=(t=n.getAttribute("role"))==null?void 0:t.toLowerCase();if(n.id&&r==="tooltip"&&"setAttribute"in i){const o=i.getAttribute("aria-describedby");if(o&&o.split(",").indexOf(n.id)!==-1)return;i.setAttribute("aria-describedby",o?`${o},${n.id}`:n.id)}}},uue=[];function cue(e,t,n={}){let{enabled:i=!0,placement:r="bottom",strategy:o="absolute",modifiers:a=uue}=n,s=aue(n,oue);const l=F.useRef(a),u=F.useRef(),c=F.useCallback(()=>{var x;(x=u.current)==null||x.update()},[]),d=F.useCallback(()=>{var x;(x=u.current)==null||x.forceUpdate()},[]),[h,m]=nle(F.useState({placement:r,update:c,forceUpdate:d,attributes:{},styles:{popper:{},arrow:{}}})),g=F.useMemo(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:x})=>{const b={},w={};Object.keys(x.elements).forEach(S=>{b[S]=x.styles[S],w[S]=x.attributes[S]}),m({state:x,styles:b,attributes:w,update:c,forceUpdate:d,placement:x.placement})}}),[c,d,m]),y=F.useMemo(()=>(H0(l.current,a)||(l.current=a),l.current),[a]);return F.useEffect(()=>{!u.current||!i||u.current.setOptions({placement:r,strategy:o,modifiers:[...y,g,sue]})},[o,r,g,i,y]),F.useEffect(()=>{if(!(!i||e==null||t==null))return u.current=rue(e,t,Object.assign({},s,{placement:r,strategy:o,modifiers:[...y,lue,g]})),()=>{u.current!=null&&(u.current.destroy(),u.current=void 0,m(x=>Object.assign({},x,{attributes:{},styles:{popper:{}}})))}},[i,e,t]),h}function Ty(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16)}var fue=function(){},due=fue;const hue=Md(due),m3=()=>{};function pue(e){return e.button===0}function mue(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}const d_=e=>e&&("current"in e?e.current:e),g3={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function gue(e,t=m3,{disabled:n,clickTrigger:i="click"}={}){const r=F.useRef(!1),o=F.useRef(!1),a=F.useCallback(u=>{const c=d_(e);hue(!!c,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),r.current=!c||mue(u)||!pue(u)||!!Ty(c,u.target)||o.current,o.current=!1},[e]),s=Vn(u=>{const c=d_(e);c&&Ty(c,u.target)&&(o.current=!0)}),l=Vn(u=>{r.current||t(u)});F.useEffect(()=>{var u,c;if(n||e==null)return;const d=vm(d_(e)),h=d.defaultView||window;let m=(u=h.event)!=null?u:(c=h.parent)==null?void 0:c.event,g=null;g3[i]&&(g=yl(d,g3[i],s,!0));const y=yl(d,i,a,!0),x=yl(d,i,w=>{if(w===m){m=void 0;return}l(w)});let b=[];return"ontouchstart"in d.documentElement&&(b=[].slice.call(d.body.children).map(w=>yl(w,"mousemove",m3))),()=>{g==null||g(),y(),x(),b.forEach(w=>w())}},[e,n,i,a,s,l])}function yue(e){const t={};return Array.isArray(e)?(e==null||e.forEach(n=>{t[n.name]=n}),t):e||t}function vue(e={}){return Array.isArray(e)?e:Object.keys(e).map(t=>(e[t].name=t,e[t]))}function xue({enabled:e,enableEvents:t,placement:n,flip:i,offset:r,fixed:o,containerPadding:a,arrowElement:s,popperConfig:l={}}){var u,c,d,h,m;const g=yue(l.modifiers);return Object.assign({},l,{placement:n,enabled:e,strategy:o?"fixed":l.strategy,modifiers:vue(Object.assign({},g,{eventListeners:{enabled:t,options:(u=g.eventListeners)==null?void 0:u.options},preventOverflow:Object.assign({},g.preventOverflow,{options:a?Object.assign({padding:a},(c=g.preventOverflow)==null?void 0:c.options):(d=g.preventOverflow)==null?void 0:d.options}),offset:{options:Object.assign({offset:r},(h=g.offset)==null?void 0:h.options)},arrow:Object.assign({},g.arrow,{enabled:!!s,options:Object.assign({},(m=g.arrow)==null?void 0:m.options,{element:s})}),flip:Object.assign({enabled:!!i},g.flip)}))})}const pb={prefix:String(Math.round(Math.random()*1e10)),current:0},ZH=Nt.createContext(pb),_ue=Nt.createContext(!1);let bue=!!(typeof window<"u"&&window.document&&window.document.createElement),WE=new WeakMap;function wue(e=!1){let t=F.useContext(ZH),n=F.useRef(null);if(n.current===null&&!e){var i,r;let o=(r=Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||r===void 0||(i=r.ReactCurrentOwner)===null||i===void 0?void 0:i.current;if(o){let a=WE.get(o);a==null?WE.set(o,{id:t.current,state:o.memoizedState}):o.memoizedState!==a.state&&(t.current=a.id,WE.delete(o))}n.current=++t.current}return n.current}function Sue(e){let t=F.useContext(ZH);t===pb&&!bue&&console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let n=wue(!!e),i=`react-aria${t.prefix}`;return e||`${i}-${n}`}function Cue(e){let t=Nt.useId(),[n]=F.useState(Aue()),i=n?"react-aria":`react-aria${pb.prefix}`;return e||`${i}-${t}`}const Eue=typeof Nt.useId=="function"?Cue:Sue;function kue(){return!1}function Rue(){return!0}function Tue(e){return()=>{}}function Aue(){return typeof Nt.useSyncExternalStore=="function"?Nt.useSyncExternalStore(Tue,kue,Rue):F.useContext(_ue)}const Mue=F.createContext(null),Ay=(e,t=null)=>e!=null?String(e):t||null,ad=Mue,XH=F.createContext(null);XH.displayName="NavContext";const KH=XH,Fue="data-rr-ui-",Pue="rrUi";function P2(e){return`${Fue}${e}`}function Nue(e){return`${Pue}${e}`}const JH=F.createContext(xm?window:void 0);JH.Provider;function yP(){return F.useContext(JH)}const QH=F.createContext(null);QH.displayName="NavbarContext";const _m=QH;bn.string,bn.bool,bn.bool,bn.bool,bn.bool;const eU=F.forwardRef(({bsPrefix:e,className:t,fluid:n=!1,rounded:i=!1,roundedCircle:r=!1,thumbnail:o=!1,...a},s)=>(e=We(e,"img"),v.jsx("img",{ref:s,...a,className:De(t,n&&`${e}-fluid`,i&&"rounded",r&&"rounded-circle",o&&`${e}-thumbnail`)})));eU.displayName="Image";const $ue=eU,Oue={type:bn.string,tooltip:bn.bool,as:bn.elementType},vP=F.forwardRef(({as:e="div",className:t,type:n="valid",tooltip:i=!1,...r},o)=>v.jsx(e,{...r,ref:o,className:De(t,`${n}-${i?"tooltip":"feedback"}`)}));vP.displayName="Feedback";vP.propTypes=Oue;const tU=vP,Iue=F.createContext({}),jl=Iue,nU=F.forwardRef(({id:e,bsPrefix:t,className:n,type:i="checkbox",isValid:r=!1,isInvalid:o=!1,as:a="input",...s},l)=>{const{controlId:u}=F.useContext(jl);return t=We(t,"form-check-input"),v.jsx(a,{...s,ref:l,type:i,id:e||u,className:De(n,t,r&&"is-valid",o&&"is-invalid")})});nU.displayName="FormCheckInput";const iU=nU,rU=F.forwardRef(({bsPrefix:e,className:t,htmlFor:n,...i},r)=>{const{controlId:o}=F.useContext(jl);return e=We(e,"form-check-label"),v.jsx("label",{...i,ref:r,htmlFor:n||o,className:De(t,e)})});rU.displayName="FormCheckLabel";const MT=rU,oU=F.forwardRef(({id:e,bsPrefix:t,bsSwitchPrefix:n,inline:i=!1,reverse:r=!1,disabled:o=!1,isValid:a=!1,isInvalid:s=!1,feedbackTooltip:l=!1,feedback:u,feedbackType:c,className:d,style:h,title:m="",type:g="checkbox",label:y,children:x,as:b="input",...w},S)=>{t=We(t,"form-check"),n=We(n,"form-switch");const{controlId:k}=F.useContext(jl),R=F.useMemo(()=>({controlId:e||k}),[k,e]),M=!x&&y!=null&&y!==!1||Yse(x,MT),T=v.jsx(iU,{...w,type:g==="switch"?"checkbox":g,ref:S,isValid:a,isInvalid:s,disabled:o,as:b});return v.jsx(jl.Provider,{value:R,children:v.jsx("div",{style:h,className:De(d,M&&t,i&&`${t}-inline`,r&&`${t}-reverse`,g==="switch"&&n),children:x||v.jsxs(v.Fragment,{children:[T,M&&v.jsx(MT,{title:m,children:y}),u&&v.jsx(tU,{type:c,tooltip:l,children:u})]})})})});oU.displayName="FormCheck";const mb=Object.assign(oU,{Input:iU,Label:MT}),aU=F.forwardRef(({bsPrefix:e,type:t,size:n,htmlSize:i,id:r,className:o,isValid:a=!1,isInvalid:s=!1,plaintext:l,readOnly:u,as:c="input",...d},h)=>{const{controlId:m}=F.useContext(jl);return e=We(e,"form-control"),v.jsx(c,{...d,type:t,size:i,ref:h,readOnly:u,id:r||m,className:De(o,l?`${e}-plaintext`:e,n&&`${e}-${n}`,t==="color"&&`${e}-color`,a&&"is-valid",s&&"is-invalid")})});aU.displayName="FormControl";const Due=Object.assign(aU,{Feedback:tU}),sU=F.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},r)=>(t=We(t,"form-floating"),v.jsx(n,{ref:r,className:De(e,t),...i})));sU.displayName="FormFloating";const Lue=sU,lU=F.forwardRef(({controlId:e,as:t="div",...n},i)=>{const r=F.useMemo(()=>({controlId:e}),[e]);return v.jsx(jl.Provider,{value:r,children:v.jsx(t,{...n,ref:i})})});lU.displayName="FormGroup";const uU=lU,cU=F.forwardRef(({as:e="label",bsPrefix:t,column:n=!1,visuallyHidden:i=!1,className:r,htmlFor:o,...a},s)=>{const{controlId:l}=F.useContext(jl);t=We(t,"form-label");let u="col-form-label";typeof n=="string"&&(u=`${u} ${u}-${n}`);const c=De(r,t,i&&"visually-hidden",n&&u);return o=o||l,n?v.jsx(zf,{ref:s,as:"label",className:c,htmlFor:o,...a}):v.jsx(e,{ref:s,className:c,htmlFor:o,...a})});cU.displayName="FormLabel";const jue=cU,fU=F.forwardRef(({bsPrefix:e,className:t,id:n,...i},r)=>{const{controlId:o}=F.useContext(jl);return e=We(e,"form-range"),v.jsx("input",{...i,type:"range",ref:r,className:De(t,e),id:n||o})});fU.displayName="FormRange";const zue=fU,dU=F.forwardRef(({bsPrefix:e,size:t,htmlSize:n,className:i,isValid:r=!1,isInvalid:o=!1,id:a,...s},l)=>{const{controlId:u}=F.useContext(jl);return e=We(e,"form-select"),v.jsx("select",{...s,size:n,ref:l,className:De(i,e,t&&`${e}-${t}`,r&&"is-valid",o&&"is-invalid"),id:a||u})});dU.displayName="FormSelect";const Bue=dU,hU=F.forwardRef(({bsPrefix:e,className:t,as:n="small",muted:i,...r},o)=>(e=We(e,"form-text"),v.jsx(n,{...r,ref:o,className:De(t,e,i&&"text-muted")})));hU.displayName="FormText";const Hue=hU,pU=F.forwardRef((e,t)=>v.jsx(mb,{...e,ref:t,type:"switch"}));pU.displayName="Switch";const Uue=Object.assign(pU,{Input:mb.Input,Label:mb.Label}),mU=F.forwardRef(({bsPrefix:e,className:t,children:n,controlId:i,label:r,...o},a)=>(e=We(e,"form-floating"),v.jsxs(uU,{ref:a,className:De(t,e),controlId:i,...o,children:[n,v.jsx("label",{htmlFor:i,children:r})]})));mU.displayName="FloatingLabel";const Wue=mU,Gue={_ref:bn.any,validated:bn.bool,as:bn.elementType},xP=F.forwardRef(({className:e,validated:t,as:n="form",...i},r)=>v.jsx(n,{...i,ref:r,className:De(e,t&&"was-validated")}));xP.displayName="Form";xP.propTypes=Gue;const qt=Object.assign(xP,{Group:uU,Control:Due,Floating:Lue,Check:mb,Switch:Uue,Label:jue,Text:Hue,Range:zue,Select:Bue,FloatingLabel:Wue}),que=F.createContext(null),bm=que,Vue=["as","active","eventKey"];function Yue(e,t){if(e==null)return{};var n={},i=Object.keys(e),r,o;for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function gU({key:e,onClick:t,active:n,id:i,role:r,disabled:o}){const a=F.useContext(ad),s=F.useContext(KH),l=F.useContext(bm);let u=n;const c={role:r};if(s){!r&&s.role==="tablist"&&(c.role="tab");const d=s.getControllerId(e??null),h=s.getControlledId(e??null);c[P2("event-key")]=e,c.id=d||i,u=n==null&&e!=null?s.activeKey===e:n,(u||!(l!=null&&l.unmountOnExit)&&!(l!=null&&l.mountOnEnter))&&(c["aria-controls"]=h)}return c.role==="tab"&&(c["aria-selected"]=u,u||(c.tabIndex=-1),o&&(c.tabIndex=-1,c["aria-disabled"]=!0)),c.onClick=Vn(d=>{o||(t==null||t(d),e!=null&&a&&!d.isPropagationStopped()&&a(e,d))}),[c,{isActive:u}]}const yU=F.forwardRef((e,t)=>{let{as:n=mH,active:i,eventKey:r}=e,o=Yue(e,Vue);const[a,s]=gU(Object.assign({key:Ay(r,o.href),active:i},o));return a[P2("active")]=s.isActive,v.jsx(n,Object.assign({},o,a,{ref:t}))});yU.displayName="NavItem";const Zue=yU,Xue=["as","onSelect","activeKey","role","onKeyDown"];function Kue(e,t){if(e==null)return{};var n={},i=Object.keys(e),r,o;for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}const y3=()=>{},v3=P2("event-key"),vU=F.forwardRef((e,t)=>{let{as:n="div",onSelect:i,activeKey:r,role:o,onKeyDown:a}=e,s=Kue(e,Xue);const l=tle(),u=F.useRef(!1),c=F.useContext(ad),d=F.useContext(bm);let h,m;d&&(o=o||"tablist",r=d.activeKey,h=d.getControlledId,m=d.getControllerId);const g=F.useRef(null),y=S=>{const k=g.current;if(!k)return null;const R=vf(k,`[${v3}]:not([aria-disabled=true])`),M=k.querySelector("[aria-selected=true]");if(!M||M!==document.activeElement)return null;const T=R.indexOf(M);if(T===-1)return null;let N=T+S;return N>=R.length&&(N=0),N<0&&(N=R.length-1),R[N]},x=(S,k)=>{S!=null&&(i==null||i(S,k),c==null||c(S,k))},b=S=>{if(a==null||a(S),!d)return;let k;switch(S.key){case"ArrowLeft":case"ArrowUp":k=y(-1);break;case"ArrowRight":case"ArrowDown":k=y(1);break;default:return}k&&(S.preventDefault(),x(k.dataset[Nue("EventKey")]||null,S),u.current=!0,l())};F.useEffect(()=>{if(g.current&&u.current){const S=g.current.querySelector(`[${v3}][aria-selected=true]`);S==null||S.focus()}u.current=!1});const w=Fc(t,g);return v.jsx(ad.Provider,{value:x,children:v.jsx(KH.Provider,{value:{role:o,activeKey:Ay(r),getControlledId:h||y3,getControllerId:m||y3},children:v.jsx(n,Object.assign({},s,{onKeyDown:b,ref:w,role:o}))})})});vU.displayName="Nav";const Jue=Object.assign(vU,{Item:Zue});var ux;function x3(e){if((!ux&&ux!==0||e)&&xm){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),ux=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return ux}function GE(e){e===void 0&&(e=vm());try{var t=e.activeElement;return!t||!t.nodeName?null:t}catch{return e.body}}function Que(e=document){const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}const _3=P2("modal-open");class ece{constructor({ownerDocument:t,handleContainerOverflow:n=!0,isRTL:i=!1}={}){this.handleContainerOverflow=n,this.isRTL=i,this.modals=[],this.ownerDocument=t}getScrollbarWidth(){return Que(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(t){}removeModalAttributes(t){}setContainerStyle(t){const n={overflow:"hidden"},i=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();t.style={overflow:r.style.overflow,[i]:r.style[i]},t.scrollBarWidth&&(n[i]=`${parseInt(El(r,i)||"0",10)+t.scrollBarWidth}px`),r.setAttribute(_3,""),El(r,n)}reset(){[...this.modals].forEach(t=>this.remove(t))}removeContainerStyle(t){const n=this.getElement();n.removeAttribute(_3),Object.assign(n.style,t.style)}add(t){let n=this.modals.indexOf(t);return n!==-1||(n=this.modals.length,this.modals.push(t),this.setModalAttributes(t),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(t){const n=this.modals.indexOf(t);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(t))}isTopModal(t){return!!this.modals.length&&this.modals[this.modals.length-1]===t}}const _P=ece,qE=(e,t)=>xm?e==null?(t||vm()).body:(typeof e=="function"&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;function FT(e,t){const n=yP(),[i,r]=F.useState(()=>qE(e,n==null?void 0:n.document));if(!i){const o=qE(e);o&&r(o)}return F.useEffect(()=>{t&&i&&t(i)},[t,i]),F.useEffect(()=>{const o=qE(e);o!==i&&r(o)},[e,i]),i}function bP({children:e,in:t,onExited:n,mountOnEnter:i,unmountOnExit:r}){const o=F.useRef(null),a=F.useRef(t),s=Vn(n);F.useEffect(()=>{t?a.current=!0:s(o.current)},[t,s]);const l=Fc(o,e.ref),u=F.cloneElement(e,{ref:l});return t?u:r||!a.current&&i?null:u}function tce({in:e,onTransition:t}){const n=F.useRef(null),i=F.useRef(!0),r=Vn(t);return cb(()=>{if(!n.current)return;let o=!1;return r({in:e,element:n.current,initial:i.current,isStale:()=>o}),()=>{o=!0}},[e,r]),cb(()=>(i.current=!1,()=>{i.current=!0}),[]),n}function nce({children:e,in:t,onExited:n,onEntered:i,transition:r}){const[o,a]=F.useState(!t);t&&o&&a(!1);const s=tce({in:!!t,onTransition:u=>{const c=()=>{u.isStale()||(u.in?i==null||i(u.element,u.initial):(a(!0),n==null||n(u.element)))};Promise.resolve(r(u)).then(c,d=>{throw u.in||a(!0),d})}}),l=Fc(s,e.ref);return o&&!t?null:F.cloneElement(e,{ref:l})}function PT(e,t,n){return e?v.jsx(e,Object.assign({},n)):t?v.jsx(nce,Object.assign({},n,{transition:t})):v.jsx(bP,Object.assign({},n))}function xU(e){return e.code==="Escape"||e.keyCode===27}const ice=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function rce(e,t){if(e==null)return{};var n={},i=Object.keys(e),r,o;for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}let VE;function oce(e){return VE||(VE=new _P({ownerDocument:e==null?void 0:e.document})),VE}function ace(e){const t=yP(),n=e||oce(t),i=F.useRef({dialog:null,backdrop:null});return Object.assign(i.current,{add:()=>n.add(i.current),remove:()=>n.remove(i.current),isTopModal:()=>n.isTopModal(i.current),setDialogRef:F.useCallback(r=>{i.current.dialog=r},[]),setBackdropRef:F.useCallback(r=>{i.current.backdrop=r},[])})}const _U=F.forwardRef((e,t)=>{let{show:n=!1,role:i="dialog",className:r,style:o,children:a,backdrop:s=!0,keyboard:l=!0,onBackdropClick:u,onEscapeKeyDown:c,transition:d,runTransition:h,backdropTransition:m,runBackdropTransition:g,autoFocus:y=!0,enforceFocus:x=!0,restoreFocus:b=!0,restoreFocusOptions:w,renderDialog:S,renderBackdrop:k=tt=>v.jsx("div",Object.assign({},tt)),manager:R,container:M,onShow:T,onHide:N=()=>{},onExit:D,onExited:I,onExiting:z,onEnter:X,onEntering:W,onEntered:U}=e,B=rce(e,ice);const V=yP(),K=FT(M),H=ace(R),J=oP(),Q=wse(n),[oe,me]=F.useState(!n),ke=F.useRef(null);F.useImperativeHandle(t,()=>H,[H]),xm&&!Q&&n&&(ke.current=GE(V==null?void 0:V.document)),n&&oe&&me(!1);const ge=Vn(()=>{if(H.add(),Ye.current=yl(document,"keydown",Et),Re.current=yl(document,"focus",()=>setTimeout(Me),!0),T&&T(),y){var tt,Yt;const vn=GE((tt=(Yt=H.dialog)==null?void 0:Yt.ownerDocument)!=null?tt:V==null?void 0:V.document);H.dialog&&vn&&!Ty(H.dialog,vn)&&(ke.current=vn,H.dialog.focus())}}),Se=Vn(()=>{if(H.remove(),Ye.current==null||Ye.current(),Re.current==null||Re.current(),b){var tt;(tt=ke.current)==null||tt.focus==null||tt.focus(w),ke.current=null}});F.useEffect(()=>{!n||!K||ge()},[n,K,ge]),F.useEffect(()=>{oe&&Se()},[oe,Se]),uP(()=>{Se()});const Me=Vn(()=>{if(!x||!J()||!H.isTopModal())return;const tt=GE(V==null?void 0:V.document);H.dialog&&tt&&!Ty(H.dialog,tt)&&H.dialog.focus()}),It=Vn(tt=>{tt.target===tt.currentTarget&&(u==null||u(tt),s===!0&&N())}),Et=Vn(tt=>{l&&xU(tt)&&H.isTopModal()&&(c==null||c(tt),tt.defaultPrevented||N())}),Re=F.useRef(),Ye=F.useRef(),Be=(...tt)=>{me(!0),I==null||I(...tt)};if(!K)return null;const de=Object.assign({role:i,ref:H.setDialogRef,"aria-modal":i==="dialog"?!0:void 0},B,{style:o,className:r,tabIndex:-1});let Tt=S?S(de):v.jsx("div",Object.assign({},de,{children:F.cloneElement(a,{role:"document"})}));Tt=PT(d,h,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:D,onExiting:z,onExited:Be,onEnter:X,onEntering:W,onEntered:U,children:Tt});let ft=null;return s&&(ft=k({ref:H.setBackdropRef,onClick:It}),ft=PT(m,g,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:ft})),v.jsx(v.Fragment,{children:Ff.createPortal(v.jsxs(v.Fragment,{children:[ft,Tt]}),K)})});_U.displayName="Modal";const bU=Object.assign(_U,{Manager:_P});function NT(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function sce(e,t){e.classList?e.classList.add(t):NT(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function b3(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function lce(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=b3(e.className,t):e.setAttribute("class",b3(e.className&&e.className.baseVal||"",t))}const _h={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class wU extends _P{adjustAndStore(t,n,i){const r=n.style[t];n.dataset[t]=r,El(n,{[t]:`${parseFloat(El(n,t))+i}px`})}restore(t,n){const i=n.dataset[t];i!==void 0&&(delete n.dataset[t],El(n,{[t]:i}))}setContainerStyle(t){super.setContainerStyle(t);const n=this.getElement();if(sce(n,"modal-open"),!t.scrollBarWidth)return;const i=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";vf(n,_h.FIXED_CONTENT).forEach(o=>this.adjustAndStore(i,o,t.scrollBarWidth)),vf(n,_h.STICKY_CONTENT).forEach(o=>this.adjustAndStore(r,o,-t.scrollBarWidth)),vf(n,_h.NAVBAR_TOGGLER).forEach(o=>this.adjustAndStore(r,o,t.scrollBarWidth))}removeContainerStyle(t){super.removeContainerStyle(t);const n=this.getElement();lce(n,"modal-open");const i=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";vf(n,_h.FIXED_CONTENT).forEach(o=>this.restore(i,o)),vf(n,_h.STICKY_CONTENT).forEach(o=>this.restore(r,o)),vf(n,_h.NAVBAR_TOGGLER).forEach(o=>this.restore(r,o))}}let YE;function SU(e){return YE||(YE=new wU(e)),YE}const CU=F.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},r)=>(t=We(t,"modal-body"),v.jsx(n,{ref:r,className:De(e,t),...i})));CU.displayName="ModalBody";const uce=CU,cce=F.createContext({onHide(){}}),wP=cce,EU=F.forwardRef(({bsPrefix:e,className:t,contentClassName:n,centered:i,size:r,fullscreen:o,children:a,scrollable:s,...l},u)=>{e=We(e,"modal");const c=`${e}-dialog`,d=typeof o=="string"?`${e}-fullscreen-${o}`:`${e}-fullscreen`;return v.jsx("div",{...l,ref:u,className:De(c,t,r&&`${e}-${r}`,i&&`${c}-centered`,s&&`${c}-scrollable`,o&&d),children:v.jsx("div",{className:De(`${e}-content`,n),children:a})})});EU.displayName="ModalDialog";const kU=EU,RU=F.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},r)=>(t=We(t,"modal-footer"),v.jsx(n,{ref:r,className:De(e,t),...i})));RU.displayName="ModalFooter";const fce=RU,dce=F.forwardRef(({closeLabel:e="Close",closeVariant:t,closeButton:n=!1,onHide:i,children:r,...o},a)=>{const s=F.useContext(wP),l=Vn(()=>{s==null||s.onHide(),i==null||i()});return v.jsxs("div",{ref:a,...o,children:[r,n&&v.jsx(Nse,{"aria-label":e,variant:t,onClick:l})]})}),TU=dce,AU=F.forwardRef(({bsPrefix:e,className:t,closeLabel:n="Close",closeButton:i=!1,...r},o)=>(e=We(e,"modal-header"),v.jsx(TU,{ref:o,...r,className:De(t,e),closeLabel:n,closeButton:i})));AU.displayName="ModalHeader";const hce=AU,pce=M2("h4"),MU=F.forwardRef(({className:e,bsPrefix:t,as:n=pce,...i},r)=>(t=We(t,"modal-title"),v.jsx(n,{ref:r,className:De(e,t),...i})));MU.displayName="ModalTitle";const mce=MU;function gce(e){return v.jsx(rd,{...e,timeout:null})}function yce(e){return v.jsx(rd,{...e,timeout:null})}const FU=F.forwardRef(({bsPrefix:e,className:t,style:n,dialogClassName:i,contentClassName:r,children:o,dialogAs:a=kU,"aria-labelledby":s,"aria-describedby":l,"aria-label":u,show:c=!1,animation:d=!0,backdrop:h=!0,keyboard:m=!0,onEscapeKeyDown:g,onShow:y,onHide:x,container:b,autoFocus:w=!0,enforceFocus:S=!0,restoreFocus:k=!0,restoreFocusOptions:R,onEntered:M,onExit:T,onExiting:N,onEnter:D,onEntering:I,onExited:z,backdropClassName:X,manager:W,...U},B)=>{const[V,K]=F.useState({}),[H,J]=F.useState(!1),Q=F.useRef(!1),oe=F.useRef(!1),me=F.useRef(null),[ke,ge]=ET(),Se=Fc(B,ge),Me=Vn(x),It=k2();e=We(e,"modal");const Et=F.useMemo(()=>({onHide:Me}),[Me]);function Re(){return W||SU({isRTL:It})}function Ye(bt){if(!xm)return;const ai=Re().getScrollbarWidth()>0,To=bt.scrollHeight>vm(bt).documentElement.clientHeight;K({paddingRight:ai&&!To?x3():void 0,paddingLeft:!ai&&To?x3():void 0})}const Be=Vn(()=>{ke&&Ye(ke.dialog)});uP(()=>{CT(window,"resize",Be),me.current==null||me.current()});const de=()=>{Q.current=!0},Tt=bt=>{Q.current&&ke&&bt.target===ke.dialog&&(oe.current=!0),Q.current=!1},ft=()=>{J(!0),me.current=tH(ke.dialog,()=>{J(!1)})},tt=bt=>{bt.target===bt.currentTarget&&ft()},Yt=bt=>{if(h==="static"){tt(bt);return}if(oe.current||bt.target!==bt.currentTarget){oe.current=!1;return}x==null||x()},vn=bt=>{m?g==null||g(bt):(bt.preventDefault(),h==="static"&&ft())},ir=(bt,ai)=>{bt&&Ye(bt),D==null||D(bt,ai)},Ys=bt=>{me.current==null||me.current(),T==null||T(bt)},Ii=(bt,ai)=>{I==null||I(bt,ai),eH(window,"resize",Be)},kr=bt=>{bt&&(bt.style.display=""),z==null||z(bt),CT(window,"resize",Be)},aa=F.useCallback(bt=>v.jsx("div",{...bt,className:De(`${e}-backdrop`,X,!d&&"show")}),[d,X,e]),io={...n,...V};io.display="block";const Rr=bt=>v.jsx("div",{role:"dialog",...bt,style:io,className:De(t,e,H&&`${e}-static`,!d&&"show"),onClick:h?Yt:void 0,onMouseUp:Tt,"aria-label":u,"aria-labelledby":s,"aria-describedby":l,children:v.jsx(a,{...U,onMouseDown:de,className:i,contentClassName:r,children:o})});return v.jsx(wP.Provider,{value:Et,children:v.jsx(bU,{show:c,ref:Se,backdrop:h,container:b,keyboard:!0,autoFocus:w,enforceFocus:S,restoreFocus:k,restoreFocusOptions:R,onEscapeKeyDown:vn,onShow:y,onHide:x,onEnter:ir,onEntering:Ii,onEntered:M,onExit:Ys,onExiting:N,onExited:kr,manager:Re(),transition:d?gce:void 0,backdropTransition:d?yce:void 0,renderBackdrop:aa,renderDialog:Rr})})});FU.displayName="Modal";const Ri=Object.assign(FU,{Body:uce,Header:hce,Title:mce,Footer:fce,Dialog:kU,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150});var w3={exports:{}},$T={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(i){function r(a,s,l,u,c,d){var h=u||"<<anonymous>>",m=d||l;if(s[l]==null)return a?new Error("Required "+c+" `"+m+"` was not specified "+("in `"+h+"`.")):null;for(var g=arguments.length,y=Array(g>6?g-6:0),x=6;x<g;x++)y[x-6]=arguments[x];return i.apply(void 0,[s,l,h,c,m].concat(y))}var o=r.bind(null,!1);return o.isRequired=r.bind(null,!0),o}e.exports=t.default})($T,$T.exports);var vce=$T.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var n=vce,i=r(n);function r(a){return a&&a.__esModule?a:{default:a}}function o(){for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];function u(){for(var c=arguments.length,d=Array(c),h=0;h<c;h++)d[h]=arguments[h];var m=null;return s.forEach(function(g){if(m==null){var y=g.apply(void 0,d);y!=null&&(m=y)}}),m}return(0,i.default)(u)}e.exports=t.default})(w3,w3.exports);const PU=F.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},r)=>(t=We(t,"nav-item"),v.jsx(n,{ref:r,className:De(e,t),...i})));PU.displayName="NavItem";const NU=PU,$U=F.forwardRef(({bsPrefix:e,className:t,as:n=kT,active:i,eventKey:r,disabled:o=!1,...a},s)=>{e=We(e,"nav-link");const[l,u]=gU({key:Ay(r,a.href),active:i,disabled:o,...a});return v.jsx(n,{...a,...l,ref:s,disabled:o,className:De(t,e,o&&"disabled",u.isActive&&"active")})});$U.displayName="NavLink";const OU=$U,IU=F.forwardRef((e,t)=>{const{as:n="div",bsPrefix:i,variant:r,fill:o=!1,justify:a=!1,navbar:s,navbarScroll:l,className:u,activeKey:c,...d}=gv(e,{activeKey:"onSelect"}),h=We(i,"nav");let m,g,y=!1;const x=F.useContext(_m),b=F.useContext(CH);return x?(m=x.bsPrefix,y=s??!0):b&&({cardHeaderBsPrefix:g}=b),v.jsx(Jue,{as:n,ref:t,activeKey:c,className:De(u,{[h]:!y,[`${m}-nav`]:y,[`${m}-nav-scroll`]:y&&l,[`${g}-${r}`]:!!g,[`${h}-${r}`]:!!r,[`${h}-fill`]:o,[`${h}-justified`]:a}),...d})});IU.displayName="Nav";const pu=Object.assign(IU,{Item:NU,Link:OU}),DU=F.forwardRef(({bsPrefix:e,className:t,as:n,...i},r)=>{e=We(e,"navbar-brand");const o=n||(i.href?"a":"span");return v.jsx(o,{...i,ref:r,className:De(t,e)})});DU.displayName="NavbarBrand";const xce=DU,LU=F.forwardRef(({children:e,bsPrefix:t,...n},i)=>{t=We(t,"navbar-collapse");const r=F.useContext(_m);return v.jsx(nH,{in:!!(r&&r.expanded),...n,children:v.jsx("div",{ref:i,className:t,children:e})})});LU.displayName="NavbarCollapse";const _ce=LU,jU=F.forwardRef(({bsPrefix:e,className:t,children:n,label:i="Toggle navigation",as:r="button",onClick:o,...a},s)=>{e=We(e,"navbar-toggler");const{onToggle:l,expanded:u}=F.useContext(_m)||{},c=Vn(d=>{o&&o(d),l&&l()});return r==="button"&&(a.type="button"),v.jsx(r,{...a,ref:s,onClick:c,"aria-label":i,className:De(t,e,!u&&"collapsed"),children:n||v.jsx("span",{className:`${e}-icon`})})});jU.displayName="NavbarToggle";const bce=jU,OT=new WeakMap,S3=(e,t)=>{if(!e||!t)return;const n=OT.get(t)||new Map;OT.set(t,n);let i=n.get(e);return i||(i=t.matchMedia(e),i.refCount=0,n.set(i.media,i)),i};function wce(e,t=typeof window>"u"?void 0:window){const n=S3(e,t),[i,r]=F.useState(()=>n?n.matches:!1);return cb(()=>{let o=S3(e,t);if(!o)return r(!1);let a=OT.get(t);const s=()=>{r(o.matches)};return o.refCount++,o.addListener(s),s(),()=>{o.removeListener(s),o.refCount--,o.refCount<=0&&(a==null||a.delete(o.media)),o=void 0}},[e]),i}function Sce(e){const t=Object.keys(e);function n(s,l){return s===l?l:s?`${s} and ${l}`:l}function i(s){return t[Math.min(t.indexOf(s)+1,t.length-1)]}function r(s){const l=i(s);let u=e[l];return typeof u=="number"?u=`${u-.2}px`:u=`calc(${u} - 0.2px)`,`(max-width: ${u})`}function o(s){let l=e[s];return typeof l=="number"&&(l=`${l}px`),`(min-width: ${l})`}function a(s,l,u){let c;typeof s=="object"?(c=s,u=l,l=!0):(l=l||!0,c={[s]:l});let d=F.useMemo(()=>Object.entries(c).reduce((h,[m,g])=>((g==="up"||g===!0)&&(h=n(h,o(m))),(g==="down"||g===!0)&&(h=n(h,r(m))),h),""),[JSON.stringify(c)]);return wce(d,u)}return a}const Cce=Sce({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),zU=F.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},r)=>(t=We(t,"offcanvas-body"),v.jsx(n,{ref:r,className:De(e,t),...i})));zU.displayName="OffcanvasBody";const Ece=zU,kce={[ba]:"show",[dl]:"show"},BU=F.forwardRef(({bsPrefix:e,className:t,children:n,in:i=!1,mountOnEnter:r=!1,unmountOnExit:o=!1,appear:a=!1,...s},l)=>(e=We(e,"offcanvas"),v.jsx(T2,{ref:l,addEndListener:R2,in:i,mountOnEnter:r,unmountOnExit:o,appear:a,...s,childRef:n.ref,children:(u,c)=>F.cloneElement(n,{...c,className:De(t,n.props.className,(u===ba||u===Ey)&&`${e}-toggling`,kce[u])})})));BU.displayName="OffcanvasToggling";const Rce=BU,HU=F.forwardRef(({bsPrefix:e,className:t,closeLabel:n="Close",closeButton:i=!1,...r},o)=>(e=We(e,"offcanvas-header"),v.jsx(TU,{ref:o,...r,className:De(t,e),closeLabel:n,closeButton:i})));HU.displayName="OffcanvasHeader";const Tce=HU,Ace=M2("h5"),UU=F.forwardRef(({className:e,bsPrefix:t,as:n=Ace,...i},r)=>(t=We(t,"offcanvas-title"),v.jsx(n,{ref:r,className:De(e,t),...i})));UU.displayName="OffcanvasTitle";const Mce=UU;function Fce(e){return v.jsx(Rce,{...e})}function Pce(e){return v.jsx(rd,{...e})}const WU=F.forwardRef(({bsPrefix:e,className:t,children:n,"aria-labelledby":i,placement:r="start",responsive:o,show:a=!1,backdrop:s=!0,keyboard:l=!0,scroll:u=!1,onEscapeKeyDown:c,onShow:d,onHide:h,container:m,autoFocus:g=!0,enforceFocus:y=!0,restoreFocus:x=!0,restoreFocusOptions:b,onEntered:w,onExit:S,onExiting:k,onEnter:R,onEntering:M,onExited:T,backdropClassName:N,manager:D,renderStaticNode:I=!1,...z},X)=>{const W=F.useRef();e=We(e,"offcanvas");const{onToggle:U}=F.useContext(_m)||{},[B,V]=F.useState(!1),K=Cce(o||"xs","up");F.useEffect(()=>{V(o?a&&!K:a)},[a,o,K]);const H=Vn(()=>{U==null||U(),h==null||h()}),J=F.useMemo(()=>({onHide:H}),[H]);function Q(){return D||(u?(W.current||(W.current=new wU({handleContainerOverflow:!1})),W.current):SU())}const oe=(Se,...Me)=>{Se&&(Se.style.visibility="visible"),R==null||R(Se,...Me)},me=(Se,...Me)=>{Se&&(Se.style.visibility=""),T==null||T(...Me)},ke=F.useCallback(Se=>v.jsx("div",{...Se,className:De(`${e}-backdrop`,N)}),[N,e]),ge=Se=>v.jsx("div",{...Se,...z,className:De(t,o?`${e}-${o}`:e,`${e}-${r}`),"aria-labelledby":i,children:n});return v.jsxs(v.Fragment,{children:[!B&&(o||I)&&ge({}),v.jsx(wP.Provider,{value:J,children:v.jsx(bU,{show:B,ref:X,backdrop:s,container:m,keyboard:l,autoFocus:g,enforceFocus:y&&!u,restoreFocus:x,restoreFocusOptions:b,onEscapeKeyDown:c,onShow:d,onHide:H,onEnter:oe,onEntering:M,onEntered:w,onExit:S,onExiting:k,onExited:me,manager:Q(),transition:Fce,backdropTransition:Pce,renderBackdrop:ke,renderDialog:ge})})]})});WU.displayName="Offcanvas";const Nce=Object.assign(WU,{Body:Ece,Header:Tce,Title:Mce}),GU=F.forwardRef((e,t)=>{const n=F.useContext(_m);return v.jsx(Nce,{ref:t,show:!!(n!=null&&n.expanded),...e,renderStaticNode:!0})});GU.displayName="NavbarOffcanvas";const $ce=GU,qU=F.forwardRef(({className:e,bsPrefix:t,as:n="span",...i},r)=>(t=We(t,"navbar-text"),v.jsx(n,{ref:r,className:De(e,t),...i})));qU.displayName="NavbarText";const Oce=qU,VU=F.forwardRef((e,t)=>{const{bsPrefix:n,expand:i=!0,variant:r="light",bg:o,fixed:a,sticky:s,className:l,as:u="nav",expanded:c,onToggle:d,onSelect:h,collapseOnSelect:m=!1,...g}=gv(e,{expanded:"onToggle"}),y=We(n,"navbar"),x=F.useCallback((...S)=>{h==null||h(...S),m&&c&&(d==null||d(!1))},[h,m,c,d]);g.role===void 0&&u!=="nav"&&(g.role="navigation");let b=`${y}-expand`;typeof i=="string"&&(b=`${b}-${i}`);const w=F.useMemo(()=>({onToggle:()=>d==null?void 0:d(!c),bsPrefix:y,expanded:!!c,expand:i}),[y,c,i,d]);return v.jsx(_m.Provider,{value:w,children:v.jsx(ad.Provider,{value:x,children:v.jsx(u,{ref:t,...g,className:De(l,y,i&&b,r&&`${y}-${r}`,o&&`bg-${o}`,s&&`sticky-${s}`,a&&`fixed-${a}`)})})})});VU.displayName="Navbar";const cx=Object.assign(VU,{Brand:xce,Collapse:_ce,Offcanvas:$ce,Text:Oce,Toggle:bce}),Ice=()=>{};function Dce(e,t,{disabled:n,clickTrigger:i}={}){const r=t||Ice;gue(e,r,{disabled:n,clickTrigger:i});const o=Vn(a=>{xU(a)&&r(a)});F.useEffect(()=>{if(n||e==null)return;const a=vm(d_(e));let s=(a.defaultView||window).event;const l=yl(a,"keyup",u=>{if(u===s){s=void 0;return}o(u)});return()=>{l()}},[e,n,o])}const YU=F.forwardRef((e,t)=>{const{flip:n,offset:i,placement:r,containerPadding:o,popperConfig:a={},transition:s,runTransition:l}=e,[u,c]=ET(),[d,h]=ET(),m=Fc(c,t),g=FT(e.container),y=FT(e.target),[x,b]=F.useState(!e.show),w=cue(y,u,xue({placement:r,enableEvents:!!e.show,containerPadding:o||5,flip:n,offset:i,arrowElement:d,popperConfig:a}));e.show&&x&&b(!1);const S=(...z)=>{b(!0),e.onExited&&e.onExited(...z)},k=e.show||!x;if(Dce(u,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!k)return null;const{onExit:R,onExiting:M,onEnter:T,onEntering:N,onEntered:D}=e;let I=e.children(Object.assign({},w.attributes.popper,{style:w.styles.popper,ref:m}),{popper:w,placement:r,show:!!e.show,arrowProps:Object.assign({},w.attributes.arrow,{style:w.styles.arrow,ref:h})});return I=PT(s,l,{in:!!e.show,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:I,onExit:R,onExiting:M,onExited:S,onEnter:T,onEntering:N,onEntered:D}),g?Ff.createPortal(I,g):null});YU.displayName="Overlay";const Lce=YU,ZU=F.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},r)=>(t=We(t,"popover-header"),v.jsx(n,{ref:r,className:De(e,t),...i})));ZU.displayName="PopoverHeader";const jce=ZU,XU=F.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},r)=>(t=We(t,"popover-body"),v.jsx(n,{ref:r,className:De(e,t),...i})));XU.displayName="PopoverBody";const KU=XU;function JU(e,t){let n=e;return e==="left"?n=t?"end":"start":e==="right"&&(n=t?"start":"end"),n}function QU(e="absolute"){return{position:e,top:"0",left:"0",opacity:"0",pointerEvents:"none"}}const zce=F.forwardRef(({bsPrefix:e,placement:t="right",className:n,style:i,children:r,body:o,arrowProps:a,hasDoneInitialMeasure:s,popper:l,show:u,...c},d)=>{const h=We(e,"popover"),m=k2(),[g]=(t==null?void 0:t.split("-"))||[],y=JU(g,m);let x=i;return u&&!s&&(x={...i,...QU(l==null?void 0:l.strategy)}),v.jsxs("div",{ref:d,role:"tooltip",style:x,"x-placement":g,className:De(n,h,g&&`bs-popover-${y}`),...c,children:[v.jsx("div",{className:"popover-arrow",...a}),o?v.jsx(KU,{children:r}):r]})}),dp=Object.assign(zce,{Header:jce,Body:KU,POPPER_OFFSET:[0,8]}),eW=F.forwardRef(({bsPrefix:e,placement:t="right",className:n,style:i,children:r,arrowProps:o,hasDoneInitialMeasure:a,popper:s,show:l,...u},c)=>{e=We(e,"tooltip");const d=k2(),[h]=(t==null?void 0:t.split("-"))||[],m=JU(h,d);let g=i;return l&&!a&&(g={...i,...QU(s==null?void 0:s.strategy)}),v.jsxs("div",{ref:c,style:g,role:"tooltip","x-placement":h,className:De(n,e,`bs-tooltip-${m}`),...u,children:[v.jsx("div",{className:"tooltip-arrow",...o}),v.jsx("div",{className:`${e}-inner`,children:r})]})});eW.displayName="Tooltip";const Bce=Object.assign(eW,{TOOLTIP_OFFSET:[0,6]});function Hce(e){const t=F.useRef(null),n=We(void 0,"popover"),i=We(void 0,"tooltip"),r=F.useMemo(()=>({name:"offset",options:{offset:()=>{if(e)return e;if(t.current){if(NT(t.current,n))return dp.POPPER_OFFSET;if(NT(t.current,i))return Bce.TOOLTIP_OFFSET}return[0,0]}}}),[e,n,i]);return[t,[r]]}function Uce(e,t){const{ref:n}=e,{ref:i}=t;e.ref=n.__wrapped||(n.__wrapped=r=>n(ub(r))),t.ref=i.__wrapped||(i.__wrapped=r=>i(ub(r)))}const tW=F.forwardRef(({children:e,transition:t=rd,popperConfig:n={},rootClose:i=!1,placement:r="top",show:o=!1,...a},s)=>{const l=F.useRef({}),[u,c]=F.useState(null),[d,h]=Hce(a.offset),m=Fc(s,d),g=t===!0?rd:t||void 0,y=Vn(x=>{c(x),n==null||n.onFirstUpdate==null||n.onFirstUpdate(x)});return cb(()=>{u&&a.target&&(l.current.scheduleUpdate==null||l.current.scheduleUpdate())},[u,a.target]),F.useEffect(()=>{o||c(null)},[o]),v.jsx(Lce,{...a,ref:m,popperConfig:{...n,modifiers:h.concat(n.modifiers||[]),onFirstUpdate:y},transition:g,rootClose:i,placement:r,show:o,children:(x,{arrowProps:b,popper:w,show:S})=>{var k,R;Uce(x,b);const M=w==null?void 0:w.placement,T=Object.assign(l.current,{state:w==null?void 0:w.state,scheduleUpdate:w==null?void 0:w.update,placement:M,outOfBoundaries:(w==null||(k=w.state)==null||(R=k.modifiersData.hide)==null?void 0:R.isReferenceHidden)||!1,strategy:n.strategy}),N=!!u;return typeof e=="function"?e({...x,placement:M,show:S,...!t&&S&&{className:"show"},popper:T,arrowProps:b,hasDoneInitialMeasure:N}):F.cloneElement(e,{...x,placement:M,arrowProps:b,popper:T,hasDoneInitialMeasure:N,className:De(e.props.className,!t&&S&&"show"),style:{...e.props.style,...x.style}})}})});tW.displayName="Overlay";const Wce=tW;function Gce(e){return e&&typeof e=="object"?e:{show:e,hide:e}}function C3(e,t,n){const[i]=t,r=i.currentTarget,o=i.relatedTarget||i.nativeEvent[n];(!o||o!==r)&&!Ty(r,o)&&e(...t)}bn.oneOf(["click","hover","focus"]);const qce=({trigger:e=["hover","focus"],overlay:t,children:n,popperConfig:i={},show:r,defaultShow:o=!1,onToggle:a,delay:s,placement:l,flip:u=l&&l.indexOf("auto")!==-1,...c})=>{const d=F.useRef(null),h=Fc(d,n.ref),m=$H(),g=F.useRef(""),[y,x]=V7(r,o,a),b=Gce(s),{onFocus:w,onBlur:S,onClick:k}=typeof n!="function"?F.Children.only(n).props:{},R=B=>{h(ub(B))},M=F.useCallback(()=>{if(m.clear(),g.current="show",!b.show){x(!0);return}m.set(()=>{g.current==="show"&&x(!0)},b.show)},[b.show,x,m]),T=F.useCallback(()=>{if(m.clear(),g.current="hide",!b.hide){x(!1);return}m.set(()=>{g.current==="hide"&&x(!1)},b.hide)},[b.hide,x,m]),N=F.useCallback((...B)=>{M(),w==null||w(...B)},[M,w]),D=F.useCallback((...B)=>{T(),S==null||S(...B)},[T,S]),I=F.useCallback((...B)=>{x(!y),k==null||k(...B)},[k,x,y]),z=F.useCallback((...B)=>{C3(M,B,"fromElement")},[M]),X=F.useCallback((...B)=>{C3(T,B,"toElement")},[T]),W=e==null?[]:[].concat(e),U={ref:R};return W.indexOf("click")!==-1&&(U.onClick=I),W.indexOf("focus")!==-1&&(U.onFocus=N,U.onBlur=D),W.indexOf("hover")!==-1&&(U.onMouseOver=z,U.onMouseOut=X),v.jsxs(v.Fragment,{children:[typeof n=="function"?n(U):F.cloneElement(n,U),v.jsx(Wce,{...c,show:y,onHide:T,flip:u,placement:l,popperConfig:i,target:d.current,children:t})]})},nW=qce,iW=F.forwardRef(({bsPrefix:e,className:t,as:n="div",...i},r)=>{const o=We(e,"row"),a=Y7(),s=Z7(),l=`${o}-cols`,u=[];return a.forEach(c=>{const d=i[c];delete i[c];let h;d!=null&&typeof d=="object"?{cols:h}=d:h=d;const m=c!==s?`-${c}`:"";h!=null&&u.push(`${l}${m}-${h}`)}),v.jsx(n,{ref:r,...i,className:De(t,o,...u)})});iW.displayName="Row";const Hf=iW,Vce=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],Yce=["activeKey","getControlledId","getControllerId"],Zce=["as"];function IT(e,t){if(e==null)return{};var n={},i=Object.keys(e),r,o;for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function rW(e){let{active:t,eventKey:n,mountOnEnter:i,transition:r,unmountOnExit:o,role:a="tabpanel",onEnter:s,onEntering:l,onEntered:u,onExit:c,onExiting:d,onExited:h}=e,m=IT(e,Vce);const g=F.useContext(bm);if(!g)return[Object.assign({},m,{role:a}),{eventKey:n,isActive:t,mountOnEnter:i,transition:r,unmountOnExit:o,onEnter:s,onEntering:l,onEntered:u,onExit:c,onExiting:d,onExited:h}];const{activeKey:y,getControlledId:x,getControllerId:b}=g,w=IT(g,Yce),S=Ay(n);return[Object.assign({},m,{role:a,id:x(n),"aria-labelledby":b(n)}),{eventKey:n,isActive:t==null&&S!=null?Ay(y)===S:t,transition:r||w.transition,mountOnEnter:i??w.mountOnEnter,unmountOnExit:o??w.unmountOnExit,onEnter:s,onEntering:l,onEntered:u,onExit:c,onExiting:d,onExited:h}]}const oW=F.forwardRef((e,t)=>{let{as:n="div"}=e,i=IT(e,Zce);const[r,{isActive:o,onEnter:a,onEntering:s,onEntered:l,onExit:u,onExiting:c,onExited:d,mountOnEnter:h,unmountOnExit:m,transition:g=bP}]=rW(i);return v.jsx(bm.Provider,{value:null,children:v.jsx(ad.Provider,{value:null,children:v.jsx(g,{in:o,onEnter:a,onEntering:s,onEntered:l,onExit:u,onExiting:c,onExited:d,mountOnEnter:h,unmountOnExit:m,children:v.jsx(n,Object.assign({},r,{ref:t,hidden:!o,"aria-hidden":!o}))})})})});oW.displayName="TabPanel";const aW=e=>{const{id:t,generateChildId:n,onSelect:i,activeKey:r,defaultActiveKey:o,transition:a,mountOnEnter:s,unmountOnExit:l,children:u}=e,[c,d]=ele(r,o,i),h=Eue(t),m=F.useMemo(()=>n||((y,x)=>h?`${h}-${x}-${y}`:null),[h,n]),g=F.useMemo(()=>({onSelect:d,activeKey:c,transition:a,mountOnEnter:s||!1,unmountOnExit:l||!1,getControlledId:y=>m(y,"tabpane"),getControllerId:y=>m(y,"tab")}),[d,c,a,s,l,m]);return v.jsx(bm.Provider,{value:g,children:v.jsx(ad.Provider,{value:d||null,children:u})})};aW.Panel=oW;const sW=aW;function SP(e){return typeof e=="boolean"?e?rd:bP:e}const lW=({transition:e,...t})=>v.jsx(sW,{...t,transition:SP(e)});lW.displayName="TabContainer";const Xce=lW,uW=F.forwardRef(({className:e,bsPrefix:t,as:n="div",...i},r)=>(t=We(t,"tab-content"),v.jsx(n,{ref:r,className:De(e,t),...i})));uW.displayName="TabContent";const cW=uW,fW=F.forwardRef(({bsPrefix:e,transition:t,...n},i)=>{const[{className:r,as:o="div",...a},{isActive:s,onEnter:l,onEntering:u,onEntered:c,onExit:d,onExiting:h,onExited:m,mountOnEnter:g,unmountOnExit:y,transition:x=rd}]=rW({...n,transition:SP(t)}),b=We(e,"tab-pane");return v.jsx(bm.Provider,{value:null,children:v.jsx(ad.Provider,{value:null,children:v.jsx(x,{in:s,onEnter:l,onEntering:u,onEntered:c,onExit:d,onExiting:h,onExited:m,mountOnEnter:g,unmountOnExit:y,children:v.jsx(o,{...a,ref:i,className:De(r,b,s&&"active")})})})})});fW.displayName="TabPane";const dW=fW,Kce={eventKey:bn.oneOfType([bn.string,bn.number]),title:bn.node.isRequired,disabled:bn.bool,tabClassName:bn.string,tabAttrs:bn.object},hW=()=>{throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};hW.propTypes=Kce;const Ih=Object.assign(hW,{Container:Xce,Content:cW,Pane:dW}),Jce=F.forwardRef(({bsPrefix:e,className:t,striped:n,bordered:i,borderless:r,hover:o,size:a,variant:s,responsive:l,...u},c)=>{const d=We(e,"table"),h=De(t,d,s&&`${d}-${s}`,a&&`${d}-${a}`,n&&`${d}-${typeof n=="string"?`striped-${n}`:"striped"}`,i&&`${d}-bordered`,r&&`${d}-borderless`,o&&`${d}-hover`),m=v.jsx("table",{...u,className:h,ref:c});if(l){let g=`${d}-responsive`;return typeof l=="string"&&(g=`${g}-${l}`),v.jsx("div",{className:g,children:m})}return m}),$u=Jce;function Qce(e){let t;return DH(e,n=>{t==null&&(t=n.props.eventKey)}),t}function efe(e){const{title:t,eventKey:n,disabled:i,tabClassName:r,tabAttrs:o,id:a}=e.props;return t==null?null:v.jsx(NU,{as:"li",role:"presentation",children:v.jsx(OU,{as:"button",type:"button",eventKey:n,disabled:i,id:a,className:r,...o,children:t})})}const pW=e=>{const{id:t,onSelect:n,transition:i,mountOnEnter:r=!1,unmountOnExit:o=!1,variant:a="tabs",children:s,activeKey:l=Qce(s),...u}=gv(e,{activeKey:"onSelect"});return v.jsxs(sW,{id:t,activeKey:l,onSelect:n,transition:SP(i),mountOnEnter:r,unmountOnExit:o,children:[v.jsx(pu,{...u,role:"tablist",as:"ul",variant:a,children:db(s,efe)}),v.jsx(cW,{children:db(s,c=>{const d={...c.props};return delete d.title,delete d.disabled,delete d.tabClassName,delete d.tabAttrs,v.jsx(dW,{...d})})})]})};pW.displayName="Tabs";const DT=pW;var mW={exports:{}},LT={exports:{}};(function(e,t){(function(n,i){i(t,F)})(b8,function(n,i){function r(C,P,$,j,q,G,Z){try{var ie=C[G](Z),re=ie.value}catch(ue){return void $(ue)}ie.done?P(re):Promise.resolve(re).then(j,q)}function o(C){return function(){var P=this,$=arguments;return new Promise(function(j,q){var G=C.apply(P,$);function Z(re){r(G,j,q,Z,ie,"next",re)}function ie(re){r(G,j,q,Z,ie,"throw",re)}Z(void 0)})}}function a(){return(a=Object.assign||function(C){for(var P=1;P<arguments.length;P++){var $=arguments[P];for(var j in $)Object.prototype.hasOwnProperty.call($,j)&&(C[j]=$[j])}return C}).apply(this,arguments)}function s(C,P){if(C==null)return{};var $,j,q={},G=Object.keys(C);for(j=0;j<G.length;j++)$=G[j],P.indexOf($)>=0||(q[$]=C[$]);return q}function l(C){var P=function($,j){if(typeof $!="object"||$===null)return $;var q=$[Symbol.toPrimitive];if(q!==void 0){var G=q.call($,j||"default");if(typeof G!="object")return G;throw new TypeError("@@toPrimitive must return a primitive value.")}return(j==="string"?String:Number)($)}(C,"string");return typeof P=="symbol"?P:String(P)}i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i;var u={init:"init"},c=function(C){var P=C.value;return P===void 0?"":P},d=function(){return i.createElement(i.Fragment,null,"")},h={Cell:c,width:150,minWidth:0,maxWidth:Number.MAX_SAFE_INTEGER};function m(){for(var C=arguments.length,P=new Array(C),$=0;$<C;$++)P[$]=arguments[$];return P.reduce(function(j,q){var G=q.style,Z=q.className;return j=a({},j,{},s(q,["style","className"])),G&&(j.style=j.style?a({},j.style||{},{},G||{}):G),Z&&(j.className=j.className?j.className+" "+Z:Z),j.className===""&&delete j.className,j},{})}var g=function(C,P){return P===void 0&&(P={}),function($){return $===void 0&&($={}),[].concat(C,[$]).reduce(function(j,q){return function G(Z,ie,re){return typeof ie=="function"?G({},ie(Z,re)):Array.isArray(ie)?m.apply(void 0,[Z].concat(ie)):m(Z,ie)}(j,q,a({},P,{userProps:$}))},{})}},y=function(C,P,$,j){return $===void 0&&($={}),C.reduce(function(q,G){return G(q,$)},P)},x=function(C,P,$){return $===void 0&&($={}),C.forEach(function(j){j(P,$)})};function b(C,P,$,j){C.findIndex(function(q){return q.pluginName===$}),P.forEach(function(q){C.findIndex(function(G){return G.pluginName===q})})}function w(C,P){return typeof C=="function"?C(P):C}function S(C){var P=i.useRef();return P.current=C,i.useCallback(function(){return P.current},[])}var k=typeof document<"u"?i.useLayoutEffect:i.useEffect;function R(C,P){var $=i.useRef(!1);k(function(){$.current&&C(),$.current=!0},P)}function M(C,P,$){return $===void 0&&($={}),function(j,q){q===void 0&&(q={});var G=typeof j=="string"?P[j]:j;if(G===void 0)throw console.info(P),new Error("Renderer Error ");return T(G,a({},C,{column:P},$,{},q))}}function T(C,P){return function(j){return typeof j=="function"&&(q=Object.getPrototypeOf(j)).prototype&&q.prototype.isReactComponent;var q}($=C)||typeof $=="function"||function(j){return typeof j=="object"&&typeof j.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(j.$$typeof.description)}($)?i.createElement(C,P):C;var $}function N(C,P,$){return $===void 0&&($=0),C.map(function(j){return I(j=a({},j,{parent:P,depth:$})),j.columns&&(j.columns=N(j.columns,j,$+1)),j})}function D(C){return V(C,"columns")}function I(C){var P=C.id,$=C.accessor,j=C.Header;if(typeof $=="string"){P=P||$;var q=$.split(".");$=function(G){return function(Z,ie,re){if(!ie)return Z;var ue,Te=typeof ie=="function"?ie:JSON.stringify(ie),ye=W.get(Te)||function(){var Ce=function(ce){return function Ee(Ne,Pe){if(Pe===void 0&&(Pe=[]),Array.isArray(Ne))for(var Ge=0;Ge<Ne.length;Ge+=1)Ee(Ne[Ge],Pe);else Pe.push(Ne);return Pe}(ce).map(function(Ee){return String(Ee).replace(".","_")}).join(".").replace(me,".").replace(ke,"").split(".")}(ie);return W.set(Te,Ce),Ce}();try{ue=ye.reduce(function(Ce,ce){return Ce[ce]},Z)}catch{}return ue!==void 0?ue:re}(G,q)}}if(!P&&typeof j=="string"&&j&&(P=j),!P&&C.columns)throw console.error(C),new Error('A column ID (or unique "Header" value) is required!');if(!P)throw console.error(C),new Error("A column ID (or string accessor) is required!");return Object.assign(C,{id:P,accessor:$}),C}function z(C,P){if(!P)throw new Error;return Object.assign(C,a({Header:d,Footer:d},h,{},P,{},C)),Object.assign(C,{originalWidth:C.width}),C}function X(C,P,$){$===void 0&&($=function(){return{}});for(var j=[],q=C,G=0,Z=function(){return G++},ie=function(){var re={headers:[]},ue=[],Te=q.some(function(ye){return ye.parent});q.forEach(function(ye){var Ce,ce=[].concat(ue).reverse()[0];Te&&(ye.parent?Ce=a({},ye.parent,{originalId:ye.parent.id,id:ye.parent.id+"_"+Z(),headers:[ye]},$(ye)):Ce=z(a({originalId:ye.id+"_placeholder",id:ye.id+"_placeholder_"+Z(),placeholderOf:ye,headers:[ye]},$(ye)),P),ce&&ce.originalId===Ce.originalId?ce.headers.push(ye):ue.push(Ce)),re.headers.push(ye)}),j.push(re),q=ue};q.length;)ie();return j.reverse()}var W=new Map;function U(){for(var C=arguments.length,P=new Array(C),$=0;$<C;$++)P[$]=arguments[$];for(var j=0;j<P.length;j+=1)if(P[j]!==void 0)return P[j]}function B(C){if(typeof C=="function")return C}function V(C,P){var $=[];return function j(q){q.forEach(function(G){G[P]?j(G[P]):$.push(G)})}(C),$}function K(C,P){var $=P.manualExpandedKey,j=P.expanded,q=P.expandSubRows,G=q===void 0||q,Z=[];return C.forEach(function(ie){return function re(ue,Te){Te===void 0&&(Te=!0),ue.isExpanded=ue.original&&ue.original[$]||j[ue.id],ue.canExpand=ue.subRows&&!!ue.subRows.length,Te&&Z.push(ue),ue.subRows&&ue.subRows.length&&ue.isExpanded&&ue.subRows.forEach(function(ye){return re(ye,G)})}(ie)}),Z}function H(C,P,$){return B(C)||P[C]||$[C]||$.text}function J(C,P,$){return C?C(P,$):P===void 0}function Q(){throw new Error("React-Table: You have not called prepareRow(row) one or more rows you are attempting to render.")}var oe=null,me=/\[/g,ke=/\]/g,ge=function(C){return a({role:"table"},C)},Se=function(C){return a({role:"rowgroup"},C)},Me=function(C,P){var $=P.column;return a({key:"header_"+$.id,colSpan:$.totalVisibleHeaderCount,role:"columnheader"},C)},It=function(C,P){var $=P.column;return a({key:"footer_"+$.id,colSpan:$.totalVisibleHeaderCount},C)},Et=function(C,P){return a({key:"headerGroup_"+P.index,role:"row"},C)},Re=function(C,P){return a({key:"footerGroup_"+P.index},C)},Ye=function(C,P){return a({key:"row_"+P.row.id,role:"row"},C)},Be=function(C,P){var $=P.cell;return a({key:"cell_"+$.row.id+"_"+$.column.id,role:"cell"},C)};function de(){return{useOptions:[],stateReducers:[],useControlledState:[],columns:[],columnsDeps:[],allColumns:[],allColumnsDeps:[],accessValue:[],materializedColumns:[],materializedColumnsDeps:[],useInstanceAfterData:[],visibleColumns:[],visibleColumnsDeps:[],headerGroups:[],headerGroupsDeps:[],useInstanceBeforeDimensions:[],useInstance:[],prepareRow:[],getTableProps:[ge],getTableBodyProps:[Se],getHeaderGroupProps:[Et],getFooterGroupProps:[Re],getHeaderProps:[Me],getFooterProps:[It],getRowProps:[Ye],getCellProps:[Be],useFinalInstance:[]}}u.resetHiddenColumns="resetHiddenColumns",u.toggleHideColumn="toggleHideColumn",u.setHiddenColumns="setHiddenColumns",u.toggleHideAllColumns="toggleHideAllColumns";var Tt=function(C){C.getToggleHiddenProps=[ft],C.getToggleHideAllColumnsProps=[tt],C.stateReducers.push(Yt),C.useInstanceBeforeDimensions.push(vn),C.headerGroupsDeps.push(function(P,$){var j=$.instance;return[].concat(P,[j.state.hiddenColumns])}),C.useInstance.push(ir)};Tt.pluginName="useColumnVisibility";var ft=function(C,P){var $=P.column;return[C,{onChange:function(j){$.toggleHidden(!j.target.checked)},style:{cursor:"pointer"},checked:$.isVisible,title:"Toggle Column Visible"}]},tt=function(C,P){var $=P.instance;return[C,{onChange:function(j){$.toggleHideAllColumns(!j.target.checked)},style:{cursor:"pointer"},checked:!$.allColumnsHidden&&!$.state.hiddenColumns.length,title:"Toggle All Columns Hidden",indeterminate:!$.allColumnsHidden&&$.state.hiddenColumns.length}]};function Yt(C,P,$,j){if(P.type===u.init)return a({hiddenColumns:[]},C);if(P.type===u.resetHiddenColumns)return a({},C,{hiddenColumns:j.initialState.hiddenColumns||[]});if(P.type===u.toggleHideColumn){var q=(P.value!==void 0?P.value:!C.hiddenColumns.includes(P.columnId))?[].concat(C.hiddenColumns,[P.columnId]):C.hiddenColumns.filter(function(G){return G!==P.columnId});return a({},C,{hiddenColumns:q})}return P.type===u.setHiddenColumns?a({},C,{hiddenColumns:w(P.value,C.hiddenColumns)}):P.type===u.toggleHideAllColumns?a({},C,{hiddenColumns:(P.value!==void 0?P.value:!C.hiddenColumns.length)?j.allColumns.map(function(G){return G.id}):[]}):void 0}function vn(C){var P=C.headers,$=C.state.hiddenColumns;i.useRef(!1).current;var j=0;P.forEach(function(q){return j+=function G(Z,ie){Z.isVisible=ie&&!$.includes(Z.id);var re=0;return Z.headers&&Z.headers.length?Z.headers.forEach(function(ue){return re+=G(ue,Z.isVisible)}):re=Z.isVisible?1:0,Z.totalVisibleHeaderCount=re,re}(q,!0)})}function ir(C){var P=C.columns,$=C.flatHeaders,j=C.dispatch,q=C.allColumns,G=C.getHooks,Z=C.state.hiddenColumns,ie=C.autoResetHiddenColumns,re=ie===void 0||ie,ue=S(C),Te=q.length===Z.length,ye=i.useCallback(function(Pe,Ge){return j({type:u.toggleHideColumn,columnId:Pe,value:Ge})},[j]),Ce=i.useCallback(function(Pe){return j({type:u.setHiddenColumns,value:Pe})},[j]),ce=i.useCallback(function(Pe){return j({type:u.toggleHideAllColumns,value:Pe})},[j]),Ee=g(G().getToggleHideAllColumnsProps,{instance:ue()});$.forEach(function(Pe){Pe.toggleHidden=function(Ge){j({type:u.toggleHideColumn,columnId:Pe.id,value:Ge})},Pe.getToggleHiddenProps=g(G().getToggleHiddenProps,{instance:ue(),column:Pe})});var Ne=S(re);R(function(){Ne()&&j({type:u.resetHiddenColumns})},[j,P]),Object.assign(C,{allColumnsHidden:Te,toggleHideColumn:ye,setHiddenColumns:Ce,toggleHideAllColumns:ce,getToggleHideAllColumnsProps:Ee})}var Ys={},Ii={},kr=function(C,P,$){return C},aa=function(C,P){return C.subRows||[]},io=function(C,P,$){return""+($?[$.id,P].join("."):P)},Rr=function(C){return C};function bt(C){var P=C.initialState,$=P===void 0?Ys:P,j=C.defaultColumn,q=j===void 0?Ii:j,G=C.getSubRows,Z=G===void 0?aa:G,ie=C.getRowId,re=ie===void 0?io:ie,ue=C.stateReducer,Te=ue===void 0?kr:ue,ye=C.useControlledState,Ce=ye===void 0?Rr:ye;return a({},s(C,["initialState","defaultColumn","getSubRows","getRowId","stateReducer","useControlledState"]),{initialState:$,defaultColumn:q,getSubRows:Z,getRowId:re,stateReducer:Te,useControlledState:Ce})}function ai(C,P){P===void 0&&(P=0);var $=0,j=0,q=0,G=0;return C.forEach(function(Z){var ie=Z.headers;if(Z.totalLeft=P,ie&&ie.length){var re=ai(ie,P),ue=re[0],Te=re[1],ye=re[2],Ce=re[3];Z.totalMinWidth=ue,Z.totalWidth=Te,Z.totalMaxWidth=ye,Z.totalFlexWidth=Ce}else Z.totalMinWidth=Z.minWidth,Z.totalWidth=Math.min(Math.max(Z.minWidth,Z.width),Z.maxWidth),Z.totalMaxWidth=Z.maxWidth,Z.totalFlexWidth=Z.canResize?Z.totalWidth:0;Z.isVisible&&(P+=Z.totalWidth,$+=Z.totalMinWidth,j+=Z.totalWidth,q+=Z.totalMaxWidth,G+=Z.totalFlexWidth)}),[$,j,q,G]}function To(C){var P=C.data,$=C.rows,j=C.flatRows,q=C.rowsById,G=C.column,Z=C.getRowId,ie=C.getSubRows,re=C.accessValueHooks,ue=C.getInstance;P.forEach(function(Te,ye){return function Ce(ce,Ee,Ne,Pe,Ge){Ne===void 0&&(Ne=0);var pt=ce,He=Z(ce,Ee,Pe),Fe=q[He];if(Fe)Fe.subRows&&Fe.originalSubRows.forEach(function(je,at){return Ce(je,at,Ne+1,Fe)});else if((Fe={id:He,original:pt,index:Ee,depth:Ne,cells:[{}]}).cells.map=Q,Fe.cells.filter=Q,Fe.cells.forEach=Q,Fe.cells[0].getCellProps=Q,Fe.values={},Ge.push(Fe),j.push(Fe),q[He]=Fe,Fe.originalSubRows=ie(ce,Ee),Fe.originalSubRows){var lt=[];Fe.originalSubRows.forEach(function(je,at){return Ce(je,at,Ne+1,Fe,lt)}),Fe.subRows=lt}G.accessor&&(Fe.values[G.id]=G.accessor(ce,Ee,Fe,Ge,P)),Fe.values[G.id]=y(re,Fe.values[G.id],{row:Fe,column:G,instance:ue()})}(Te,ye,0,void 0,$)})}u.resetExpanded="resetExpanded",u.toggleRowExpanded="toggleRowExpanded",u.toggleAllRowsExpanded="toggleAllRowsExpanded";var Xa=function(C){C.getToggleAllRowsExpandedProps=[th],C.getToggleRowExpandedProps=[iu],C.stateReducers.push(Yc),C.useInstance.push(dt),C.prepareRow.push(Gt)};Xa.pluginName="useExpanded";var th=function(C,P){var $=P.instance;return[C,{onClick:function(j){$.toggleAllRowsExpanded()},style:{cursor:"pointer"},title:"Toggle All Rows Expanded"}]},iu=function(C,P){var $=P.row;return[C,{onClick:function(){$.toggleRowExpanded()},style:{cursor:"pointer"},title:"Toggle Row Expanded"}]};function Yc(C,P,$,j){if(P.type===u.init)return a({expanded:{}},C);if(P.type===u.resetExpanded)return a({},C,{expanded:j.initialState.expanded||{}});if(P.type===u.toggleAllRowsExpanded){var q=P.value,G=j.rowsById,Z=Object.keys(G).length===Object.keys(C.expanded).length;if(q!==void 0?q:!Z){var ie={};return Object.keys(G).forEach(function(Ee){ie[Ee]=!0}),a({},C,{expanded:ie})}return a({},C,{expanded:{}})}if(P.type===u.toggleRowExpanded){var re,ue=P.id,Te=P.value,ye=C.expanded[ue],Ce=Te!==void 0?Te:!ye;if(!ye&&Ce)return a({},C,{expanded:a({},C.expanded,(re={},re[ue]=!0,re))});if(ye&&!Ce){var ce=C.expanded;return ce[ue],a({},C,{expanded:s(ce,[ue].map(l))})}return C}}function dt(C){var P=C.data,$=C.rows,j=C.rowsById,q=C.manualExpandedKey,G=q===void 0?"expanded":q,Z=C.paginateExpandedRows,ie=Z===void 0||Z,re=C.expandSubRows,ue=re===void 0||re,Te=C.autoResetExpanded,ye=Te===void 0||Te,Ce=C.getHooks,ce=C.plugins,Ee=C.state.expanded,Ne=C.dispatch;b(ce,["useSortBy","useGroupBy","usePivotColumns","useGlobalFilter"],"useExpanded");var Pe=S(ye),Ge=!!(Object.keys(j).length&&Object.keys(Ee).length);Ge&&Object.keys(j).some(function(wt){return!Ee[wt]})&&(Ge=!1),R(function(){Pe()&&Ne({type:u.resetExpanded})},[Ne,P]);var pt=i.useCallback(function(wt,Xe){Ne({type:u.toggleRowExpanded,id:wt,value:Xe})},[Ne]),He=i.useCallback(function(wt){return Ne({type:u.toggleAllRowsExpanded,value:wt})},[Ne]),Fe=i.useMemo(function(){return ie?K($,{manualExpandedKey:G,expanded:Ee,expandSubRows:ue}):$},[ie,$,G,Ee,ue]),lt=i.useMemo(function(){return function(wt){var Xe=0;return Object.keys(wt).forEach(function(ot){var At=ot.split(".");Xe=Math.max(Xe,At.length)}),Xe}(Ee)},[Ee]),je=S(C),at=g(Ce().getToggleAllRowsExpandedProps,{instance:je()});Object.assign(C,{preExpandedRows:$,expandedRows:Fe,rows:Fe,expandedDepth:lt,isAllRowsExpanded:Ge,toggleRowExpanded:pt,toggleAllRowsExpanded:He,getToggleAllRowsExpandedProps:at})}function Gt(C,P){var $=P.instance.getHooks,j=P.instance;C.toggleRowExpanded=function(q){return j.toggleRowExpanded(C.id,q)},C.getToggleRowExpandedProps=g($().getToggleRowExpandedProps,{instance:j,row:C})}var Di=function(C,P,$){return C=C.filter(function(j){return P.some(function(q){var G=j.values[q];return String(G).toLowerCase().includes(String($).toLowerCase())})})};Di.autoRemove=function(C){return!C};var sa=function(C,P,$){return C.filter(function(j){return P.some(function(q){var G=j.values[q];return G===void 0||String(G).toLowerCase()===String($).toLowerCase()})})};sa.autoRemove=function(C){return!C};var nh=function(C,P,$){return C.filter(function(j){return P.some(function(q){var G=j.values[q];return G===void 0||String(G)===String($)})})};nh.autoRemove=function(C){return!C};var ru=function(C,P,$){return C.filter(function(j){return P.some(function(q){return j.values[q].includes($)})})};ru.autoRemove=function(C){return!C||!C.length};var p1=function(C,P,$){return C.filter(function(j){return P.some(function(q){var G=j.values[q];return G&&G.length&&$.every(function(Z){return G.includes(Z)})})})};p1.autoRemove=function(C){return!C||!C.length};var m1=function(C,P,$){return C.filter(function(j){return P.some(function(q){var G=j.values[q];return G&&G.length&&$.some(function(Z){return G.includes(Z)})})})};m1.autoRemove=function(C){return!C||!C.length};var Ym=function(C,P,$){return C.filter(function(j){return P.some(function(q){var G=j.values[q];return $.includes(G)})})};Ym.autoRemove=function(C){return!C||!C.length};var Zm=function(C,P,$){return C.filter(function(j){return P.some(function(q){return j.values[q]===$})})};Zm.autoRemove=function(C){return C===void 0};var Xm=function(C,P,$){return C.filter(function(j){return P.some(function(q){return j.values[q]==$})})};Xm.autoRemove=function(C){return C==null};var g1=function(C,P,$){var j=$||[],q=j[0],G=j[1];if((q=typeof q=="number"?q:-1/0)>(G=typeof G=="number"?G:1/0)){var Z=q;q=G,G=Z}return C.filter(function(ie){return P.some(function(re){var ue=ie.values[re];return ue>=q&&ue<=G})})};g1.autoRemove=function(C){return!C||typeof C[0]!="number"&&typeof C[1]!="number"};var Zc=Object.freeze({__proto__:null,text:Di,exactText:sa,exactTextCase:nh,includes:ru,includesAll:p1,includesSome:m1,includesValue:Ym,exact:Zm,equals:Xm,between:g1});u.resetFilters="resetFilters",u.setFilter="setFilter",u.setAllFilters="setAllFilters";var y1=function(C){C.stateReducers.push(ZC),C.useInstance.push(XC)};function ZC(C,P,$,j){if(P.type===u.init)return a({filters:[]},C);if(P.type===u.resetFilters)return a({},C,{filters:j.initialState.filters||[]});if(P.type===u.setFilter){var q=P.columnId,G=P.filterValue,Z=j.allColumns,ie=j.filterTypes,re=Z.find(function(Ne){return Ne.id===q});if(!re)throw new Error("React-Table: Could not find a column with id: "+q);var ue=H(re.filter,ie||{},Zc),Te=C.filters.find(function(Ne){return Ne.id===q}),ye=w(G,Te&&Te.value);return J(ue.autoRemove,ye,re)?a({},C,{filters:C.filters.filter(function(Ne){return Ne.id!==q})}):a({},C,Te?{filters:C.filters.map(function(Ne){return Ne.id===q?{id:q,value:ye}:Ne})}:{filters:[].concat(C.filters,[{id:q,value:ye}])})}if(P.type===u.setAllFilters){var Ce=P.filters,ce=j.allColumns,Ee=j.filterTypes;return a({},C,{filters:w(Ce,C.filters).filter(function(Ne){var Pe=ce.find(function(Ge){return Ge.id===Ne.id});return!J(H(Pe.filter,Ee||{},Zc).autoRemove,Ne.value,Pe)})})}}function XC(C){var P=C.data,$=C.rows,j=C.flatRows,q=C.rowsById,G=C.allColumns,Z=C.filterTypes,ie=C.manualFilters,re=C.defaultCanFilter,ue=re!==void 0&&re,Te=C.disableFilters,ye=C.state.filters,Ce=C.dispatch,ce=C.autoResetFilters,Ee=ce===void 0||ce,Ne=i.useCallback(function(je,at){Ce({type:u.setFilter,columnId:je,filterValue:at})},[Ce]),Pe=i.useCallback(function(je){Ce({type:u.setAllFilters,filters:je})},[Ce]);G.forEach(function(je){var at=je.id,wt=je.accessor,Xe=je.defaultCanFilter,ot=je.disableFilters;je.canFilter=wt?U(ot!==!0&&void 0,Te!==!0&&void 0,!0):U(Xe,ue,!1),je.setFilter=function(st){return Ne(je.id,st)};var At=ye.find(function(st){return st.id===at});je.filterValue=At&&At.value});var Ge=i.useMemo(function(){if(ie||!ye.length)return[$,j,q];var je=[],at={};return[function wt(Xe,ot){ot===void 0&&(ot=0);var At=Xe;return(At=ye.reduce(function(st,St){var yt=St.id,Zt=St.value,Ue=G.find(function(hn){return hn.id===yt});if(!Ue)return st;ot===0&&(Ue.preFilteredRows=st);var ut=H(Ue.filter,Z||{},Zc);return ut?(Ue.filteredRows=ut(st,[yt],Zt),Ue.filteredRows):(console.warn("Could not find a valid 'column.filter' for column with the ID: "+Ue.id+"."),st)},Xe)).forEach(function(st){je.push(st),at[st.id]=st,st.subRows&&(st.subRows=st.subRows&&st.subRows.length>0?wt(st.subRows,ot+1):st.subRows)}),At}($),je,at]},[ie,ye,$,j,q,G,Z]),pt=Ge[0],He=Ge[1],Fe=Ge[2];i.useMemo(function(){G.filter(function(je){return!ye.find(function(at){return at.id===je.id})}).forEach(function(je){je.preFilteredRows=pt,je.filteredRows=pt})},[pt,ye,G]);var lt=S(Ee);R(function(){lt()&&Ce({type:u.resetFilters})},[Ce,ie?null:P]),Object.assign(C,{preFilteredRows:$,preFilteredFlatRows:j,preFilteredRowsById:q,filteredRows:pt,filteredFlatRows:He,filteredRowsById:Fe,rows:pt,flatRows:He,rowsById:Fe,setFilter:Ne,setAllFilters:Pe})}y1.pluginName="useFilters",u.resetGlobalFilter="resetGlobalFilter",u.setGlobalFilter="setGlobalFilter";var v1=function(C){C.stateReducers.push(Km),C.useInstance.push(KC)};function Km(C,P,$,j){if(P.type===u.resetGlobalFilter)return a({},C,{globalFilter:j.initialState.globalFilter||void 0});if(P.type===u.setGlobalFilter){var q=P.filterValue,G=j.userFilterTypes,Z=H(j.globalFilter,G||{},Zc),ie=w(q,C.globalFilter);return J(Z.autoRemove,ie)?(C.globalFilter,s(C,["globalFilter"])):a({},C,{globalFilter:ie})}}function KC(C){var P=C.data,$=C.rows,j=C.flatRows,q=C.rowsById,G=C.allColumns,Z=C.filterTypes,ie=C.globalFilter,re=C.manualGlobalFilter,ue=C.state.globalFilter,Te=C.dispatch,ye=C.autoResetGlobalFilter,Ce=ye===void 0||ye,ce=C.disableGlobalFilter,Ee=i.useCallback(function(Fe){Te({type:u.setGlobalFilter,filterValue:Fe})},[Te]),Ne=i.useMemo(function(){if(re||ue===void 0)return[$,j,q];var Fe=[],lt={},je=H(ie,Z||{},Zc);if(!je)return console.warn("Could not find a valid 'globalFilter' option."),$;G.forEach(function(wt){var Xe=wt.disableGlobalFilter;wt.canFilter=U(Xe!==!0&&void 0,ce!==!0&&void 0,!0)});var at=G.filter(function(wt){return wt.canFilter===!0});return[function wt(Xe){return(Xe=je(Xe,at.map(function(ot){return ot.id}),ue)).forEach(function(ot){Fe.push(ot),lt[ot.id]=ot,ot.subRows=ot.subRows&&ot.subRows.length?wt(ot.subRows):ot.subRows}),Xe}($),Fe,lt]},[re,ue,ie,Z,G,$,j,q,ce]),Pe=Ne[0],Ge=Ne[1],pt=Ne[2],He=S(Ce);R(function(){He()&&Te({type:u.resetGlobalFilter})},[Te,re?null:P]),Object.assign(C,{preGlobalFilteredRows:$,preGlobalFilteredFlatRows:j,preGlobalFilteredRowsById:q,globalFilteredRows:Pe,globalFilteredFlatRows:Ge,globalFilteredRowsById:pt,rows:Pe,flatRows:Ge,rowsById:pt,setGlobalFilter:Ee,disableGlobalFilter:ce})}function x1(C,P){return P.reduce(function($,j){return $+(typeof j=="number"?j:0)},0)}v1.pluginName="useGlobalFilter";var _1=Object.freeze({__proto__:null,sum:x1,min:function(C){var P=C[0]||0;return C.forEach(function($){typeof $=="number"&&(P=Math.min(P,$))}),P},max:function(C){var P=C[0]||0;return C.forEach(function($){typeof $=="number"&&(P=Math.max(P,$))}),P},minMax:function(C){var P=C[0]||0,$=C[0]||0;return C.forEach(function(j){typeof j=="number"&&(P=Math.min(P,j),$=Math.max($,j))}),P+".."+$},average:function(C){return x1(0,C)/C.length},median:function(C){if(!C.length)return null;var P=Math.floor(C.length/2),$=[].concat(C).sort(function(j,q){return j-q});return C.length%2!=0?$[P]:($[P-1]+$[P])/2},unique:function(C){return Array.from(new Set(C).values())},uniqueCount:function(C){return new Set(C).size},count:function(C){return C.length}}),JC=[],Ao={};u.resetGroupBy="resetGroupBy",u.setGroupBy="setGroupBy",u.toggleGroupBy="toggleGroupBy";var Ze=function(C){C.getGroupByToggleProps=[b1],C.stateReducers.push(w1),C.visibleColumnsDeps.push(function(P,$){var j=$.instance;return[].concat(P,[j.state.groupBy])}),C.visibleColumns.push(S1),C.useInstance.push(Jm),C.prepareRow.push(E1)};Ze.pluginName="useGroupBy";var b1=function(C,P){var $=P.header;return[C,{onClick:$.canGroupBy?function(j){j.persist(),$.toggleGroupBy()}:void 0,style:{cursor:$.canGroupBy?"pointer":void 0},title:"Toggle GroupBy"}]};function w1(C,P,$,j){if(P.type===u.init)return a({groupBy:[]},C);if(P.type===u.resetGroupBy)return a({},C,{groupBy:j.initialState.groupBy||[]});if(P.type===u.setGroupBy)return a({},C,{groupBy:P.value});if(P.type===u.toggleGroupBy){var q=P.columnId,G=P.value,Z=G!==void 0?G:!C.groupBy.includes(q);return a({},C,Z?{groupBy:[].concat(C.groupBy,[q])}:{groupBy:C.groupBy.filter(function(ie){return ie!==q})})}}function S1(C,P){var $=P.instance.state.groupBy,j=$.map(function(G){return C.find(function(Z){return Z.id===G})}).filter(Boolean),q=C.filter(function(G){return!$.includes(G.id)});return(C=[].concat(j,q)).forEach(function(G){G.isGrouped=$.includes(G.id),G.groupedIndex=$.indexOf(G.id)}),C}var C1={};function Jm(C){var P=C.data,$=C.rows,j=C.flatRows,q=C.rowsById,G=C.allColumns,Z=C.flatHeaders,ie=C.groupByFn,re=ie===void 0?Zs:ie,ue=C.manualGroupBy,Te=C.aggregations,ye=Te===void 0?C1:Te,Ce=C.plugins,ce=C.state.groupBy,Ee=C.dispatch,Ne=C.autoResetGroupBy,Pe=Ne===void 0||Ne,Ge=C.disableGroupBy,pt=C.defaultCanGroupBy,He=C.getHooks;b(Ce,["useColumnOrder","useFilters"],"useGroupBy");var Fe=S(C);G.forEach(function(Ue){var ut=Ue.accessor,hn=Ue.defaultGroupBy,si=Ue.disableGroupBy;Ue.canGroupBy=ut?U(Ue.canGroupBy,si!==!0&&void 0,Ge!==!0&&void 0,!0):U(Ue.canGroupBy,hn,pt,!1),Ue.canGroupBy&&(Ue.toggleGroupBy=function(){return C.toggleGroupBy(Ue.id)}),Ue.Aggregated=Ue.Aggregated||Ue.Cell});var lt=i.useCallback(function(Ue,ut){Ee({type:u.toggleGroupBy,columnId:Ue,value:ut})},[Ee]),je=i.useCallback(function(Ue){Ee({type:u.setGroupBy,value:Ue})},[Ee]);Z.forEach(function(Ue){Ue.getGroupByToggleProps=g(He().getGroupByToggleProps,{instance:Fe(),header:Ue})});var at=i.useMemo(function(){if(ue||!ce.length)return[$,j,q,JC,Ao,j,q];var Ue=ce.filter(function(Un){return G.find(function(la){return la.id===Un})}),ut=[],hn={},si=[],nt={},rn=[],xn={},Si=function Un(la,ua,Mr){if(ua===void 0&&(ua=0),ua===Ue.length)return la.map(function(Fr){return a({},Fr,{depth:ua})});var Qa=Ue[ua],lE=re(la,Qa);return Object.entries(lE).map(function(Fr,uE){var Qs=Fr[0],hh=Fr[1],es=Qa+":"+Qs,fg=Un(hh,ua+1,es=Mr?Mr+">"+es:es),rf=ua?V(hh,"leafRows"):hh,cE=function(Ci,dg,hg){var ph={};return G.forEach(function(Xt){if(Ue.includes(Xt.id))ph[Xt.id]=dg[0]?dg[0].values[Xt.id]:null;else{var $1=typeof Xt.aggregate=="function"?Xt.aggregate:ye[Xt.aggregate]||_1[Xt.aggregate];if($1){var cu=dg.map(function(Pr){return Pr.values[Xt.id]}),fE=Ci.map(function(Pr){var fu=Pr.values[Xt.id];if(!hg&&Xt.aggregateValue){var pg=typeof Xt.aggregateValue=="function"?Xt.aggregateValue:ye[Xt.aggregateValue]||_1[Xt.aggregateValue];if(!pg)throw console.info({column:Xt}),new Error("React Table: Invalid column.aggregateValue option for column listed above");fu=pg(fu,Pr,Xt)}return fu});ph[Xt.id]=$1(fE,cu)}else{if(Xt.aggregate)throw console.info({column:Xt}),new Error("React Table: Invalid column.aggregate option for column listed above");ph[Xt.id]=null}}}),ph}(rf,hh,ua),ts={id:es,isGrouped:!0,groupByID:Qa,groupByVal:Qs,values:cE,subRows:fg,leafRows:rf,depth:ua,index:uE};return fg.forEach(function(Ci){ut.push(Ci),hn[Ci.id]=Ci,Ci.isGrouped?(si.push(Ci),nt[Ci.id]=Ci):(rn.push(Ci),xn[Ci.id]=Ci)}),ts})}($);return Si.forEach(function(Un){ut.push(Un),hn[Un.id]=Un,Un.isGrouped?(si.push(Un),nt[Un.id]=Un):(rn.push(Un),xn[Un.id]=Un)}),[Si,ut,hn,si,nt,rn,xn]},[ue,ce,$,j,q,G,ye,re]),wt=at[0],Xe=at[1],ot=at[2],At=at[3],st=at[4],St=at[5],yt=at[6],Zt=S(Pe);R(function(){Zt()&&Ee({type:u.resetGroupBy})},[Ee,ue?null:P]),Object.assign(C,{preGroupedRows:$,preGroupedFlatRow:j,preGroupedRowsById:q,groupedRows:wt,groupedFlatRows:Xe,groupedRowsById:ot,onlyGroupedFlatRows:At,onlyGroupedRowsById:st,nonGroupedFlatRows:St,nonGroupedRowsById:yt,rows:wt,flatRows:Xe,rowsById:ot,toggleGroupBy:lt,setGroupBy:je})}function E1(C){C.allCells.forEach(function(P){var $;P.isGrouped=P.column.isGrouped&&P.column.id===C.groupByID,P.isPlaceholder=!P.isGrouped&&P.column.isGrouped,P.isAggregated=!P.isGrouped&&!P.isPlaceholder&&(($=C.subRows)==null?void 0:$.length)})}function Zs(C,P){return C.reduce(function($,j,q){var G=""+j.values[P];return $[G]=Array.isArray($[G])?$[G]:[],$[G].push(j),$},{})}var Qm=/([0-9]+)/gm;function eg(C,P){return C===P?0:C>P?1:-1}function Xc(C,P,$){return[C.values[$],P.values[$]]}function k1(C){return typeof C=="number"?isNaN(C)||C===1/0||C===-1/0?"":String(C):typeof C=="string"?C:""}var QC=Object.freeze({__proto__:null,alphanumeric:function(C,P,$){var j=Xc(C,P,$),q=j[0],G=j[1];for(q=k1(q),G=k1(G),q=q.split(Qm).filter(Boolean),G=G.split(Qm).filter(Boolean);q.length&&G.length;){var Z=q.shift(),ie=G.shift(),re=parseInt(Z,10),ue=parseInt(ie,10),Te=[re,ue].sort();if(isNaN(Te[0])){if(Z>ie)return 1;if(ie>Z)return-1}else{if(isNaN(Te[1]))return isNaN(re)?-1:1;if(re>ue)return 1;if(ue>re)return-1}}return q.length-G.length},datetime:function(C,P,$){var j=Xc(C,P,$),q=j[0],G=j[1];return eg(q=q.getTime(),G=G.getTime())},basic:function(C,P,$){var j=Xc(C,P,$);return eg(j[0],j[1])},string:function(C,P,$){var j=Xc(C,P,$),q=j[0],G=j[1];for(q=q.split("").filter(Boolean),G=G.split("").filter(Boolean);q.length&&G.length;){var Z=q.shift(),ie=G.shift(),re=Z.toLowerCase(),ue=ie.toLowerCase();if(re>ue)return 1;if(ue>re)return-1;if(Z>ie)return 1;if(ie>Z)return-1}return q.length-G.length},number:function(C,P,$){var j=Xc(C,P,$),q=j[0],G=j[1],Z=/[^0-9.]/gi;return eg(q=Number(String(q).replace(Z,"")),G=Number(String(G).replace(Z,"")))}});u.resetSortBy="resetSortBy",u.setSortBy="setSortBy",u.toggleSortBy="toggleSortBy",u.clearSortBy="clearSortBy",h.sortType="alphanumeric",h.sortDescFirst=!1;var tg=function(C){C.getSortByToggleProps=[eE],C.stateReducers.push(ih),C.useInstance.push(tE)};tg.pluginName="useSortBy";var eE=function(C,P){var $=P.instance,j=P.column,q=$.isMultiSortEvent,G=q===void 0?function(Z){return Z.shiftKey}:q;return[C,{onClick:j.canSort?function(Z){Z.persist(),j.toggleSortBy(void 0,!$.disableMultiSort&&G(Z))}:void 0,style:{cursor:j.canSort?"pointer":void 0},title:j.canSort?"Toggle SortBy":void 0}]};function ih(C,P,$,j){if(P.type===u.init)return a({sortBy:[]},C);if(P.type===u.resetSortBy)return a({},C,{sortBy:j.initialState.sortBy||[]});if(P.type===u.clearSortBy)return a({},C,{sortBy:C.sortBy.filter(function(Fe){return Fe.id!==P.columnId})});if(P.type===u.setSortBy)return a({},C,{sortBy:P.sortBy});if(P.type===u.toggleSortBy){var q,G=P.columnId,Z=P.desc,ie=P.multi,re=j.allColumns,ue=j.disableMultiSort,Te=j.disableSortRemove,ye=j.disableMultiRemove,Ce=j.maxMultiSortColCount,ce=Ce===void 0?Number.MAX_SAFE_INTEGER:Ce,Ee=C.sortBy,Ne=re.find(function(Fe){return Fe.id===G}).sortDescFirst,Pe=Ee.find(function(Fe){return Fe.id===G}),Ge=Ee.findIndex(function(Fe){return Fe.id===G}),pt=Z!=null,He=[];return(q=!ue&&ie?Pe?"toggle":"add":Ge!==Ee.length-1||Ee.length!==1?"replace":Pe?"toggle":"replace")!="toggle"||Te||pt||ie&&ye||!(Pe&&Pe.desc&&!Ne||!Pe.desc&&Ne)||(q="remove"),q==="replace"?He=[{id:G,desc:pt?Z:Ne}]:q==="add"?(He=[].concat(Ee,[{id:G,desc:pt?Z:Ne}])).splice(0,He.length-ce):q==="toggle"?He=Ee.map(function(Fe){return Fe.id===G?a({},Fe,{desc:pt?Z:!Pe.desc}):Fe}):q==="remove"&&(He=Ee.filter(function(Fe){return Fe.id!==G})),a({},C,{sortBy:He})}}function tE(C){var P=C.data,$=C.rows,j=C.flatRows,q=C.allColumns,G=C.orderByFn,Z=G===void 0?R1:G,ie=C.sortTypes,re=C.manualSortBy,ue=C.defaultCanSort,Te=C.disableSortBy,ye=C.flatHeaders,Ce=C.state.sortBy,ce=C.dispatch,Ee=C.plugins,Ne=C.getHooks,Pe=C.autoResetSortBy,Ge=Pe===void 0||Pe;b(Ee,["useFilters","useGlobalFilter","useGroupBy","usePivotColumns"],"useSortBy");var pt=i.useCallback(function(Xe){ce({type:u.setSortBy,sortBy:Xe})},[ce]),He=i.useCallback(function(Xe,ot,At){ce({type:u.toggleSortBy,columnId:Xe,desc:ot,multi:At})},[ce]),Fe=S(C);ye.forEach(function(Xe){var ot=Xe.accessor,At=Xe.canSort,st=Xe.disableSortBy,St=Xe.id,yt=ot?U(st!==!0&&void 0,Te!==!0&&void 0,!0):U(ue,At,!1);Xe.canSort=yt,Xe.canSort&&(Xe.toggleSortBy=function(Ue,ut){return He(Xe.id,Ue,ut)},Xe.clearSortBy=function(){ce({type:u.clearSortBy,columnId:Xe.id})}),Xe.getSortByToggleProps=g(Ne().getSortByToggleProps,{instance:Fe(),column:Xe});var Zt=Ce.find(function(Ue){return Ue.id===St});Xe.isSorted=!!Zt,Xe.sortedIndex=Ce.findIndex(function(Ue){return Ue.id===St}),Xe.isSortedDesc=Xe.isSorted?Zt.desc:void 0});var lt=i.useMemo(function(){if(re||!Ce.length)return[$,j];var Xe=[],ot=Ce.filter(function(At){return q.find(function(st){return st.id===At.id})});return[function At(st){var St=Z(st,ot.map(function(yt){var Zt=q.find(function(hn){return hn.id===yt.id});if(!Zt)throw new Error("React-Table: Could not find a column with id: "+yt.id+" while sorting");var Ue=Zt.sortType,ut=B(Ue)||(ie||{})[Ue]||QC[Ue];if(!ut)throw new Error("React-Table: Could not find a valid sortType of '"+Ue+"' for column '"+yt.id+"'.");return function(hn,si){return ut(hn,si,yt.id,yt.desc)}}),ot.map(function(yt){var Zt=q.find(function(Ue){return Ue.id===yt.id});return Zt&&Zt.sortInverted?yt.desc:!yt.desc}));return St.forEach(function(yt){Xe.push(yt),yt.subRows&&yt.subRows.length!==0&&(yt.subRows=At(yt.subRows))}),St}($),Xe]},[re,Ce,$,j,q,Z,ie]),je=lt[0],at=lt[1],wt=S(Ge);R(function(){wt()&&ce({type:u.resetSortBy})},[re?null:P]),Object.assign(C,{preSortedRows:$,preSortedFlatRows:j,sortedRows:je,sortedFlatRows:at,rows:je,flatRows:at,setSortBy:pt,toggleSortBy:He})}function R1(C,P,$){return[].concat(C).sort(function(j,q){for(var G=0;G<P.length;G+=1){var Z=P[G],ie=$[G]===!1||$[G]==="desc",re=Z(j,q);if(re!==0)return ie?-re:re}return $[0]?j.index-q.index:q.index-j.index})}u.resetPage="resetPage",u.gotoPage="gotoPage",u.setPageSize="setPageSize";var T1=function(C){C.stateReducers.push(nE),C.useInstance.push(iE)};function nE(C,P,$,j){if(P.type===u.init)return a({pageSize:10,pageIndex:0},C);if(P.type===u.resetPage)return a({},C,{pageIndex:j.initialState.pageIndex||0});if(P.type===u.gotoPage){var q=j.pageCount,G=j.page,Z=w(P.pageIndex,C.pageIndex),ie=!1;return Z>C.pageIndex?ie=q===-1?G.length>=C.pageSize:Z<q:Z<C.pageIndex&&(ie=Z>-1),ie?a({},C,{pageIndex:Z}):C}if(P.type===u.setPageSize){var re=P.pageSize,ue=C.pageSize*C.pageIndex;return a({},C,{pageIndex:Math.floor(ue/re),pageSize:re})}}function iE(C){var P=C.rows,$=C.autoResetPage,j=$===void 0||$,q=C.manualExpandedKey,G=q===void 0?"expanded":q,Z=C.plugins,ie=C.pageCount,re=C.paginateExpandedRows,ue=re===void 0||re,Te=C.expandSubRows,ye=Te===void 0||Te,Ce=C.state,ce=Ce.pageSize,Ee=Ce.pageIndex,Ne=Ce.expanded,Pe=Ce.globalFilter,Ge=Ce.filters,pt=Ce.groupBy,He=Ce.sortBy,Fe=C.dispatch,lt=C.data,je=C.manualPagination;b(Z,["useGlobalFilter","useFilters","useGroupBy","useSortBy","useExpanded"],"usePagination");var at=S(j);R(function(){at()&&Fe({type:u.resetPage})},[Fe,je?null:lt,Pe,Ge,pt,He]);var wt=je?ie:Math.ceil(P.length/ce),Xe=i.useMemo(function(){return wt>0?[].concat(new Array(wt)).fill(null).map(function(ut,hn){return hn}):[]},[wt]),ot=i.useMemo(function(){var ut;if(je)ut=P;else{var hn=ce*Ee,si=hn+ce;ut=P.slice(hn,si)}return ue?ut:K(ut,{manualExpandedKey:G,expanded:Ne,expandSubRows:ye})},[ye,Ne,G,je,Ee,ce,ue,P]),At=Ee>0,st=wt===-1?ot.length>=ce:Ee<wt-1,St=i.useCallback(function(ut){Fe({type:u.gotoPage,pageIndex:ut})},[Fe]),yt=i.useCallback(function(){return St(function(ut){return ut-1})},[St]),Zt=i.useCallback(function(){return St(function(ut){return ut+1})},[St]),Ue=i.useCallback(function(ut){Fe({type:u.setPageSize,pageSize:ut})},[Fe]);Object.assign(C,{pageOptions:Xe,pageCount:wt,page:ot,canPreviousPage:At,canNextPage:st,gotoPage:St,previousPage:yt,nextPage:Zt,setPageSize:Ue})}T1.pluginName="usePagination",u.resetPivot="resetPivot",u.togglePivot="togglePivot";var rh=function(C){C.getPivotToggleProps=[A1],C.stateReducers.push(M1),C.useInstanceAfterData.push(Kc),C.allColumns.push(Dt),C.accessValue.push(dn),C.materializedColumns.push(oh),C.materializedColumnsDeps.push(au),C.visibleColumns.push(su),C.visibleColumnsDeps.push(ng),C.useInstance.push(vt),C.prepareRow.push(En)};rh.pluginName="usePivotColumns";var ou=[],A1=function(C,P){var $=P.header;return[C,{onClick:$.canPivot?function(j){j.persist(),$.togglePivot()}:void 0,style:{cursor:$.canPivot?"pointer":void 0},title:"Toggle Pivot"}]};function M1(C,P,$,j){if(P.type===u.init)return a({pivotColumns:ou},C);if(P.type===u.resetPivot)return a({},C,{pivotColumns:j.initialState.pivotColumns||ou});if(P.type===u.togglePivot){var q=P.columnId,G=P.value,Z=G!==void 0?G:!C.pivotColumns.includes(q);return a({},C,Z?{pivotColumns:[].concat(C.pivotColumns,[q])}:{pivotColumns:C.pivotColumns.filter(function(ie){return ie!==q})})}}function Kc(C){C.allColumns.forEach(function(P){P.isPivotSource=C.state.pivotColumns.includes(P.id)})}function Dt(C,P){var $=P.instance;return C.forEach(function(j){j.isPivotSource=$.state.pivotColumns.includes(j.id),j.uniqueValues=new Set}),C}function dn(C,P){var $=P.column;return $.uniqueValues&&C!==void 0&&$.uniqueValues.add(C),C}function oh(C,P){var $=P.instance,j=$.allColumns,q=$.state;if(!q.pivotColumns.length||!q.groupBy||!q.groupBy.length)return C;var G=q.pivotColumns.map(function(re){return j.find(function(ue){return ue.id===re})}).filter(Boolean),Z=j.filter(function(re){return!re.isPivotSource&&!q.groupBy.includes(re.id)&&!q.pivotColumns.includes(re.id)}),ie=D(function re(ue,Te,ye){ue===void 0&&(ue=0),ye===void 0&&(ye=[]);var Ce=G[ue];return Ce?Array.from(Ce.uniqueValues).sort().map(function(ce){var Ee=a({},Ce,{Header:Ce.PivotHeader||typeof Ce.header=="string"?Ce.Header+": "+ce:ce,isPivotGroup:!0,parent:Te,depth:ue,id:Te?Te.id+"."+Ce.id+"."+ce:Ce.id+"."+ce,pivotValue:ce});return Ee.columns=re(ue+1,Ee,[].concat(ye,[function(Ne){return Ne.values[Ce.id]===ce}])),Ee}):Z.map(function(ce){return a({},ce,{canPivot:!1,isPivoted:!0,parent:Te,depth:ue,id:""+(Te?Te.id+"."+ce.id:ce.id),accessor:function(Ee,Ne,Pe){if(ye.every(function(Ge){return Ge(Pe)}))return Pe.values[ce.id]}})})}());return[].concat(C,ie)}function au(C,P){var $=P.instance.state,j=$.pivotColumns,q=$.groupBy;return[].concat(C,[j,q])}function su(C,P){var $=P.instance.state;return C=C.filter(function(j){return!j.isPivotSource}),$.pivotColumns.length&&$.groupBy&&$.groupBy.length&&(C=C.filter(function(j){return j.isGrouped||j.isPivoted})),C}function ng(C,P){var $=P.instance;return[].concat(C,[$.state.pivotColumns,$.state.groupBy])}function vt(C){var P=C.columns,$=C.allColumns,j=C.flatHeaders,q=C.getHooks,G=C.plugins,Z=C.dispatch,ie=C.autoResetPivot,re=ie===void 0||ie,ue=C.manaulPivot,Te=C.disablePivot,ye=C.defaultCanPivot;b(G,["useGroupBy"],"usePivotColumns");var Ce=S(C);$.forEach(function(Ee){var Ne=Ee.accessor,Pe=Ee.defaultPivot,Ge=Ee.disablePivot;Ee.canPivot=Ne?U(Ee.canPivot,Ge!==!0&&void 0,Te!==!0&&void 0,!0):U(Ee.canPivot,Pe,ye,!1),Ee.canPivot&&(Ee.togglePivot=function(){return C.togglePivot(Ee.id)}),Ee.Aggregated=Ee.Aggregated||Ee.Cell}),j.forEach(function(Ee){Ee.getPivotToggleProps=g(q().getPivotToggleProps,{instance:Ce(),header:Ee})});var ce=S(re);R(function(){ce()&&Z({type:u.resetPivot})},[Z,ue?null:P]),Object.assign(C,{togglePivot:function(Ee,Ne){Z({type:u.togglePivot,columnId:Ee,value:Ne})}})}function En(C){C.allCells.forEach(function(P){P.isPivoted=P.column.isPivoted})}u.resetSelectedRows="resetSelectedRows",u.toggleAllRowsSelected="toggleAllRowsSelected",u.toggleRowSelected="toggleRowSelected",u.toggleAllPageRowsSelected="toggleAllPageRowsSelected";var ah=function(C){C.getToggleRowSelectedProps=[sh],C.getToggleAllRowsSelectedProps=[Tr],C.getToggleAllPageRowsSelectedProps=[rE],C.stateReducers.push(lh),C.useInstance.push(Xs),C.prepareRow.push(Mn)};ah.pluginName="useRowSelect";var sh=function(C,P){var $=P.instance,j=P.row,q=$.manualRowSelectedKey,G=q===void 0?"isSelected":q;return[C,{onChange:function(Z){j.toggleRowSelected(Z.target.checked)},style:{cursor:"pointer"},checked:!(!j.original||!j.original[G])||j.isSelected,title:"Toggle Row Selected",indeterminate:j.isSomeSelected}]},Tr=function(C,P){var $=P.instance;return[C,{onChange:function(j){$.toggleAllRowsSelected(j.target.checked)},style:{cursor:"pointer"},checked:$.isAllRowsSelected,title:"Toggle All Rows Selected",indeterminate:!!(!$.isAllRowsSelected&&Object.keys($.state.selectedRowIds).length)}]},rE=function(C,P){var $=P.instance;return[C,{onChange:function(j){$.toggleAllPageRowsSelected(j.target.checked)},style:{cursor:"pointer"},checked:$.isAllPageRowsSelected,title:"Toggle All Current Page Rows Selected",indeterminate:!!(!$.isAllPageRowsSelected&&$.page.some(function(j){var q=j.id;return $.state.selectedRowIds[q]}))}]};function lh(C,P,$,j){if(P.type===u.init)return a({selectedRowIds:{}},C);if(P.type===u.resetSelectedRows)return a({},C,{selectedRowIds:j.initialState.selectedRowIds||{}});if(P.type===u.toggleAllRowsSelected){var q=P.value,G=j.isAllRowsSelected,Z=j.rowsById,ie=j.nonGroupedRowsById,re=ie===void 0?Z:ie,ue=q!==void 0?q:!G,Te=Object.assign({},C.selectedRowIds);return ue?Object.keys(re).forEach(function(St){Te[St]=!0}):Object.keys(re).forEach(function(St){delete Te[St]}),a({},C,{selectedRowIds:Te})}if(P.type===u.toggleRowSelected){var ye=P.id,Ce=P.value,ce=j.rowsById,Ee=j.selectSubRows,Ne=Ee===void 0||Ee,Pe=j.getSubRows,Ge=C.selectedRowIds[ye],pt=Ce!==void 0?Ce:!Ge;if(Ge===pt)return C;var He=a({},C.selectedRowIds);return function St(yt){var Zt=ce[yt];if(Zt&&(Zt.isGrouped||(pt?He[yt]=!0:delete He[yt]),Ne&&Pe(Zt)))return Pe(Zt).forEach(function(Ue){return St(Ue.id)})}(ye),a({},C,{selectedRowIds:He})}if(P.type===u.toggleAllPageRowsSelected){var Fe=P.value,lt=j.page,je=j.rowsById,at=j.selectSubRows,wt=at===void 0||at,Xe=j.isAllPageRowsSelected,ot=j.getSubRows,At=Fe!==void 0?Fe:!Xe,st=a({},C.selectedRowIds);return lt.forEach(function(St){return function yt(Zt){var Ue=je[Zt];if(Ue.isGrouped||(At?st[Zt]=!0:delete st[Zt]),wt&&ot(Ue))return ot(Ue).forEach(function(ut){return yt(ut.id)})}(St.id)}),a({},C,{selectedRowIds:st})}return C}function Xs(C){var P=C.data,$=C.rows,j=C.getHooks,q=C.plugins,G=C.rowsById,Z=C.nonGroupedRowsById,ie=Z===void 0?G:Z,re=C.autoResetSelectedRows,ue=re===void 0||re,Te=C.state.selectedRowIds,ye=C.selectSubRows,Ce=ye===void 0||ye,ce=C.dispatch,Ee=C.page,Ne=C.getSubRows;b(q,["useFilters","useGroupBy","useSortBy","useExpanded","usePagination"],"useRowSelect");var Pe=i.useMemo(function(){var ot=[];return $.forEach(function(At){var st=Ce?function St(yt,Zt,Ue){if(Zt[yt.id])return!0;var ut=Ue(yt);if(ut&&ut.length){var hn=!0,si=!1;return ut.forEach(function(nt){si&&!hn||(St(nt,Zt,Ue)?si=!0:hn=!1)}),!!hn||!!si&&null}return!1}(At,Te,Ne):!!Te[At.id];At.isSelected=!!st,At.isSomeSelected=st===null,st&&ot.push(At)}),ot},[$,Ce,Te,Ne]),Ge=!!(Object.keys(ie).length&&Object.keys(Te).length),pt=Ge;Ge&&Object.keys(ie).some(function(ot){return!Te[ot]})&&(Ge=!1),Ge||Ee&&Ee.length&&Ee.some(function(ot){var At=ot.id;return!Te[At]})&&(pt=!1);var He=S(ue);R(function(){He()&&ce({type:u.resetSelectedRows})},[ce,P]);var Fe=i.useCallback(function(ot){return ce({type:u.toggleAllRowsSelected,value:ot})},[ce]),lt=i.useCallback(function(ot){return ce({type:u.toggleAllPageRowsSelected,value:ot})},[ce]),je=i.useCallback(function(ot,At){return ce({type:u.toggleRowSelected,id:ot,value:At})},[ce]),at=S(C),wt=g(j().getToggleAllRowsSelectedProps,{instance:at()}),Xe=g(j().getToggleAllPageRowsSelectedProps,{instance:at()});Object.assign(C,{selectedFlatRows:Pe,isAllRowsSelected:Ge,isAllPageRowsSelected:pt,toggleRowSelected:je,toggleAllRowsSelected:Fe,getToggleAllRowsSelectedProps:wt,getToggleAllPageRowsSelectedProps:Xe,toggleAllPageRowsSelected:lt})}function Mn(C,P){var $=P.instance;C.toggleRowSelected=function(j){return $.toggleRowSelected(C.id,j)},C.getToggleRowSelectedProps=g($.getHooks().getToggleRowSelectedProps,{instance:$,row:C})}var Ka=function(C){return{}},lu=function(C){return{}};u.setRowState="setRowState",u.setCellState="setCellState",u.resetRowState="resetRowState";var uu=function(C){C.stateReducers.push(ig),C.useInstance.push(Jc),C.prepareRow.push(rg)};function ig(C,P,$,j){var q=j.initialRowStateAccessor,G=q===void 0?Ka:q,Z=j.initialCellStateAccessor,ie=Z===void 0?lu:Z,re=j.rowsById;if(P.type===u.init)return a({rowState:{}},C);if(P.type===u.resetRowState)return a({},C,{rowState:j.initialState.rowState||{}});if(P.type===u.setRowState){var ue,Te=P.rowId,ye=P.value,Ce=C.rowState[Te]!==void 0?C.rowState[Te]:G(re[Te]);return a({},C,{rowState:a({},C.rowState,(ue={},ue[Te]=w(ye,Ce),ue))})}if(P.type===u.setCellState){var ce,Ee,Ne,Pe,Ge,pt=P.rowId,He=P.columnId,Fe=P.value,lt=C.rowState[pt]!==void 0?C.rowState[pt]:G(re[pt]),je=(lt==null||(ce=lt.cellState)==null?void 0:ce[He])!==void 0?lt.cellState[He]:ie((Ee=re[pt])==null||(Ne=Ee.cells)==null?void 0:Ne.find(function(at){return at.column.id===He}));return a({},C,{rowState:a({},C.rowState,(Ge={},Ge[pt]=a({},lt,{cellState:a({},lt.cellState||{},(Pe={},Pe[He]=w(Fe,je),Pe))}),Ge))})}}function Jc(C){var P=C.autoResetRowState,$=P===void 0||P,j=C.data,q=C.dispatch,G=i.useCallback(function(re,ue){return q({type:u.setRowState,rowId:re,value:ue})},[q]),Z=i.useCallback(function(re,ue,Te){return q({type:u.setCellState,rowId:re,columnId:ue,value:Te})},[q]),ie=S($);R(function(){ie()&&q({type:u.resetRowState})},[j]),Object.assign(C,{setRowState:G,setCellState:Z})}function rg(C,P){var $=P.instance,j=$.initialRowStateAccessor,q=j===void 0?Ka:j,G=$.initialCellStateAccessor,Z=G===void 0?lu:G,ie=$.state.rowState;C&&(C.state=ie[C.id]!==void 0?ie[C.id]:q(C),C.setState=function(re){return $.setRowState(C.id,re)},C.cells.forEach(function(re){C.state.cellState||(C.state.cellState={}),re.state=C.state.cellState[re.column.id]!==void 0?C.state.cellState[re.column.id]:Z(re),re.setState=function(ue){return $.setCellState(C.id,re.column.id,ue)}}))}uu.pluginName="useRowState",u.resetColumnOrder="resetColumnOrder",u.setColumnOrder="setColumnOrder";var uh=function(C){C.stateReducers.push(ch),C.visibleColumnsDeps.push(function(P,$){var j=$.instance;return[].concat(P,[j.state.columnOrder])}),C.visibleColumns.push(og),C.useInstance.push(ag)};function ch(C,P,$,j){return P.type===u.init?a({columnOrder:[]},C):P.type===u.resetColumnOrder?a({},C,{columnOrder:j.initialState.columnOrder||[]}):P.type===u.setColumnOrder?a({},C,{columnOrder:w(P.columnOrder,C.columnOrder)}):void 0}function og(C,P){var $=P.instance.state.columnOrder;if(!$||!$.length)return C;for(var j=[].concat($),q=[].concat(C),G=[],Z=function(){var ie=j.shift(),re=q.findIndex(function(ue){return ue.id===ie});re>-1&&G.push(q.splice(re,1)[0])};q.length&&j.length;)Z();return[].concat(G,q)}function ag(C){var P=C.dispatch;C.setColumnOrder=i.useCallback(function($){return P({type:u.setColumnOrder,columnOrder:$})},[P])}uh.pluginName="useColumnOrder",h.canResize=!0,u.columnStartResizing="columnStartResizing",u.columnResizing="columnResizing",u.columnDoneResizing="columnDoneResizing",u.resetResize="resetResize";var Qc=function(C){C.getResizerProps=[F1],C.getHeaderProps.push({style:{position:"relative"}}),C.stateReducers.push(sg),C.useInstance.push(gt),C.useInstanceBeforeDimensions.push(oE)},F1=function(C,P){var $=P.instance,j=P.header,q=$.dispatch,G=function(Z,ie){var re=!1;if(Z.type==="touchstart"){if(Z.touches&&Z.touches.length>1)return;re=!0}var ue,Te,ye=function(He){var Fe=[];return function lt(je){je.columns&&je.columns.length&&je.columns.map(lt),Fe.push(je)}(He),Fe}(ie).map(function(He){return[He.id,He.totalWidth]}),Ce=re?Math.round(Z.touches[0].clientX):Z.clientX,ce=function(){window.cancelAnimationFrame(ue),ue=null,q({type:u.columnDoneResizing})},Ee=function(){window.cancelAnimationFrame(ue),ue=null,q({type:u.columnResizing,clientX:Te})},Ne=function(He){Te=He,ue||(ue=window.requestAnimationFrame(Ee))},Pe={mouse:{moveEvent:"mousemove",moveHandler:function(He){return Ne(He.clientX)},upEvent:"mouseup",upHandler:function(He){document.removeEventListener("mousemove",Pe.mouse.moveHandler),document.removeEventListener("mouseup",Pe.mouse.upHandler),ce()}},touch:{moveEvent:"touchmove",moveHandler:function(He){return He.cancelable&&(He.preventDefault(),He.stopPropagation()),Ne(He.touches[0].clientX),!1},upEvent:"touchend",upHandler:function(He){document.removeEventListener(Pe.touch.moveEvent,Pe.touch.moveHandler),document.removeEventListener(Pe.touch.upEvent,Pe.touch.moveHandler),ce()}}},Ge=re?Pe.touch:Pe.mouse,pt=!!function(){if(typeof oe=="boolean")return oe;var He=!1;try{var Fe={get passive(){return He=!0,!1}};window.addEventListener("test",null,Fe),window.removeEventListener("test",null,Fe)}catch{He=!1}return oe=He}()&&{passive:!1};document.addEventListener(Ge.moveEvent,Ge.moveHandler,pt),document.addEventListener(Ge.upEvent,Ge.upHandler,pt),q({type:u.columnStartResizing,columnId:ie.id,columnWidth:ie.totalWidth,headerIdWidths:ye,clientX:Ce})};return[C,{onMouseDown:function(Z){return Z.persist()||G(Z,j)},onTouchStart:function(Z){return Z.persist()||G(Z,j)},style:{cursor:"col-resize"},draggable:!1,role:"separator"}]};function sg(C,P){if(P.type===u.init)return a({columnResizing:{columnWidths:{}}},C);if(P.type===u.resetResize)return a({},C,{columnResizing:{columnWidths:{}}});if(P.type===u.columnStartResizing){var $=P.clientX,j=P.columnId,q=P.columnWidth,G=P.headerIdWidths;return a({},C,{columnResizing:a({},C.columnResizing,{startX:$,headerIdWidths:G,columnWidth:q,isResizingColumn:j})})}if(P.type===u.columnResizing){var Z=P.clientX,ie=C.columnResizing,re=ie.startX,ue=ie.columnWidth,Te=ie.headerIdWidths,ye=(Z-re)/ue,Ce={};return(Te===void 0?[]:Te).forEach(function(ce){var Ee=ce[0],Ne=ce[1];Ce[Ee]=Math.max(Ne+Ne*ye,0)}),a({},C,{columnResizing:a({},C.columnResizing,{columnWidths:a({},C.columnResizing.columnWidths,{},Ce)})})}return P.type===u.columnDoneResizing?a({},C,{columnResizing:a({},C.columnResizing,{startX:null,isResizingColumn:null})}):void 0}Qc.pluginName="useResizeColumns";var oE=function(C){var P=C.flatHeaders,$=C.disableResizing,j=C.getHooks,q=C.state.columnResizing,G=S(C);P.forEach(function(Z){var ie=U(Z.disableResizing!==!0&&void 0,$!==!0&&void 0,!0);Z.canResize=ie,Z.width=q.columnWidths[Z.id]||Z.originalWidth||Z.width,Z.isResizing=q.isResizingColumn===Z.id,ie&&(Z.getResizerProps=g(j().getResizerProps,{instance:G(),header:Z}))})};function gt(C){var P=C.plugins,$=C.dispatch,j=C.autoResetResize,q=j===void 0||j,G=C.columns;b(P,["useAbsoluteLayout"],"useResizeColumns");var Z=S(q);R(function(){Z()&&$({type:u.resetResize})},[G]);var ie=i.useCallback(function(){return $({type:u.resetResize})},[$]);Object.assign(C,{resetResizing:ie})}var Ar={position:"absolute",top:0},Qt=function(C){C.getTableBodyProps.push(ef),C.getRowProps.push(ef),C.getHeaderGroupProps.push(ef),C.getFooterGroupProps.push(ef),C.getHeaderProps.push(function(P,$){var j=$.column;return[P,{style:a({},Ar,{left:j.totalLeft+"px",width:j.totalWidth+"px"})}]}),C.getCellProps.push(function(P,$){var j=$.cell;return[P,{style:a({},Ar,{left:j.column.totalLeft+"px",width:j.column.totalWidth+"px"})}]}),C.getFooterProps.push(function(P,$){var j=$.column;return[P,{style:a({},Ar,{left:j.totalLeft+"px",width:j.totalWidth+"px"})}]})};Qt.pluginName="useAbsoluteLayout";var ef=function(C,P){return[C,{style:{position:"relative",width:P.instance.totalColumnsWidth+"px"}}]},tf={display:"inline-block",boxSizing:"border-box"},nf=function(C,P){return[C,{style:{display:"flex",width:P.instance.totalColumnsWidth+"px"}}]},fh=function(C){C.getRowProps.push(nf),C.getHeaderGroupProps.push(nf),C.getFooterGroupProps.push(nf),C.getHeaderProps.push(function(P,$){var j=$.column;return[P,{style:a({},tf,{width:j.totalWidth+"px"})}]}),C.getCellProps.push(function(P,$){var j=$.cell;return[P,{style:a({},tf,{width:j.column.totalWidth+"px"})}]}),C.getFooterProps.push(function(P,$){var j=$.column;return[P,{style:a({},tf,{width:j.totalWidth+"px"})}]})};function Ja(C){C.getTableProps.push(lg),C.getRowProps.push(Ks),C.getHeaderGroupProps.push(Ks),C.getFooterGroupProps.push(Ks),C.getHeaderProps.push(Zn),C.getCellProps.push(Js),C.getFooterProps.push(P1)}fh.pluginName="useBlockLayout",Ja.pluginName="useFlexLayout";var lg=function(C,P){return[C,{style:{minWidth:P.instance.totalColumnsMinWidth+"px"}}]},Ks=function(C,P){return[C,{style:{display:"flex",flex:"1 0 auto",minWidth:P.instance.totalColumnsMinWidth+"px"}}]},Zn=function(C,P){var $=P.column;return[C,{style:{boxSizing:"border-box",flex:$.totalFlexWidth?$.totalFlexWidth+" 0 auto":void 0,minWidth:$.totalMinWidth+"px",width:$.totalWidth+"px"}}]},Js=function(C,P){var $=P.cell;return[C,{style:{boxSizing:"border-box",flex:$.column.totalFlexWidth+" 0 auto",minWidth:$.column.totalMinWidth+"px",width:$.column.totalWidth+"px"}}]},P1=function(C,P){var $=P.column;return[C,{style:{boxSizing:"border-box",flex:$.totalFlexWidth?$.totalFlexWidth+" 0 auto":void 0,minWidth:$.totalMinWidth+"px",width:$.totalWidth+"px"}}]};function ug(C){C.stateReducers.push(sE),C.getTableProps.push(aE),C.getHeaderProps.push(N1),C.getRowProps.push(cg)}u.columnStartResizing="columnStartResizing",u.columnResizing="columnResizing",u.columnDoneResizing="columnDoneResizing",u.resetResize="resetResize",ug.pluginName="useGridLayout";var aE=function(C,P){var $=P.instance;return[C,{style:{display:"grid",gridTemplateColumns:$.visibleColumns.map(function(j){var q;return $.state.gridLayout.columnWidths[j.id]?$.state.gridLayout.columnWidths[j.id]+"px":(q=$.state.columnResizing)!=null&&q.isResizingColumn?$.state.gridLayout.startWidths[j.id]+"px":typeof j.width=="number"?j.width+"px":j.width}).join(" ")}}]},N1=function(C,P){var $=P.column;return[C,{id:"header-cell-"+$.id,style:{position:"sticky",gridColumn:"span "+$.totalVisibleHeaderCount}}]},cg=function(C,P){var $=P.row;return $.isExpanded?[C,{style:{gridColumn:"1 / "+($.cells.length+1)}}]:[C,{}]};function sE(C,P,$,j){if(P.type===u.init)return a({gridLayout:{columnWidths:{}}},C);if(P.type===u.resetResize)return a({},C,{gridLayout:{columnWidths:{}}});if(P.type===u.columnStartResizing){var q=P.columnId,G=P.headerIdWidths,Z=dh(q);if(Z!==void 0){var ie=j.visibleColumns.reduce(function(Fe,lt){var je;return a({},Fe,((je={})[lt.id]=dh(lt.id),je))},{}),re=j.visibleColumns.reduce(function(Fe,lt){var je;return a({},Fe,((je={})[lt.id]=lt.minWidth,je))},{}),ue=j.visibleColumns.reduce(function(Fe,lt){var je;return a({},Fe,((je={})[lt.id]=lt.maxWidth,je))},{}),Te=G.map(function(Fe){var lt=Fe[0];return[lt,dh(lt)]});return a({},C,{gridLayout:a({},C.gridLayout,{startWidths:ie,minWidths:re,maxWidths:ue,headerIdGridWidths:Te,columnWidth:Z})})}return C}if(P.type===u.columnResizing){var ye=P.clientX,Ce=C.columnResizing.startX,ce=C.gridLayout,Ee=ce.columnWidth,Ne=ce.minWidths,Pe=ce.maxWidths,Ge=ce.headerIdGridWidths,pt=(ye-Ce)/Ee,He={};return(Ge===void 0?[]:Ge).forEach(function(Fe){var lt=Fe[0],je=Fe[1];He[lt]=Math.min(Math.max(Ne[lt],je+je*pt),Pe[lt])}),a({},C,{gridLayout:a({},C.gridLayout,{columnWidths:a({},C.gridLayout.columnWidths,{},He)})})}return P.type===u.columnDoneResizing?a({},C,{gridLayout:a({},C.gridLayout,{startWidths:{},minWidths:{},maxWidths:{}})}):void 0}function dh(C){var P,$=(P=document.getElementById("header-cell-"+C))==null?void 0:P.offsetWidth;if($!==void 0)return $}n._UNSTABLE_usePivotColumns=rh,n.actions=u,n.defaultColumn=h,n.defaultGroupByFn=Zs,n.defaultOrderByFn=R1,n.defaultRenderer=c,n.emptyRenderer=d,n.ensurePluginOrder=b,n.flexRender=T,n.functionalUpdate=w,n.loopHooks=x,n.makePropGetter=g,n.makeRenderer=M,n.reduceHooks=y,n.safeUseLayoutEffect=k,n.useAbsoluteLayout=Qt,n.useAsyncDebounce=function(C,P){P===void 0&&(P=0);var $=i.useRef({}),j=S(C),q=S(P);return i.useCallback(function(){var G=o(regeneratorRuntime.mark(function Z(){var ie,re,ue,Te=arguments;return regeneratorRuntime.wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:for(ie=Te.length,re=new Array(ie),ue=0;ue<ie;ue++)re[ue]=Te[ue];return $.current.promise||($.current.promise=new Promise(function(Ce,ce){$.current.resolve=Ce,$.current.reject=ce})),$.current.timeout&&clearTimeout($.current.timeout),$.current.timeout=setTimeout(o(regeneratorRuntime.mark(function Ce(){return regeneratorRuntime.wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return delete $.current.timeout,ce.prev=1,ce.t0=$.current,ce.next=5,j().apply(void 0,re);case 5:ce.t1=ce.sent,ce.t0.resolve.call(ce.t0,ce.t1),ce.next=12;break;case 9:ce.prev=9,ce.t2=ce.catch(1),$.current.reject(ce.t2);case 12:return ce.prev=12,delete $.current.promise,ce.finish(12);case 15:case"end":return ce.stop()}},Ce,null,[[1,9,12,15]])})),q()),ye.abrupt("return",$.current.promise);case 5:case"end":return ye.stop()}},Z)}));return function(){return G.apply(this,arguments)}}(),[j,q])},n.useBlockLayout=fh,n.useColumnOrder=uh,n.useExpanded=Xa,n.useFilters=y1,n.useFlexLayout=Ja,n.useGetLatest=S,n.useGlobalFilter=v1,n.useGridLayout=ug,n.useGroupBy=Ze,n.useMountedLayoutEffect=R,n.usePagination=T1,n.useResizeColumns=Qc,n.useRowSelect=ah,n.useRowState=uu,n.useSortBy=tg,n.useTable=function(C){for(var P=arguments.length,$=new Array(P>1?P-1:0),j=1;j<P;j++)$[j-1]=arguments[j];C=bt(C),$=[Tt].concat($);var q=i.useRef({}),G=S(q.current);Object.assign(G(),a({},C,{plugins:$,hooks:de()})),$.filter(Boolean).forEach(function(nt){nt(G().hooks)});var Z=S(G().hooks);G().getHooks=Z,delete G().hooks,Object.assign(G(),y(Z().useOptions,bt(C)));var ie=G(),re=ie.data,ue=ie.columns,Te=ie.initialState,ye=ie.defaultColumn,Ce=ie.getSubRows,ce=ie.getRowId,Ee=ie.stateReducer,Ne=ie.useControlledState,Pe=S(Ee),Ge=i.useCallback(function(nt,rn){if(!rn.type)throw console.info({action:rn}),new Error("Unknown Action ");return[].concat(Z().stateReducers,Array.isArray(Pe())?Pe():[Pe()]).reduce(function(xn,Si){return Si(xn,rn,nt,G())||xn},nt)},[Z,Pe,G]),pt=i.useReducer(Ge,void 0,function(){return Ge(Te,{type:u.init})}),He=pt[0],Fe=pt[1],lt=y([].concat(Z().useControlledState,[Ne]),He,{instance:G()});Object.assign(G(),{state:lt,dispatch:Fe});var je=i.useMemo(function(){return N(y(Z().columns,ue,{instance:G()}))},[Z,G,ue].concat(y(Z().columnsDeps,[],{instance:G()})));G().columns=je;var at=i.useMemo(function(){return y(Z().allColumns,D(je),{instance:G()}).map(I)},[je,Z,G].concat(y(Z().allColumnsDeps,[],{instance:G()})));G().allColumns=at;var wt=i.useMemo(function(){for(var nt=[],rn=[],xn={},Si=[].concat(at);Si.length;){var Un=Si.shift();To({data:re,rows:nt,flatRows:rn,rowsById:xn,column:Un,getRowId:ce,getSubRows:Ce,accessValueHooks:Z().accessValue,getInstance:G})}return[nt,rn,xn]},[at,re,ce,Ce,Z,G]),Xe=wt[0],ot=wt[1],At=wt[2];Object.assign(G(),{rows:Xe,initialRows:[].concat(Xe),flatRows:ot,rowsById:At}),x(Z().useInstanceAfterData,G());var st=i.useMemo(function(){return y(Z().visibleColumns,at,{instance:G()}).map(function(nt){return z(nt,ye)})},[Z,at,G,ye].concat(y(Z().visibleColumnsDeps,[],{instance:G()})));at=i.useMemo(function(){var nt=[].concat(st);return at.forEach(function(rn){nt.find(function(xn){return xn.id===rn.id})||nt.push(rn)}),nt},[at,st]),G().allColumns=at;var St=i.useMemo(function(){return y(Z().headerGroups,X(st,ye),G())},[Z,st,ye,G].concat(y(Z().headerGroupsDeps,[],{instance:G()})));G().headerGroups=St;var yt=i.useMemo(function(){return St.length?St[0].headers:[]},[St]);G().headers=yt,G().flatHeaders=St.reduce(function(nt,rn){return[].concat(nt,rn.headers)},[]),x(Z().useInstanceBeforeDimensions,G());var Zt=st.filter(function(nt){return nt.isVisible}).map(function(nt){return nt.id}).sort().join("_");st=i.useMemo(function(){return st.filter(function(nt){return nt.isVisible})},[st,Zt]),G().visibleColumns=st;var Ue=ai(yt),ut=Ue[0],hn=Ue[1],si=Ue[2];return G().totalColumnsMinWidth=ut,G().totalColumnsWidth=hn,G().totalColumnsMaxWidth=si,x(Z().useInstance,G()),[].concat(G().flatHeaders,G().allColumns).forEach(function(nt){nt.render=M(G(),nt),nt.getHeaderProps=g(Z().getHeaderProps,{instance:G(),column:nt}),nt.getFooterProps=g(Z().getFooterProps,{instance:G(),column:nt})}),G().headerGroups=i.useMemo(function(){return St.filter(function(nt,rn){return nt.headers=nt.headers.filter(function(xn){return xn.headers?function Si(Un){return Un.filter(function(la){return la.headers?Si(la.headers):la.isVisible}).length}(xn.headers):xn.isVisible}),!!nt.headers.length&&(nt.getHeaderGroupProps=g(Z().getHeaderGroupProps,{instance:G(),headerGroup:nt,index:rn}),nt.getFooterGroupProps=g(Z().getFooterGroupProps,{instance:G(),headerGroup:nt,index:rn}),!0)})},[St,G,Z]),G().footerGroups=[].concat(G().headerGroups).reverse(),G().prepareRow=i.useCallback(function(nt){nt.getRowProps=g(Z().getRowProps,{instance:G(),row:nt}),nt.allCells=at.map(function(rn){var xn=nt.values[rn.id],Si={column:rn,row:nt,value:xn};return Si.getCellProps=g(Z().getCellProps,{instance:G(),cell:Si}),Si.render=M(G(),rn,{row:nt,cell:Si,value:xn}),Si}),nt.cells=st.map(function(rn){return nt.allCells.find(function(xn){return xn.column.id===rn.id})}),x(Z().prepareRow,nt,{instance:G()})},[Z,G,at,st]),G().getTableProps=g(Z().getTableProps,{instance:G()}),G().getTableBodyProps=g(Z().getTableBodyProps,{instance:G()}),x(Z().useFinalInstance,G()),G()},Object.defineProperty(n,"__esModule",{value:!0})})})(LT,LT.exports);var tfe=LT.exports;mW.exports=tfe;var E3=mW.exports;const k3={};function jT(e,t){e===void 0&&(e=k3),t===void 0&&(t=k3);const n=Object.keys(e),i=Object.keys(t);return e===t||n.length===i.length&&n.every(r=>e[r]===t[r])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var nfe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var o in r)r.hasOwnProperty(o)&&(i[o]=r[o])},e(t,n)};return function(t,n){e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),ife=Object.prototype.hasOwnProperty;function zT(e,t){return ife.call(e,t)}function BT(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var i=[];for(var r in e)zT(e,r)&&i.push(r);return i}function fo(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function HT(e){for(var t=0,n=e.length,i;t<n;){if(i=e.charCodeAt(t),i>=48&&i<=57){t++;continue}return!1}return!0}function xf(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function gW(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function UT(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(UT(e[t]))return!0}else if(typeof e=="object"){for(var i=BT(e),r=i.length,o=0;o<r;o++)if(UT(e[i[o]]))return!0}}return!1}function R3(e,t){var n=[e];for(var i in t){var r=typeof t[i]=="object"?JSON.stringify(t[i],null,2):t[i];typeof r<"u"&&n.push(i+": "+r)}return n.join(`
`)}var yW=function(e){nfe(t,e);function t(n,i,r,o,a){var s=this.constructor,l=e.call(this,R3(n,{name:i,index:r,operation:o,tree:a}))||this;return l.name=i,l.index=r,l.operation=o,l.tree=a,Object.setPrototypeOf(l,s.prototype),l.message=R3(n,{name:i,index:r,operation:o,tree:a}),l}return t}(Error),Pn=yW,rfe=fo,Qh={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var i=e[t];return delete e[t],{newDocument:n,removed:i}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:function(e,t,n){var i=gb(n,this.path);i&&(i=fo(i));var r=Uf(n,{op:"remove",path:this.from}).removed;return Uf(n,{op:"add",path:this.path,value:r}),{newDocument:n,removed:i}},copy:function(e,t,n){var i=gb(n,this.from);return Uf(n,{op:"add",path:this.path,value:fo(i)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:My(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},ofe={add:function(e,t,n){return HT(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var i=e.splice(t,1);return{newDocument:n,removed:i[0]}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:Qh.move,copy:Qh.copy,test:Qh.test,_get:Qh._get};function gb(e,t){if(t=="")return e;var n={op:"_get",path:t};return Uf(e,n),n.value}function Uf(e,t,n,i,r,o){if(n===void 0&&(n=!1),i===void 0&&(i=!0),r===void 0&&(r=!0),o===void 0&&(o=0),n&&(typeof n=="function"?n(t,0,e,t.path):yb(t,0)),t.path===""){var a={newDocument:e};if(t.op==="add")return a.newDocument=t.value,a;if(t.op==="replace")return a.newDocument=t.value,a.removed=e,a;if(t.op==="move"||t.op==="copy")return a.newDocument=gb(e,t.from),t.op==="move"&&(a.removed=e),a;if(t.op==="test"){if(a.test=My(e,t.value),a.test===!1)throw new Pn("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a.newDocument=e,a}else{if(t.op==="remove")return a.removed=e,a.newDocument=null,a;if(t.op==="_get")return t.value=e,a;if(n)throw new Pn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return a}}else{i||(e=fo(e));var s=t.path||"",l=s.split("/"),u=e,c=1,d=l.length,h=void 0,m=void 0,g=void 0;for(typeof n=="function"?g=n:g=yb;;){if(m=l[c],m&&m.indexOf("~")!=-1&&(m=gW(m)),r&&(m=="__proto__"||m=="prototype"&&c>0&&l[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&h===void 0&&(u[m]===void 0?h=l.slice(0,c).join("/"):c==d-1&&(h=t.path),h!==void 0&&g(t,0,e,h)),c++,Array.isArray(u)){if(m==="-")m=u.length;else{if(n&&!HT(m))throw new Pn("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);HT(m)&&(m=~~m)}if(c>=d){if(n&&t.op==="add"&&m>u.length)throw new Pn("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);var a=ofe[t.op].call(t,u,m,e);if(a.test===!1)throw new Pn("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}}else if(c>=d){var a=Qh[t.op].call(t,u,m,e);if(a.test===!1)throw new Pn("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}if(u=u[m],n&&c<d&&(!u||typeof u!="object"))throw new Pn("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}}function N2(e,t,n,i,r){if(i===void 0&&(i=!0),r===void 0&&(r=!0),n&&!Array.isArray(t))throw new Pn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(e=fo(e));for(var o=new Array(t.length),a=0,s=t.length;a<s;a++)o[a]=Uf(e,t[a],n,!0,r,a),e=o[a].newDocument;return o.newDocument=e,o}function afe(e,t,n){var i=Uf(e,t);if(i.test===!1)throw new Pn("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return i.newDocument}function yb(e,t,n,i){if(typeof e!="object"||e===null||Array.isArray(e))throw new Pn("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Qh[e.op]){if(typeof e.path!="string")throw new Pn("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Pn('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Pn("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Pn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&UT(e.value))throw new Pn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var r=e.path.split("/").length,o=i.split("/").length;if(r!==o+1&&r!==o)throw new Pn("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==i)throw new Pn("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var a={op:"_get",path:e.from,value:void 0},s=vW([a],n);if(s&&s.name==="OPERATION_PATH_UNRESOLVABLE")throw new Pn("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Pn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function vW(e,t,n){try{if(!Array.isArray(e))throw new Pn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)N2(fo(t),fo(e),n||!0);else{n=n||yb;for(var i=0;i<e.length;i++)n(e[i],i,t,void 0)}}catch(r){if(r instanceof Pn)return r;throw r}}function My(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),i=Array.isArray(t),r,o,a;if(n&&i){if(o=e.length,o!=t.length)return!1;for(r=o;r--!==0;)if(!My(e[r],t[r]))return!1;return!0}if(n!=i)return!1;var s=Object.keys(e);if(o=s.length,o!==Object.keys(t).length)return!1;for(r=o;r--!==0;)if(!t.hasOwnProperty(s[r]))return!1;for(r=o;r--!==0;)if(a=s[r],!My(e[a],t[a]))return!1;return!0}return e!==e&&t!==t}const sfe=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Pn,_areEquals:My,applyOperation:Uf,applyPatch:N2,applyReducer:afe,deepClone:rfe,getValueByPointer:gb,validate:vW,validator:yb},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var CP=new WeakMap,lfe=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),ufe=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function cfe(e){return CP.get(e)}function ffe(e,t){return e.observers.get(t)}function dfe(e,t){e.observers.delete(t.callback)}function hfe(e,t){t.unobserve()}function pfe(e,t){var n=[],i,r=cfe(e);if(!r)r=new lfe(e),CP.set(e,r);else{var o=ffe(r,t);i=o&&o.observer}if(i)return i;if(i={},r.value=fo(e),t){i.callback=t,i.next=null;var a=function(){WT(i)},s=function(){clearTimeout(i.next),i.next=setTimeout(a)};typeof window<"u"&&(window.addEventListener("mouseup",s),window.addEventListener("keyup",s),window.addEventListener("mousedown",s),window.addEventListener("keydown",s),window.addEventListener("change",s))}return i.patches=n,i.object=e,i.unobserve=function(){WT(i),clearTimeout(i.next),dfe(r,i),typeof window<"u"&&(window.removeEventListener("mouseup",s),window.removeEventListener("keyup",s),window.removeEventListener("mousedown",s),window.removeEventListener("keydown",s),window.removeEventListener("change",s))},r.observers.set(t,new ufe(t,i)),i}function WT(e,t){t===void 0&&(t=!1);var n=CP.get(e.object);EP(n.value,e.object,e.patches,"",t),e.patches.length&&N2(n.value,e.patches);var i=e.patches;return i.length>0&&(e.patches=[],e.callback&&e.callback(i)),i}function EP(e,t,n,i,r){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var o=BT(t),a=BT(e),s=!1,l=a.length-1;l>=0;l--){var u=a[l],c=e[u];if(zT(t,u)&&!(t[u]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var d=t[u];typeof c=="object"&&c!=null&&typeof d=="object"&&d!=null&&Array.isArray(c)===Array.isArray(d)?EP(c,d,n,i+"/"+xf(u),r):c!==d&&(r&&n.push({op:"test",path:i+"/"+xf(u),value:fo(c)}),n.push({op:"replace",path:i+"/"+xf(u),value:fo(d)}))}else Array.isArray(e)===Array.isArray(t)?(r&&n.push({op:"test",path:i+"/"+xf(u),value:fo(c)}),n.push({op:"remove",path:i+"/"+xf(u)}),s=!0):(r&&n.push({op:"test",path:i,value:e}),n.push({op:"replace",path:i,value:t}))}if(!(!s&&o.length==a.length))for(var l=0;l<o.length;l++){var u=o[l];!zT(e,u)&&t[u]!==void 0&&n.push({op:"add",path:i+"/"+xf(u),value:fo(t[u])})}}}function mfe(e,t,n){n===void 0&&(n=!1);var i=[];return EP(e,t,i,"",n),i}const gfe=Object.freeze(Object.defineProperty({__proto__:null,compare:mfe,generate:WT,observe:pfe,unobserve:hfe},Symbol.toStringTag,{value:"Module"}));Object.assign({},sfe,gfe,{JsonPatchError:yW,deepClone:fo,escapePathComponent:xf,unescapePathComponent:gW});var yfe=/("(?:[^\\"]|\\.)*")|[:,]/g,vfe=function(t,n){var i,r,o;return n=n||{},i=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),r=i===""?1/0:n.maxLength===void 0?80:n.maxLength,o=n.replacer,function a(s,l,u){var c,d,h,m,g,y,x,b,w,S,k,R;if(s&&typeof s.toJSON=="function"&&(s=s.toJSON()),k=JSON.stringify(s,o),k===void 0)return k;if(x=r-l.length-u,k.length<=x&&(w=k.replace(yfe,function(M,T){return T||M+" "}),w.length<=x))return w;if(o!=null&&(s=JSON.parse(k),o=void 0),typeof s=="object"&&s!==null){if(b=l+i,h=[],d=0,Array.isArray(s))for(S="[",c="]",x=s.length;d<x;d++)h.push(a(s[d],b,d===x-1?0:1)||"null");else for(S="{",c="}",y=Object.keys(s),x=y.length;d<x;d++)m=y[d],g=JSON.stringify(m)+": ",R=a(s[m],b,g.length+(d===x-1?0:1)),R!==void 0&&h.push(g+R);if(h.length>0)return[S,i+h.join(`,
`+b),c].join(`
`+l)}return k}(t,"",0)};const ZE=Md(vfe);function to(e,t,n){return e.fields=t||[],e.fname=n,e}function In(e){return e==null?null:e.fname}function Xi(e){return e==null?null:e.fields}function xW(e){return e.length===1?xfe(e[0]):_fe(e)}const xfe=e=>function(t){return t[e]},_fe=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function le(e){throw Error(e)}function Is(e){const t=[],n=e.length;let i=null,r=0,o="",a,s,l;e=e+"";function u(){t.push(o+e.substring(a,s)),o="",a=s+1}for(a=s=0;s<n;++s)if(l=e[s],l==="\\")o+=e.substring(a,s++),a=s;else if(l===i)u(),i=null,r=-1;else{if(i)continue;a===r&&l==='"'||a===r&&l==="'"?(a=s+1,i=l):l==="."&&!r?s>a?u():a=s+1:l==="["?(s>a&&u(),r=a=s+1):l==="]"&&(r||le("Access path missing open bracket: "+e),r>0&&u(),r=0,a=s+1)}return r&&le("Access path missing closing bracket: "+e),i&&le("Access path missing closing quote: "+e),s>a&&(s++,u()),t}function Xo(e,t,n){const i=Is(e);return e=i.length===1?i[0]:e,to((n&&n.get||xW)(i),[e],t||e)}const xv=Xo("id"),tr=to(e=>e,[],"identity"),Au=to(()=>0,[],"zero"),wm=to(()=>1,[],"one"),Ko=to(()=>!0,[],"true"),mu=to(()=>!1,[],"false");function bfe(e,t,n){const i=[t].concat([].slice.call(n));console[e].apply(console,i)}const _W=0,kP=1,RP=2,bW=3,wW=4;function TP(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:bfe,i=e||_W;return{level(r){return arguments.length?(i=+r,this):i},error(){return i>=kP&&n(t||"error","ERROR",arguments),this},warn(){return i>=RP&&n(t||"warn","WARN",arguments),this},info(){return i>=bW&&n(t||"log","INFO",arguments),this},debug(){return i>=wW&&n(t||"log","DEBUG",arguments),this}}}var fe=Array.isArray;function Ie(e){return e===Object(e)}const T3=e=>e!=="__proto__";function Sm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((i,r)=>{for(const o in r)if(o==="signals")i.signals=wfe(i.signals,r.signals);else{const a=o==="legend"?{layout:1}:o==="style"?!0:null;Cm(i,o,r[o],a)}return i},{})}function Cm(e,t,n,i){if(!T3(t))return;let r,o;if(Ie(n)&&!fe(n)){o=Ie(e[t])?e[t]:e[t]={};for(r in n)i&&(i===!0||i[r])?Cm(o,r,n[r]):T3(r)&&(o[r]=n[r])}else e[t]=n}function wfe(e,t){if(e==null)return t;const n={},i=[];function r(o){n[o.name]||(n[o.name]=1,i.push(o))}return t.forEach(r),e.forEach(r),i}function Ot(e){return e[e.length-1]}function Vi(e){return e==null||e===""?null:+e}const SW=e=>t=>e*Math.exp(t),CW=e=>t=>Math.log(e*t),EW=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),kW=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,vb=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function $2(e,t,n,i){const r=n(e[0]),o=n(Ot(e)),a=(o-r)*t;return[i(r-a),i(o-a)]}function RW(e,t){return $2(e,t,Vi,tr)}function TW(e,t){var n=Math.sign(e[0]);return $2(e,t,CW(n),SW(n))}function AW(e,t,n){return $2(e,t,vb(n),vb(1/n))}function MW(e,t,n){return $2(e,t,EW(n),kW(n))}function O2(e,t,n,i,r){const o=i(e[0]),a=i(Ot(e)),s=t!=null?i(t):(o+a)/2;return[r(s+(o-s)*n),r(s+(a-s)*n)]}function AP(e,t,n){return O2(e,t,n,Vi,tr)}function MP(e,t,n){const i=Math.sign(e[0]);return O2(e,t,n,CW(i),SW(i))}function xb(e,t,n,i){return O2(e,t,n,vb(i),vb(1/i))}function FP(e,t,n,i){return O2(e,t,n,EW(i),kW(i))}function FW(e){return 1+~~(new Date(e).getMonth()/3)}function PW(e){return 1+~~(new Date(e).getUTCMonth()/3)}function $e(e){return e!=null?fe(e)?e:[e]:[]}function NW(e,t,n){let i=e[0],r=e[1],o;return r<i&&(o=r,r=i,i=o),o=r-i,o>=n-t?[t,n]:[i=Math.min(Math.max(i,t),n-o),i+o]}function _t(e){return typeof e=="function"}const Sfe="descending";function PP(e,t,n){n=n||{},t=$e(t)||[];const i=[],r=[],o={},a=n.comparator||Cfe;return $e(e).forEach((s,l)=>{s!=null&&(i.push(t[l]===Sfe?-1:1),r.push(s=_t(s)?s:Xo(s,null,n)),(Xi(s)||[]).forEach(u=>o[u]=1))}),r.length===0?null:to(a(r,i),Object.keys(o))}const I2=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),Cfe=(e,t)=>e.length===1?Efe(e[0],t[0]):kfe(e,t,e.length),Efe=(e,t)=>function(n,i){return I2(e(n),e(i))*t},kfe=(e,t,n)=>(t.push(0),function(i,r){let o,a=0,s=-1;for(;a===0&&++s<n;)o=e[s],a=I2(o(i),o(r));return a*t[s]});function nr(e){return _t(e)?e:()=>e}function NP(e,t){let n;return i=>{n&&clearTimeout(n),n=setTimeout(()=>(t(i),n=null),e)}}function xt(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function Rs(e,t){let n=0,i,r,o,a;if(e&&(i=e.length))if(t==null){for(r=e[n];n<i&&(r==null||r!==r);r=e[++n]);for(o=a=r;n<i;++n)r=e[n],r!=null&&(r<o&&(o=r),r>a&&(a=r))}else{for(r=t(e[n]);n<i&&(r==null||r!==r);r=t(e[++n]));for(o=a=r;n<i;++n)r=t(e[n]),r!=null&&(r<o&&(o=r),r>a&&(a=r))}return[o,a]}function $W(e,t){const n=e.length;let i=-1,r,o,a,s,l;if(t==null){for(;++i<n;)if(o=e[i],o!=null&&o>=o){r=a=o;break}if(i===n)return[-1,-1];for(s=l=i;++i<n;)o=e[i],o!=null&&(r>o&&(r=o,s=i),a<o&&(a=o,l=i))}else{for(;++i<n;)if(o=t(e[i],i,e),o!=null&&o>=o){r=a=o;break}if(i===n)return[-1,-1];for(s=l=i;++i<n;)o=t(e[i],i,e),o!=null&&(r>o&&(r=o,s=i),a<o&&(a=o,l=i))}return[s,l]}const Rfe=Object.prototype.hasOwnProperty;function et(e,t){return Rfe.call(e,t)}const fx={};function Em(e){let t={},n;function i(o){return et(t,o)&&t[o]!==fx}const r={size:0,empty:0,object:t,has:i,get(o){return i(o)?t[o]:void 0},set(o,a){return i(o)||(++r.size,t[o]===fx&&--r.empty),t[o]=a,this},delete(o){return i(o)&&(--r.size,++r.empty,t[o]=fx),this},clear(){r.size=r.empty=0,r.object=t={}},test(o){return arguments.length?(n=o,r):n},clean(){const o={};let a=0;for(const s in t){const l=t[s];l!==fx&&(!n||!n(l))&&(o[s]=l,++a)}r.size=a,r.empty=0,r.object=t=o}};return e&&Object.keys(e).forEach(o=>{r.set(o,e[o])}),r}function OW(e,t,n,i,r,o){if(!n&&n!==0)return o;const a=+n;let s=e[0],l=Ot(e),u;l<s&&(u=s,s=l,l=u),u=Math.abs(t-s);const c=Math.abs(l-t);return u<c&&u<=a?i:c<=a?r:o}function be(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),xt(i,n)}function ep(e,t,n,i){let r=t[0],o=t[t.length-1],a;return r>o&&(a=r,r=o,o=a),n=n===void 0||n,i=i===void 0||i,(n?r<=e:r<e)&&(i?e<=o:e<o)}function Nc(e){return typeof e=="boolean"}function Ju(e){return Object.prototype.toString.call(e)==="[object Date]"}function IW(e){return e&&_t(e[Symbol.iterator])}function zt(e){return typeof e=="number"}function DW(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Oe(e){return typeof e=="string"}function $P(e,t,n){e&&(e=t?$e(e).map(s=>s.replace(/\\(.)/g,"$1")):$e(e));const i=e&&e.length,r=n&&n.get||xW,o=s=>r(t?[s]:Is(s));let a;if(!i)a=function(){return""};else if(i===1){const s=o(e[0]);a=function(l){return""+s(l)}}else{const s=e.map(o);a=function(l){let u=""+s[0](l),c=0;for(;++c<i;)u+="|"+s[c](l);return u}}return to(a,e,"key")}function LW(e,t){const n=e[0],i=Ot(e),r=+t;return r?r===1?i:n+r*(i-n):n}const Tfe=1e4;function jW(e){e=+e||Tfe;let t,n,i;const r=()=>{t={},n={},i=0},o=(a,s)=>(++i>e&&(n=t,t={},i=1),t[a]=s);return r(),{clear:r,has:a=>et(t,a)||et(n,a),get:a=>et(t,a)?t[a]:et(n,a)?o(a,n[a]):void 0,set:(a,s)=>et(t,a)?t[a]=s:o(a,s)}}function zW(e,t,n,i){const r=t.length,o=n.length;if(!o)return t;if(!r)return n;const a=i||new t.constructor(r+o);let s=0,l=0,u=0;for(;s<r&&l<o;++u)a[u]=e(t[s],n[l])>0?n[l++]:t[s++];for(;s<r;++s,++u)a[u]=t[s];for(;l<o;++l,++u)a[u]=n[l];return a}function l0(e,t){let n="";for(;--t>=0;)n+=e;return n}function BW(e,t,n,i){const r=n||" ",o=e+"",a=t-o.length;return a<=0?o:i==="left"?l0(r,a)+o:i==="center"?l0(r,~~(a/2))+o+l0(r,Math.ceil(a/2)):o+l0(r,a)}function _v(e){return e&&Ot(e)-e[0]||0}function we(e){return fe(e)?"["+e.map(we)+"]":Ie(e)||Oe(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function OP(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const Afe=e=>zt(e)||Ju(e)?e:Date.parse(e);function IP(e,t){return t=t||Afe,e==null||e===""?null:t(e)}function DP(e){return e==null||e===""?null:e+""}function Da(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}function HW(e,t,n,i){const r=i??"",o=e+"",a=o.length,s=Math.max(0,t-r.length);return a<=t?o:n==="left"?r+o.slice(a-s):n==="center"?o.slice(0,Math.ceil(s/2))+r+o.slice(a-~~(s/2)):o.slice(0,s)+r}function wu(e,t,n){if(e)if(t){const i=e.length;for(let r=0;r<i;++r){const o=t(e[r]);o&&n(o,r,e)}}else e.forEach(n)}var A3={},XE={},KE=34,Tg=10,JE=13;function UW(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function Mfe(e,t){var n=UW(e);return function(i,r){return t(n(i),r,e)}}function M3(e){var t=Object.create(null),n=[];return e.forEach(function(i){for(var r in i)r in t||n.push(t[r]=r)}),n}function $r(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function Ffe(e){return e<0?"-"+$r(-e,6):e>9999?"+"+$r(e,6):$r(e,4)}function Pfe(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Ffe(e.getUTCFullYear())+"-"+$r(e.getUTCMonth()+1,2)+"-"+$r(e.getUTCDate(),2)+(r?"T"+$r(t,2)+":"+$r(n,2)+":"+$r(i,2)+"."+$r(r,3)+"Z":i?"T"+$r(t,2)+":"+$r(n,2)+":"+$r(i,2)+"Z":n||t?"T"+$r(t,2)+":"+$r(n,2)+"Z":"")}function Nfe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function i(d,h){var m,g,y=r(d,function(x,b){if(m)return m(x,b-1);g=x,m=h?Mfe(x,h):UW(x)});return y.columns=g||[],y}function r(d,h){var m=[],g=d.length,y=0,x=0,b,w=g<=0,S=!1;d.charCodeAt(g-1)===Tg&&--g,d.charCodeAt(g-1)===JE&&--g;function k(){if(w)return XE;if(S)return S=!1,A3;var M,T=y,N;if(d.charCodeAt(T)===KE){for(;y++<g&&d.charCodeAt(y)!==KE||d.charCodeAt(++y)===KE;);return(M=y)>=g?w=!0:(N=d.charCodeAt(y++))===Tg?S=!0:N===JE&&(S=!0,d.charCodeAt(y)===Tg&&++y),d.slice(T+1,M-1).replace(/""/g,'"')}for(;y<g;){if((N=d.charCodeAt(M=y++))===Tg)S=!0;else if(N===JE)S=!0,d.charCodeAt(y)===Tg&&++y;else if(N!==n)continue;return d.slice(T,M)}return w=!0,d.slice(T,g)}for(;(b=k())!==XE;){for(var R=[];b!==A3&&b!==XE;)R.push(b),b=k();h&&(R=h(R,x++))==null||m.push(R)}return m}function o(d,h){return d.map(function(m){return h.map(function(g){return c(m[g])}).join(e)})}function a(d,h){return h==null&&(h=M3(d)),[h.map(c).join(e)].concat(o(d,h)).join(`
`)}function s(d,h){return h==null&&(h=M3(d)),o(d,h).join(`
`)}function l(d){return d.map(u).join(`
`)}function u(d){return d.map(c).join(e)}function c(d){return d==null?"":d instanceof Date?Pfe(d):t.test(d+="")?'"'+d.replace(/"/g,'""')+'"':d}return{parse:i,parseRows:r,format:a,formatBody:s,formatRows:l,formatRow:u,formatValue:c}}function $fe(e){return e}function Ofe(e){if(e==null)return $fe;var t,n,i=e.scale[0],r=e.scale[1],o=e.translate[0],a=e.translate[1];return function(s,l){l||(t=n=0);var u=2,c=s.length,d=new Array(c);for(d[0]=(t+=s[0])*i+o,d[1]=(n+=s[1])*r+a;u<c;)d[u]=s[u],++u;return d}}function Ife(e,t){for(var n,i=e.length,r=i-t;r<--i;)n=e[r],e[r++]=e[i],e[i]=n}function Dfe(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return F3(e,n)})}:F3(e,t)}function F3(e,t){var n=t.id,i=t.bbox,r=t.properties==null?{}:t.properties,o=WW(e,t);return n==null&&i==null?{type:"Feature",properties:r,geometry:o}:i==null?{type:"Feature",id:n,properties:r,geometry:o}:{type:"Feature",id:n,bbox:i,properties:r,geometry:o}}function WW(e,t){var n=Ofe(e.transform),i=e.arcs;function r(c,d){d.length&&d.pop();for(var h=i[c<0?~c:c],m=0,g=h.length;m<g;++m)d.push(n(h[m],m));c<0&&Ife(d,g)}function o(c){return n(c)}function a(c){for(var d=[],h=0,m=c.length;h<m;++h)r(c[h],d);return d.length<2&&d.push(d[0]),d}function s(c){for(var d=a(c);d.length<4;)d.push(d[0]);return d}function l(c){return c.map(s)}function u(c){var d=c.type,h;switch(d){case"GeometryCollection":return{type:d,geometries:c.geometries.map(u)};case"Point":h=o(c.coordinates);break;case"MultiPoint":h=c.coordinates.map(o);break;case"LineString":h=a(c.arcs);break;case"MultiLineString":h=c.arcs.map(a);break;case"Polygon":h=l(c.arcs);break;case"MultiPolygon":h=c.arcs.map(l);break;default:return null}return{type:d,coordinates:h}}return u(t)}function Lfe(e,t){var n={},i={},r={},o=[],a=-1;t.forEach(function(u,c){var d=e.arcs[u<0?~u:u],h;d.length<3&&!d[1][0]&&!d[1][1]&&(h=t[++a],t[a]=u,t[c]=h)}),t.forEach(function(u){var c=s(u),d=c[0],h=c[1],m,g;if(m=r[d])if(delete r[m.end],m.push(u),m.end=h,g=i[h]){delete i[g.start];var y=g===m?m:m.concat(g);i[y.start=m.start]=r[y.end=g.end]=y}else i[m.start]=r[m.end]=m;else if(m=i[h])if(delete i[m.start],m.unshift(u),m.start=d,g=r[d]){delete r[g.end];var x=g===m?m:g.concat(m);i[x.start=g.start]=r[x.end=m.end]=x}else i[m.start]=r[m.end]=m;else m=[u],i[m.start=d]=r[m.end=h]=m});function s(u){var c=e.arcs[u<0?~u:u],d=c[0],h;return e.transform?(h=[0,0],c.forEach(function(m){h[0]+=m[0],h[1]+=m[1]})):h=c[c.length-1],u<0?[h,d]:[d,h]}function l(u,c){for(var d in u){var h=u[d];delete c[h.start],delete h.start,delete h.end,h.forEach(function(m){n[m<0?~m:m]=1}),o.push(h)}}return l(r,i),l(i,r),t.forEach(function(u){n[u<0?~u:u]||o.push([u])}),o}function jfe(e){return WW(e,zfe.apply(this,arguments))}function zfe(e,t,n){var i,r,o;if(arguments.length>1)i=Bfe(e,t,n);else for(r=0,i=new Array(o=e.arcs.length);r<o;++r)i[r]=r;return{type:"MultiLineString",arcs:Lfe(e,i)}}function Bfe(e,t,n){var i=[],r=[],o;function a(d){var h=d<0?~d:d;(r[h]||(r[h]=[])).push({i:d,g:o})}function s(d){d.forEach(a)}function l(d){d.forEach(s)}function u(d){d.forEach(l)}function c(d){switch(o=d,d.type){case"GeometryCollection":d.geometries.forEach(c);break;case"LineString":s(d.arcs);break;case"MultiLineString":case"Polygon":l(d.arcs);break;case"MultiPolygon":u(d.arcs);break}}return c(t),r.forEach(n==null?function(d){i.push(d[0].i)}:function(d){n(d[0].g,d[d.length-1].g)&&i.push(d[0].i)}),i}function kl(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Hfe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function km(e){let t,n,i;e.length!==2?(t=kl,n=(s,l)=>kl(e(s),l),i=(s,l)=>e(s)-l):(t=e===kl||e===Hfe?e:Ufe,n=e,i=e);function r(s,l,u=0,c=s.length){if(u<c){if(t(l,l)!==0)return c;do{const d=u+c>>>1;n(s[d],l)<0?u=d+1:c=d}while(u<c)}return u}function o(s,l,u=0,c=s.length){if(u<c){if(t(l,l)!==0)return c;do{const d=u+c>>>1;n(s[d],l)<=0?u=d+1:c=d}while(u<c)}return u}function a(s,l,u=0,c=s.length){const d=r(s,l,u,c-1);return d>u&&i(s[d-1],l)>-i(s[d],l)?d-1:d}return{left:r,center:a,right:o}}function Ufe(){return 0}function GW(e){return e===null?NaN:+e}function*Wfe(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(i=+i)>=i&&(yield i)}}const qW=km(kl),lc=qW.right,Gfe=qW.left;km(GW).center;function qfe(e,t){let n=0,i,r=0,o=0;if(t===void 0)for(let a of e)a!=null&&(a=+a)>=a&&(i=a-r,r+=i/++n,o+=i*(a-r));else{let a=-1;for(let s of e)(s=t(s,++a,e))!=null&&(s=+s)>=s&&(i=s-r,r+=i/++n,o+=i*(s-r))}if(n>1)return o/(n-1)}function Vfe(e,t){const n=qfe(e,t);return n&&Math.sqrt(n)}class gr{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const o=n[r],a=t+o,s=Math.abs(t)<Math.abs(o)?t-(a-o):o-(a-t);s&&(n[i++]=s),t=a}return n[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let n=this._n,i,r,o,a=0;if(n>0){for(a=t[--n];n>0&&(i=a,r=t[--n],a=i+r,o=r-(a-i),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(r=o*2,i=a+r,r==i-a&&(a=i))}return a}}class P3 extends Map{constructor(t,n=ZW){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[i,r]of t)this.set(i,r)}get(t){return super.get(GT(this,t))}has(t){return super.has(GT(this,t))}set(t,n){return super.set(VW(this,t),n)}delete(t){return super.delete(YW(this,t))}}class _b extends Set{constructor(t,n=ZW){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const i of t)this.add(i)}has(t){return super.has(GT(this,t))}add(t){return super.add(VW(this,t))}delete(t){return super.delete(YW(this,t))}}function GT({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function VW({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function YW({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function ZW(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Yfe(e,t){return Array.from(t,n=>e[n])}function Zfe(e=kl){if(e===kl)return XW;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const i=e(t,n);return i||i===0?i:(e(n,n)===0)-(e(t,t)===0)}}function XW(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Xfe=Math.sqrt(50),Kfe=Math.sqrt(10),Jfe=Math.sqrt(2);function bb(e,t,n){const i=(t-e)/Math.max(0,n),r=Math.floor(Math.log10(i)),o=i/Math.pow(10,r),a=o>=Xfe?10:o>=Kfe?5:o>=Jfe?2:1;let s,l,u;return r<0?(u=Math.pow(10,-r)/a,s=Math.round(e*u),l=Math.round(t*u),s/u<e&&++s,l/u>t&&--l,u=-u):(u=Math.pow(10,r)*a,s=Math.round(e/u),l=Math.round(t/u),s*u<e&&++s,l*u>t&&--l),l<s&&.5<=n&&n<2?bb(e,t,n*2):[s,l,u]}function qT(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const i=t<e,[r,o,a]=i?bb(t,e,n):bb(e,t,n);if(!(o>=r))return[];const s=o-r+1,l=new Array(s);if(i)if(a<0)for(let u=0;u<s;++u)l[u]=(o-u)/-a;else for(let u=0;u<s;++u)l[u]=(o-u)*a;else if(a<0)for(let u=0;u<s;++u)l[u]=(r+u)/-a;else for(let u=0;u<s;++u)l[u]=(r+u)*a;return l}function VT(e,t,n){return t=+t,e=+e,n=+n,bb(e,t,n)[2]}function uc(e,t,n){t=+t,e=+e,n=+n;const i=t<e,r=i?VT(t,e,n):VT(e,t,n);return(i?-1:1)*(r<0?1/-r:r)}function Wf(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function YT(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function KW(e,t,n=0,i=1/0,r){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(e.length-1,i)),!(n<=t&&t<=i))return e;for(r=r===void 0?XW:Zfe(r);i>n;){if(i-n>600){const l=i-n+1,u=t-n+1,c=Math.log(l),d=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*d*(l-d)/l)*(u-l/2<0?-1:1),m=Math.max(n,Math.floor(t-u*d/l+h)),g=Math.min(i,Math.floor(t+(l-u)*d/l+h));KW(e,t,m,g,r)}const o=e[t];let a=n,s=i;for(Ag(e,n,t),r(e[i],o)>0&&Ag(e,n,i);a<s;){for(Ag(e,a,s),++a,--s;r(e[a],o)<0;)++a;for(;r(e[s],o)>0;)--s}r(e[n],o)===0?Ag(e,n,s):(++s,Ag(e,s,i)),s<=t&&(n=s+1),t<=s&&(i=s-1)}return e}function Ag(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function ZT(e,t,n){if(e=Float64Array.from(Wfe(e,n)),!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return YT(e);if(t>=1)return Wf(e);var i,r=(i-1)*t,o=Math.floor(r),a=Wf(KW(e,o).subarray(0,o+1)),s=YT(e.subarray(o+1));return a+(s-a)*(r-o)}}function JW(e,t,n=GW){if(!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,r=(i-1)*t,o=Math.floor(r),a=+n(e[o],o,e),s=+n(e[o+1],o+1,e);return a+(s-a)*(r-o)}}function Qfe(e,t){let n=0,i=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let o of e)(o=t(o,++r,e))!=null&&(o=+o)>=o&&(++n,i+=o)}if(n)return i/n}function QW(e,t){return ZT(e,.5,t)}function*ede(e){for(const t of e)yield*t}function eG(e){return Array.from(ede(e))}function ho(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(r);++i<r;)o[i]=e+i*n;return o}function tG(e,t){let n=0;if(t===void 0)for(let i of e)(i=+i)&&(n+=i);else{let i=-1;for(let r of e)(r=+t(r,++i,e))&&(n+=r)}return n}function tde(e,...t){e=new _b(e),t=t.map(nde);e:for(const n of e)for(const i of t)if(!i.has(n)){e.delete(n);continue e}return e}function nde(e){return e instanceof _b?e:new _b(e)}function ide(...e){const t=new _b;for(const n of e)for(const i of n)t.add(i);return t}function rde(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function wb(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function Op(e){return e=wb(Math.abs(e)),e?e[1]:NaN}function ode(e,t){return function(n,i){for(var r=n.length,o=[],a=0,s=e[0],l=0;r>0&&s>0&&(l+s+1>i&&(s=Math.max(1,i-l)),o.push(n.substring(r-=s,r+s)),!((l+=s+1)>i));)s=e[a=(a+1)%e.length];return o.reverse().join(t)}}function ade(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var sde=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function sd(e){if(!(t=sde.exec(e)))throw new Error("invalid format: "+e);var t;return new LP({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}sd.prototype=LP.prototype;function LP(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}LP.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function lde(e){e:for(var t=e.length,n=1,i=-1,r;n<t;++n)switch(e[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+e[n])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(r+1):e}var nG;function ude(e,t){var n=wb(e,t);if(!n)return e+"";var i=n[0],r=n[1],o=r-(nG=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,a=i.length;return o===a?i:o>a?i+new Array(o-a+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+wb(e,Math.max(0,t+o-1))[0]}function N3(e,t){var n=wb(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const $3={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:rde,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>N3(e*100,t),r:N3,s:ude,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function O3(e){return e}var I3=Array.prototype.map,D3=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function iG(e){var t=e.grouping===void 0||e.thousands===void 0?O3:ode(I3.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?O3:ade(I3.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(d){d=sd(d);var h=d.fill,m=d.align,g=d.sign,y=d.symbol,x=d.zero,b=d.width,w=d.comma,S=d.precision,k=d.trim,R=d.type;R==="n"?(w=!0,R="g"):$3[R]||(S===void 0&&(S=12),k=!0,R="g"),(x||h==="0"&&m==="=")&&(x=!0,h="0",m="=");var M=y==="$"?n:y==="#"&&/[boxX]/.test(R)?"0"+R.toLowerCase():"",T=y==="$"?i:/[%p]/.test(R)?a:"",N=$3[R],D=/[defgprs%]/.test(R);S=S===void 0?6:/[gprs]/.test(R)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function I(z){var X=M,W=T,U,B,V;if(R==="c")W=N(z)+W,z="";else{z=+z;var K=z<0||1/z<0;if(z=isNaN(z)?l:N(Math.abs(z),S),k&&(z=lde(z)),K&&+z==0&&g!=="+"&&(K=!1),X=(K?g==="("?g:s:g==="-"||g==="("?"":g)+X,W=(R==="s"?D3[8+nG/3]:"")+W+(K&&g==="("?")":""),D){for(U=-1,B=z.length;++U<B;)if(V=z.charCodeAt(U),48>V||V>57){W=(V===46?r+z.slice(U+1):z.slice(U))+W,z=z.slice(0,U);break}}}w&&!x&&(z=t(z,1/0));var H=X.length+z.length+W.length,J=H<b?new Array(b-H+1).join(h):"";switch(w&&x&&(z=t(J+z,J.length?b-W.length:1/0),J=""),m){case"<":z=X+z+W+J;break;case"=":z=X+J+z+W;break;case"^":z=J.slice(0,H=J.length>>1)+X+z+W+J.slice(H);break;default:z=J+X+z+W;break}return o(z)}return I.toString=function(){return d+""},I}function c(d,h){var m=u((d=sd(d),d.type="f",d)),g=Math.max(-8,Math.min(8,Math.floor(Op(h)/3)))*3,y=Math.pow(10,-g),x=D3[8+g/3];return function(b){return m(y*b)+x}}return{format:u,formatPrefix:c}}var dx,D2,jP;cde({thousands:",",grouping:[3],currency:["$",""]});function cde(e){return dx=iG(e),D2=dx.format,jP=dx.formatPrefix,dx}function rG(e){return Math.max(0,-Op(Math.abs(e)))}function oG(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Op(t)/3)))*3-Op(Math.abs(e)))}function aG(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Op(t)-Op(e))+1}const QE=new Date,ek=new Date;function ri(e,t,n,i){function r(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return r.floor=o=>(e(o=new Date(+o)),o),r.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),r.round=o=>{const a=r(o),s=r.ceil(o);return o-a<s-o?a:s},r.offset=(o,a)=>(t(o=new Date(+o),a==null?1:Math.floor(a)),o),r.range=(o,a,s)=>{const l=[];if(o=r.ceil(o),s=s==null?1:Math.floor(s),!(o<a)||!(s>0))return l;let u;do l.push(u=new Date(+o)),t(o,s),e(o);while(u<o&&o<a);return l},r.filter=o=>ri(a=>{if(a>=a)for(;e(a),!o(a);)a.setTime(a-1)},(a,s)=>{if(a>=a)if(s<0)for(;++s<=0;)for(;t(a,-1),!o(a););else for(;--s>=0;)for(;t(a,1),!o(a););}),n&&(r.count=(o,a)=>(QE.setTime(+o),ek.setTime(+a),e(QE),e(ek),Math.floor(n(QE,ek))),r.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?r.filter(i?a=>i(a)%o===0:a=>r.count(0,a)%o===0):r)),r}const Ip=ri(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Ip.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ri(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Ip);Ip.range;const vl=1e3,jo=vl*60,xl=jo*60,zl=xl*24,zP=zl*7,L3=zl*30,tk=zl*365,_l=ri(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*vl)},(e,t)=>(t-e)/vl,e=>e.getUTCSeconds());_l.range;const L2=ri(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*vl)},(e,t)=>{e.setTime(+e+t*jo)},(e,t)=>(t-e)/jo,e=>e.getMinutes());L2.range;const j2=ri(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*jo)},(e,t)=>(t-e)/jo,e=>e.getUTCMinutes());j2.range;const z2=ri(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*vl-e.getMinutes()*jo)},(e,t)=>{e.setTime(+e+t*xl)},(e,t)=>(t-e)/xl,e=>e.getHours());z2.range;const B2=ri(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*xl)},(e,t)=>(t-e)/xl,e=>e.getUTCHours());B2.range;const Rl=ri(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*jo)/zl,e=>e.getDate()-1);Rl.range;const Qu=ri(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/zl,e=>e.getUTCDate()-1);Qu.range;const sG=ri(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/zl,e=>Math.floor(e/zl));sG.range;function Od(e){return ri(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*jo)/zP)}const Rm=Od(0),Sb=Od(1),fde=Od(2),dde=Od(3),Dp=Od(4),hde=Od(5),pde=Od(6);Rm.range;Sb.range;fde.range;dde.range;Dp.range;hde.range;pde.range;function Id(e){return ri(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/zP)}const Tm=Id(0),Cb=Id(1),mde=Id(2),gde=Id(3),Lp=Id(4),yde=Id(5),vde=Id(6);Tm.range;Cb.range;mde.range;gde.range;Lp.range;yde.range;vde.range;const Fy=ri(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Fy.range;const Py=ri(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Py.range;const Ts=ri(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ts.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ri(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Ts.range;const As=ri(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());As.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ri(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});As.range;function lG(e,t,n,i,r,o){const a=[[_l,1,vl],[_l,5,5*vl],[_l,15,15*vl],[_l,30,30*vl],[o,1,jo],[o,5,5*jo],[o,15,15*jo],[o,30,30*jo],[r,1,xl],[r,3,3*xl],[r,6,6*xl],[r,12,12*xl],[i,1,zl],[i,2,2*zl],[n,1,zP],[t,1,L3],[t,3,3*L3],[e,1,tk]];function s(u,c,d){const h=c<u;h&&([u,c]=[c,u]);const m=d&&typeof d.range=="function"?d:l(u,c,d),g=m?m.range(u,+c+1):[];return h?g.reverse():g}function l(u,c,d){const h=Math.abs(c-u)/d,m=km(([,,x])=>x).right(a,h);if(m===a.length)return e.every(uc(u/tk,c/tk,d));if(m===0)return Ip.every(Math.max(uc(u,c,d),1));const[g,y]=a[h/a[m-1][2]<a[m][2]/h?m-1:m];return g.every(y)}return[s,l]}const[xde,_de]=lG(As,Py,Tm,sG,B2,j2),[bde,wde]=lG(Ts,Fy,Rm,Rl,z2,L2),Fi="year",Zr="quarter",Ki="month",ei="week",Xr="date",qi="day",Ms="dayofyear",_o="hours",bo="minutes",Jo="seconds",La="milliseconds",BP=[Fi,Zr,Ki,ei,Xr,qi,Ms,_o,bo,Jo,La],nk=BP.reduce((e,t,n)=>(e[t]=1+n,e),{});function HP(e){const t=$e(e).slice(),n={};return t.length||le("Missing time unit."),t.forEach(r=>{et(nk,r)?n[r]=1:le(`Invalid time unit: ${r}.`)}),(n[ei]||n[qi]?1:0)+(n[Zr]||n[Ki]||n[Xr]?1:0)+(n[Ms]?1:0)>1&&le(`Incompatible time units: ${e}`),t.sort((r,o)=>nk[r]-nk[o]),t}const Sde={[Fi]:"%Y ",[Zr]:"Q%q ",[Ki]:"%b ",[Xr]:"%d ",[ei]:"W%U ",[qi]:"%a ",[Ms]:"%j ",[_o]:"%H:00",[bo]:"00:%M",[Jo]:":%S",[La]:".%L",[`${Fi}-${Ki}`]:"%Y-%m ",[`${Fi}-${Ki}-${Xr}`]:"%Y-%m-%d ",[`${_o}-${bo}`]:"%H:%M"};function uG(e,t){const n=xt({},Sde,t),i=HP(e),r=i.length;let o="",a=0,s,l;for(a=0;a<r;)for(s=i.length;s>a;--s)if(l=i.slice(a,s).join("-"),n[l]!=null){o+=n[l],a=s;break}return o.trim()}const wf=new Date;function UP(e){return wf.setFullYear(e),wf.setMonth(0),wf.setDate(1),wf.setHours(0,0,0,0),wf}function cG(e){return dG(new Date(e))}function fG(e){return XT(new Date(e))}function dG(e){return Rl.count(UP(e.getFullYear())-1,e)}function XT(e){return Rm.count(UP(e.getFullYear())-1,e)}function KT(e){return UP(e).getDay()}function Cde(e,t,n,i,r,o,a){if(0<=e&&e<100){const s=new Date(-1,t,n,i,r,o,a);return s.setFullYear(e),s}return new Date(e,t,n,i,r,o,a)}function hG(e){return mG(new Date(e))}function pG(e){return JT(new Date(e))}function mG(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Qu.count(t-1,e)}function JT(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Tm.count(t-1,e)}function QT(e){return wf.setTime(Date.UTC(e,0,1)),wf.getUTCDay()}function Ede(e,t,n,i,r,o,a){if(0<=e&&e<100){const s=new Date(Date.UTC(-1,t,n,i,r,o,a));return s.setUTCFullYear(n.y),s}return new Date(Date.UTC(e,t,n,i,r,o,a))}function gG(e,t,n,i,r){const o=t||1,a=Ot(e),s=(b,w,S)=>(S=S||b,kde(n[S],i[S],b===a&&o,w)),l=new Date,u=Da(e),c=u[Fi]?s(Fi):nr(2012),d=u[Ki]?s(Ki):u[Zr]?s(Zr):Au,h=u[ei]&&u[qi]?s(qi,1,ei+qi):u[ei]?s(ei,1):u[qi]?s(qi,1):u[Xr]?s(Xr,1):u[Ms]?s(Ms,1):wm,m=u[_o]?s(_o):Au,g=u[bo]?s(bo):Au,y=u[Jo]?s(Jo):Au,x=u[La]?s(La):Au;return function(b){l.setTime(+b);const w=c(l);return r(w,d(l),h(l,w),m(l),g(l),y(l),x(l))}}function kde(e,t,n,i){const r=n<=1?e:i?(o,a)=>i+n*Math.floor((e(o,a)-i)/n):(o,a)=>n*Math.floor(e(o,a)/n);return t?(o,a)=>t(r(o,a),a):r}function jp(e,t,n){return t+e*7-(n+6)%7}const Rde={[Fi]:e=>e.getFullYear(),[Zr]:e=>Math.floor(e.getMonth()/3),[Ki]:e=>e.getMonth(),[Xr]:e=>e.getDate(),[_o]:e=>e.getHours(),[bo]:e=>e.getMinutes(),[Jo]:e=>e.getSeconds(),[La]:e=>e.getMilliseconds(),[Ms]:e=>dG(e),[ei]:e=>XT(e),[ei+qi]:(e,t)=>jp(XT(e),e.getDay(),KT(t)),[qi]:(e,t)=>jp(1,e.getDay(),KT(t))},Tde={[Zr]:e=>3*e,[ei]:(e,t)=>jp(e,0,KT(t))};function yG(e,t){return gG(e,t||1,Rde,Tde,Cde)}const Ade={[Fi]:e=>e.getUTCFullYear(),[Zr]:e=>Math.floor(e.getUTCMonth()/3),[Ki]:e=>e.getUTCMonth(),[Xr]:e=>e.getUTCDate(),[_o]:e=>e.getUTCHours(),[bo]:e=>e.getUTCMinutes(),[Jo]:e=>e.getUTCSeconds(),[La]:e=>e.getUTCMilliseconds(),[Ms]:e=>mG(e),[ei]:e=>JT(e),[qi]:(e,t)=>jp(1,e.getUTCDay(),QT(t)),[ei+qi]:(e,t)=>jp(JT(e),e.getUTCDay(),QT(t))},Mde={[Zr]:e=>3*e,[ei]:(e,t)=>jp(e,0,QT(t))};function vG(e,t){return gG(e,t||1,Ade,Mde,Ede)}const Fde={[Fi]:Ts,[Zr]:Fy.every(3),[Ki]:Fy,[ei]:Rm,[Xr]:Rl,[qi]:Rl,[Ms]:Rl,[_o]:z2,[bo]:L2,[Jo]:_l,[La]:Ip},Pde={[Fi]:As,[Zr]:Py.every(3),[Ki]:Py,[ei]:Tm,[Xr]:Qu,[qi]:Qu,[Ms]:Qu,[_o]:B2,[bo]:j2,[Jo]:_l,[La]:Ip};function Am(e){return Fde[e]}function Mm(e){return Pde[e]}function xG(e,t,n){return e?e.offset(t,n):void 0}function _G(e,t,n){return xG(Am(e),t,n)}function bG(e,t,n){return xG(Mm(e),t,n)}function wG(e,t,n,i){return e?e.range(t,n,i):void 0}function SG(e,t,n,i){return wG(Am(e),t,n,i)}function CG(e,t,n,i){return wG(Mm(e),t,n,i)}const u0=1e3,c0=u0*60,f0=c0*60,H2=f0*24,Nde=H2*7,j3=H2*30,eA=H2*365,EG=[Fi,Ki,Xr,_o,bo,Jo,La],d0=EG.slice(0,-1),h0=d0.slice(0,-1),p0=h0.slice(0,-1),$de=p0.slice(0,-1),Ode=[Fi,ei],z3=[Fi,Ki],kG=[Fi],Mg=[[d0,1,u0],[d0,5,5*u0],[d0,15,15*u0],[d0,30,30*u0],[h0,1,c0],[h0,5,5*c0],[h0,15,15*c0],[h0,30,30*c0],[p0,1,f0],[p0,3,3*f0],[p0,6,6*f0],[p0,12,12*f0],[$de,1,H2],[Ode,1,Nde],[z3,1,j3],[z3,3,3*j3],[kG,1,eA]];function RG(e){const t=e.extent,n=e.maxbins||40,i=Math.abs(_v(t))/n;let r=km(s=>s[2]).right(Mg,i),o,a;return r===Mg.length?(o=kG,a=uc(t[0]/eA,t[1]/eA,n)):r?(r=Mg[i/Mg[r-1][2]<Mg[r][2]/i?r-1:r],o=r[0],a=r[1]):(o=EG,a=Math.max(uc(t[0],t[1],n),1)),{units:o,step:a}}function ik(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function rk(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Fg(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function TG(e){var t=e.dateTime,n=e.date,i=e.time,r=e.periods,o=e.days,a=e.shortDays,s=e.months,l=e.shortMonths,u=Pg(r),c=Ng(r),d=Pg(o),h=Ng(o),m=Pg(a),g=Ng(a),y=Pg(s),x=Ng(s),b=Pg(l),w=Ng(l),S={a:K,A:H,b:J,B:Q,c:null,d:q3,e:q3,f:rhe,g:phe,G:ghe,H:the,I:nhe,j:ihe,L:AG,m:ohe,M:ahe,p:oe,q:me,Q:Z3,s:X3,S:she,u:lhe,U:uhe,V:che,w:fhe,W:dhe,x:null,X:null,y:hhe,Y:mhe,Z:yhe,"%":Y3},k={a:ke,A:ge,b:Se,B:Me,c:null,d:V3,e:V3,f:bhe,g:Fhe,G:Nhe,H:vhe,I:xhe,j:_he,L:FG,m:whe,M:She,p:It,q:Et,Q:Z3,s:X3,S:Che,u:Ehe,U:khe,V:Rhe,w:The,W:Ahe,x:null,X:null,y:Mhe,Y:Phe,Z:$he,"%":Y3},R={a:I,A:z,b:X,B:W,c:U,d:W3,e:W3,f:Kde,g:U3,G:H3,H:G3,I:G3,j:Vde,L:Xde,m:qde,M:Yde,p:D,q:Gde,Q:Qde,s:ehe,S:Zde,u:zde,U:Bde,V:Hde,w:jde,W:Ude,x:B,X:V,y:U3,Y:H3,Z:Wde,"%":Jde};S.x=M(n,S),S.X=M(i,S),S.c=M(t,S),k.x=M(n,k),k.X=M(i,k),k.c=M(t,k);function M(Re,Ye){return function(Be){var de=[],Tt=-1,ft=0,tt=Re.length,Yt,vn,ir;for(Be instanceof Date||(Be=new Date(+Be));++Tt<tt;)Re.charCodeAt(Tt)===37&&(de.push(Re.slice(ft,Tt)),(vn=B3[Yt=Re.charAt(++Tt)])!=null?Yt=Re.charAt(++Tt):vn=Yt==="e"?" ":"0",(ir=Ye[Yt])&&(Yt=ir(Be,vn)),de.push(Yt),ft=Tt+1);return de.push(Re.slice(ft,Tt)),de.join("")}}function T(Re,Ye){return function(Be){var de=Fg(1900,void 0,1),Tt=N(de,Re,Be+="",0),ft,tt;if(Tt!=Be.length)return null;if("Q"in de)return new Date(de.Q);if("s"in de)return new Date(de.s*1e3+("L"in de?de.L:0));if(Ye&&!("Z"in de)&&(de.Z=0),"p"in de&&(de.H=de.H%12+de.p*12),de.m===void 0&&(de.m="q"in de?de.q:0),"V"in de){if(de.V<1||de.V>53)return null;"w"in de||(de.w=1),"Z"in de?(ft=rk(Fg(de.y,0,1)),tt=ft.getUTCDay(),ft=tt>4||tt===0?Cb.ceil(ft):Cb(ft),ft=Qu.offset(ft,(de.V-1)*7),de.y=ft.getUTCFullYear(),de.m=ft.getUTCMonth(),de.d=ft.getUTCDate()+(de.w+6)%7):(ft=ik(Fg(de.y,0,1)),tt=ft.getDay(),ft=tt>4||tt===0?Sb.ceil(ft):Sb(ft),ft=Rl.offset(ft,(de.V-1)*7),de.y=ft.getFullYear(),de.m=ft.getMonth(),de.d=ft.getDate()+(de.w+6)%7)}else("W"in de||"U"in de)&&("w"in de||(de.w="u"in de?de.u%7:"W"in de?1:0),tt="Z"in de?rk(Fg(de.y,0,1)).getUTCDay():ik(Fg(de.y,0,1)).getDay(),de.m=0,de.d="W"in de?(de.w+6)%7+de.W*7-(tt+5)%7:de.w+de.U*7-(tt+6)%7);return"Z"in de?(de.H+=de.Z/100|0,de.M+=de.Z%100,rk(de)):ik(de)}}function N(Re,Ye,Be,de){for(var Tt=0,ft=Ye.length,tt=Be.length,Yt,vn;Tt<ft;){if(de>=tt)return-1;if(Yt=Ye.charCodeAt(Tt++),Yt===37){if(Yt=Ye.charAt(Tt++),vn=R[Yt in B3?Ye.charAt(Tt++):Yt],!vn||(de=vn(Re,Be,de))<0)return-1}else if(Yt!=Be.charCodeAt(de++))return-1}return de}function D(Re,Ye,Be){var de=u.exec(Ye.slice(Be));return de?(Re.p=c.get(de[0].toLowerCase()),Be+de[0].length):-1}function I(Re,Ye,Be){var de=m.exec(Ye.slice(Be));return de?(Re.w=g.get(de[0].toLowerCase()),Be+de[0].length):-1}function z(Re,Ye,Be){var de=d.exec(Ye.slice(Be));return de?(Re.w=h.get(de[0].toLowerCase()),Be+de[0].length):-1}function X(Re,Ye,Be){var de=b.exec(Ye.slice(Be));return de?(Re.m=w.get(de[0].toLowerCase()),Be+de[0].length):-1}function W(Re,Ye,Be){var de=y.exec(Ye.slice(Be));return de?(Re.m=x.get(de[0].toLowerCase()),Be+de[0].length):-1}function U(Re,Ye,Be){return N(Re,t,Ye,Be)}function B(Re,Ye,Be){return N(Re,n,Ye,Be)}function V(Re,Ye,Be){return N(Re,i,Ye,Be)}function K(Re){return a[Re.getDay()]}function H(Re){return o[Re.getDay()]}function J(Re){return l[Re.getMonth()]}function Q(Re){return s[Re.getMonth()]}function oe(Re){return r[+(Re.getHours()>=12)]}function me(Re){return 1+~~(Re.getMonth()/3)}function ke(Re){return a[Re.getUTCDay()]}function ge(Re){return o[Re.getUTCDay()]}function Se(Re){return l[Re.getUTCMonth()]}function Me(Re){return s[Re.getUTCMonth()]}function It(Re){return r[+(Re.getUTCHours()>=12)]}function Et(Re){return 1+~~(Re.getUTCMonth()/3)}return{format:function(Re){var Ye=M(Re+="",S);return Ye.toString=function(){return Re},Ye},parse:function(Re){var Ye=T(Re+="",!1);return Ye.toString=function(){return Re},Ye},utcFormat:function(Re){var Ye=M(Re+="",k);return Ye.toString=function(){return Re},Ye},utcParse:function(Re){var Ye=T(Re+="",!0);return Ye.toString=function(){return Re},Ye}}}var B3={"-":"",_:" ",0:"0"},bi=/^\s*\d+/,Ide=/^%/,Dde=/[\\^$*+?|[\]().{}]/g;function Ht(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",o=r.length;return i+(o<n?new Array(n-o+1).join(t)+r:r)}function Lde(e){return e.replace(Dde,"\\$&")}function Pg(e){return new RegExp("^(?:"+e.map(Lde).join("|")+")","i")}function Ng(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function jde(e,t,n){var i=bi.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function zde(e,t,n){var i=bi.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function Bde(e,t,n){var i=bi.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function Hde(e,t,n){var i=bi.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function Ude(e,t,n){var i=bi.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function H3(e,t,n){var i=bi.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function U3(e,t,n){var i=bi.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function Wde(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function Gde(e,t,n){var i=bi.exec(t.slice(n,n+1));return i?(e.q=i[0]*3-3,n+i[0].length):-1}function qde(e,t,n){var i=bi.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function W3(e,t,n){var i=bi.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function Vde(e,t,n){var i=bi.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function G3(e,t,n){var i=bi.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function Yde(e,t,n){var i=bi.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function Zde(e,t,n){var i=bi.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function Xde(e,t,n){var i=bi.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function Kde(e,t,n){var i=bi.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function Jde(e,t,n){var i=Ide.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function Qde(e,t,n){var i=bi.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function ehe(e,t,n){var i=bi.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function q3(e,t){return Ht(e.getDate(),t,2)}function the(e,t){return Ht(e.getHours(),t,2)}function nhe(e,t){return Ht(e.getHours()%12||12,t,2)}function ihe(e,t){return Ht(1+Rl.count(Ts(e),e),t,3)}function AG(e,t){return Ht(e.getMilliseconds(),t,3)}function rhe(e,t){return AG(e,t)+"000"}function ohe(e,t){return Ht(e.getMonth()+1,t,2)}function ahe(e,t){return Ht(e.getMinutes(),t,2)}function she(e,t){return Ht(e.getSeconds(),t,2)}function lhe(e){var t=e.getDay();return t===0?7:t}function uhe(e,t){return Ht(Rm.count(Ts(e)-1,e),t,2)}function MG(e){var t=e.getDay();return t>=4||t===0?Dp(e):Dp.ceil(e)}function che(e,t){return e=MG(e),Ht(Dp.count(Ts(e),e)+(Ts(e).getDay()===4),t,2)}function fhe(e){return e.getDay()}function dhe(e,t){return Ht(Sb.count(Ts(e)-1,e),t,2)}function hhe(e,t){return Ht(e.getFullYear()%100,t,2)}function phe(e,t){return e=MG(e),Ht(e.getFullYear()%100,t,2)}function mhe(e,t){return Ht(e.getFullYear()%1e4,t,4)}function ghe(e,t){var n=e.getDay();return e=n>=4||n===0?Dp(e):Dp.ceil(e),Ht(e.getFullYear()%1e4,t,4)}function yhe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ht(t/60|0,"0",2)+Ht(t%60,"0",2)}function V3(e,t){return Ht(e.getUTCDate(),t,2)}function vhe(e,t){return Ht(e.getUTCHours(),t,2)}function xhe(e,t){return Ht(e.getUTCHours()%12||12,t,2)}function _he(e,t){return Ht(1+Qu.count(As(e),e),t,3)}function FG(e,t){return Ht(e.getUTCMilliseconds(),t,3)}function bhe(e,t){return FG(e,t)+"000"}function whe(e,t){return Ht(e.getUTCMonth()+1,t,2)}function She(e,t){return Ht(e.getUTCMinutes(),t,2)}function Che(e,t){return Ht(e.getUTCSeconds(),t,2)}function Ehe(e){var t=e.getUTCDay();return t===0?7:t}function khe(e,t){return Ht(Tm.count(As(e)-1,e),t,2)}function PG(e){var t=e.getUTCDay();return t>=4||t===0?Lp(e):Lp.ceil(e)}function Rhe(e,t){return e=PG(e),Ht(Lp.count(As(e),e)+(As(e).getUTCDay()===4),t,2)}function The(e){return e.getUTCDay()}function Ahe(e,t){return Ht(Cb.count(As(e)-1,e),t,2)}function Mhe(e,t){return Ht(e.getUTCFullYear()%100,t,2)}function Fhe(e,t){return e=PG(e),Ht(e.getUTCFullYear()%100,t,2)}function Phe(e,t){return Ht(e.getUTCFullYear()%1e4,t,4)}function Nhe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Lp(e):Lp.ceil(e),Ht(e.getUTCFullYear()%1e4,t,4)}function $he(){return"+0000"}function Y3(){return"%"}function Z3(e){return+e}function X3(e){return Math.floor(+e/1e3)}var bh,WP,NG,GP,$G;Ohe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Ohe(e){return bh=TG(e),WP=bh.format,NG=bh.parse,GP=bh.utcFormat,$G=bh.utcParse,bh}function m0(e){const t={};return n=>t[n]||(t[n]=e(n))}function Ihe(e,t){return n=>{const i=e(n),r=i.indexOf(t);if(r<0)return i;let o=Dhe(i,r);const a=o<i.length?i.slice(o):"";for(;--o>r;)if(i[o]!=="0"){++o;break}return i.slice(0,o)+a}}function Dhe(e,t){let n=e.lastIndexOf("e"),i;if(n>0)return n;for(n=e.length;--n>t;)if(i=e.charCodeAt(n),i>=48&&i<=57)return n+1}function OG(e){const t=m0(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(i){const r=sd(i||",");if(r.precision==null){switch(r.precision=12,r.type){case"%":r.precision-=2;break;case"e":r.precision-=1;break}return Ihe(t(r),t(".1f")(1)[1])}else return t(r)},formatSpan(i,r,o,a){a=sd(a??",f");const s=uc(i,r,o),l=Math.max(Math.abs(i),Math.abs(r));let u;if(a.precision==null)switch(a.type){case"s":return isNaN(u=oG(s,l))||(a.precision=u),n(a,l);case"":case"e":case"g":case"p":case"r":{isNaN(u=aG(s,l))||(a.precision=u-(a.type==="e"));break}case"f":case"%":{isNaN(u=rG(s))||(a.precision=u-(a.type==="%")*2);break}}return t(a)}}}let tA;IG();function IG(){return tA=OG({format:D2,formatPrefix:jP})}function DG(e){return OG(iG(e))}function Eb(e){return arguments.length?tA=DG(e):tA}function K3(e,t,n){n=n||{},Ie(n)||le(`Invalid time multi-format specifier: ${n}`);const i=t(Jo),r=t(bo),o=t(_o),a=t(Xr),s=t(ei),l=t(Ki),u=t(Zr),c=t(Fi),d=e(n[La]||".%L"),h=e(n[Jo]||":%S"),m=e(n[bo]||"%I:%M"),g=e(n[_o]||"%I %p"),y=e(n[Xr]||n[qi]||"%a %d"),x=e(n[ei]||"%b %d"),b=e(n[Ki]||"%B"),w=e(n[Zr]||"%B"),S=e(n[Fi]||"%Y");return k=>(i(k)<k?d:r(k)<k?h:o(k)<k?m:a(k)<k?g:l(k)<k?s(k)<k?y:x:c(k)<k?u(k)<k?b:w:S)(k)}function LG(e){const t=m0(e.format),n=m0(e.utcFormat);return{timeFormat:i=>Oe(i)?t(i):K3(t,Am,i),utcFormat:i=>Oe(i)?n(i):K3(n,Mm,i),timeParse:m0(e.parse),utcParse:m0(e.utcParse)}}let nA;jG();function jG(){return nA=LG({format:WP,parse:NG,utcFormat:GP,utcParse:$G})}function zG(e){return LG(TG(e))}function Ny(e){return arguments.length?nA=zG(e):nA}const iA=(e,t)=>xt({},e,t);function BG(e,t){const n=e?DG(e):Eb(),i=t?zG(t):Ny();return iA(n,i)}function qP(e,t){const n=arguments.length;return n&&n!==2&&le("defaultLocale expects either zero or two arguments."),n?iA(Eb(e),Ny(t)):iA(Eb(),Ny())}function Lhe(){return IG(),jG(),qP()}const jhe=/^(data:|([A-Za-z]+:)?\/\/)/,zhe=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Bhe=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,J3="file://";function Hhe(e,t){return n=>({options:n||{},sanitize:Whe,load:Uhe,fileAccess:!!t,file:Ghe(t),http:Vhe(e)})}async function Uhe(e,t){const n=await this.sanitize(e,t),i=n.href;return n.localFile?this.file(i):this.http(i,t)}async function Whe(e,t){t=xt({},this.options,t);const n=this.fileAccess,i={href:null};let r,o,a;const s=zhe.test(e.replace(Bhe,""));(e==null||typeof e!="string"||!s)&&le("Sanitize failure, invalid URI: "+we(e));const l=jhe.test(e);return(a=t.baseURL)&&!l&&(!e.startsWith("/")&&!a.endsWith("/")&&(e="/"+e),e=a+e),o=(r=e.startsWith(J3))||t.mode==="file"||t.mode!=="http"&&!l&&n,r?e=e.slice(J3.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(i,"localFile",{value:!!o}),i.href=e,t.target&&(i.target=t.target+""),t.rel&&(i.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(i.crossOrigin=t.crossOrigin+""),i}function Ghe(e){return e?t=>new Promise((n,i)=>{e.readFile(t,(r,o)=>{r?i(r):n(o)})}):qhe}async function qhe(){le("No file system access.")}function Vhe(e){return e?async function(t,n){const i=xt({},this.options.http,n),r=n&&n.response,o=await e(t,i);return o.ok?_t(o[r])?o[r]():o.text():le(o.status+""+o.statusText)}:Yhe}async function Yhe(){le("No HTTP fetch method available.")}const Zhe=e=>e!=null&&e===e,Xhe=e=>e==="true"||e==="false"||e===!0||e===!1,Khe=e=>!Number.isNaN(Date.parse(e)),HG=e=>!Number.isNaN(+e)&&!(e instanceof Date),Jhe=e=>HG(e)&&Number.isInteger(+e),rA={boolean:OP,integer:Vi,number:Vi,date:IP,string:DP,unknown:tr},hx=[Xhe,Jhe,HG,Khe],Qhe=["boolean","integer","number","date"];function UG(e,t){if(!e||!e.length)return"unknown";const n=e.length,i=hx.length,r=hx.map((o,a)=>a+1);for(let o=0,a=0,s,l;o<n;++o)for(l=t?e[o][t]:e[o],s=0;s<i;++s)if(r[s]&&Zhe(l)&&!hx[s](l)&&(r[s]=0,++a,a===hx.length))return"string";return Qhe[r.reduce((o,a)=>o===0?a:o,0)-1]}function WG(e,t){return t.reduce((n,i)=>(n[i]=UG(e,i),n),{})}function Q3(e){const t=function(n,i){const r={delimiter:e};return VP(n,i?xt(i,r):r)};return t.responseType="text",t}function VP(e,t){return t.header&&(e=t.header.map(we).join(t.delimiter)+`
`+e),Nfe(t.delimiter).parse(e+"")}VP.responseType="text";function epe(e){return typeof Buffer=="function"&&_t(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function YP(e,t){const n=t&&t.property?Xo(t.property):tr;return Ie(e)&&!epe(e)?tpe(n(e),t):n(JSON.parse(e))}YP.responseType="json";function tpe(e,t){return!fe(e)&&IW(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const npe={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function GG(e,t){let n,i,r,o;return e=YP(e,t),t&&t.feature?(n=Dfe,r=t.feature):t&&t.mesh?(n=jfe,r=t.mesh,o=npe[t.filter]):le("Missing TopoJSON feature or mesh parameter."),i=(i=e.objects[r])?n(e,i,o):le("Invalid TopoJSON object: "+r),i&&i.features||[i]}GG.responseType="json";const h_={dsv:VP,csv:Q3(","),tsv:Q3("	"),json:YP,topojson:GG};function ZP(e,t){return arguments.length>1?(h_[e]=t,this):et(h_,e)?h_[e]:null}function qG(e){const t=ZP(e);return t&&t.responseType||"text"}function VG(e,t,n,i){t=t||{};const r=ZP(t.type||"json");return r||le("Unknown data format type: "+t.type),e=r(e,t),t.parse&&ipe(e,t.parse,n,i),et(e,"columns")&&delete e.columns,e}function ipe(e,t,n,i){if(!e.length)return;const r=Ny();n=n||r.timeParse,i=i||r.utcParse;let o=e.columns||Object.keys(e[0]),a,s,l,u,c,d;t==="auto"&&(t=WG(e,o)),o=Object.keys(t);const h=o.map(m=>{const g=t[m];let y,x;if(g&&(g.startsWith("date:")||g.startsWith("utc:")))return y=g.split(/:(.+)?/,2),x=y[1],(x[0]==="'"&&x[x.length-1]==="'"||x[0]==='"'&&x[x.length-1]==='"')&&(x=x.slice(1,-1)),(y[0]==="utc"?i:n)(x);if(!rA[g])throw Error("Illegal format pattern: "+m+":"+g);return rA[g]});for(l=0,c=e.length,d=o.length;l<c;++l)for(a=e[l],u=0;u<d;++u)s=o[u],a[s]=h[u](a[s])}const U2=Hhe(typeof fetch<"u"&&fetch,null);function W2(e){const t=e||tr,n=[],i={};return n.add=r=>{const o=t(r);return i[o]||(i[o]=1,n.push(r)),n},n.remove=r=>{const o=t(r);if(i[o]){i[o]=0;const a=n.indexOf(r);a>=0&&n.splice(a,1)}return n},n}async function p_(e,t){try{await t(e)}catch(n){e.error(n)}}const YG=Symbol("vega_id");let rpe=1;function G2(e){return!!(e&&Je(e))}function Je(e){return e[YG]}function ZG(e,t){return e[YG]=t,e}function Vt(e){const t=e===Object(e)?e:{data:e};return Je(t)?t:ZG(t,rpe++)}function XP(e){return q2(e,Vt({}))}function q2(e,t){for(const n in e)t[n]=e[n];return t}function XG(e,t){return ZG(t,Je(e))}function Dd(e,t){return e?t?(n,i)=>e(n,i)||Je(t(n))-Je(t(i)):(n,i)=>e(n,i)||Je(n)-Je(i):null}function KG(e){return e&&e.constructor===Ld}function Ld(){const e=[],t=[],n=[],i=[],r=[];let o=null,a=!1;return{constructor:Ld,insert(s){const l=$e(s),u=l.length;for(let c=0;c<u;++c)e.push(l[c]);return this},remove(s){const l=_t(s)?i:t,u=$e(s),c=u.length;for(let d=0;d<c;++d)l.push(u[d]);return this},modify(s,l,u){const c={field:l,value:nr(u)};return _t(s)?(c.filter=s,r.push(c)):(c.tuple=s,n.push(c)),this},encode(s,l){return _t(s)?r.push({filter:s,field:l}):n.push({tuple:s,field:l}),this},clean(s){return o=s,this},reflow(){return a=!0,this},pulse(s,l){const u={},c={};let d,h,m,g,y,x;for(d=0,h=l.length;d<h;++d)u[Je(l[d])]=1;for(d=0,h=t.length;d<h;++d)y=t[d],u[Je(y)]=-1;for(d=0,h=i.length;d<h;++d)g=i[d],l.forEach(w=>{g(w)&&(u[Je(w)]=-1)});for(d=0,h=e.length;d<h;++d)y=e[d],x=Je(y),u[x]?u[x]=1:s.add.push(Vt(e[d]));for(d=0,h=l.length;d<h;++d)y=l[d],u[Je(y)]<0&&s.rem.push(y);function b(w,S,k){k?w[S]=k(w):s.encode=S,a||(c[Je(w)]=w)}for(d=0,h=n.length;d<h;++d)m=n[d],y=m.tuple,g=m.field,x=u[Je(y)],x>0&&(b(y,g,m.value),s.modifies(g));for(d=0,h=r.length;d<h;++d)m=r[d],g=m.filter,l.forEach(w=>{g(w)&&u[Je(w)]>0&&b(w,m.field,m.value)}),s.modifies(m.field);if(a)s.mod=t.length||i.length?l.filter(w=>u[Je(w)]>0):l.slice();else for(x in c)s.mod.push(c[x]);return(o||o==null&&(t.length||i.length))&&s.clean(!0),s}}}const m_="_:mod:_";function V2(){Object.defineProperty(this,m_,{writable:!0,value:{}})}V2.prototype={set(e,t,n,i){const r=this,o=r[e],a=r[m_];return t!=null&&t>=0?(o[t]!==n||i)&&(o[t]=n,a[t+":"+e]=-1,a[e]=-1):(o!==n||i)&&(r[e]=n,a[e]=fe(n)?1+n.length:-1),r},modified(e,t){const n=this[m_];if(arguments.length){if(fe(e)){for(let i=0;i<e.length;++i)if(n[e[i]])return!0;return!1}}else{for(const i in n)if(n[i])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[m_]={},this}};let ope=0;const ape="pulse",spe=new V2,lpe=1,upe=2;function ln(e,t,n,i){this.id=++ope,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,i)}function e4(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}ln.prototype={targets(){return this._targets||(this._targets=W2(xv))},set(e){return this.value!==e?(this.value=e,1):0},skip:e4(lpe),modified:e4(upe),parameters(e,t,n){t=t!==!1;const i=this._argval=this._argval||new V2,r=this._argops=this._argops||[],o=[];let a,s,l,u;const c=(d,h,m)=>{m instanceof ln?(m!==this&&(t&&m.targets().add(this),o.push(m)),r.push({op:m,name:d,index:h})):i.set(d,h,m)};for(a in e)if(s=e[a],a===ape)$e(s).forEach(d=>{d instanceof ln?d!==this&&(d.targets().add(this),o.push(d)):le("Pulse parameters must be operator instances.")}),this.source=s;else if(fe(s))for(i.set(a,-1,Array(l=s.length)),u=0;u<l;++u)c(a,u,s[u]);else c(a,-1,s);return this.marshall().clear(),n&&(r.initonly=!0),o},marshall(e){const t=this._argval||spe,n=this._argops;let i,r,o,a;if(n){const s=n.length;for(r=0;r<s;++r)i=n[r],o=i.op,a=o.modified()&&o.stamp===e,t.set(i.name,i.index,o.value,a);if(n.initonly){for(r=0;r<s;++r)i=n[r],i.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,i,r;if(e)for(t=0,n=e.length;t<n;++t)i=e[t],r=i.op,r._targets&&r._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),i=t.call(this,n,e);if(n.clear(),i!==this.value)this.value=i;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function cpe(e,t,n,i){let r=1,o;return e instanceof ln?o=e:e&&e.prototype instanceof ln?o=new e:_t(e)?o=new ln(null,e):(r=0,o=new ln(e,t)),this.rank(o),r&&(i=n,n=t),n&&this.connect(o,o.parameters(n,i)),this.touch(o),o}function fpe(e,t){const n=e.rank,i=t.length;for(let r=0;r<i;++r)if(n<t[r].rank){this.rerank(e);return}}let dpe=0;function Y2(e,t,n){this.id=++dpe,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function gu(e,t,n){return new Y2(e,t,n)}Y2.prototype={_filter:Ko,_apply:tr,targets(){return this._targets||(this._targets=W2(xv))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,i=n?n.length:0;for(let r=0;r<i;++r)n[r].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=gu(e);return this.targets().add(t),t},apply(e){const t=gu(null,e);return this.targets().add(t),t},merge(){const e=gu();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=gu();return this.targets().add(gu(null,null,NP(e,n=>{const i=n.dataflow;t.receive(n),i&&i.run&&i.run()}))),t},between(e,t){let n=!1;return e.targets().add(gu(null,null,()=>n=!0)),t.targets().add(gu(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Ko,this._targets=null}};function hpe(e,t,n,i){const r=this,o=gu(n,i),a=function(u){u.dataflow=r;try{o.receive(u)}catch(c){r.error(c)}finally{r.run()}};let s;typeof e=="string"&&typeof document<"u"?s=document.querySelectorAll(e):s=$e(e);const l=s.length;for(let u=0;u<l;++u)s[u].addEventListener(t,a);return o}function ppe(e,t){const n=this.locale();return VG(e,t,n.timeParse,n.utcParse)}function mpe(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function gpe(e,t){const n=this;let i=0,r;try{r=await n.loader().load(e,{context:"dataflow",response:qG(t&&t.type)});try{r=n.parse(r,t)}catch(o){i=-2,n.warn("Data ingestion failed",e,o)}}catch(o){i=-1,n.warn("Loading failed",e,o)}return{data:r,status:i}}async function ype(e,t,n){const i=this,r=i._pending||vpe(i);r.requests+=1;const o=await i.request(t,n);return i.pulse(e,i.changeset().remove(Ko).insert(o.data||[])),r.done(),o}function vpe(e){let t;const n=new Promise(i=>t=i);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const xpe={skip:!0};function _pe(e,t,n,i,r){return(e instanceof ln?wpe:bpe)(this,e,t,n,i,r),this}function bpe(e,t,n,i,r,o){const a=xt({},o,xpe);let s,l;_t(n)||(n=nr(n)),i===void 0?s=u=>e.touch(n(u)):_t(i)?(l=new ln(null,i,r,!1),s=u=>{l.evaluate(u);const c=n(u),d=l.value;KG(d)?e.pulse(c,d,o):e.update(c,d,a)}):s=u=>e.update(n(u),i,a),t.apply(s)}function wpe(e,t,n,i,r,o){if(i===void 0)t.targets().add(n);else{const a=o||{},s=new ln(null,Spe(n,i),r,!1);s.modified(a.force),s.rank=t.rank,t.targets().add(s),n&&(s.skip(!0),s.value=n.value,s.targets().add(n),e.connect(n,[s]))}}function Spe(e,t){return t=_t(t)?t:nr(t),e?function(n,i){const r=t(n,i);return e.skip()||(e.skip(r!==this.value).value=r),r}:t}function Cpe(e){e.rank=++this._rank}function Epe(e){const t=[e];let n,i,r;for(;t.length;)if(this.rank(n=t.pop()),i=n._targets)for(r=i.length;--r>=0;)t.push(n=i[r]),n===e&&le("Cycle detected in dataflow graph.")}const kb={},us=1,Su=2,al=4,kpe=us|Su,t4=us|al,wh=us|Su|al,n4=8,$g=16,i4=32,r4=64;function ec(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function ok(e,t){const n=[];return wu(e,t,i=>n.push(i)),n}function o4(e,t){const n={};return e.visit(t,i=>{n[Je(i)]=1}),i=>n[Je(i)]?null:i}function px(e,t){return e?(n,i)=>e(n,i)&&t(n,i):t}ec.prototype={StopPropagation:kb,ADD:us,REM:Su,MOD:al,ADD_REM:kpe,ADD_MOD:t4,ALL:wh,REFLOW:n4,SOURCE:$g,NO_SOURCE:i4,NO_FIELDS:r4,fork(e){return new ec(this.dataflow).init(this,e)},clone(){const e=this.fork(wh);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(wh|$g)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new ec(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&r4)&&(n.fields=e.fields),t&us?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Su?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&al?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&i4?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||wh;return t&us&&this.add.length||t&Su&&this.rem.length||t&al&&this.mod.length},reflow(e){if(e)return this.fork(wh).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(al,o4(this,us))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return fe(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?fe(e)?e.some(i=>n[i]):n[e]:!!n:!1},filter(e,t){const n=this;return e&us&&(n.addF=px(n.addF,t)),e&Su&&(n.remF=px(n.remF,t)),e&al&&(n.modF=px(n.modF,t)),e&$g&&(n.srcF=px(n.srcF,t)),n},materialize(e){e=e||wh;const t=this;return e&us&&t.addF&&(t.add=ok(t.add,t.addF),t.addF=null),e&Su&&t.remF&&(t.rem=ok(t.rem,t.remF),t.remF=null),e&al&&t.modF&&(t.mod=ok(t.mod,t.modF),t.modF=null),e&$g&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,i=t;if(e&$g)return wu(n.source,n.srcF,i),n;e&us&&wu(n.add,n.addF,i),e&Su&&wu(n.rem,n.remF,i),e&al&&wu(n.mod,n.modF,i);const r=n.source;if(e&n4&&r){const o=n.add.length+n.mod.length;o===r.length||(o?wu(r,o4(n,t4),i):wu(r,n.srcF,i))}return n}};function KP(e,t,n,i){const r=this;let o=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=i||null,this.pulses=n;for(const a of n)if(a.stamp===t){if(a.fields){const s=r.fields||(r.fields={});for(const l in a.fields)s[l]=1}a.changed(r.ADD)&&(o|=r.ADD),a.changed(r.REM)&&(o|=r.REM),a.changed(r.MOD)&&(o|=r.MOD)}this.changes=o}be(KP,ec,{fork(e){const t=new ec(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?fe(e)?e.some(i=>n[i]):n[e]:0},filter(){le("MultiPulse does not support filtering.")},materialize(){le("MultiPulse does not support materialization.")},visit(e,t){const n=this,i=n.pulses,r=i.length;let o=0;if(e&n.SOURCE)for(;o<r;++o)i[o].visit(e,t);else for(;o<r;++o)i[o].stamp===n.stamp&&i[o].visit(e,t);return n}});async function Rpe(e,t,n){const i=this,r=[];if(i._pulse)return JG(i);if(i._pending&&await i._pending,t&&await p_(i,t),!i._touched.length)return i.debug("Dataflow invoked, but nothing to do."),i;const o=++i._clock;i._pulse=new ec(i,o,e),i._touched.forEach(c=>i._enqueue(c,!0)),i._touched=W2(xv);let a=0,s,l,u;try{for(;i._heap.size()>0;){if(s=i._heap.pop(),s.rank!==s.qrank){i._enqueue(s,!0);continue}l=s.run(i._getPulse(s,e)),l.then?l=await l:l.async&&(r.push(l.async),l=kb),l!==kb&&s._targets&&s._targets.forEach(c=>i._enqueue(c)),++a}}catch(c){i._heap.clear(),u=c}if(i._input={},i._pulse=null,i.debug(`Pulse ${o}: ${a} operators`),u&&(i._postrun=[],i.error(u)),i._postrun.length){const c=i._postrun.sort((d,h)=>h.priority-d.priority);i._postrun=[];for(let d=0;d<c.length;++d)await p_(i,c[d].callback)}return n&&await p_(i,n),r.length&&Promise.all(r).then(c=>i.runAsync(null,()=>{c.forEach(d=>{try{d(i)}catch(h){i.error(h)}})})),i}async function Tpe(e,t,n){for(;this._running;)await this._running;const i=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(i,i),this._running}function Ape(e,t,n){return this._pulse?JG(this):(this.evaluate(e,t,n),this)}function Mpe(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(i){this.error(i)}}function JG(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function Fpe(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function Ppe(e,t){const n=e.source,i=this._clock;return n&&fe(n)?new KP(this,i,n.map(r=>r.pulse),t):this._input[e.id]||Npe(this._pulse,n&&n.pulse)}function Npe(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==kb&&(e.source=t.source),e)}const JP={skip:!1,force:!1};function $pe(e,t){const n=t||JP;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function Ope(e,t,n){const i=n||JP;return(e.set(t)||i.force)&&this.touch(e,i),this}function Ipe(e,t,n){this.touch(e,n||JP);const i=new ec(this,this._clock+(this._pulse?0:1)),r=e.pulse&&e.pulse.source||[];return i.target=e,this._input[e.id]=t.pulse(i,r),this}function Dpe(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),QG(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let i;return t.length?(i=t[0],t[0]=n,Lpe(t,0,e)):i=n,i}}}function QG(e,t,n,i){let r,o;const a=e[n];for(;n>t;){if(o=n-1>>1,r=e[o],i(a,r)<0){e[n]=r,n=o;continue}break}return e[n]=a}function Lpe(e,t,n){const i=t,r=e.length,o=e[t];let a=(t<<1)+1,s;for(;a<r;)s=a+1,s<r&&n(e[a],e[s])>=0&&(a=s),e[t]=e[a],t=a,a=(t<<1)+1;return e[t]=o,QG(e,i,t,n)}function hp(){this.logger(TP()),this.logLevel(kP),this._clock=0,this._rank=0,this._locale=qP();try{this._loader=U2()}catch{}this._touched=W2(xv),this._input={},this._pulse=null,this._heap=Dpe((e,t)=>e.qrank-t.qrank),this._postrun=[]}function Og(e){return function(){return this._log[e].apply(this,arguments)}}hp.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:Og("error"),warn:Og("warn"),info:Og("info"),debug:Og("debug"),logLevel:Og("level"),cleanThreshold:1e4,add:cpe,connect:fpe,rank:Cpe,rerank:Epe,pulse:Ipe,touch:$pe,update:Ope,changeset:Ld,ingest:mpe,parse:ppe,preload:ype,request:gpe,events:hpe,on:_pe,evaluate:Rpe,run:Ape,runAsync:Tpe,runAfter:Mpe,_enqueue:Fpe,_getPulse:Ppe};function ne(e,t){ln.call(this,e,null,t)}be(ne,ln,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const zp={};function eq(e){const t=tq(e);return t&&t.Definition||null}function tq(e){return e=e&&e.toLowerCase(),et(zp,e)?zp[e]:null}function*nq(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)i=t(i,++n,e),i!=null&&i!==""&&(i=+i)>=i&&(yield i)}}function QP(e,t,n){const i=Float64Array.from(nq(e,n));return i.sort(kl),t.map(r=>JW(i,r))}function eN(e,t){return QP(e,[.25,.5,.75],t)}function tN(e,t){const n=e.length,i=Vfe(e,t),r=eN(e,t),o=(r[2]-r[0])/1.34;return 1.06*(Math.min(i,o)||i||Math.abs(r[0])||1)*Math.pow(n,-.2)}function iq(e){const t=e.maxbins||20,n=e.base||10,i=Math.log(n),r=e.divide||[5,2];let o=e.extent[0],a=e.extent[1],s,l,u,c,d,h;const m=e.span||a-o||Math.abs(o)||1;if(e.step)s=e.step;else if(e.steps){for(c=m/t,d=0,h=e.steps.length;d<h&&e.steps[d]<c;++d);s=e.steps[Math.max(0,d-1)]}else{for(l=Math.ceil(Math.log(t)/i),u=e.minstep||0,s=Math.max(u,Math.pow(n,Math.round(Math.log(m)/i)-l));Math.ceil(m/s)>t;)s*=n;for(d=0,h=r.length;d<h;++d)c=s/r[d],c>=u&&m/c<=t&&(s=c)}c=Math.log(s);const g=c>=0?0:~~(-c/i)+1,y=Math.pow(n,-g-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(o/s+y)*s,o=o<c?c-s:c,a=Math.ceil(a/s)*s),{start:o,stop:a===o?o+s:a,step:s}}var Qo=Math.random;function jpe(e){Qo=e}function rq(e,t,n,i){if(!e.length)return[void 0,void 0];const r=Float64Array.from(nq(e,i)),o=r.length,a=t;let s,l,u,c;for(u=0,c=Array(a);u<a;++u){for(s=0,l=0;l<o;++l)s+=r[~~(Qo()*o)];c[u]=s/o}return c.sort(kl),[ZT(c,n/2),ZT(c,1-n/2)]}function oq(e,t,n,i){i=i||(h=>h);const r=e.length,o=new Float64Array(r);let a=0,s=1,l=i(e[0]),u=l,c=l+t,d;for(;s<r;++s){if(d=i(e[s]),d>=c){for(u=(l+u)/2;a<s;++a)o[a]=u;c=d+t,l=d}u=d}for(u=(l+u)/2;a<s;++a)o[a]=u;return n?zpe(o,t+t/4):o}function zpe(e,t){const n=e.length;let i=0,r=1,o,a;for(;e[i]===e[r];)++r;for(;r<n;){for(o=r+1;e[r]===e[o];)++o;if(e[r]-e[r-1]<t){for(a=r+(i+o-r-r>>1);a<r;)e[a++]=e[r];for(;a>r;)e[a--]=e[i]}i=r,r=o}return e}function Bpe(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function Hpe(e,t){t==null&&(t=e,e=0);let n,i,r;const o={min(a){return arguments.length?(n=a||0,r=i-n,o):n},max(a){return arguments.length?(i=a||0,r=i-n,o):i},sample(){return n+Math.floor(r*Qo())},pdf(a){return a===Math.floor(a)&&a>=n&&a<i?1/r:0},cdf(a){const s=Math.floor(a);return s<n?0:s>=i?1:(s-n+1)/r},icdf(a){return a>=0&&a<=1?n-1+Math.floor(a*r):NaN}};return o.min(e).max(t)}const aq=Math.sqrt(2*Math.PI),Upe=Math.SQRT2;let Ig=NaN;function Z2(e,t){e=e||0,t=t??1;let n=0,i=0,r,o;if(Ig===Ig)n=Ig,Ig=NaN;else{do n=Qo()*2-1,i=Qo()*2-1,r=n*n+i*i;while(r===0||r>1);o=Math.sqrt(-2*Math.log(r)/r),n*=o,Ig=i*o}return e+n*t}function nN(e,t,n){n=n??1;const i=(e-(t||0))/n;return Math.exp(-.5*i*i)/(n*aq)}function X2(e,t,n){t=t||0,n=n??1;const i=(e-t)/n,r=Math.abs(i);let o;if(r>37)o=0;else{const a=Math.exp(-r*r/2);let s;r<7.07106781186547?(s=.0352624965998911*r+.700383064443688,s=s*r+6.37396220353165,s=s*r+33.912866078383,s=s*r+112.079291497871,s=s*r+221.213596169931,s=s*r+220.206867912376,o=a*s,s=.0883883476483184*r+1.75566716318264,s=s*r+16.064177579207,s=s*r+86.7807322029461,s=s*r+296.564248779674,s=s*r+637.333633378831,s=s*r+793.826512519948,s=s*r+440.413735824752,o=o/s):(s=r+.65,s=r+4/s,s=r+3/s,s=r+2/s,s=r+1/s,o=a/s/2.506628274631)}return i>0?1-o:o}function K2(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*Upe*Wpe(2*e-1)}function Wpe(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function iN(e,t){let n,i;const r={mean(o){return arguments.length?(n=o||0,r):n},stdev(o){return arguments.length?(i=o??1,r):i},sample:()=>Z2(n,i),pdf:o=>nN(o,n,i),cdf:o=>X2(o,n,i),icdf:o=>K2(o,n,i)};return r.mean(e).stdev(t)}function rN(e,t){const n=iN();let i=0;const r={data(o){return arguments.length?(e=o,i=o?o.length:0,r.bandwidth(t)):e},bandwidth(o){return arguments.length?(t=o,!t&&e&&(t=tN(e)),r):t},sample(){return e[~~(Qo()*i)]+t*n.sample()},pdf(o){let a=0,s=0;for(;s<i;++s)a+=n.pdf((o-e[s])/t);return a/t/i},cdf(o){let a=0,s=0;for(;s<i;++s)a+=n.cdf((o-e[s])/t);return a/i},icdf(){throw Error("KDE icdf not supported.")}};return r.data(e)}function oN(e,t){return e=e||0,t=t??1,Math.exp(e+Z2()*t)}function aN(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const i=(Math.log(e)-t)/n;return Math.exp(-.5*i*i)/(n*aq*e)}function sN(e,t,n){return X2(Math.log(e),t,n)}function lN(e,t,n){return Math.exp(K2(e,t,n))}function sq(e,t){let n,i;const r={mean(o){return arguments.length?(n=o||0,r):n},stdev(o){return arguments.length?(i=o??1,r):i},sample:()=>oN(n,i),pdf:o=>aN(o,n,i),cdf:o=>sN(o,n,i),icdf:o=>lN(o,n,i)};return r.mean(e).stdev(t)}function lq(e,t){let n=0,i;function r(a){const s=[];let l=0,u;for(u=0;u<n;++u)l+=s[u]=a[u]==null?1:+a[u];for(u=0;u<n;++u)s[u]/=l;return s}const o={weights(a){return arguments.length?(i=r(t=a||[]),o):t},distributions(a){return arguments.length?(a?(n=a.length,e=a):(n=0,e=[]),o.weights(t)):e},sample(){const a=Qo();let s=e[n-1],l=i[0],u=0;for(;u<n-1;l+=i[++u])if(a<l){s=e[u];break}return s.sample()},pdf(a){let s=0,l=0;for(;l<n;++l)s+=i[l]*e[l].pdf(a);return s},cdf(a){let s=0,l=0;for(;l<n;++l)s+=i[l]*e[l].cdf(a);return s},icdf(){throw Error("Mixture icdf not supported.")}};return o.distributions(e).weights(t)}function uN(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Qo()}function cN(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function fN(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function dN(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function uq(e,t){let n,i;const r={min(o){return arguments.length?(n=o||0,r):n},max(o){return arguments.length?(i=o??1,r):i},sample:()=>uN(n,i),pdf:o=>cN(o,n,i),cdf:o=>fN(o,n,i),icdf:o=>dN(o,n,i)};return t==null&&(t=e??1,e=0),r.min(e).max(t)}function hN(e,t,n){let i=0,r=0;for(const o of e){const a=n(o);t(o)==null||a==null||isNaN(a)||(i+=(a-i)/++r)}return{coef:[i],predict:()=>i,rSquared:0}}function bv(e,t,n,i){const r=i-e*e,o=Math.abs(r)<1e-24?0:(n-e*t)/r;return[t-o*e,o]}function J2(e,t,n,i){e=e.filter(m=>{let g=t(m),y=n(m);return g!=null&&(g=+g)>=g&&y!=null&&(y=+y)>=y}),i&&e.sort((m,g)=>t(m)-t(g));const r=e.length,o=new Float64Array(r),a=new Float64Array(r);let s=0,l=0,u=0,c,d,h;for(h of e)o[s]=c=+t(h),a[s]=d=+n(h),++s,l+=(c-l)/s,u+=(d-u)/s;for(s=0;s<r;++s)o[s]-=l,a[s]-=u;return[o,a,l,u]}function wv(e,t,n,i){let r=-1,o,a;for(const s of e)o=t(s),a=n(s),o!=null&&(o=+o)>=o&&a!=null&&(a=+a)>=a&&i(o,a,++r)}function Fm(e,t,n,i,r){let o=0,a=0;return wv(e,t,n,(s,l)=>{const u=l-r(s),c=l-i;o+=u*u,a+=c*c}),1-o/a}function pN(e,t,n){let i=0,r=0,o=0,a=0,s=0;wv(e,t,n,(c,d)=>{++s,i+=(c-i)/s,r+=(d-r)/s,o+=(c*d-o)/s,a+=(c*c-a)/s});const l=bv(i,r,o,a),u=c=>l[0]+l[1]*c;return{coef:l,predict:u,rSquared:Fm(e,t,n,r,u)}}function cq(e,t,n){let i=0,r=0,o=0,a=0,s=0;wv(e,t,n,(c,d)=>{++s,c=Math.log(c),i+=(c-i)/s,r+=(d-r)/s,o+=(c*d-o)/s,a+=(c*c-a)/s});const l=bv(i,r,o,a),u=c=>l[0]+l[1]*Math.log(c);return{coef:l,predict:u,rSquared:Fm(e,t,n,r,u)}}function fq(e,t,n){const[i,r,o,a]=J2(e,t,n);let s=0,l=0,u=0,c=0,d=0,h,m,g;wv(e,t,n,(w,S)=>{h=i[d++],m=Math.log(S),g=h*S,s+=(S*m-s)/d,l+=(g-l)/d,u+=(g*m-u)/d,c+=(h*g-c)/d});const[y,x]=bv(l/a,s/a,u/a,c/a),b=w=>Math.exp(y+x*(w-o));return{coef:[Math.exp(y-x*o),x],predict:b,rSquared:Fm(e,t,n,a,b)}}function dq(e,t,n){let i=0,r=0,o=0,a=0,s=0,l=0;wv(e,t,n,(d,h)=>{const m=Math.log(d),g=Math.log(h);++l,i+=(m-i)/l,r+=(g-r)/l,o+=(m*g-o)/l,a+=(m*m-a)/l,s+=(h-s)/l});const u=bv(i,r,o,a),c=d=>u[0]*Math.pow(d,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:c,rSquared:Fm(e,t,n,s,c)}}function mN(e,t,n){const[i,r,o,a]=J2(e,t,n),s=i.length;let l=0,u=0,c=0,d=0,h=0,m,g,y,x;for(m=0;m<s;)g=i[m],y=r[m++],x=g*g,l+=(x-l)/m,u+=(x*g-u)/m,c+=(x*x-c)/m,d+=(g*y-d)/m,h+=(x*y-h)/m;const b=c-l*l,w=l*b-u*u,S=(h*l-d*u)/w,k=(d*b-h*u)/w,R=-S*l,M=T=>(T=T-o,S*T*T+k*T+R+a);return{coef:[R-k*o+S*o*o+a,k-2*S*o,S],predict:M,rSquared:Fm(e,t,n,a,M)}}function hq(e,t,n,i){if(i===0)return hN(e,t,n);if(i===1)return pN(e,t,n);if(i===2)return mN(e,t,n);const[r,o,a,s]=J2(e,t,n),l=r.length,u=[],c=[],d=i+1;let h,m,g,y,x;for(h=0;h<d;++h){for(g=0,y=0;g<l;++g)y+=Math.pow(r[g],h)*o[g];for(u.push(y),x=new Float64Array(d),m=0;m<d;++m){for(g=0,y=0;g<l;++g)y+=Math.pow(r[g],h+m);x[m]=y}c.push(x)}c.push(u);const b=qpe(c),w=S=>{S-=a;let k=s+b[0]+b[1]*S+b[2]*S*S;for(h=3;h<d;++h)k+=b[h]*Math.pow(S,h);return k};return{coef:Gpe(d,b,-a,s),predict:w,rSquared:Fm(e,t,n,s,w)}}function Gpe(e,t,n,i){const r=Array(e);let o,a,s,l;for(o=0;o<e;++o)r[o]=0;for(o=e-1;o>=0;--o)for(s=t[o],l=1,r[o]+=s,a=1;a<=o;++a)l*=(o+1-a)/a,r[o-a]+=s*Math.pow(n,a)*l;return r[0]+=i,r}function qpe(e){const t=e.length-1,n=[];let i,r,o,a,s;for(i=0;i<t;++i){for(a=i,r=i+1;r<t;++r)Math.abs(e[i][r])>Math.abs(e[i][a])&&(a=r);for(o=i;o<t+1;++o)s=e[o][i],e[o][i]=e[o][a],e[o][a]=s;for(r=i+1;r<t;++r)for(o=t;o>=i;o--)e[o][r]-=e[o][i]*e[i][r]/e[i][i]}for(r=t-1;r>=0;--r){for(s=0,o=r+1;o<t;++o)s+=e[o][r]*n[o];n[r]=(e[t][r]-s)/e[r][r]}return n}const a4=2,s4=1e-12;function pq(e,t,n,i){const[r,o,a,s]=J2(e,t,n,!0),l=r.length,u=Math.max(2,~~(i*l)),c=new Float64Array(l),d=new Float64Array(l),h=new Float64Array(l).fill(1);for(let m=-1;++m<=a4;){const g=[0,u-1];for(let x=0;x<l;++x){const b=r[x],w=g[0],S=g[1],k=b-r[w]>r[S]-b?w:S;let R=0,M=0,T=0,N=0,D=0;const I=1/Math.abs(r[k]-b||1);for(let W=w;W<=S;++W){const U=r[W],B=o[W],V=Vpe(Math.abs(b-U)*I)*h[W],K=U*V;R+=V,M+=K,T+=B*V,N+=B*K,D+=U*K}const[z,X]=bv(M/R,T/R,N/R,D/R);c[x]=z+X*b,d[x]=Math.abs(o[x]-c[x]),Ype(r,x+1,g)}if(m===a4)break;const y=QW(d);if(Math.abs(y)<s4)break;for(let x=0,b,w;x<l;++x)b=d[x]/(6*y),h[x]=b>=1?s4:(w=1-b*b)*w}return Zpe(r,c,a,s)}function Vpe(e){return(e=1-e*e*e)*e*e}function Ype(e,t,n){const i=e[t];let r=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>r&&e[o]-i<=i-e[r];)n[0]=++r,n[1]=o,++o}function Zpe(e,t,n,i){const r=e.length,o=[];let a=0,s=0,l=[],u;for(;a<r;++a)u=e[a]+n,l[0]===u?l[1]+=(t[a]-l[1])/++s:(s=0,l[1]+=i,l=[u,t[a]],o.push(l));return l[1]+=i,o}const Xpe=.5*Math.PI/180;function Q2(e,t,n,i){n=n||25,i=Math.max(n,i||200);const r=y=>[y,e(y)],o=t[0],a=t[1],s=a-o,l=s/i,u=[r(o)],c=[];if(n===i){for(let y=1;y<i;++y)u.push(r(o+y/n*s));return u.push(r(a)),u}else{c.push(r(a));for(let y=n;--y>0;)c.push(r(o+y/n*s))}let d=u[0],h=c[c.length-1];const m=1/s,g=Kpe(d[1],c);for(;h;){const y=r((d[0]+h[0])/2);y[0]-d[0]>=l&&Jpe(d,y,h,m,g)>Xpe?c.push(y):(d=h,u.push(h),c.pop()),h=c[c.length-1]}return u}function Kpe(e,t){let n=e,i=e;const r=t.length;for(let o=0;o<r;++o){const a=t[o][1];a<n&&(n=a),a>i&&(i=a)}return 1/(i-n)}function Jpe(e,t,n,i,r){const o=Math.atan2(r*(n[1]-e[1]),i*(n[0]-e[0])),a=Math.atan2(r*(t[1]-e[1]),i*(t[0]-e[0]));return Math.abs(o-a)}function Qpe(e){return t=>{const n=e.length;let i=1,r=String(e[0](t));for(;i<n;++i)r+="|"+e[i](t);return r}}function oA(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:Qpe(e)}function mq(e,t,n){return n||e+(t?"_"+t:"")}const ak=()=>{},eme={init:ak,add:ak,rem:ak,idx:0},$y={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},Sv=Object.keys($y).filter(e=>e!=="__count__");function tme(e,t){return(n,i)=>xt({name:e,aggregate_param:i,out:n||e},eme,t)}[...Sv,"__count__"].forEach(e=>{$y[e]=tme(e,$y[e])});function gq(e,t,n){return $y[e](n,t)}function yq(e,t){return e.idx-t.idx}function nme(e){const t={};e.forEach(i=>t[i.name]=i);const n=i=>{i.req&&i.req.forEach(r=>{t[r]||n(t[r]=$y[r]())})};return e.forEach(n),Object.values(t).sort(yq)}function ime(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function rme(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function ome(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function ame(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function vq(e,t){const n=t||tr,i=nme(e),r=e.slice().sort(yq);function o(a){this._ops=i,this._out=r,this.cell=a,this.init()}return o.prototype.init=ime,o.prototype.add=rme,o.prototype.rem=ome,o.prototype.set=ame,o.prototype.get=n,o.fields=e.map(a=>a.out),o}function gN(e){this._key=e?Xo(e):Je,this.reset()}const Oi=gN.prototype;Oi.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Oi.add=function(e){this._add.push(e)};Oi.rem=function(e){this._rem.push(e)};Oi.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,i=e.length,r=t.length,o=Array(i-r),a={};let s,l,u;for(s=0;s<r;++s)a[n(t[s])]=1;for(s=0,l=0;s<i;++s)a[n(u=e[s])]?a[n(u)]=0:o[l++]=u;return this._rem=[],this._add=o};Oi.distinct=function(e){const t=this.values(),n={};let i=t.length,r=0,o;for(;--i>=0;)o=e(t[i])+"",et(n,o)||(n[o]=1,++r);return r};Oi.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=$W(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Oi.argmin=function(e){return this.extent(e)[0]||{}};Oi.argmax=function(e){return this.extent(e)[1]||{}};Oi.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Oi.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Oi.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=eN(this.values(),e),this._get=e),this._q};Oi.q1=function(e){return this.quartile(e)[0]};Oi.q2=function(e){return this.quartile(e)[1]};Oi.q3=function(e){return this.quartile(e)[2]};Oi.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=rq(this.values(),1e3,.05,e),this._get=e),this._ci};Oi.ci0=function(e){return this.ci(e)[0]};Oi.ci1=function(e){return this.ci(e)[1]};function cc(e){ne.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}cc.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Sv},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};be(cc,ne,{transform(e,t){const n=this,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.modified();return n.stamp=i.stamp,n.value&&(r||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=r?n.init(e):Object.create(null),t.visit(t.SOURCE,o=>n.add(o))):(n.value=n.value||n.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),i.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&i.clean(!0).runAfter(()=>this.clean()),n.changes(i)},cross(){const e=this,t=e.value,n=e._dnames,i=n.map(()=>({})),r=n.length;function o(s){let l,u,c,d;for(l in s)for(c=s[l].tuple,u=0;u<r;++u)i[u][d=c[n[u]]]=d}o(e._prev),o(t);function a(s,l,u){const c=n[u],d=i[u++];for(const h in d){const m=s?s+"|"+h:h;l[c]=d[h],u<r?a(m,l,u):t[m]||e.cell(m,l)}}a("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],i={};function r(w){const S=$e(Xi(w)),k=S.length;let R=0,M;for(;R<k;++R)i[M=S[R]]||(i[M]=1,t.push(M))}this._dims=$e(e.groupby),this._dnames=this._dims.map(w=>{const S=In(w);return r(w),n.push(S),S}),this.cellkey=e.key?e.key:oA(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const o=e.fields||[null],a=e.ops||["count"],s=e.aggregate_params||[null],l=e.as||[],u=o.length,c={};let d,h,m,g,y,x,b;for(u!==a.length&&le("Unmatched number of fields and aggregate ops."),b=0;b<u;++b){if(d=o[b],h=a[b],m=s[b]||null,d==null&&h!=="count"&&le("Null aggregate field specified."),y=In(d),x=mq(h,y,l[b]),n.push(x),h==="count"){this._counts.push(x);continue}g=c[y],g||(r(d),g=c[y]=[],g.field=d,this._measures.push(g)),h!=="count"&&(this._countOnly=!1),g.push(gq(h,m,x))}return this._measures=this._measures.map(w=>vq(w,w.field)),Object.create(null)},cellkey:oA(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const i=this._measures,r=i.length;n.agg=Array(r);for(let o=0;o<r;++o)n.agg[o]=new i[o](n)}return n.store&&(n.data=new gN),n},newtuple(e,t){const n=this._dnames,i=this._dims,r=i.length,o={};for(let a=0;a<r;++a)o[n[a]]=i[a](e);return t?XG(t.tuple,o):Vt(o)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const i=n.agg;for(let r=0,o=i.length;r<o;++r)i[r].add(i[r].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const i=n.agg;for(let r=0,o=i.length;r<o;++r)i[r].rem(i[r].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let i=0,r=n.length;i<r;++i)t[n[i]]=e.num;if(!this._countOnly){const i=e.agg;for(let r=0,o=i.length;r<o;++r)i[r].set(t)}return t},changes(e){const t=this._adds,n=this._mods,i=this._prev,r=this._drop,o=e.add,a=e.rem,s=e.mod;let l,u,c,d;if(i)for(u in i)l=i[u],(!r||l.num)&&a.push(l.tuple);for(c=0,d=this._alen;c<d;++c)o.push(this.celltuple(t[c])),t[c]=null;for(c=0,d=this._mlen;c<d;++c)l=n[c],(l.num===0&&r?a:s).push(this.celltuple(l)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const sme=1e-14;function yN(e){ne.call(this,null,e)}yN.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};be(yN,ne,{transform(e,t){const n=e.interval!==!1,i=this._bins(e),r=i.start,o=i.step,a=e.as||["bin0","bin1"],s=a[0],l=a[1];let u;return e.modified()?(t=t.reflow(!0),u=t.SOURCE):u=t.modified(Xi(e.field))?t.ADD_MOD:t.ADD,t.visit(u,n?c=>{const d=i(c);c[s]=d,c[l]=d==null?null:r+o*(1+(d-r)/o)}:c=>c[s]=i(c)),t.modifies(n?a:s)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=iq(e),i=n.step;let r=n.start,o=r+Math.ceil((n.stop-r)/i)*i,a,s;(a=e.anchor)!=null&&(s=a-(r+i*Math.floor((a-r)/i)),r+=s,o+=s);const l=function(u){let c=Vi(t(u));return c==null?null:c<r?-1/0:c>o?1/0:(c=Math.max(r,Math.min(c,o-i)),r+i*Math.floor(sme+(c-r)/i))};return l.start=r,l.stop=n.stop,l.step=i,this.value=to(l,Xi(t),e.name||"bin_"+In(t))}});function xq(e,t,n){const i=e;let r=t||[],o=n||[],a={},s=0;return{add:l=>o.push(l),remove:l=>a[i(l)]=++s,size:()=>r.length,data:(l,u)=>(s&&(r=r.filter(c=>!a[i(c)]),a={},s=0),u&&l&&r.sort(l),o.length&&(r=l?zW(l,r,o.sort(l)):r.concat(o),o=[]),r)}}function vN(e){ne.call(this,[],e)}vN.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};be(vN,ne,{transform(e,t){const n=t.fork(t.ALL),i=xq(Je,this.value,n.materialize(n.ADD).add),r=e.sort,o=t.changed()||r&&(e.modified("sort")||t.modified(r.fields));return n.visit(n.REM,i.remove),this.modified(o),this.value=n.source=i.data(Dd(r),o),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function _q(e){ln.call(this,null,lme,e)}be(_q,ln);function lme(e){return this.value&&!e.modified()?this.value:PP(e.fields,e.orders)}function xN(e){ne.call(this,null,e)}xN.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function ume(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}be(xN,ne,{transform(e,t){const n=d=>h=>{for(var m=ume(s(h),e.case,o)||[],g,y=0,x=m.length;y<x;++y)a.test(g=m[y])||d(g)},i=this._parameterCheck(e,t),r=this._counts,o=this._match,a=this._stop,s=e.field,l=e.as||["text","count"],u=n(d=>r[d]=1+(r[d]||0)),c=n(d=>r[d]-=1);return i?t.visit(t.SOURCE,u):(t.visit(t.ADD,u),t.visit(t.REM,c)),this._finish(t,l)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,i=this._tuples||(this._tuples={}),r=t[0],o=t[1],a=e.fork(e.NO_SOURCE|e.NO_FIELDS);let s,l,u;for(s in n)l=i[s],u=n[s]||0,!l&&u?(i[s]=l=Vt({}),l[r]=s,l[o]=u,a.add.push(l)):u===0?(l&&a.rem.push(l),n[s]=null,i[s]=null):l[o]!==u&&(l[o]=u,a.mod.push(l));return a.modifies(t)}});function _N(e){ne.call(this,null,e)}_N.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};be(_N,ne,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.as||["a","b"],r=i[0],o=i[1],a=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let s=this.value;return a?(s&&(n.rem=s),s=t.materialize(t.SOURCE).source,n.add=this.value=cme(s,r,o,e.filter||Ko)):n.mod=s,n.source=this.value,n.modifies(i)}});function cme(e,t,n,i){for(var r=[],o={},a=e.length,s=0,l,u;s<a;++s)for(o[t]=u=e[s],l=0;l<a;++l)o[n]=e[l],i(o)&&(r.push(Vt(o)),o={},o[t]=u);return r}const l4={kde:rN,mixture:lq,normal:iN,lognormal:sq,uniform:uq},fme="distributions",u4="function",dme="field";function bq(e,t){const n=e[u4];et(l4,n)||le("Unknown distribution function: "+n);const i=l4[n]();for(const r in e)r===dme?i.data((e.from||t()).map(e[r])):r===fme?i[r](e[r].map(o=>bq(o,t))):typeof i[r]===u4&&i[r](e[r]);return i}function bN(e){ne.call(this,null,e)}const wq=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],hme={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:wq},{name:"weights",type:"number",array:!0}]};bN.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:wq.concat(hme)},{name:"as",type:"string",array:!0,default:["value","density"]}]};be(bN,ne,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=bq(e.distribution,pme(t)),r=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200;let a=e.method||"pdf";a!=="pdf"&&a!=="cdf"&&le("Invalid density method: "+a),!e.extent&&!i.data&&le("Missing density extent parameter."),a=i[a];const s=e.as||["value","density"],l=e.extent||Rs(i.data()),u=Q2(a,l,r,o).map(c=>{const d={};return d[s[0]]=c[0],d[s[1]]=c[1],Vt(d)});this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function pme(e){return()=>e.materialize(e.SOURCE).source}function Sq(e,t){return e?e.map((n,i)=>t[i]||In(n)):null}function wN(e,t,n){const i=[],r=d=>d(l);let o,a,s,l,u,c;if(t==null)i.push(e.map(n));else for(o={},a=0,s=e.length;a<s;++a)l=e[a],u=t.map(r),c=o[u],c||(o[u]=c=[],c.dims=u,i.push(c)),c.push(n(l));return i}const Cq="bin";function SN(e){ne.call(this,null,e)}SN.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:Cq}]};const mme=(e,t)=>_v(Rs(e,t))/30;be(SN,ne,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,i=wN(t.source,e.groupby,tr),r=e.smooth||!1,o=e.field,a=e.step||mme(n,o),s=Dd((g,y)=>o(g)-o(y)),l=e.as||Cq,u=i.length;let c=1/0,d=-1/0,h=0,m;for(;h<u;++h){const g=i[h].sort(s);m=-1;for(const y of oq(g,a,r,o))y<c&&(c=y),y>d&&(d=y),g[++m][l]=y}return this.value={start:c,stop:d,step:a},t.reflow(!0).modifies(l)}});function Eq(e){ln.call(this,null,gme,e),this.modified(!0)}be(Eq,ln);function gme(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:to(n=>t(n,e),Xi(t),In(t))}function CN(e){ne.call(this,[void 0,void 0],e)}CN.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};be(CN,ne,{transform(e,t){const n=this.value,i=e.field,r=t.changed()||t.modified(i.fields)||e.modified("field");let o=n[0],a=n[1];if((r||o==null)&&(o=1/0,a=-1/0),t.visit(r?t.SOURCE:t.ADD,s=>{const l=Vi(i(s));l!=null&&(l<o&&(o=l),l>a&&(a=l))}),!Number.isFinite(o)||!Number.isFinite(a)){let s=In(i);s&&(s=` for field "${s}"`),t.dataflow.warn(`Infinite extent${s}: [${o}, ${a}]`),o=a=void 0}this.value=[o,a]}});function EN(e,t){ln.call(this,e),this.parent=t,this.count=0}be(EN,ln,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function eS(e){ne.call(this,{},e),this._keys=Em();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let i=0,r=t.active;i<r;++i)n(t[i],i,t)}}be(eS,ne,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,i){const r=this.value;let o=et(r,e)&&r[e],a,s;return o?o.value.stamp<n.stamp&&(o.init(n),this.activate(o)):(s=i||(s=this._group[e])&&s.tuple,a=n.dataflow,o=new EN(n.fork(n.NO_SOURCE),this),a.add(o).connect(t(a,e,s)),r[e]=o,this.activate(o)),o},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const i=e[n].detachSubflow;i&&i(),delete e[n],++t}if(t){const n=this._targets.filter(i=>i&&i.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,i=e?e.length:0;let r=0;for(;r<i;++r)t[r]=e[r];for(;r<n&&t[r]!=null;++r)t[r]=null;t.active=i},transform(e,t){const n=t.dataflow,i=e.key,r=e.subflow,o=this._keys,a=e.modified("key"),s=l=>this.subflow(l,r,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,l=>{const u=Je(l),c=o.get(u);c!==void 0&&(o.delete(u),s(c).rem(l))}),t.visit(t.ADD,l=>{const u=i(l);o.set(Je(l),u),s(u).add(l)}),a||t.modified(i.fields)?t.visit(t.MOD,l=>{const u=Je(l),c=o.get(u),d=i(l);c===d?s(d).mod(l):(o.set(u,d),s(c).rem(l),s(d).add(l))}):t.changed(t.MOD)&&t.visit(t.MOD,l=>{s(o.get(Je(l))).mod(l)}),a&&t.visit(t.REFLOW,l=>{const u=Je(l),c=o.get(u),d=i(l);c!==d&&(o.set(u,d),s(c).rem(l),s(d).add(l))}),t.clean()?n.runAfter(()=>{this.clean(),o.clean()}):o.empty>n.cleanThreshold&&n.runAfter(o.clean),t}});function kq(e){ln.call(this,null,yme,e)}be(kq,ln);function yme(e){return this.value&&!e.modified()?this.value:fe(e.name)?$e(e.name).map(t=>Xo(t)):Xo(e.name,e.as)}function kN(e){ne.call(this,Em(),e)}kN.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};be(kN,ne,{transform(e,t){const n=t.dataflow,i=this.value,r=t.fork(),o=r.add,a=r.rem,s=r.mod,l=e.expr;let u=!0;t.visit(t.REM,d=>{const h=Je(d);i.has(h)?i.delete(h):a.push(d)}),t.visit(t.ADD,d=>{l(d,e)?o.push(d):i.set(Je(d),1)});function c(d){const h=Je(d),m=l(d,e),g=i.get(h);m&&g?(i.delete(h),o.push(d)):!m&&!g?(i.set(h,1),a.push(d)):u&&m&&!g&&s.push(d)}return t.visit(t.MOD,c),e.modified()&&(u=!1,t.visit(t.REFLOW,c)),i.empty>n.cleanThreshold&&n.runAfter(i.clean),r}});function RN(e){ne.call(this,[],e)}RN.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};be(RN,ne,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=Sq(i,e.as||[]),o=e.index||null,a=r.length;return n.rem=this.value,t.visit(t.SOURCE,s=>{const l=i.map(g=>g(s)),u=l.reduce((g,y)=>Math.max(g,y.length),0);let c=0,d,h,m;for(;c<u;++c){for(h=XP(s),d=0;d<a;++d)h[r[d]]=(m=l[d][c])==null?null:m;o&&(h[o]=c),n.add.push(h)}}),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(r)}});function TN(e){ne.call(this,[],e)}TN.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};be(TN,ne,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=i.map(In),o=e.as||["key","value"],a=o[0],s=o[1],l=i.length;return n.rem=this.value,t.visit(t.SOURCE,u=>{for(let c=0,d;c<l;++c)d=XP(u),d[a]=r[c],d[s]=i[c](u),n.add.push(d)}),this.value=n.source=n.add,n.modifies(o)}});function AN(e){ne.call(this,null,e)}AN.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};be(AN,ne,{transform(e,t){const n=e.expr,i=e.as,r=e.modified(),o=e.initonly?t.ADD:r?t.SOURCE:t.modified(n.fields)||t.modified(i)?t.ADD_MOD:t.ADD;return r&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(i),t.visit(o,a=>a[i]=n(a,e))}});function Rq(e){ne.call(this,[],e)}be(Rq,ne,{transform(e,t){const n=t.fork(t.ALL),i=e.generator;let r=this.value,o=e.size-r.length,a,s,l;if(o>0){for(a=[];--o>=0;)a.push(l=Vt(i(e))),r.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(a):a}else s=r.slice(0,-o),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(s):s,r=r.slice(-o);return n.source=this.value=r,n}});const mx={value:"value",median:QW,mean:Qfe,min:YT,max:Wf},vme=[];function MN(e){ne.call(this,[],e)}MN.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function xme(e){var t=e.method||mx.value,n;if(mx[t]==null)le("Unrecognized imputation method: "+t);else return t===mx.value?(n=e.value!==void 0?e.value:0,()=>n):mx[t]}function _me(e){const t=e.field;return n=>n?t(n):NaN}be(MN,ne,{transform(e,t){var n=t.fork(t.ALL),i=xme(e),r=_me(e),o=In(e.field),a=In(e.key),s=(e.groupby||[]).map(In),l=bme(t.source,e.groupby,e.key,e.keyvals),u=[],c=this.value,d=l.domain.length,h,m,g,y,x,b,w,S,k,R;for(x=0,S=l.length;x<S;++x)for(h=l[x],g=h.values,m=NaN,w=0;w<d;++w)if(h[w]==null){for(y=l.domain[w],R={_impute:!0},b=0,k=g.length;b<k;++b)R[s[b]]=g[b];R[a]=y,R[o]=Number.isNaN(m)?m=i(h,r):m,u.push(Vt(R))}return u.length&&(n.add=n.materialize(n.ADD).add.concat(u)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=u,n}});function bme(e,t,n,i){var r=b=>b(x),o=[],a=i?i.slice():[],s={},l={},u,c,d,h,m,g,y,x;for(a.forEach((b,w)=>s[b]=w+1),h=0,y=e.length;h<y;++h)x=e[h],g=n(x),m=s[g]||(s[g]=a.push(g)),c=(u=t?t.map(r):vme)+"",(d=l[c])||(d=l[c]=[],o.push(d),d.values=u),d[m-1]=x;return o.domain=a,o}function FN(e){cc.call(this,e)}FN.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Sv},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};be(FN,cc,{transform(e,t){const n=this,i=e.modified();let r;return n.value&&(i||t.modified(n._inputs,!0))?(r=n.value=i?n.init(e):{},t.visit(t.SOURCE,o=>n.add(o))):(r=n.value=n.value||this.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),n.changes(),t.visit(t.SOURCE,o=>{xt(o,r[n.cellkey(o)].tuple)}),t.reflow(i).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,i;for(n=0,i=this._alen;n<i;++n)this.celltuple(e[n]),e[n]=null;for(n=0,i=this._mlen;n<i;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function PN(e){ne.call(this,null,e)}PN.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};be(PN,ne,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=wN(i,e.groupby,e.field),o=(e.groupby||[]).map(In),a=e.bandwidth,s=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],u=[];let c=e.extent,d=e.steps||e.minsteps||25,h=e.steps||e.maxsteps||200;s!=="pdf"&&s!=="cdf"&&le("Invalid density method: "+s),e.resolve==="shared"&&(c||(c=Rs(i,e.field)),d=h=e.steps||h),r.forEach(m=>{const g=rN(m,a)[s],y=e.counts?m.length:1,x=c||Rs(m);Q2(g,x,d,h).forEach(b=>{const w={};for(let S=0;S<o.length;++S)w[o[S]]=m.dims[S];w[l[0]]=b[0],w[l[1]]=b[1]*y,u.push(Vt(w))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function Tq(e){ln.call(this,null,wme,e)}be(Tq,ln);function wme(e){return this.value&&!e.modified()?this.value:$P(e.fields,e.flat)}function Aq(e){ne.call(this,[],e),this._pending=null}be(Aq,ne,{transform(e,t){const n=t.dataflow;return this._pending?sk(this,t,this._pending):Sme(e)?t.StopPropagation:e.values?sk(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(r=>(this._pending=$e(r.data),o=>o.touch(this)))}:n.request(e.url,e.format).then(i=>sk(this,t,$e(i.data)))}});function Sme(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function sk(e,t,n){n.forEach(Vt);const i=t.fork(t.NO_FIELDS&t.NO_SOURCE);return i.rem=e.value,e.value=i.source=i.add=n,e._pending=null,i.rem.length&&i.clean(!0),i}function NN(e){ne.call(this,{},e)}NN.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};be(NN,ne,{transform(e,t){const n=e.fields,i=e.index,r=e.values,o=e.default==null?null:e.default,a=e.modified(),s=n.length;let l=a?t.SOURCE:t.ADD,u=t,c=e.as,d,h,m;return r?(h=r.length,s>1&&!c&&le('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==s*h&&le('The "as" parameter has too few output field names.'),c=c||r.map(In),d=function(g){for(var y=0,x=0,b,w;y<s;++y)if(w=i.get(n[y](g)),w==null)for(b=0;b<h;++b,++x)g[c[x]]=o;else for(b=0;b<h;++b,++x)g[c[x]]=r[b](w)}):(c||le("Missing output field names."),d=function(g){for(var y=0,x;y<s;++y)x=i.get(n[y](g)),g[c[y]]=x??o}),a?u=t.reflow(!0):(m=n.some(g=>t.modified(g.fields)),l|=m?t.MOD:0),t.visit(l,d),u.modifies(c)}});function Mq(e){ln.call(this,null,Cme,e)}be(Mq,ln);function Cme(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let i=1/0,r=-1/0,o,a;for(o=0;o<n;++o)a=t[o],a[0]<i&&(i=a[0]),a[1]>r&&(r=a[1]);return[i,r]}function Fq(e){ln.call(this,null,Eme,e)}be(Fq,ln);function Eme(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function Pq(e){ne.call(this,null,e)}be(Pq,ne,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function $N(e){cc.call(this,e)}$N.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Sv,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};be($N,cc,{_transform:cc.prototype.transform,transform(e,t){return this._transform(kme(e,t),t)}});function kme(e,t){const n=e.field,i=e.value,r=(e.op==="count"?"__count__":e.op)||"sum",o=Xi(n).concat(Xi(i)),a=Tme(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:a.map(()=>r),fields:a.map(s=>Rme(s,n,i,o)),as:a.map(s=>s+""),modified:e.modified.bind(e)}}function Rme(e,t,n,i){return to(r=>t(r)===e?n(r):NaN,i,e+"")}function Tme(e,t,n){const i={},r=[];return n.visit(n.SOURCE,o=>{const a=e(o);i[a]||(i[a]=1,r.push(a))}),r.sort(I2),t?r.slice(0,t):r}function Nq(e){eS.call(this,e)}be(Nq,eS,{transform(e,t){const n=e.subflow,i=e.field,r=o=>this.subflow(Je(o),n,t,o);return(e.modified("field")||i&&t.modified(Xi(i)))&&le("PreFacet does not support field modification."),this.initTargets(),i?(t.visit(t.MOD,o=>{const a=r(o);i(o).forEach(s=>a.mod(s))}),t.visit(t.ADD,o=>{const a=r(o);i(o).forEach(s=>a.add(Vt(s)))}),t.visit(t.REM,o=>{const a=r(o);i(o).forEach(s=>a.rem(s))})):(t.visit(t.MOD,o=>r(o).mod(o)),t.visit(t.ADD,o=>r(o).add(o)),t.visit(t.REM,o=>r(o).rem(o))),t.clean()&&t.runAfter(()=>this.clean()),t}});function ON(e){ne.call(this,null,e)}ON.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};be(ON,ne,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=Sq(e.fields,e.as||[]),o=i?(s,l)=>Ame(s,l,i,r):q2;let a;return this.value?a=this.value:(t=t.addAll(),a=this.value={}),t.visit(t.REM,s=>{const l=Je(s);n.rem.push(a[l]),a[l]=null}),t.visit(t.ADD,s=>{const l=o(s,Vt({}));a[Je(s)]=l,n.add.push(l)}),t.visit(t.MOD,s=>{n.mod.push(o(s,a[Je(s)]))}),n}});function Ame(e,t,n,i){for(let r=0,o=n.length;r<o;++r)t[i[r]]=n[r](e);return t}function $q(e){ne.call(this,null,e)}be($q,ne,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function IN(e){ne.call(this,null,e)}IN.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const Mme=1e-14;be(IN,ne,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const r=t.materialize(t.SOURCE).source,o=wN(r,e.groupby,e.field),a=(e.groupby||[]).map(In),s=[],l=e.step||.01,u=e.probs||ho(l/2,1-Mme,l),c=u.length;return o.forEach(d=>{const h=QP(d,u);for(let m=0;m<c;++m){const g={};for(let y=0;y<a.length;++y)g[a[y]]=d.dims[y];g[i[0]]=u[m],g[i[1]]=h[m],s.push(Vt(g))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=s,n}});function Oq(e){ne.call(this,null,e)}be(Oq,ne,{transform(e,t){let n,i;return this.value?i=this.value:(n=t=t.addAll(),i=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,r=>{const o=Je(r);n.rem.push(i[o]),i[o]=null}),t.visit(t.ADD,r=>{const o=XP(r);i[Je(r)]=o,n.add.push(o)}),t.visit(t.MOD,r=>{const o=i[Je(r)];for(const a in r)o[a]=r[a],n.modifies(a);n.mod.push(o)})),n}});function DN(e){ne.call(this,[],e),this.count=0}DN.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};be(DN,ne,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.modified("size"),r=e.size,o=this.value.reduce((c,d)=>(c[Je(d)]=1,c),{});let a=this.value,s=this.count,l=0;function u(c){let d,h;a.length<r?a.push(c):(h=~~((s+1)*Qo()),h<a.length&&h>=l&&(d=a[h],o[Je(d)]&&n.rem.push(d),a[h]=c)),++s}if(t.rem.length&&(t.visit(t.REM,c=>{const d=Je(c);o[d]&&(o[d]=-1,n.rem.push(c)),--s}),a=a.filter(c=>o[Je(c)]!==-1)),(t.rem.length||i)&&a.length<r&&t.source&&(l=s=a.length,t.visit(t.SOURCE,c=>{o[Je(c)]||u(c)}),l=-1),i&&a.length>r){const c=a.length-r;for(let d=0;d<c;++d)o[Je(a[d])]=-1,n.rem.push(a[d]);a=a.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{o[Je(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,u),(t.add.length||l<0)&&(n.add=a.filter(c=>!o[Je(c)])),this.count=s,this.value=n.source=a,n}});function LN(e){ne.call(this,null,e)}LN.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};be(LN,ne,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),i=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=ho(e.start,e.stop,e.step||1).map(r=>{const o={};return o[i]=r,Vt(o)}),n.add=t.add.concat(this.value),n}});function Iq(e){ne.call(this,null,e),this.modified(!0)}be(Iq,ne,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function jN(e){ne.call(this,null,e)}const Dq=["unit0","unit1"];jN.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:BP,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:Dq}]};be(jN,ne,{transform(e,t){const n=e.field,i=e.interval!==!1,r=e.timezone==="utc",o=this._floor(e,t),a=(r?Mm:Am)(o.unit).offset,s=e.as||Dq,l=s[0],u=s[1],c=o.step;let d=o.start||1/0,h=o.stop||-1/0,m=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(Xi(n)))&&(t=t.reflow(!0),m=t.SOURCE,d=1/0,h=-1/0),t.visit(m,g=>{const y=n(g);let x,b;y==null?(g[l]=null,i&&(g[u]=null)):(g[l]=x=b=o(y),i&&(g[u]=b=a(x,c)),x<d&&(d=x),b>h&&(h=b))}),o.start=d,o.stop=h,t.modifies(i?s:l)},_floor(e,t){const n=e.timezone==="utc",{units:i,step:r}=e.units?{units:e.units,step:e.step||1}:RG({extent:e.extent||Rs(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),o=HP(i),a=this.value||{},s=(n?vG:yG)(o,r);return s.unit=Ot(o),s.units=o,s.step=r,s.start=a.start,s.stop=a.stop,this.value=s}});function Lq(e){ne.call(this,Em(),e)}be(Lq,ne,{transform(e,t){const n=t.dataflow,i=e.field,r=this.value,o=s=>r.set(i(s),s);let a=!0;return e.modified("field")||t.modified(i.fields)?(r.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,s=>r.delete(i(s))),t.visit(t.ADD,o)):a=!1,this.modified(a),r.empty>n.cleanThreshold&&n.runAfter(r.clean),t.fork()}});function jq(e){ne.call(this,null,e)}be(jq,ne,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Dd(e.sort)):t.source).map(e.field))}});function Fme(e,t,n,i){const r=Oy[e](t,n);return{init:r.init||Au,update:function(o,a){a[i]=r.next(o)}}}const Oy={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?++e:e}}},percent_rank:function(){const e=Oy.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,i=t.compare;let r=t.index;if(e<r){for(;r+1<n.length&&!i(n[r],n[r+1]);)++r;e=r}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||le("ntile num must be greater than zero.");const n=Oy.cume_dist(),i=n.next;return{init:n.init,next:r=>Math.ceil(t*i(r))}},lag:function(e,t){return t=+t||1,{next:n=>{const i=n.index-t;return i>=0?e(n.data[i]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const i=n.index+t,r=n.data;return i<r.length?e(r[i]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||le("nth_value nth must be greater than zero."),{next:n=>{const i=n.i0+(t-1);return i<n.i1?e(n.data[i]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const i=e(n.data[n.index]);return i!=null?t=i:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:i=>{const r=i.data;return i.index<=n?t:(n=Pme(e,r,i.index))<0?(n=r.length,t=null):t=e(r[n])}}}};function Pme(e,t,n){for(let i=t.length;n<i;++n)if(e(t[n])!=null)return n;return-1}const Nme=Object.keys(Oy);function zq(e){const t=$e(e.ops),n=$e(e.fields),i=$e(e.params),r=$e(e.aggregate_params),o=$e(e.as),a=this.outputs=[],s=this.windows=[],l={},u={},c=[],d=[];let h=!0;function m(g){$e(Xi(g)).forEach(y=>l[y]=1)}m(e.sort),t.forEach((g,y)=>{const x=n[y],b=i[y],w=r[y]||null,S=In(x),k=mq(g,S,o[y]);if(m(x),a.push(k),et(Oy,g))s.push(Fme(g,x,b,k));else{if(x==null&&g!=="count"&&le("Null aggregate field specified."),g==="count"){c.push(k);return}h=!1;let R=u[S];R||(R=u[S]=[],R.field=x,d.push(R)),R.push(gq(g,w,k))}}),(c.length||d.length)&&(this.cell=$me(d,c,h)),this.inputs=Object.keys(l)}const Bq=zq.prototype;Bq.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};Bq.update=function(e,t){const n=this.cell,i=this.windows,r=e.data,o=i&&i.length;let a;if(n){for(a=e.p0;a<e.i0;++a)n.rem(r[a]);for(a=e.p1;a<e.i1;++a)n.add(r[a]);n.set(t)}for(a=0;a<o;++a)i[a].update(e,t)};function $me(e,t,n){e=e.map(l=>vq(l,l.field));const i={num:0,agg:null,store:!1,count:t};if(!n)for(var r=e.length,o=i.agg=Array(r),a=0;a<r;++a)o[a]=new e[a](i);if(i.store)var s=i.data=new gN;return i.add=function(l){if(i.num+=1,!n){s&&s.add(l);for(let u=0;u<r;++u)o[u].add(o[u].get(l),l)}},i.rem=function(l){if(i.num-=1,!n){s&&s.rem(l);for(let u=0;u<r;++u)o[u].rem(o[u].get(l),l)}},i.set=function(l){let u,c;for(s&&s.values(),u=0,c=t.length;u<c;++u)l[t[u]]=i.num;if(!n)for(u=0,c=o.length;u<c;++u)o[u].set(l)},i.init=function(){i.num=0,s&&s.reset();for(let l=0;l<r;++l)o[l].init()},i}function zN(e){ne.call(this,{},e),this._mlen=0,this._mods=[]}zN.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Nme.concat(Sv)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};be(zN,ne,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),i=Dd(e.sort),r=oA(e.groupby),o=s=>this.group(r(s));let a=this.state;(!a||n)&&(a=this.state=new zq(e)),n||t.modified(a.inputs)?(this.value={},t.visit(t.SOURCE,s=>o(s).add(s))):(t.visit(t.REM,s=>o(s).remove(s)),t.visit(t.ADD,s=>o(s).add(s)));for(let s=0,l=this._mlen;s<l;++s)Ome(this._mods[s],a,i,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(a.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=xq(Je),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function Ome(e,t,n,i){const r=i.sort,o=r&&!i.ignorePeers,a=i.frame||[null,0],s=e.data(n),l=s.length,u=o?km(r):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:s,compare:r||nr(-1)};t.init();for(let d=0;d<l;++d)Ime(c,a,d,l),o&&Dme(c,u),t.update(c,s[d])}function Ime(e,t,n,i){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?i:Math.min(i,n+Math.abs(t[1])+1),e.index=n}function Dme(e,t){const n=e.i0,i=e.i1-1,r=e.compare,o=e.data,a=o.length-1;n>0&&!r(o[n],o[n-1])&&(e.i0=t.left(o,o[n])),i<a&&!r(o[i],o[i+1])&&(e.i1=t.right(o,o[i]))}const Lme=Object.freeze(Object.defineProperty({__proto__:null,aggregate:cc,bin:yN,collect:vN,compare:_q,countpattern:xN,cross:_N,density:bN,dotbin:SN,expression:Eq,extent:CN,facet:eS,field:kq,filter:kN,flatten:RN,fold:TN,formula:AN,generate:Rq,impute:MN,joinaggregate:FN,kde:PN,key:Tq,load:Aq,lookup:NN,multiextent:Mq,multivalues:Fq,params:Pq,pivot:$N,prefacet:Nq,project:ON,proxy:$q,quantile:IN,relay:Oq,sample:DN,sequence:LN,sieve:Iq,subflow:EN,timeunit:jN,tupleindex:Lq,values:jq,window:zN},Symbol.toStringTag,{value:"Module"}));function Kt(e){return function(){return e}}const c4=Math.abs,zi=Math.atan2,of=Math.cos,jme=Math.max,lk=Math.min,rs=Math.sin,Pf=Math.sqrt,Hi=1e-12,Bp=Math.PI,Rb=Bp/2,Hq=2*Bp;function zme(e){return e>1?0:e<-1?Bp:Math.acos(e)}function f4(e){return e>=1?Rb:e<=-1?-Rb:Math.asin(e)}const aA=Math.PI,sA=2*aA,_f=1e-6,Bme=sA-_f;function Uq(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Hme(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Uq;const n=10**t;return function(i){this._+=i[0];for(let r=1,o=i.length;r<o;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}let BN=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Uq:Hme(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,i,r){this._append`Q${+t},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(t,n,i,r,o,a){this._append`C${+t},${+n},${+i},${+r},${this._x1=+o},${this._y1=+a}`}arcTo(t,n,i,r,o){if(t=+t,n=+n,i=+i,r=+r,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,s=this._y1,l=i-t,u=r-n,c=a-t,d=s-n,h=c*c+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>_f)if(!(Math.abs(d*l-u*c)>_f)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let m=i-a,g=r-s,y=l*l+u*u,x=m*m+g*g,b=Math.sqrt(y),w=Math.sqrt(h),S=o*Math.tan((aA-Math.acos((y+h-x)/(2*b*w)))/2),k=S/w,R=S/b;Math.abs(k-1)>_f&&this._append`L${t+k*c},${n+k*d}`,this._append`A${o},${o},0,0,${+(d*m>c*g)},${this._x1=t+R*l},${this._y1=n+R*u}`}}arc(t,n,i,r,o,a){if(t=+t,n=+n,i=+i,a=!!a,i<0)throw new Error(`negative radius: ${i}`);let s=i*Math.cos(r),l=i*Math.sin(r),u=t+s,c=n+l,d=1^a,h=a?r-o:o-r;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>_f||Math.abs(this._y1-c)>_f)&&this._append`L${u},${c}`,i&&(h<0&&(h=h%sA+sA),h>Bme?this._append`A${i},${i},0,1,${d},${t-s},${n-l}A${i},${i},0,1,${d},${this._x1=u},${this._y1=c}`:h>_f&&this._append`A${i},${i},0,${+(h>=aA)},${d},${this._x1=t+i*Math.cos(o)},${this._y1=n+i*Math.sin(o)}`)}rect(t,n,i,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}};function tS(){return new BN}tS.prototype=BN.prototype;function nS(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);t=i}return e},()=>new BN(t)}function Ume(e){return e.innerRadius}function Wme(e){return e.outerRadius}function Gme(e){return e.startAngle}function qme(e){return e.endAngle}function Vme(e){return e&&e.padAngle}function Yme(e,t,n,i,r,o,a,s){var l=n-e,u=i-t,c=a-r,d=s-o,h=d*l-c*u;if(!(h*h<Hi))return h=(c*(t-o)-d*(e-r))/h,[e+h*l,t+h*u]}function gx(e,t,n,i,r,o,a){var s=e-n,l=t-i,u=(a?o:-o)/Pf(s*s+l*l),c=u*l,d=-u*s,h=e+c,m=t+d,g=n+c,y=i+d,x=(h+g)/2,b=(m+y)/2,w=g-h,S=y-m,k=w*w+S*S,R=r-o,M=h*y-g*m,T=(S<0?-1:1)*Pf(jme(0,R*R*k-M*M)),N=(M*S-w*T)/k,D=(-M*w-S*T)/k,I=(M*S+w*T)/k,z=(-M*w+S*T)/k,X=N-x,W=D-b,U=I-x,B=z-b;return X*X+W*W>U*U+B*B&&(N=I,D=z),{cx:N,cy:D,x01:-c,y01:-d,x11:N*(r/R-1),y11:D*(r/R-1)}}function Zme(){var e=Ume,t=Wme,n=Kt(0),i=null,r=Gme,o=qme,a=Vme,s=null,l=nS(u);function u(){var c,d,h=+e.apply(this,arguments),m=+t.apply(this,arguments),g=r.apply(this,arguments)-Rb,y=o.apply(this,arguments)-Rb,x=c4(y-g),b=y>g;if(s||(s=c=l()),m<h&&(d=m,m=h,h=d),!(m>Hi))s.moveTo(0,0);else if(x>Hq-Hi)s.moveTo(m*of(g),m*rs(g)),s.arc(0,0,m,g,y,!b),h>Hi&&(s.moveTo(h*of(y),h*rs(y)),s.arc(0,0,h,y,g,b));else{var w=g,S=y,k=g,R=y,M=x,T=x,N=a.apply(this,arguments)/2,D=N>Hi&&(i?+i.apply(this,arguments):Pf(h*h+m*m)),I=lk(c4(m-h)/2,+n.apply(this,arguments)),z=I,X=I,W,U;if(D>Hi){var B=f4(D/h*rs(N)),V=f4(D/m*rs(N));(M-=B*2)>Hi?(B*=b?1:-1,k+=B,R-=B):(M=0,k=R=(g+y)/2),(T-=V*2)>Hi?(V*=b?1:-1,w+=V,S-=V):(T=0,w=S=(g+y)/2)}var K=m*of(w),H=m*rs(w),J=h*of(R),Q=h*rs(R);if(I>Hi){var oe=m*of(S),me=m*rs(S),ke=h*of(k),ge=h*rs(k),Se;if(x<Bp)if(Se=Yme(K,H,ke,ge,oe,me,J,Q)){var Me=K-Se[0],It=H-Se[1],Et=oe-Se[0],Re=me-Se[1],Ye=1/rs(zme((Me*Et+It*Re)/(Pf(Me*Me+It*It)*Pf(Et*Et+Re*Re)))/2),Be=Pf(Se[0]*Se[0]+Se[1]*Se[1]);z=lk(I,(h-Be)/(Ye-1)),X=lk(I,(m-Be)/(Ye+1))}else z=X=0}T>Hi?X>Hi?(W=gx(ke,ge,K,H,m,X,b),U=gx(oe,me,J,Q,m,X,b),s.moveTo(W.cx+W.x01,W.cy+W.y01),X<I?s.arc(W.cx,W.cy,X,zi(W.y01,W.x01),zi(U.y01,U.x01),!b):(s.arc(W.cx,W.cy,X,zi(W.y01,W.x01),zi(W.y11,W.x11),!b),s.arc(0,0,m,zi(W.cy+W.y11,W.cx+W.x11),zi(U.cy+U.y11,U.cx+U.x11),!b),s.arc(U.cx,U.cy,X,zi(U.y11,U.x11),zi(U.y01,U.x01),!b))):(s.moveTo(K,H),s.arc(0,0,m,w,S,!b)):s.moveTo(K,H),!(h>Hi)||!(M>Hi)?s.lineTo(J,Q):z>Hi?(W=gx(J,Q,oe,me,h,-z,b),U=gx(K,H,ke,ge,h,-z,b),s.lineTo(W.cx+W.x01,W.cy+W.y01),z<I?s.arc(W.cx,W.cy,z,zi(W.y01,W.x01),zi(U.y01,U.x01),!b):(s.arc(W.cx,W.cy,z,zi(W.y01,W.x01),zi(W.y11,W.x11),!b),s.arc(0,0,h,zi(W.cy+W.y11,W.cx+W.x11),zi(U.cy+U.y11,U.cx+U.x11),b),s.arc(U.cx,U.cy,z,zi(U.y11,U.x11),zi(U.y01,U.x01),!b))):s.arc(0,0,h,R,k,b)}if(s.closePath(),c)return s=null,c+""||null}return u.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,d=(+r.apply(this,arguments)+ +o.apply(this,arguments))/2-Bp/2;return[of(d)*c,rs(d)*c]},u.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:Kt(+c),u):e},u.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:Kt(+c),u):t},u.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:Kt(+c),u):n},u.padRadius=function(c){return arguments.length?(i=c==null?null:typeof c=="function"?c:Kt(+c),u):i},u.startAngle=function(c){return arguments.length?(r=typeof c=="function"?c:Kt(+c),u):r},u.endAngle=function(c){return arguments.length?(o=typeof c=="function"?c:Kt(+c),u):o},u.padAngle=function(c){return arguments.length?(a=typeof c=="function"?c:Kt(+c),u):a},u.context=function(c){return arguments.length?(s=c??null,u):s},u}function Wq(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Gq(e){this._context=e}Gq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function HN(e){return new Gq(e)}function qq(e){return e[0]}function Vq(e){return e[1]}function Yq(e,t){var n=Kt(!0),i=null,r=HN,o=null,a=nS(s);e=typeof e=="function"?e:e===void 0?qq:Kt(e),t=typeof t=="function"?t:t===void 0?Vq:Kt(t);function s(l){var u,c=(l=Wq(l)).length,d,h=!1,m;for(i==null&&(o=r(m=a())),u=0;u<=c;++u)!(u<c&&n(d=l[u],u,l))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+e(d,u,l),+t(d,u,l));if(m)return o=null,m+""||null}return s.x=function(l){return arguments.length?(e=typeof l=="function"?l:Kt(+l),s):e},s.y=function(l){return arguments.length?(t=typeof l=="function"?l:Kt(+l),s):t},s.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Kt(!!l),s):n},s.curve=function(l){return arguments.length?(r=l,i!=null&&(o=r(i)),s):r},s.context=function(l){return arguments.length?(l==null?i=o=null:o=r(i=l),s):i},s}function Zq(e,t,n){var i=null,r=Kt(!0),o=null,a=HN,s=null,l=nS(u);e=typeof e=="function"?e:e===void 0?qq:Kt(+e),t=typeof t=="function"?t:Kt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?Vq:Kt(+n);function u(d){var h,m,g,y=(d=Wq(d)).length,x,b=!1,w,S=new Array(y),k=new Array(y);for(o==null&&(s=a(w=l())),h=0;h<=y;++h){if(!(h<y&&r(x=d[h],h,d))===b)if(b=!b)m=h,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),g=h-1;g>=m;--g)s.point(S[g],k[g]);s.lineEnd(),s.areaEnd()}b&&(S[h]=+e(x,h,d),k[h]=+t(x,h,d),s.point(i?+i(x,h,d):S[h],n?+n(x,h,d):k[h]))}if(w)return s=null,w+""||null}function c(){return Yq().defined(r).curve(a).context(o)}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:Kt(+d),i=null,u):e},u.x0=function(d){return arguments.length?(e=typeof d=="function"?d:Kt(+d),u):e},u.x1=function(d){return arguments.length?(i=d==null?null:typeof d=="function"?d:Kt(+d),u):i},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:Kt(+d),n=null,u):t},u.y0=function(d){return arguments.length?(t=typeof d=="function"?d:Kt(+d),u):t},u.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:Kt(+d),u):n},u.lineX0=u.lineY0=function(){return c().x(e).y(t)},u.lineY1=function(){return c().x(e).y(n)},u.lineX1=function(){return c().x(i).y(t)},u.defined=function(d){return arguments.length?(r=typeof d=="function"?d:Kt(!!d),u):r},u.curve=function(d){return arguments.length?(a=d,o!=null&&(s=a(o)),u):a},u.context=function(d){return arguments.length?(d==null?o=s=null:s=a(o=d),u):o},u}const Xme={draw(e,t){const n=Pf(t/Bp);e.moveTo(n,0),e.arc(0,0,n,0,Hq)}};function Kme(e,t){let n=null,i=nS(r);e=typeof e=="function"?e:Kt(e||Xme),t=typeof t=="function"?t:Kt(t===void 0?64:+t);function r(){let o;if(n||(n=o=i()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return r.type=function(o){return arguments.length?(e=typeof o=="function"?o:Kt(o),r):e},r.size=function(o){return arguments.length?(t=typeof o=="function"?o:Kt(+o),r):t},r.context=function(o){return arguments.length?(n=o??null,r):n},r}function fc(){}function Tb(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function iS(e){this._context=e}iS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Tb(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Tb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Jme(e){return new iS(e)}function Xq(e){this._context=e}Xq.prototype={areaStart:fc,areaEnd:fc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Tb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Qme(e){return new Xq(e)}function Kq(e){this._context=e}Kq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:Tb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ege(e){return new Kq(e)}function Jq(e,t){this._basis=new iS(e),this._beta=t}Jq.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var i=e[0],r=t[0],o=e[n]-i,a=t[n]-r,s=-1,l;++s<=n;)l=s/n,this._basis.point(this._beta*e[s]+(1-this._beta)*(i+l*o),this._beta*t[s]+(1-this._beta)*(r+l*a));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const tge=function e(t){function n(i){return t===1?new iS(i):new Jq(i,t)}return n.beta=function(i){return e(+i)},n}(.85);function Ab(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function UN(e,t){this._context=e,this._k=(1-t)/6}UN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ab(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Ab(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const nge=function e(t){function n(i){return new UN(i,t)}return n.tension=function(i){return e(+i)},n}(0);function WN(e,t){this._context=e,this._k=(1-t)/6}WN.prototype={areaStart:fc,areaEnd:fc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Ab(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ige=function e(t){function n(i){return new WN(i,t)}return n.tension=function(i){return e(+i)},n}(0);function GN(e,t){this._context=e,this._k=(1-t)/6}GN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ab(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const rge=function e(t){function n(i){return new GN(i,t)}return n.tension=function(i){return e(+i)},n}(0);function qN(e,t,n){var i=e._x1,r=e._y1,o=e._x2,a=e._y2;if(e._l01_a>Hi){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,r=(r*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>Hi){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*u+e._x1*e._l23_2a-t*e._l12_2a)/c,a=(a*u+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(i,r,o,a,e._x2,e._y2)}function Qq(e,t){this._context=e,this._alpha=t}Qq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:qN(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const oge=function e(t){function n(i){return t?new Qq(i,t):new UN(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function eV(e,t){this._context=e,this._alpha=t}eV.prototype={areaStart:fc,areaEnd:fc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:qN(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const age=function e(t){function n(i){return t?new eV(i,t):new WN(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function tV(e,t){this._context=e,this._alpha=t}tV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:qN(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const sge=function e(t){function n(i){return t?new tV(i,t):new GN(i,0)}return n.alpha=function(i){return e(+i)},n}(.5);function nV(e){this._context=e}nV.prototype={areaStart:fc,areaEnd:fc,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function lge(e){return new nV(e)}function d4(e){return e<0?-1:1}function h4(e,t,n){var i=e._x1-e._x0,r=t-e._x1,o=(e._y1-e._y0)/(i||r<0&&-0),a=(n-e._y1)/(r||i<0&&-0),s=(o*r+a*i)/(i+r);return(d4(o)+d4(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function p4(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function uk(e,t,n){var i=e._x0,r=e._y0,o=e._x1,a=e._y1,s=(o-i)/3;e._context.bezierCurveTo(i+s,r+s*t,o-s,a-s*n,o,a)}function Mb(e){this._context=e}Mb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:uk(this,this._t0,p4(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,uk(this,p4(this,n=h4(this,e,t)),n);break;default:uk(this,this._t0,n=h4(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function iV(e){this._context=new rV(e)}(iV.prototype=Object.create(Mb.prototype)).point=function(e,t){Mb.prototype.point.call(this,t,e)};function rV(e){this._context=e}rV.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,r,o){this._context.bezierCurveTo(t,e,i,n,o,r)}};function uge(e){return new Mb(e)}function cge(e){return new iV(e)}function oV(e){this._context=e}oV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var i=m4(e),r=m4(t),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(i[0][o],r[0][o],i[1][o],r[1][o],e[a],t[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function m4(e){var t,n=e.length-1,i,r=new Array(n),o=new Array(n),a=new Array(n);for(r[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<n-1;++t)r[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(r[n-1]=2,o[n-1]=7,a[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)i=r[t]/o[t-1],o[t]-=i,a[t]-=i*a[t-1];for(r[n-1]=a[n-1]/o[n-1],t=n-2;t>=0;--t)r[t]=(a[t]-r[t+1])/o[t];for(o[n-1]=(e[n]+r[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-r[t+1];return[r,o]}function fge(e){return new oV(e)}function rS(e,t){this._context=e,this._t=t}rS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function dge(e){return new rS(e,.5)}function hge(e){return new rS(e,0)}function pge(e){return new rS(e,1)}function tc(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const mge=()=>typeof Image<"u"?Image:null;function Ds(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function $c(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const lA=Symbol("implicit");function VN(){var e=new P3,t=[],n=[],i=lA;function r(o){let a=e.get(o);if(a===void 0){if(i!==lA)return i;e.set(o,a=t.push(o)-1)}return n[a%n.length]}return r.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new P3;for(const a of o)e.has(a)||e.set(a,t.push(a)-1);return r},r.range=function(o){return arguments.length?(n=Array.from(o),r):n.slice()},r.unknown=function(o){return arguments.length?(i=o,r):i},r.copy=function(){return VN(t,n).unknown(i)},Ds.apply(r,arguments),r}function Pm(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Cv(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Oc(){}var ld=.7,Hp=1/ld,pp="\\s*([+-]?\\d+)\\s*",Iy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",bs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",gge=/^#([0-9a-f]{3,8})$/,yge=new RegExp(`^rgb\\(${pp},${pp},${pp}\\)$`),vge=new RegExp(`^rgb\\(${bs},${bs},${bs}\\)$`),xge=new RegExp(`^rgba\\(${pp},${pp},${pp},${Iy}\\)$`),_ge=new RegExp(`^rgba\\(${bs},${bs},${bs},${Iy}\\)$`),bge=new RegExp(`^hsl\\(${Iy},${bs},${bs}\\)$`),wge=new RegExp(`^hsla\\(${Iy},${bs},${bs},${Iy}\\)$`),g4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Pm(Oc,Dy,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:y4,formatHex:y4,formatHex8:Sge,formatHsl:Cge,formatRgb:v4,toString:v4});function y4(){return this.rgb().formatHex()}function Sge(){return this.rgb().formatHex8()}function Cge(){return aV(this).formatHsl()}function v4(){return this.rgb().formatRgb()}function Dy(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=gge.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?x4(t):n===3?new hi(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?yx(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?yx(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=yge.exec(e))?new hi(t[1],t[2],t[3],1):(t=vge.exec(e))?new hi(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=xge.exec(e))?yx(t[1],t[2],t[3],t[4]):(t=_ge.exec(e))?yx(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=bge.exec(e))?w4(t[1],t[2]/100,t[3]/100,1):(t=wge.exec(e))?w4(t[1],t[2]/100,t[3]/100,t[4]):g4.hasOwnProperty(e)?x4(g4[e]):e==="transparent"?new hi(NaN,NaN,NaN,0):null}function x4(e){return new hi(e>>16&255,e>>8&255,e&255,1)}function yx(e,t,n,i){return i<=0&&(e=t=n=NaN),new hi(e,t,n,i)}function YN(e){return e instanceof Oc||(e=Dy(e)),e?(e=e.rgb(),new hi(e.r,e.g,e.b,e.opacity)):new hi}function dc(e,t,n,i){return arguments.length===1?YN(e):new hi(e,t,n,i??1)}function hi(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}Pm(hi,dc,Cv(Oc,{brighter(e){return e=e==null?Hp:Math.pow(Hp,e),new hi(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ld:Math.pow(ld,e),new hi(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new hi(Gf(this.r),Gf(this.g),Gf(this.b),Fb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_4,formatHex:_4,formatHex8:Ege,formatRgb:b4,toString:b4}));function _4(){return`#${Nf(this.r)}${Nf(this.g)}${Nf(this.b)}`}function Ege(){return`#${Nf(this.r)}${Nf(this.g)}${Nf(this.b)}${Nf((isNaN(this.opacity)?1:this.opacity)*255)}`}function b4(){const e=Fb(this.opacity);return`${e===1?"rgb(":"rgba("}${Gf(this.r)}, ${Gf(this.g)}, ${Gf(this.b)}${e===1?")":`, ${e})`}`}function Fb(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Gf(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Nf(e){return e=Gf(e),(e<16?"0":"")+e.toString(16)}function w4(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ca(e,t,n,i)}function aV(e){if(e instanceof Ca)return new Ca(e.h,e.s,e.l,e.opacity);if(e instanceof Oc||(e=Dy(e)),!e)return new Ca;if(e instanceof Ca)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),o=Math.max(t,n,i),a=NaN,s=o-r,l=(o+r)/2;return s?(t===o?a=(n-i)/s+(n<i)*6:n===o?a=(i-t)/s+2:a=(t-n)/s+4,s/=l<.5?o+r:2-o-r,a*=60):s=l>0&&l<1?0:a,new Ca(a,s,l,e.opacity)}function Pb(e,t,n,i){return arguments.length===1?aV(e):new Ca(e,t,n,i??1)}function Ca(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Pm(Ca,Pb,Cv(Oc,{brighter(e){return e=e==null?Hp:Math.pow(Hp,e),new Ca(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ld:Math.pow(ld,e),new Ca(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new hi(ck(e>=240?e-240:e+120,r,i),ck(e,r,i),ck(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new Ca(S4(this.h),vx(this.s),vx(this.l),Fb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Fb(this.opacity);return`${e===1?"hsl(":"hsla("}${S4(this.h)}, ${vx(this.s)*100}%, ${vx(this.l)*100}%${e===1?")":`, ${e})`}`}}));function S4(e){return e=(e||0)%360,e<0?e+360:e}function vx(e){return Math.max(0,Math.min(1,e||0))}function ck(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const sV=Math.PI/180,lV=180/Math.PI,Nb=18,uV=.96422,cV=1,fV=.82521,dV=4/29,mp=6/29,hV=3*mp*mp,kge=mp*mp*mp;function pV(e){if(e instanceof ws)return new ws(e.l,e.a,e.b,e.opacity);if(e instanceof bl)return mV(e);e instanceof hi||(e=YN(e));var t=pk(e.r),n=pk(e.g),i=pk(e.b),r=fk((.2225045*t+.7168786*n+.0606169*i)/cV),o,a;return t===n&&n===i?o=a=r:(o=fk((.4360747*t+.3850649*n+.1430804*i)/uV),a=fk((.0139322*t+.0971045*n+.7141733*i)/fV)),new ws(116*r-16,500*(o-r),200*(r-a),e.opacity)}function $b(e,t,n,i){return arguments.length===1?pV(e):new ws(e,t,n,i??1)}function ws(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}Pm(ws,$b,Cv(Oc,{brighter(e){return new ws(this.l+Nb*(e??1),this.a,this.b,this.opacity)},darker(e){return new ws(this.l-Nb*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=uV*dk(t),e=cV*dk(e),n=fV*dk(n),new hi(hk(3.1338561*t-1.6168667*e-.4906146*n),hk(-.9787684*t+1.9161415*e+.033454*n),hk(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function fk(e){return e>kge?Math.pow(e,1/3):e/hV+dV}function dk(e){return e>mp?e*e*e:hV*(e-dV)}function hk(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function pk(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Rge(e){if(e instanceof bl)return new bl(e.h,e.c,e.l,e.opacity);if(e instanceof ws||(e=pV(e)),e.a===0&&e.b===0)return new bl(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*lV;return new bl(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Ob(e,t,n,i){return arguments.length===1?Rge(e):new bl(e,t,n,i??1)}function bl(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function mV(e){if(isNaN(e.h))return new ws(e.l,0,0,e.opacity);var t=e.h*sV;return new ws(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Pm(bl,Ob,Cv(Oc,{brighter(e){return new bl(this.h,this.c,this.l+Nb*(e??1),this.opacity)},darker(e){return new bl(this.h,this.c,this.l-Nb*(e??1),this.opacity)},rgb(){return mV(this).rgb()}}));var gV=-.14861,ZN=1.78277,XN=-.29227,oS=-.90649,Ly=1.97294,C4=Ly*oS,E4=Ly*ZN,k4=ZN*XN-oS*gV;function Tge(e){if(e instanceof qf)return new qf(e.h,e.s,e.l,e.opacity);e instanceof hi||(e=YN(e));var t=e.r/255,n=e.g/255,i=e.b/255,r=(k4*i+C4*t-E4*n)/(k4+C4-E4),o=i-r,a=(Ly*(n-r)-XN*o)/oS,s=Math.sqrt(a*a+o*o)/(Ly*r*(1-r)),l=s?Math.atan2(a,o)*lV-120:NaN;return new qf(l<0?l+360:l,s,r,e.opacity)}function uA(e,t,n,i){return arguments.length===1?Tge(e):new qf(e,t,n,i??1)}function qf(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Pm(qf,uA,Cv(Oc,{brighter(e){return e=e==null?Hp:Math.pow(Hp,e),new qf(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ld:Math.pow(ld,e),new qf(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*sV,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),r=Math.sin(e);return new hi(255*(t+n*(gV*i+ZN*r)),255*(t+n*(XN*i+oS*r)),255*(t+n*(Ly*i)),this.opacity)}}));function yV(e,t,n,i,r){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*i+a*r)/6}function vV(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],o=e[i+1],a=i>0?e[i-1]:2*r-o,s=i<t-1?e[i+2]:2*o-r;return yV((n-i/t)*t,a,r,o,s)}}function xV(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),r=e[(i+t-1)%t],o=e[i%t],a=e[(i+1)%t],s=e[(i+2)%t];return yV((n-i/t)*t,r,o,a,s)}}const aS=e=>()=>e;function _V(e,t){return function(n){return e+n*t}}function Age(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function sS(e,t){var n=t-e;return n?_V(e,n>180||n<-180?n-360*Math.round(n/360):n):aS(isNaN(e)?t:e)}function Mge(e){return(e=+e)==1?pi:function(t,n){return n-t?Age(t,n,e):aS(isNaN(t)?n:t)}}function pi(e,t){var n=t-e;return n?_V(e,n):aS(isNaN(e)?t:e)}const cA=function e(t){var n=Mge(t);function i(r,o){var a=n((r=dc(r)).r,(o=dc(o)).r),s=n(r.g,o.g),l=n(r.b,o.b),u=pi(r.opacity,o.opacity);return function(c){return r.r=a(c),r.g=s(c),r.b=l(c),r.opacity=u(c),r+""}}return i.gamma=e,i}(1);function bV(e){return function(t){var n=t.length,i=new Array(n),r=new Array(n),o=new Array(n),a,s;for(a=0;a<n;++a)s=dc(t[a]),i[a]=s.r||0,r[a]=s.g||0,o[a]=s.b||0;return i=e(i),r=e(r),o=e(o),s.opacity=1,function(l){return s.r=i(l),s.g=r(l),s.b=o(l),s+""}}}var Fge=bV(vV),Pge=bV(xV);function KN(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),r;return function(o){for(r=0;r<n;++r)i[r]=e[r]*(1-o)+t[r]*o;return i}}function wV(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Nge(e,t){return(wV(t)?KN:SV)(e,t)}function SV(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,r=new Array(i),o=new Array(n),a;for(a=0;a<i;++a)r[a]=Ic(e[a],t[a]);for(;a<n;++a)o[a]=t[a];return function(s){for(a=0;a<i;++a)o[a]=r[a](s);return o}}function CV(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function wa(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function EV(e,t){var n={},i={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=Ic(e[r],t[r]):i[r]=t[r];return function(o){for(r in n)i[r]=n[r](o);return i}}var fA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mk=new RegExp(fA.source,"g");function $ge(e){return function(){return e}}function Oge(e){return function(t){return e(t)+""}}function kV(e,t){var n=fA.lastIndex=mk.lastIndex=0,i,r,o,a=-1,s=[],l=[];for(e=e+"",t=t+"";(i=fA.exec(e))&&(r=mk.exec(t));)(o=r.index)>n&&(o=t.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(i=i[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:wa(i,r)})),n=mk.lastIndex;return n<t.length&&(o=t.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?Oge(l[0].x):$ge(t):(t=l.length,function(u){for(var c=0,d;c<t;++c)s[(d=l[c]).i]=d.x(u);return s.join("")})}function Ic(e,t){var n=typeof t,i;return t==null||n==="boolean"?aS(t):(n==="number"?wa:n==="string"?(i=Dy(t))?(t=i,cA):kV:t instanceof Dy?cA:t instanceof Date?CV:wV(t)?KN:Array.isArray(t)?SV:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?EV:wa)(e,t)}function Ige(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Dge(e,t){var n=sS(+e,+t);return function(i){var r=n(i);return r-360*Math.floor(r/360)}}function Ev(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var R4=180/Math.PI,dA={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function RV(e,t,n,i,r,o){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,l/=s),e*i<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:r,translateY:o,rotate:Math.atan2(t,e)*R4,skewX:Math.atan(l)*R4,scaleX:a,scaleY:s}}var xx;function Lge(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?dA:RV(t.a,t.b,t.c,t.d,t.e,t.f)}function jge(e){return e==null||(xx||(xx=document.createElementNS("http://www.w3.org/2000/svg","g")),xx.setAttribute("transform",e),!(e=xx.transform.baseVal.consolidate()))?dA:(e=e.matrix,RV(e.a,e.b,e.c,e.d,e.e,e.f))}function TV(e,t,n,i){function r(u){return u.length?u.pop()+" ":""}function o(u,c,d,h,m,g){if(u!==d||c!==h){var y=m.push("translate(",null,t,null,n);g.push({i:y-4,x:wa(u,d)},{i:y-2,x:wa(c,h)})}else(d||h)&&m.push("translate("+d+t+h+n)}function a(u,c,d,h){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),h.push({i:d.push(r(d)+"rotate(",null,i)-2,x:wa(u,c)})):c&&d.push(r(d)+"rotate("+c+i)}function s(u,c,d,h){u!==c?h.push({i:d.push(r(d)+"skewX(",null,i)-2,x:wa(u,c)}):c&&d.push(r(d)+"skewX("+c+i)}function l(u,c,d,h,m,g){if(u!==d||c!==h){var y=m.push(r(m)+"scale(",null,",",null,")");g.push({i:y-4,x:wa(u,d)},{i:y-2,x:wa(c,h)})}else(d!==1||h!==1)&&m.push(r(m)+"scale("+d+","+h+")")}return function(u,c){var d=[],h=[];return u=e(u),c=e(c),o(u.translateX,u.translateY,c.translateX,c.translateY,d,h),a(u.rotate,c.rotate,d,h),s(u.skewX,c.skewX,d,h),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,h),u=c=null,function(m){for(var g=-1,y=h.length,x;++g<y;)d[(x=h[g]).i]=x.x(m);return d.join("")}}}var zge=TV(Lge,"px, ","px)","deg)"),Bge=TV(jge,", ",")",")"),Hge=1e-12;function T4(e){return((e=Math.exp(e))+1/e)/2}function Uge(e){return((e=Math.exp(e))-1/e)/2}function Wge(e){return((e=Math.exp(2*e))-1)/(e+1)}const Gge=function e(t,n,i){function r(o,a){var s=o[0],l=o[1],u=o[2],c=a[0],d=a[1],h=a[2],m=c-s,g=d-l,y=m*m+g*g,x,b;if(y<Hge)b=Math.log(h/u)/t,x=function(T){return[s+T*m,l+T*g,u*Math.exp(t*T*b)]};else{var w=Math.sqrt(y),S=(h*h-u*u+i*y)/(2*u*n*w),k=(h*h-u*u-i*y)/(2*h*n*w),R=Math.log(Math.sqrt(S*S+1)-S),M=Math.log(Math.sqrt(k*k+1)-k);b=(M-R)/t,x=function(T){var N=T*b,D=T4(R),I=u/(n*w)*(D*Wge(t*N+R)-Uge(R));return[s+I*m,l+I*g,u*D/T4(t*N+R)]}}return x.duration=b*1e3*t/Math.SQRT2,x}return r.rho=function(o){var a=Math.max(.001,+o),s=a*a,l=s*s;return e(a,s,l)},r}(Math.SQRT2,2,4);function AV(e){return function(t,n){var i=e((t=Pb(t)).h,(n=Pb(n)).h),r=pi(t.s,n.s),o=pi(t.l,n.l),a=pi(t.opacity,n.opacity);return function(s){return t.h=i(s),t.s=r(s),t.l=o(s),t.opacity=a(s),t+""}}}const qge=AV(sS);var Vge=AV(pi);function Yge(e,t){var n=pi((e=$b(e)).l,(t=$b(t)).l),i=pi(e.a,t.a),r=pi(e.b,t.b),o=pi(e.opacity,t.opacity);return function(a){return e.l=n(a),e.a=i(a),e.b=r(a),e.opacity=o(a),e+""}}function MV(e){return function(t,n){var i=e((t=Ob(t)).h,(n=Ob(n)).h),r=pi(t.c,n.c),o=pi(t.l,n.l),a=pi(t.opacity,n.opacity);return function(s){return t.h=i(s),t.c=r(s),t.l=o(s),t.opacity=a(s),t+""}}}const Zge=MV(sS);var Xge=MV(pi);function FV(e){return function t(n){n=+n;function i(r,o){var a=e((r=uA(r)).h,(o=uA(o)).h),s=pi(r.s,o.s),l=pi(r.l,o.l),u=pi(r.opacity,o.opacity);return function(c){return r.h=a(c),r.s=s(c),r.l=l(Math.pow(c,n)),r.opacity=u(c),r+""}}return i.gamma=t,i}(1)}const Kge=FV(sS);var Jge=FV(pi);function JN(e,t){t===void 0&&(t=e,e=Ic);for(var n=0,i=t.length-1,r=t[0],o=new Array(i<0?0:i);n<i;)o[n]=e(r,r=t[++n]);return function(a){var s=Math.max(0,Math.min(i-1,Math.floor(a*=i)));return o[s](a-s)}}function Qge(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e(i/(t-1));return n}const e0e=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Ic,interpolateArray:Nge,interpolateBasis:vV,interpolateBasisClosed:xV,interpolateCubehelix:Kge,interpolateCubehelixLong:Jge,interpolateDate:CV,interpolateDiscrete:Ige,interpolateHcl:Zge,interpolateHclLong:Xge,interpolateHsl:qge,interpolateHslLong:Vge,interpolateHue:Dge,interpolateLab:Yge,interpolateNumber:wa,interpolateNumberArray:KN,interpolateObject:EV,interpolateRgb:cA,interpolateRgbBasis:Fge,interpolateRgbBasisClosed:Pge,interpolateRound:Ev,interpolateString:kV,interpolateTransformCss:zge,interpolateTransformSvg:Bge,interpolateZoom:Gge,piecewise:JN,quantize:Qge},Symbol.toStringTag,{value:"Module"}));function t0e(e){return function(){return e}}function hA(e){return+e}var A4=[0,1];function Br(e){return e}function pA(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:t0e(isNaN(t)?NaN:.5)}function n0e(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function i0e(e,t,n){var i=e[0],r=e[1],o=t[0],a=t[1];return r<i?(i=pA(r,i),o=n(a,o)):(i=pA(i,r),o=n(o,a)),function(s){return o(i(s))}}function r0e(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),o=new Array(i),a=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<i;)r[a]=pA(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(s){var l=lc(e,s,1,i)-1;return o[l](r[l](s))}}function kv(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function lS(){var e=A4,t=A4,n=Ic,i,r,o,a=Br,s,l,u;function c(){var h=Math.min(e.length,t.length);return a!==Br&&(a=n0e(e[0],e[h-1])),s=h>2?r0e:i0e,l=u=null,d}function d(h){return h==null||isNaN(h=+h)?o:(l||(l=s(e.map(i),t,n)))(i(a(h)))}return d.invert=function(h){return a(r((u||(u=s(t,e.map(i),wa)))(h)))},d.domain=function(h){return arguments.length?(e=Array.from(h,hA),c()):e.slice()},d.range=function(h){return arguments.length?(t=Array.from(h),c()):t.slice()},d.rangeRound=function(h){return t=Array.from(h),n=Ev,c()},d.clamp=function(h){return arguments.length?(a=h?!0:Br,c()):a!==Br},d.interpolate=function(h){return arguments.length?(n=h,c()):n},d.unknown=function(h){return arguments.length?(o=h,d):o},function(h,m){return i=h,r=m,c()}}function PV(){return lS()(Br,Br)}function NV(e,t,n,i){var r=uc(e,t,n),o;switch(i=sd(i??",f"),i.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(o=oG(r,a))&&(i.precision=o),jP(i,a)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(o=aG(r,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=o-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(o=rG(r))&&(i.precision=o-(i.type==="%")*2);break}}return D2(i)}function jd(e){var t=e.domain;return e.ticks=function(n){var i=t();return qT(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var r=t();return NV(r[0],r[r.length-1],n??10,i)},e.nice=function(n){n==null&&(n=10);var i=t(),r=0,o=i.length-1,a=i[r],s=i[o],l,u,c=10;for(s<a&&(u=a,a=s,s=u,u=r,r=o,o=u);c-- >0;){if(u=VT(a,s,n),u===l)return i[r]=a,i[o]=s,t(i);if(u>0)a=Math.floor(a/u)*u,s=Math.ceil(s/u)*u;else if(u<0)a=Math.ceil(a*u)/u,s=Math.floor(s*u)/u;else break;l=u}return e},e}function $V(){var e=PV();return e.copy=function(){return kv(e,$V())},Ds.apply(e,arguments),jd(e)}function OV(e){var t;function n(i){return i==null||isNaN(i=+i)?t:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(e=Array.from(i,hA),n):e.slice()},n.unknown=function(i){return arguments.length?(t=i,n):t},n.copy=function(){return OV(e).unknown(t)},e=arguments.length?Array.from(e,hA):[0,1],jd(n)}function IV(e,t){e=e.slice();var n=0,i=e.length-1,r=e[n],o=e[i],a;return o<r&&(a=n,n=i,i=a,a=r,r=o,o=a),e[n]=t.floor(r),e[i]=t.ceil(o),e}function M4(e){return Math.log(e)}function F4(e){return Math.exp(e)}function o0e(e){return-Math.log(-e)}function a0e(e){return-Math.exp(-e)}function s0e(e){return isFinite(e)?+("1e"+e):e<0?0:e}function l0e(e){return e===10?s0e:e===Math.E?Math.exp:t=>Math.pow(e,t)}function u0e(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function P4(e){return(t,n)=>-e(-t,n)}function QN(e){const t=e(M4,F4),n=t.domain;let i=10,r,o;function a(){return r=u0e(i),o=l0e(i),n()[0]<0?(r=P4(r),o=P4(o),e(o0e,a0e)):e(M4,F4),t}return t.base=function(s){return arguments.length?(i=+s,a()):i},t.domain=function(s){return arguments.length?(n(s),a()):n()},t.ticks=s=>{const l=n();let u=l[0],c=l[l.length-1];const d=c<u;d&&([u,c]=[c,u]);let h=r(u),m=r(c),g,y;const x=s==null?10:+s;let b=[];if(!(i%1)&&m-h<x){if(h=Math.floor(h),m=Math.ceil(m),u>0){for(;h<=m;++h)for(g=1;g<i;++g)if(y=h<0?g/o(-h):g*o(h),!(y<u)){if(y>c)break;b.push(y)}}else for(;h<=m;++h)for(g=i-1;g>=1;--g)if(y=h>0?g/o(-h):g*o(h),!(y<u)){if(y>c)break;b.push(y)}b.length*2<x&&(b=qT(u,c,x))}else b=qT(h,m,Math.min(m-h,x)).map(o);return d?b.reverse():b},t.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=i===10?"s":","),typeof l!="function"&&(!(i%1)&&(l=sd(l)).precision==null&&(l.trim=!0),l=D2(l)),s===1/0)return l;const u=Math.max(1,i*s/t.ticks().length);return c=>{let d=c/o(Math.round(r(c)));return d*i<i-.5&&(d*=i),d<=u?l(c):""}},t.nice=()=>n(IV(n(),{floor:s=>o(Math.floor(r(s))),ceil:s=>o(Math.ceil(r(s)))})),t}function DV(){const e=QN(lS()).domain([1,10]);return e.copy=()=>kv(e,DV()).base(e.base()),Ds.apply(e,arguments),e}function N4(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function $4(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function e$(e){var t=1,n=e(N4(t),$4(t));return n.constant=function(i){return arguments.length?e(N4(t=+i),$4(t)):t},jd(n)}function LV(){var e=e$(lS());return e.copy=function(){return kv(e,LV()).constant(e.constant())},Ds.apply(e,arguments)}function O4(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function c0e(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function f0e(e){return e<0?-e*e:e*e}function t$(e){var t=e(Br,Br),n=1;function i(){return n===1?e(Br,Br):n===.5?e(c0e,f0e):e(O4(n),O4(1/n))}return t.exponent=function(r){return arguments.length?(n=+r,i()):n},jd(t)}function n$(){var e=t$(lS());return e.copy=function(){return kv(e,n$()).exponent(e.exponent())},Ds.apply(e,arguments),e}function d0e(){return n$.apply(null,arguments).exponent(.5)}function jV(){var e=[],t=[],n=[],i;function r(){var a=0,s=Math.max(1,t.length);for(n=new Array(s-1);++a<s;)n[a-1]=JW(e,a/s);return o}function o(a){return a==null||isNaN(a=+a)?i:t[lc(n,a)]}return o.invertExtent=function(a){var s=t.indexOf(a);return s<0?[NaN,NaN]:[s>0?n[s-1]:e[0],s<n.length?n[s]:e[e.length-1]]},o.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(kl),r()},o.range=function(a){return arguments.length?(t=Array.from(a),r()):t.slice()},o.unknown=function(a){return arguments.length?(i=a,o):i},o.quantiles=function(){return n.slice()},o.copy=function(){return jV().domain(e).range(t).unknown(i)},Ds.apply(o,arguments)}function zV(){var e=0,t=1,n=1,i=[.5],r=[0,1],o;function a(l){return l!=null&&l<=l?r[lc(i,l,0,n)]:o}function s(){var l=-1;for(i=new Array(n);++l<n;)i[l]=((l+1)*t-(l-n)*e)/(n+1);return a}return a.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,s()):[e,t]},a.range=function(l){return arguments.length?(n=(r=Array.from(l)).length-1,s()):r.slice()},a.invertExtent=function(l){var u=r.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,i[0]]:u>=n?[i[n-1],t]:[i[u-1],i[u]]},a.unknown=function(l){return arguments.length&&(o=l),a},a.thresholds=function(){return i.slice()},a.copy=function(){return zV().domain([e,t]).range(r).unknown(o)},Ds.apply(jd(a),arguments)}function BV(){var e=[.5],t=[0,1],n,i=1;function r(o){return o!=null&&o<=o?t[lc(e,o,0,i)]:n}return r.domain=function(o){return arguments.length?(e=Array.from(o),i=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(o){return arguments.length?(t=Array.from(o),i=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(o){var a=t.indexOf(o);return[e[a-1],e[a]]},r.unknown=function(o){return arguments.length?(n=o,r):n},r.copy=function(){return BV().domain(e).range(t).unknown(n)},Ds.apply(r,arguments)}function h0e(e){return new Date(e)}function p0e(e){return e instanceof Date?+e:+new Date(+e)}function i$(e,t,n,i,r,o,a,s,l,u){var c=PV(),d=c.invert,h=c.domain,m=u(".%L"),g=u(":%S"),y=u("%I:%M"),x=u("%I %p"),b=u("%a %d"),w=u("%b %d"),S=u("%B"),k=u("%Y");function R(M){return(l(M)<M?m:s(M)<M?g:a(M)<M?y:o(M)<M?x:i(M)<M?r(M)<M?b:w:n(M)<M?S:k)(M)}return c.invert=function(M){return new Date(d(M))},c.domain=function(M){return arguments.length?h(Array.from(M,p0e)):h().map(h0e)},c.ticks=function(M){var T=h();return e(T[0],T[T.length-1],M??10)},c.tickFormat=function(M,T){return T==null?R:u(T)},c.nice=function(M){var T=h();return(!M||typeof M.range!="function")&&(M=t(T[0],T[T.length-1],M??10)),M?h(IV(T,M)):c},c.copy=function(){return kv(c,i$(e,t,n,i,r,o,a,s,l,u))},c}function m0e(){return Ds.apply(i$(bde,wde,Ts,Fy,Rm,Rl,z2,L2,_l,WP).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function g0e(){return Ds.apply(i$(xde,_de,As,Py,Tm,Qu,B2,j2,_l,GP).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function uS(){var e=0,t=1,n,i,r,o,a=Br,s=!1,l;function u(d){return d==null||isNaN(d=+d)?l:a(r===0?.5:(d=(o(d)-n)*r,s?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([e,t]=d,n=o(e=+e),i=o(t=+t),r=n===i?0:1/(i-n),u):[e,t]},u.clamp=function(d){return arguments.length?(s=!!d,u):s},u.interpolator=function(d){return arguments.length?(a=d,u):a};function c(d){return function(h){var m,g;return arguments.length?([m,g]=h,a=d(m,g),u):[a(0),a(1)]}}return u.range=c(Ic),u.rangeRound=c(Ev),u.unknown=function(d){return arguments.length?(l=d,u):l},function(d){return o=d,n=d(e),i=d(t),r=n===i?0:1/(i-n),u}}function Dc(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function r$(){var e=jd(uS()(Br));return e.copy=function(){return Dc(e,r$())},$c.apply(e,arguments)}function HV(){var e=QN(uS()).domain([1,10]);return e.copy=function(){return Dc(e,HV()).base(e.base())},$c.apply(e,arguments)}function UV(){var e=e$(uS());return e.copy=function(){return Dc(e,UV()).constant(e.constant())},$c.apply(e,arguments)}function o$(){var e=t$(uS());return e.copy=function(){return Dc(e,o$()).exponent(e.exponent())},$c.apply(e,arguments)}function y0e(){return o$.apply(null,arguments).exponent(.5)}function cS(){var e=0,t=.5,n=1,i=1,r,o,a,s,l,u=Br,c,d=!1,h;function m(y){return isNaN(y=+y)?h:(y=.5+((y=+c(y))-o)*(i*y<i*o?s:l),u(d?Math.max(0,Math.min(1,y)):y))}m.domain=function(y){return arguments.length?([e,t,n]=y,r=c(e=+e),o=c(t=+t),a=c(n=+n),s=r===o?0:.5/(o-r),l=o===a?0:.5/(a-o),i=o<r?-1:1,m):[e,t,n]},m.clamp=function(y){return arguments.length?(d=!!y,m):d},m.interpolator=function(y){return arguments.length?(u=y,m):u};function g(y){return function(x){var b,w,S;return arguments.length?([b,w,S]=x,u=JN(y,[b,w,S]),m):[u(0),u(.5),u(1)]}}return m.range=g(Ic),m.rangeRound=g(Ev),m.unknown=function(y){return arguments.length?(h=y,m):h},function(y){return c=y,r=y(e),o=y(t),a=y(n),s=r===o?0:.5/(o-r),l=o===a?0:.5/(a-o),i=o<r?-1:1,m}}function WV(){var e=jd(cS()(Br));return e.copy=function(){return Dc(e,WV())},$c.apply(e,arguments)}function GV(){var e=QN(cS()).domain([.1,1,10]);return e.copy=function(){return Dc(e,GV()).base(e.base())},$c.apply(e,arguments)}function qV(){var e=e$(cS());return e.copy=function(){return Dc(e,qV()).constant(e.constant())},$c.apply(e,arguments)}function a$(){var e=t$(cS());return e.copy=function(){return Dc(e,a$()).exponent(e.exponent())},$c.apply(e,arguments)}function v0e(){return a$.apply(null,arguments).exponent(.5)}function s$(e,t,n){const i=e-t+n*2;return e?i>0?i:1:0}const x0e="identity",Up="linear",Bl="log",Rv="pow",Tv="sqrt",fS="symlog",ud="time",cd="utc",Ss="sequential",Nm="diverging",Wp="quantile",dS="quantize",hS="threshold",l$="ordinal",mA="point",VV="band",u$="bin-ordinal",oi="continuous",Av="discrete",Mv="discretizing",ia="interpolating",c$="temporal";function _0e(e){return function(t){let n=t[0],i=t[1],r;return i<n&&(r=n,n=i,i=r),[e.invert(n),e.invert(i)]}}function b0e(e){return function(t){const n=e.range();let i=t[0],r=t[1],o=-1,a,s,l,u;for(r<i&&(s=i,i=r,r=s),l=0,u=n.length;l<u;++l)n[l]>=i&&n[l]<=r&&(o<0&&(o=l),a=l);if(!(o<0))return i=e.invertExtent(n[o]),r=e.invertExtent(n[a]),[i[0]===void 0?i[1]:i[0],r[1]===void 0?r[0]:r[1]]}}function f$(){const e=VN().unknown(void 0),t=e.domain,n=e.range;let i=[0,1],r,o,a=!1,s=0,l=0,u=.5;delete e.unknown;function c(){const d=t().length,h=i[1]<i[0],m=i[1-h],g=s$(d,s,l);let y=i[h-0];r=(m-y)/(g||1),a&&(r=Math.floor(r)),y+=(m-y-r*(d-s))*u,o=r*(1-s),a&&(y=Math.round(y),o=Math.round(o));const x=ho(d).map(b=>y+r*b);return n(h?x.reverse():x)}return e.domain=function(d){return arguments.length?(t(d),c()):t()},e.range=function(d){return arguments.length?(i=[+d[0],+d[1]],c()):i.slice()},e.rangeRound=function(d){return i=[+d[0],+d[1]],a=!0,c()},e.bandwidth=function(){return o},e.step=function(){return r},e.round=function(d){return arguments.length?(a=!!d,c()):a},e.padding=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),s=l,c()):s},e.paddingInner=function(d){return arguments.length?(s=Math.max(0,Math.min(1,d)),c()):s},e.paddingOuter=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),c()):l},e.align=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),c()):u},e.invertRange=function(d){if(d[0]==null||d[1]==null)return;const h=i[1]<i[0],m=h?n().reverse():n(),g=m.length-1;let y=+d[0],x=+d[1],b,w,S;if(!(y!==y||x!==x)&&(x<y&&(S=y,y=x,x=S),!(x<m[0]||y>i[1-h])))return b=Math.max(0,lc(m,y)-1),w=y===x?b:lc(m,x)-1,y-m[b]>o+1e-10&&++b,h&&(S=b,b=g-w,w=g-S),b>w?void 0:t().slice(b,w+1)},e.invert=function(d){const h=e.invertRange([d,d]);return h&&h[0]},e.copy=function(){return f$().domain(t()).range(i).round(a).paddingInner(s).paddingOuter(l).align(u)},c()}function YV(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return YV(t())},e}function w0e(){return YV(f$().paddingInner(1))}var S0e=Array.prototype.map;function C0e(e){return S0e.call(e,Vi)}const E0e=Array.prototype.slice;function ZV(){let e=[],t=[];function n(i){return i==null||i!==i?void 0:t[(lc(e,i)-1)%t.length]}return n.domain=function(i){return arguments.length?(e=C0e(i),n):e.slice()},n.range=function(i){return arguments.length?(t=E0e.call(i),n):t.slice()},n.tickFormat=function(i,r){return NV(e[0],Ot(e),i??10,r)},n.copy=function(){return ZV().domain(n.domain()).range(n.range())},n}const Ib=new Map,XV=Symbol("vega_scale");function KV(e){return e[XV]=!0,e}function k0e(e){return e&&e[XV]===!0}function R0e(e,t,n){const i=function(){const o=t();return o.invertRange||(o.invertRange=o.invert?_0e(o):o.invertExtent?b0e(o):void 0),o.type=e,KV(o)};return i.metadata=Da($e(n)),i}function Ut(e,t,n){return arguments.length>1?(Ib.set(e,R0e(e,t,n)),this):JV(e)?Ib.get(e):void 0}Ut(x0e,OV);Ut(Up,$V,oi);Ut(Bl,DV,[oi,Bl]);Ut(Rv,n$,oi);Ut(Tv,d0e,oi);Ut(fS,LV,oi);Ut(ud,m0e,[oi,c$]);Ut(cd,g0e,[oi,c$]);Ut(Ss,r$,[oi,ia]);Ut(`${Ss}-${Up}`,r$,[oi,ia]);Ut(`${Ss}-${Bl}`,HV,[oi,ia,Bl]);Ut(`${Ss}-${Rv}`,o$,[oi,ia]);Ut(`${Ss}-${Tv}`,y0e,[oi,ia]);Ut(`${Ss}-${fS}`,UV,[oi,ia]);Ut(`${Nm}-${Up}`,WV,[oi,ia]);Ut(`${Nm}-${Bl}`,GV,[oi,ia,Bl]);Ut(`${Nm}-${Rv}`,a$,[oi,ia]);Ut(`${Nm}-${Tv}`,v0e,[oi,ia]);Ut(`${Nm}-${fS}`,qV,[oi,ia]);Ut(Wp,jV,[Mv,Wp]);Ut(dS,zV,Mv);Ut(hS,BV,Mv);Ut(u$,ZV,[Av,Mv]);Ut(l$,VN,Av);Ut(VV,f$,Av);Ut(mA,w0e,Av);function JV(e){return Ib.has(e)}function zd(e,t){const n=Ib.get(e);return n&&n.metadata[t]}function d$(e){return zd(e,oi)}function Gp(e){return zd(e,Av)}function gA(e){return zd(e,Mv)}function QV(e){return zd(e,Bl)}function T0e(e){return zd(e,c$)}function eY(e){return zd(e,ia)}function tY(e){return zd(e,Wp)}const A0e=["clamp","base","constant","exponent"];function nY(e,t){const n=t[0],i=Ot(t)-n;return function(r){return e(n+r*i)}}function pS(e,t,n){return JN(h$(t||"rgb",n),e)}function iY(e,t){const n=new Array(t),i=t+1;for(let r=0;r<t;)n[r]=e(++r/i);return n}function rY(e,t,n){const i=n-t;let r,o,a;return!i||!Number.isFinite(i)?nr(.5):(r=(o=e.type).indexOf("-"),o=r<0?o:o.slice(r+1),a=Ut(o)().domain([t,n]).range([0,1]),A0e.forEach(s=>e[s]?a[s](e[s]()):0),a)}function h$(e,t){const n=e0e[M0e(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function M0e(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const F0e={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},P0e={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function oY(e){const t=e.length/6|0,n=new Array(t);for(let i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}function aY(e,t){for(const n in e)p$(n,t(e[n]))}const I4={};aY(P0e,oY);aY(F0e,e=>pS(oY(e)));function p$(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(I4[e]=t,this):I4[e]}const g_="symbol",N0e="discrete",$0e="gradient",O0e=e=>fe(e)?e.map(t=>String(t)):String(e),I0e=(e,t)=>e[1]-t[1],D0e=(e,t)=>t[1]-e[1];function m$(e,t,n){let i;return zt(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(_v(e.domain())/n||1)+1))),Ie(t)&&(i=t.step,t=t.interval),Oe(t)&&(t=e.type===ud?Am(t):e.type==cd?Mm(t):le("Only time and utc scales accept interval strings."),i&&(t=t.every(i))),t}function sY(e,t,n){let i=e.range(),r=i[0],o=Ot(i),a=I0e;if(r>o&&(i=o,o=r,r=i,a=D0e),r=Math.floor(r),o=Math.ceil(o),t=t.map(s=>[s,e(s)]).filter(s=>r<=s[1]&&s[1]<=o).sort(a).map(s=>s[0]),n>0&&t.length>1){const s=[t[0],Ot(t)];for(;t.length>n&&t.length>=3;)t=t.filter((l,u)=>!(u%2));t.length<3&&(t=s)}return t}function g$(e,t){return e.bins?sY(e,e.bins):e.ticks?e.ticks(t):e.domain()}function lY(e,t,n,i,r,o){const a=t.type;let s=O0e;if(a===ud||r===ud)s=e.timeFormat(i);else if(a===cd||r===cd)s=e.utcFormat(i);else if(QV(a)){const l=e.formatFloat(i);if(o||t.bins)s=l;else{const u=uY(t,n,!1);s=c=>u(c)?l(c):""}}else if(t.tickFormat){const l=t.domain();s=e.formatSpan(l[0],l[l.length-1],n,i)}else i&&(s=e.format(i));return s}function uY(e,t,n){const i=g$(e,t),r=e.base(),o=Math.log(r),a=Math.max(1,r*t/i.length),s=l=>{let u=l/Math.pow(r,Math.round(Math.log(l)/o));return u*r<r-.5&&(u*=r),u<=a};return n?i.filter(s):s}const yA={[Wp]:"quantiles",[dS]:"thresholds",[hS]:"domain"},cY={[Wp]:"quantiles",[dS]:"domain"};function fY(e,t){return e.bins?z0e(e.bins):e.type===Bl?uY(e,t,!0):yA[e.type]?j0e(e[yA[e.type]]()):g$(e,t)}function L0e(e,t,n){const i=t[cY[t.type]](),r=i.length;let o=r>1?i[1]-i[0]:i[0],a;for(a=1;a<r;++a)o=Math.min(o,i[a]-i[a-1]);return e.formatSpan(0,o,3*10,n)}function j0e(e){const t=[-1/0].concat(e);return t.max=1/0,t}function z0e(e){const t=e.slice(0,-1);return t.max=Ot(e),t}const B0e=e=>yA[e.type]||e.bins;function dY(e,t,n,i,r,o,a){const s=cY[t.type]&&o!==ud&&o!==cd?L0e(e,t,r):lY(e,t,n,r,o,a);return i===g_&&B0e(t)?H0e(s):i===N0e?U0e(s):W0e(s)}const H0e=e=>(t,n,i)=>{const r=D4(i[n+1],D4(i.max,1/0)),o=L4(t,e),a=L4(r,e);return o&&a?o+"  "+a:a?"< "+a:" "+o},D4=(e,t)=>e??t,U0e=e=>(t,n)=>n?e(t):null,W0e=e=>t=>e(t),L4=(e,t)=>Number.isFinite(e)?t(e):null;function G0e(e){const t=e.domain(),n=t.length-1;let i=+t[0],r=+Ot(t),o=r-i;if(e.type===hS){const a=n?o/n:.1;i-=a,r+=a,o=r-i}return a=>(a-i)/o}function q0e(e,t,n,i){const r=i||t.type;return Oe(n)&&T0e(r)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&r===ud?e.timeFormat("%A, %d %B %Y, %X"):!n&&r===cd?e.utcFormat("%A, %d %B %Y, %X UTC"):dY(e,t,5,null,n,i,!0)}function hY(e,t,n){n=n||{};const i=Math.max(3,n.maxlen||7),r=q0e(e,t,n.format,n.formatType);if(gA(t.type)){const o=fY(t).slice(1).map(r),a=o.length;return`${a} boundar${a===1?"y":"ies"}: ${o.join(", ")}`}else if(Gp(t.type)){const o=t.domain(),a=o.length,s=a>i?o.slice(0,i-2).map(r).join(", ")+", ending with "+o.slice(-1).map(r):o.map(r).join(", ");return`${a} value${a===1?"":"s"}: ${s}`}else{const o=t.domain();return`values from ${r(o[0])} to ${r(Ot(o))}`}}let pY=0;function V0e(){pY=0}const Db="p_";function y$(e){return e&&e.gradient}function mY(e,t,n){const i=e.gradient;let r=e.id,o=i==="radial"?Db:"";return r||(r=e.id="gradient_"+pY++,i==="radial"?(e.x1=os(e.x1,.5),e.y1=os(e.y1,.5),e.r1=os(e.r1,0),e.x2=os(e.x2,.5),e.y2=os(e.y2,.5),e.r2=os(e.r2,.5),o=Db):(e.x1=os(e.x1,0),e.y1=os(e.y1,0),e.x2=os(e.x2,1),e.y2=os(e.y2,0))),t[r]=e,"url("+(n||"")+"#"+o+r+")"}function os(e,t){return e??t}function gY(e,t){var n=[],i;return i={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(r,o){return n.push({offset:r,color:o}),i}}}const j4={basis:{curve:Jme},"basis-closed":{curve:Qme},"basis-open":{curve:ege},bundle:{curve:tge,tension:"beta",value:.85},cardinal:{curve:nge,tension:"tension",value:0},"cardinal-open":{curve:rge,tension:"tension",value:0},"cardinal-closed":{curve:ige,tension:"tension",value:0},"catmull-rom":{curve:oge,tension:"alpha",value:.5},"catmull-rom-closed":{curve:age,tension:"alpha",value:.5},"catmull-rom-open":{curve:sge,tension:"alpha",value:.5},linear:{curve:HN},"linear-closed":{curve:lge},monotone:{horizontal:cge,vertical:uge},natural:{curve:fge},step:{curve:dge},"step-after":{curve:pge},"step-before":{curve:hge}};function v$(e,t,n){var i=et(j4,e)&&j4[e],r=null;return i&&(r=i.curve||i[t||"vertical"],i.tension&&n!=null&&(r=r[i.tension](n))),r}const Y0e={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},Z0e=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,X0e=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,K0e=/^((\s+,?\s*)|(,\s*))/,J0e=/^[01]/;function qp(e){const t=[];return(e.match(Z0e)||[]).forEach(i=>{let r=i[0];const o=r.toLowerCase(),a=Y0e[o],s=Q0e(o,a,i.slice(1).trim()),l=s.length;if(l<a||l&&l%a!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([r,...s.slice(0,a)]),l!==a){o==="m"&&(r=r==="M"?"L":"l");for(let u=a;u<l;u+=a)t.push([r,...s.slice(u,u+a)])}}),t}function Q0e(e,t,n){const i=[];for(let r=0;t&&r<n.length;)for(let o=0;o<t;++o){const a=e==="a"&&(o===3||o===4)?J0e:X0e,s=n.slice(r).match(a);if(s===null)throw Error("Invalid SVG path, incorrect parameter type");r+=s[0].length,i.push(+s[0]);const l=n.slice(r).match(K0e);l!==null&&(r+=l[0].length)}return i}const hc=Math.PI/180,eye=1e-14,Sf=Math.PI/2,hs=Math.PI*2,Sh=Math.sqrt(3)/2;var gk={},yk={},yY=[].join;function tye(e,t,n,i,r,o,a,s,l){const u=yY.call(arguments);if(gk[u])return gk[u];const c=a*hc,d=Math.sin(c),h=Math.cos(c);n=Math.abs(n),i=Math.abs(i);const m=h*(s-e)*.5+d*(l-t)*.5,g=h*(l-t)*.5-d*(s-e)*.5;let y=m*m/(n*n)+g*g/(i*i);y>1&&(y=Math.sqrt(y),n*=y,i*=y);const x=h/n,b=d/n,w=-d/i,S=h/i,k=x*s+b*l,R=w*s+S*l,M=x*e+b*t,T=w*e+S*t;let D=1/((M-k)*(M-k)+(T-R)*(T-R))-.25;D<0&&(D=0);let I=Math.sqrt(D);o==r&&(I=-I);const z=.5*(k+M)-I*(T-R),X=.5*(R+T)+I*(M-k),W=Math.atan2(R-X,k-z);let B=Math.atan2(T-X,M-z)-W;B<0&&o===1?B+=hs:B>0&&o===0&&(B-=hs);const V=Math.ceil(Math.abs(B/(Sf+.001))),K=[];for(let H=0;H<V;++H){const J=W+H*B/V,Q=W+(H+1)*B/V;K[H]=[z,X,J,Q,n,i,d,h]}return gk[u]=K}function nye(e){const t=yY.call(e);if(yk[t])return yk[t];var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7];const c=u*a,d=-l*s,h=l*a,m=u*s,g=Math.cos(r),y=Math.sin(r),x=Math.cos(o),b=Math.sin(o),w=.5*(o-r),S=Math.sin(w*.5),k=8/3*S*S/Math.sin(w),R=n+g-k*y,M=i+y+k*g,T=n+x,N=i+b,D=T+k*b,I=N-k*x;return yk[t]=[c*R+d*M,h*R+m*M,c*D+d*I,h*D+m*I,c*T+d*N,h*T+m*N]}const Fo=["l",0,0,0,0,0,0,0];function iye(e,t,n){const i=Fo[0]=e[0];if(i==="a"||i==="A")Fo[1]=t*e[1],Fo[2]=n*e[2],Fo[3]=e[3],Fo[4]=e[4],Fo[5]=e[5],Fo[6]=t*e[6],Fo[7]=n*e[7];else if(i==="h"||i==="H")Fo[1]=t*e[1];else if(i==="v"||i==="V")Fo[1]=n*e[1];else for(var r=1,o=e.length;r<o;++r)Fo[r]=(r%2==1?t:n)*e[r];return Fo}function jy(e,t,n,i,r,o){var a,s=null,l=0,u=0,c=0,d=0,h,m,g,y,x=0,b=0;n==null&&(n=0),i==null&&(i=0),r==null&&(r=1),o==null&&(o=r),e.beginPath&&e.beginPath();for(var w=0,S=t.length;w<S;++w){switch(a=t[w],(r!==1||o!==1)&&(a=iye(a,r,o)),a[0]){case"l":l+=a[1],u+=a[2],e.lineTo(l+n,u+i);break;case"L":l=a[1],u=a[2],e.lineTo(l+n,u+i);break;case"h":l+=a[1],e.lineTo(l+n,u+i);break;case"H":l=a[1],e.lineTo(l+n,u+i);break;case"v":u+=a[1],e.lineTo(l+n,u+i);break;case"V":u=a[1],e.lineTo(l+n,u+i);break;case"m":l+=a[1],u+=a[2],x=l,b=u,e.moveTo(l+n,u+i);break;case"M":l=a[1],u=a[2],x=l,b=u,e.moveTo(l+n,u+i);break;case"c":h=l+a[5],m=u+a[6],c=l+a[3],d=u+a[4],e.bezierCurveTo(l+a[1]+n,u+a[2]+i,c+n,d+i,h+n,m+i),l=h,u=m;break;case"C":l=a[5],u=a[6],c=a[3],d=a[4],e.bezierCurveTo(a[1]+n,a[2]+i,c+n,d+i,l+n,u+i);break;case"s":h=l+a[3],m=u+a[4],c=2*l-c,d=2*u-d,e.bezierCurveTo(c+n,d+i,l+a[1]+n,u+a[2]+i,h+n,m+i),c=l+a[1],d=u+a[2],l=h,u=m;break;case"S":h=a[3],m=a[4],c=2*l-c,d=2*u-d,e.bezierCurveTo(c+n,d+i,a[1]+n,a[2]+i,h+n,m+i),l=h,u=m,c=a[1],d=a[2];break;case"q":h=l+a[3],m=u+a[4],c=l+a[1],d=u+a[2],e.quadraticCurveTo(c+n,d+i,h+n,m+i),l=h,u=m;break;case"Q":h=a[3],m=a[4],e.quadraticCurveTo(a[1]+n,a[2]+i,h+n,m+i),l=h,u=m,c=a[1],d=a[2];break;case"t":h=l+a[1],m=u+a[2],s[0].match(/[QqTt]/)===null?(c=l,d=u):s[0]==="t"?(c=2*l-g,d=2*u-y):s[0]==="q"&&(c=2*l-c,d=2*u-d),g=c,y=d,e.quadraticCurveTo(c+n,d+i,h+n,m+i),l=h,u=m,c=l+a[1],d=u+a[2];break;case"T":h=a[1],m=a[2],c=2*l-c,d=2*u-d,e.quadraticCurveTo(c+n,d+i,h+n,m+i),l=h,u=m;break;case"a":z4(e,l+n,u+i,[a[1],a[2],a[3],a[4],a[5],a[6]+l+n,a[7]+u+i]),l+=a[6],u+=a[7];break;case"A":z4(e,l+n,u+i,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+i]),l=a[6],u=a[7];break;case"z":case"Z":l=x,u=b,e.closePath();break}s=a}}function z4(e,t,n,i){const r=tye(i[5],i[6],i[0],i[1],i[3],i[4],i[2],t,n);for(let o=0;o<r.length;++o){const a=nye(r[o]);e.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])}}const B4=.5773502691896257,H4={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,hs)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/2.5;e.moveTo(-n,-i),e.lineTo(-n,i),e.lineTo(-i,i),e.lineTo(-i,n),e.lineTo(i,n),e.lineTo(i,i),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(i,-i),e.lineTo(i,-n),e.lineTo(-i,-n),e.lineTo(-i,-i),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),i=-n/2;e.rect(i,i,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/7,r=n/2.5,o=n/8;e.moveTo(-i,n),e.lineTo(i,n),e.lineTo(i,-o),e.lineTo(r,-o),e.lineTo(0,-n),e.lineTo(-r,-o),e.lineTo(-i,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,i=Sh*n,r=i-n*B4,o=n/4;e.moveTo(0,-i-r),e.lineTo(-o,i-r),e.lineTo(o,i-r),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,i=Sh*n,r=i-n*B4;e.moveTo(0,-i-r),e.lineTo(-n,i-r),e.lineTo(n,i-r),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,i=Sh*n;e.moveTo(0,-i),e.lineTo(-n,i),e.lineTo(n,i),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,i=Sh*n;e.moveTo(0,i),e.lineTo(-n,-i),e.lineTo(n,-i),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,i=Sh*n;e.moveTo(i,0),e.lineTo(-i,-n),e.lineTo(-i,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,i=Sh*n;e.moveTo(-i,0),e.lineTo(i,-n),e.lineTo(i,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function vY(e){return et(H4,e)?H4[e]:rye(e)}var vk={};function rye(e){if(!et(vk,e)){const t=qp(e);vk[e]={draw:function(n,i){jy(n,t,0,0,Math.sqrt(i)/2)}}}return vk[e]}const hu=.448084975506;function oye(e){return e.x}function aye(e){return e.y}function sye(e){return e.width}function lye(e){return e.height}function tl(e){return typeof e=="function"?e:()=>+e}function _x(e,t,n){return Math.max(t,Math.min(e,n))}function xY(){var e=oye,t=aye,n=sye,i=lye,r=tl(0),o=r,a=r,s=r,l=null;function u(c,d,h){var m,g=d??+e.call(this,c),y=h??+t.call(this,c),x=+n.call(this,c),b=+i.call(this,c),w=Math.min(x,b)/2,S=_x(+r.call(this,c),0,w),k=_x(+o.call(this,c),0,w),R=_x(+a.call(this,c),0,w),M=_x(+s.call(this,c),0,w);if(l||(l=m=tS()),S<=0&&k<=0&&R<=0&&M<=0)l.rect(g,y,x,b);else{var T=g+x,N=y+b;l.moveTo(g+S,y),l.lineTo(T-k,y),l.bezierCurveTo(T-hu*k,y,T,y+hu*k,T,y+k),l.lineTo(T,N-M),l.bezierCurveTo(T,N-hu*M,T-hu*M,N,T-M,N),l.lineTo(g+R,N),l.bezierCurveTo(g+hu*R,N,g,N-hu*R,g,N-R),l.lineTo(g,y+S),l.bezierCurveTo(g,y+hu*S,g+hu*S,y,g+S,y),l.closePath()}if(m)return l=null,m+""||null}return u.x=function(c){return arguments.length?(e=tl(c),u):e},u.y=function(c){return arguments.length?(t=tl(c),u):t},u.width=function(c){return arguments.length?(n=tl(c),u):n},u.height=function(c){return arguments.length?(i=tl(c),u):i},u.cornerRadius=function(c,d,h,m){return arguments.length?(r=tl(c),o=d!=null?tl(d):r,s=h!=null?tl(h):r,a=m!=null?tl(m):o,u):r},u.context=function(c){return arguments.length?(l=c??null,u):l},u}function _Y(){var e,t,n,i,r=null,o,a,s,l;function u(d,h,m){const g=m/2;if(o){var y=s-h,x=d-a;if(y||x){var b=Math.hypot(y,x),w=(y/=b)*l,S=(x/=b)*l,k=Math.atan2(x,y);r.moveTo(a-w,s-S),r.lineTo(d-y*g,h-x*g),r.arc(d,h,g,k-Math.PI,k),r.lineTo(a+w,s+S),r.arc(a,s,l,k,k+Math.PI)}else r.arc(d,h,g,0,hs);r.closePath()}else o=1;a=d,s=h,l=g}function c(d){var h,m=d.length,g,y=!1,x;for(r==null&&(r=x=tS()),h=0;h<=m;++h)!(h<m&&i(g=d[h],h,d))===y&&(y=!y)&&(o=0),y&&u(+e(g,h,d),+t(g,h,d),+n(g,h,d));if(x)return r=null,x+""||null}return c.x=function(d){return arguments.length?(e=d,c):e},c.y=function(d){return arguments.length?(t=d,c):t},c.size=function(d){return arguments.length?(n=d,c):n},c.defined=function(d){return arguments.length?(i=d,c):i},c.context=function(d){return arguments.length?(d==null?r=null:r=d,c):r},c}function Fv(e,t){return e??t}const Pv=e=>e.x||0,Nv=e=>e.y||0,uye=e=>e.width||0,cye=e=>e.height||0,fye=e=>(e.x||0)+(e.width||0),dye=e=>(e.y||0)+(e.height||0),hye=e=>e.startAngle||0,pye=e=>e.endAngle||0,mye=e=>e.padAngle||0,gye=e=>e.innerRadius||0,yye=e=>e.outerRadius||0,vye=e=>e.cornerRadius||0,xye=e=>Fv(e.cornerRadiusTopLeft,e.cornerRadius)||0,_ye=e=>Fv(e.cornerRadiusTopRight,e.cornerRadius)||0,bye=e=>Fv(e.cornerRadiusBottomRight,e.cornerRadius)||0,wye=e=>Fv(e.cornerRadiusBottomLeft,e.cornerRadius)||0,Sye=e=>Fv(e.size,64),Cye=e=>e.size||1,mS=e=>e.defined!==!1,Eye=e=>vY(e.shape||"circle"),kye=Zme().startAngle(hye).endAngle(pye).padAngle(mye).innerRadius(gye).outerRadius(yye).cornerRadius(vye),Rye=Zq().x(Pv).y1(Nv).y0(dye).defined(mS),Tye=Zq().y(Nv).x1(Pv).x0(fye).defined(mS),Aye=Yq().x(Pv).y(Nv).defined(mS),Mye=xY().x(Pv).y(Nv).width(uye).height(cye).cornerRadius(xye,_ye,bye,wye),Fye=Kme().type(Eye).size(Sye),Pye=_Y().x(Pv).y(Nv).defined(mS).size(Cye);function x$(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function Nye(e,t){return kye.context(e)(t)}function $ye(e,t){const n=t[0],i=n.interpolate||"linear";return(n.orient==="horizontal"?Tye:Rye).curve(v$(i,n.orient,n.tension)).context(e)(t)}function Oye(e,t){const n=t[0],i=n.interpolate||"linear";return Aye.curve(v$(i,n.orient,n.tension)).context(e)(t)}function $m(e,t,n,i){return Mye.context(e)(t,n,i)}function Iye(e,t){return(t.mark.shape||t.shape).context(e)(t)}function Dye(e,t){return Fye.context(e)(t)}function Lye(e,t){return Pye.context(e)(t)}var bY=1;function wY(){bY=1}function _$(e,t,n){var i=t.clip,r=e._defs,o=t.clip_id||(t.clip_id="clip"+bY++),a=r.clipping[o]||(r.clipping[o]={id:o});return _t(i)?a.path=i(null):x$(n)?a.path=$m(null,n,0,0):(a.width=n.width||0,a.height=n.height||0),"url(#"+o+")"}function Yn(e){this.clear(),e&&this.union(e)}Yn.prototype={clone(){return new Yn(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,i){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),i<t?(this.y2=t,this.y1=i):(this.y1=t,this.y2=i),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const i=this.rotatedPoints(e,t,n);return this.clear().add(i[0],i[1]).add(i[2],i[3]).add(i[4],i[5]).add(i[6],i[7])},rotatedPoints(e,t,n){var{x1:i,y1:r,x2:o,y2:a}=this,s=Math.cos(e),l=Math.sin(e),u=t-t*s+n*l,c=n-t*l-n*s;return[s*i-l*r+u,l*i+s*r+c,s*i-l*a+u,l*i+s*a+c,s*o-l*r+u,l*o+s*r+c,s*o-l*a+u,l*o+s*a+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function gS(e){this.mark=e,this.bounds=this.bounds||new Yn}function yS(e){gS.call(this,e),this.items=this.items||[]}be(yS,gS);function b$(e){this._pending=0,this._loader=e||U2()}function U4(e){e._pending+=1}function Dg(e){e._pending-=1}b$.prototype={pending(){return this._pending},sanitizeURL(e){const t=this;return U4(t),t._loader.sanitize(e,{context:"href"}).then(n=>(Dg(t),n)).catch(()=>(Dg(t),null))},loadImage(e){const t=this,n=mge();return U4(t),t._loader.sanitize(e,{context:"image"}).then(i=>{const r=i.href;if(!r||!n)throw{url:r};const o=new n,a=et(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>Dg(t),o.onerror=()=>Dg(t),o.src=r,o}).catch(i=>(Dg(t),{complete:!1,width:0,height:0,src:i&&i.url||""}))},ready(){const e=this;return new Promise(t=>{function n(i){e.pending()?setTimeout(()=>{n(!0)},10):t(i)}n(!1)})}};function Vl(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const i=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(i+(n?jye(t,i):0))}return e}function jye(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const zye=hs-1e-8;let vS,y_,v_,$f,vA,x_,xA,_A;const Ou=(e,t)=>vS.add(e,t),__=(e,t)=>Ou(y_=e,v_=t),W4=e=>Ou(e,vS.y1),G4=e=>Ou(vS.x1,e),Cf=(e,t)=>vA*e+xA*t,Ef=(e,t)=>x_*e+_A*t,xk=(e,t)=>Ou(Cf(e,t),Ef(e,t)),_k=(e,t)=>__(Cf(e,t),Ef(e,t));function $v(e,t){return vS=e,t?($f=t*hc,vA=_A=Math.cos($f),x_=Math.sin($f),xA=-x_):(vA=_A=1,$f=x_=xA=0),Bye}const Bye={beginPath(){},closePath(){},moveTo:_k,lineTo:_k,rect(e,t,n,i){$f?(xk(e+n,t),xk(e+n,t+i),xk(e,t+i),_k(e,t)):(Ou(e+n,t+i),__(e,t))},quadraticCurveTo(e,t,n,i){const r=Cf(e,t),o=Ef(e,t),a=Cf(n,i),s=Ef(n,i);q4(y_,r,a,W4),q4(v_,o,s,G4),__(a,s)},bezierCurveTo(e,t,n,i,r,o){const a=Cf(e,t),s=Ef(e,t),l=Cf(n,i),u=Ef(n,i),c=Cf(r,o),d=Ef(r,o);V4(y_,a,l,c,W4),V4(v_,s,u,d,G4),__(c,d)},arc(e,t,n,i,r,o){if(i+=$f,r+=$f,y_=n*Math.cos(r)+e,v_=n*Math.sin(r)+t,Math.abs(r-i)>zye)Ou(e-n,t-n),Ou(e+n,t+n);else{const a=u=>Ou(n*Math.cos(u)+e,n*Math.sin(u)+t);let s,l;if(a(i),a(r),r!==i)if(i=i%hs,i<0&&(i+=hs),r=r%hs,r<0&&(r+=hs),r<i&&(o=!o,s=i,i=r,r=s),o)for(r-=hs,s=i-i%Sf,l=0;l<4&&s>r;++l,s-=Sf)a(s);else for(s=i-i%Sf+Sf,l=0;l<4&&s<r;++l,s=s+Sf)a(s)}}};function q4(e,t,n,i){const r=(e-t)/(e+n-2*t);0<r&&r<1&&i(e+(t-e)*r)}function V4(e,t,n,i,r){const o=i-e+3*t-3*n,a=e+n-2*t,s=e-t;let l=0,u=0,c;Math.abs(o)>eye?(c=a*a+s*o,c>=0&&(c=Math.sqrt(c),l=(-a+c)/o,u=(-a-c)/o)):l=.5*s/a,0<l&&l<1&&r(Y4(l,e,t,n,i)),0<u&&u<1&&r(Y4(u,e,t,n,i))}function Y4(e,t,n,i,r){const o=1-e,a=o*o,s=e*e;return a*o*t+3*a*e*n+3*o*s*i+s*e*r}var nc=(nc=tc(1,1))?nc.getContext("2d"):null;const bA=new Yn;function w$(e){return function(t,n){if(!nc)return!0;e(nc,t),bA.clear().union(t.bounds).intersect(n).round();const{x1:i,y1:r,x2:o,y2:a}=bA;for(let s=r;s<=a;++s)for(let l=i;l<=o;++l)if(nc.isPointInPath(l,s))return!0;return!1}}function S$(e,t){return t.contains(e.x||0,e.y||0)}function SY(e,t){const n=e.x||0,i=e.y||0,r=e.width||0,o=e.height||0;return t.intersects(bA.set(n,i,n+r,i+o))}function CY(e,t){const n=e.x||0,i=e.y||0,r=e.x2!=null?e.x2:n,o=e.y2!=null?e.y2:i;return tp(t,n,i,r,o)}function tp(e,t,n,i,r){const{x1:o,y1:a,x2:s,y2:l}=e,u=i-t,c=r-n;let d=0,h=1,m,g,y,x;for(x=0;x<4;++x){if(x===0&&(m=-u,g=-(o-t)),x===1&&(m=u,g=s-t),x===2&&(m=-c,g=-(a-n)),x===3&&(m=c,g=l-n),Math.abs(m)<1e-10&&g<0)return!1;if(y=g/m,m<0){if(y>h)return!1;y>d&&(d=y)}else if(m>0){if(y<d)return!1;y<h&&(h=y)}}return!0}function Vp(e,t){e.globalCompositeOperation=t.blend||"source-over"}function da(e,t){return e??t}function Z4(e,t){const n=t.length;for(let i=0;i<n;++i)e.addColorStop(t[i].offset,t[i].color);return e}function Hye(e,t,n){const i=n.width(),r=n.height();let o;if(t.gradient==="radial")o=e.createRadialGradient(n.x1+da(t.x1,.5)*i,n.y1+da(t.y1,.5)*r,Math.max(i,r)*da(t.r1,0),n.x1+da(t.x2,.5)*i,n.y1+da(t.y2,.5)*r,Math.max(i,r)*da(t.r2,.5));else{const a=da(t.x1,0),s=da(t.y1,0),l=da(t.x2,1),u=da(t.y2,0);if(a===l||s===u||i===r)o=e.createLinearGradient(n.x1+a*i,n.y1+s*r,n.x1+l*i,n.y1+u*r);else{const c=tc(Math.ceil(i),Math.ceil(r)),d=c.getContext("2d");return d.scale(i,r),d.fillStyle=Z4(d.createLinearGradient(a,s,l,u),t.stops),d.fillRect(0,0,i,r),e.createPattern(c,"no-repeat")}}return Z4(o,t.stops)}function EY(e,t,n){return y$(n)?Hye(e,n,t.bounds):n}function Lb(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=EY(e,t,t.fill),!0):!1}var Uye=[];function Yp(e,t,n){var i=(i=t.strokeWidth)!=null?i:1;return i<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=EY(e,t,t.stroke),e.lineWidth=i,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||Uye),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function Wye(e,t){return e.zindex-t.zindex||e.index-t.index}function C$(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],i,r,o;for(r=0,o=t.length;r<o;++r)i=t[r],i.index=r,i.zindex&&n.push(i);return e.zdirty=!1,e.zitems=n.sort(Wye)}function ja(e,t){var n=e.items,i,r;if(!n||!n.length)return;const o=C$(e);if(o&&o.length){for(i=0,r=n.length;i<r;++i)n[i].zindex||t(n[i]);n=o}for(i=0,r=n.length;i<r;++i)t(n[i])}function jb(e,t){var n=e.items,i,r;if(!n||!n.length)return null;const o=C$(e);for(o&&o.length&&(n=o),r=n.length;--r>=0;)if(i=t(n[r]))return i;if(n===o){for(n=e.items,r=n.length;--r>=0;)if(!n[r].zindex&&(i=t(n[r])))return i}return null}function E$(e){return function(t,n,i){ja(n,r=>{(!i||i.intersects(r.bounds))&&kY(e,t,r,r)})}}function Gye(e){return function(t,n,i){n.items.length&&(!i||i.intersects(n.bounds))&&kY(e,t,n.items[0],n.items)}}function kY(e,t,n,i){var r=n.opacity==null?1:n.opacity;r!==0&&(e(t,i)||(Vp(t,n),n.fill&&Lb(t,n,r)&&t.fill(),n.stroke&&Yp(t,n,r)&&t.stroke()))}function xS(e){return e=e||Ko,function(t,n,i,r,o,a){return i*=t.pixelRatio,r*=t.pixelRatio,jb(n,s=>{const l=s.bounds;if(!(l&&!l.contains(o,a)||!l)&&e(t,s,i,r,o,a))return s})}}function Ov(e,t){return function(n,i,r,o){var a=Array.isArray(i)?i[0]:i,s=t??a.fill,l=a.stroke&&n.isPointInStroke,u,c;return l&&(u=a.strokeWidth,c=a.strokeCap,n.lineWidth=u??1,n.lineCap=c??"butt"),e(n,i)?!1:s&&n.isPointInPath(r,o)||l&&n.isPointInStroke(r,o)}}function k$(e){return xS(Ov(e))}function Vf(e,t){return"translate("+e+","+t+")"}function R$(e){return"rotate("+e+")"}function qye(e,t){return"scale("+e+","+t+")"}function RY(e){return Vf(e.x||0,e.y||0)}function Vye(e){return Vf(e.x||0,e.y||0)+(e.angle?" "+R$(e.angle):"")}function Yye(e){return Vf(e.x||0,e.y||0)+(e.angle?" "+R$(e.angle):"")+(e.scaleX||e.scaleY?" "+qye(e.scaleX||1,e.scaleY||1):"")}function T$(e,t,n){function i(a,s){a("transform",Vye(s)),a("d",t(null,s))}function r(a,s){return t($v(a,s.angle),s),Vl(a,s).translate(s.x||0,s.y||0)}function o(a,s){var l=s.x||0,u=s.y||0,c=s.angle||0;a.translate(l,u),c&&a.rotate(c*=hc),a.beginPath(),t(a,s),c&&a.rotate(-c),a.translate(-l,-u)}return{type:e,tag:"path",nested:!1,attr:i,bound:r,draw:E$(o),pick:k$(o),isect:n||w$(o)}}var Zye=T$("arc",Nye);function Xye(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],i=e[0].orient==="horizontal"?"y":"x",r=e.length,o=1/0,a,s;--r>=0;)e[r].defined!==!1&&(s=Math.abs(e[r][i]-n),s<o&&(o=s,a=e[r]));return a}function Kye(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),i=e.length,r,o,a;--i>=0;)if(e[i].defined!==!1&&(r=e[i].x-t[0],o=e[i].y-t[1],a=r*r+o*o,a<n))return e[i];return null}function Jye(e,t){for(var n=e.length,i,r,o;--n>=0;)if(e[n].defined!==!1&&(i=e[n].x-t[0],r=e[n].y-t[1],o=i*i+r*r,i=e[n].size||1,o<i*i))return e[n];return null}function A$(e,t,n){function i(l,u){var c=u.mark.items;c.length&&l("d",t(null,c))}function r(l,u){var c=u.items;return c.length===0?l:(t($v(l),c),Vl(l,c[0]))}function o(l,u){l.beginPath(),t(l,u)}const a=Ov(o);function s(l,u,c,d,h,m){var g=u.items,y=u.bounds;return!g||!g.length||y&&!y.contains(h,m)?null:(c*=l.pixelRatio,d*=l.pixelRatio,a(l,g,c,d)?g[0]:null)}return{type:e,tag:"path",nested:!0,attr:i,bound:r,draw:Gye(o),pick:s,isect:S$,tip:n}}var Qye=A$("area",$ye,Xye);function eve(e,t){var n=t.clip;e.save(),_t(n)?(e.beginPath(),n(e),e.clip()):TY(e,t.group)}function TY(e,t){e.beginPath(),x$(t)?$m(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function AY(e){const t=da(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function tve(e,t){e("transform",RY(t))}function MY(e,t){const n=AY(t);e("d",$m(null,t,n,n))}function nve(e,t){e("class","background"),e("aria-hidden",!0),MY(e,t)}function ive(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?MY(e,t):e("d","")}function rve(e,t,n){const i=t.clip?_$(n,t,t):null;e("clip-path",i)}function ove(e,t){if(!t.clip&&t.items){const n=t.items,i=n.length;for(let r=0;r<i;++r)e.union(n[r].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Vl(e,t),e.translate(t.x||0,t.y||0)}function zy(e,t,n,i){const r=AY(t);e.beginPath(),$m(e,t,(n||0)+r,(i||0)+r)}const ave=Ov(zy),sve=Ov(zy,!1),lve=Ov(zy,!0);function uve(e,t,n,i){ja(t,r=>{const o=r.x||0,a=r.y||0,s=r.strokeForeground,l=r.opacity==null?1:r.opacity;(r.stroke||r.fill)&&l&&(zy(e,r,o,a),Vp(e,r),r.fill&&Lb(e,r,l)&&e.fill(),r.stroke&&!s&&Yp(e,r,l)&&e.stroke()),e.save(),e.translate(o,a),r.clip&&TY(e,r),n&&n.translate(-o,-a),ja(r,u=>{(u.marktype==="group"||i==null||i.includes(u.marktype))&&this.draw(e,u,n,i)}),n&&n.translate(o,a),e.restore(),s&&r.stroke&&l&&(zy(e,r,o,a),Vp(e,r),Yp(e,r,l)&&e.stroke())})}function cve(e,t,n,i,r,o){if(t.bounds&&!t.bounds.contains(r,o)||!t.items)return null;const a=n*e.pixelRatio,s=i*e.pixelRatio;return jb(t,l=>{let u,c,d;const h=l.bounds;if(h&&!h.contains(r,o))return;c=l.x||0,d=l.y||0;const m=c+(l.width||0),g=d+(l.height||0),y=l.clip;if(y&&(r<c||r>m||o<d||o>g))return;if(e.save(),e.translate(c,d),c=r-c,d=o-d,y&&x$(l)&&!lve(e,l,a,s))return e.restore(),null;const x=l.strokeForeground,b=t.interactive!==!1;return b&&x&&l.stroke&&sve(e,l,a,s)?(e.restore(),l):(u=jb(l,w=>fve(w,c,d)?this.pick(w,n,i,c,d):null),!u&&b&&(l.fill||!x&&l.stroke)&&ave(e,l,a,s)&&(u=l),e.restore(),u||null)})}function fve(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var dve={type:"group",tag:"g",nested:!1,attr:tve,bound:ove,draw:uve,pick:cve,isect:SY,content:rve,background:nve,foreground:ive},By={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function M$(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(i=>{e.image=i,e.image.url=e.url})),n}function F$(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function P$(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function _S(e,t){return e==="center"?t/2:e==="right"?t:0}function bS(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function hve(e,t,n){const i=M$(t,n),r=F$(t,i),o=P$(t,i),a=(t.x||0)-_S(t.align,r),s=(t.y||0)-bS(t.baseline,o),l=!i.src&&i.toDataURL?i.toDataURL():i.src||"";e("href",l,By["xmlns:xlink"],"xlink:href"),e("transform",Vf(a,s)),e("width",r),e("height",o),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function pve(e,t){const n=t.image,i=F$(t,n),r=P$(t,n),o=(t.x||0)-_S(t.align,i),a=(t.y||0)-bS(t.baseline,r);return e.set(o,a,o+i,a+r)}function mve(e,t,n){ja(t,i=>{if(n&&!n.intersects(i.bounds))return;const r=M$(i,this);let o=F$(i,r),a=P$(i,r);if(o===0||a===0)return;let s=(i.x||0)-_S(i.align,o),l=(i.y||0)-bS(i.baseline,a),u,c,d,h;i.aspect!==!1&&(c=r.width/r.height,d=i.width/i.height,c===c&&d===d&&c!==d&&(d<c?(h=o/c,l+=(a-h)/2,a=h):(h=a*c,s+=(o-h)/2,o=h))),(r.complete||r.toDataURL)&&(Vp(e,i),e.globalAlpha=(u=i.opacity)!=null?u:1,e.imageSmoothingEnabled=i.smooth!==!1,e.drawImage(r,s,l,o,a))})}var gve={type:"image",tag:"image",nested:!1,attr:hve,bound:pve,draw:mve,pick:xS(),isect:Ko,get:M$,xOffset:_S,yOffset:bS},yve=A$("line",Oye,Kye);function vve(e,t){var n=t.scaleX||1,i=t.scaleY||1;(n!==1||i!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",Yye(t)),e("d",t.path)}function b_(e,t){var n=t.path;if(n==null)return!0;var i=t.x||0,r=t.y||0,o=t.scaleX||1,a=t.scaleY||1,s=(t.angle||0)*hc,l=t.pathCache;(!l||l.path!==n)&&((t.pathCache=l=qp(n)).path=n),s&&e.rotate&&e.translate?(e.translate(i,r),e.rotate(s),jy(e,l,0,0,o,a),e.rotate(-s),e.translate(-i,-r)):jy(e,l,i,r,o,a)}function xve(e,t){return b_($v(e,t.angle),t)?e.set(0,0,0,0):Vl(e,t,!0)}var _ve={type:"path",tag:"path",nested:!1,attr:vve,bound:xve,draw:E$(b_),pick:k$(b_),isect:w$(b_)};function bve(e,t){e("d",$m(null,t))}function wve(e,t){var n,i;return Vl(e.set(n=t.x||0,i=t.y||0,n+t.width||0,i+t.height||0),t)}function X4(e,t){e.beginPath(),$m(e,t)}var Sve={type:"rect",tag:"path",nested:!1,attr:bve,bound:wve,draw:E$(X4),pick:k$(X4),isect:SY};function Cve(e,t){e("transform",RY(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function Eve(e,t){var n,i;return Vl(e.set(n=t.x||0,i=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:i),t)}function FY(e,t,n){var i,r,o,a;return t.stroke&&Yp(e,t,n)?(i=t.x||0,r=t.y||0,o=t.x2!=null?t.x2:i,a=t.y2!=null?t.y2:r,e.beginPath(),e.moveTo(i,r),e.lineTo(o,a),!0):!1}function kve(e,t,n){ja(t,i=>{if(!(n&&!n.intersects(i.bounds))){var r=i.opacity==null?1:i.opacity;r&&FY(e,i,r)&&(Vp(e,i),e.stroke())}})}function Rve(e,t,n,i){return e.isPointInStroke?FY(e,t,1)&&e.isPointInStroke(n,i):!1}var Tve={type:"rule",tag:"line",nested:!1,attr:Cve,bound:Eve,draw:kve,pick:xS(Rve),isect:CY},Ave=T$("shape",Iye),Mve=T$("symbol",Dye,S$);const K4=jW();var go={height:Ls,measureWidth:N$,estimateWidth:zb,width:zb,canvas:PY};PY(!0);function PY(e){go.width=e&&nc?N$:zb}function zb(e,t){return NY(mc(e,t),Ls(e))}function NY(e,t){return~~(.8*e.length*t)}function N$(e,t){return Ls(e)<=0||!(t=mc(e,t))?0:$Y(t,wS(e))}function $Y(e,t){const n=`(${t}) ${e}`;let i=K4.get(n);return i===void 0&&(nc.font=t,i=nc.measureText(e).width,K4.set(n,i)),i}function Ls(e){return e.fontSize!=null?+e.fontSize||0:11}function pc(e){return e.lineHeight!=null?e.lineHeight:Ls(e)+2}function Fve(e){return fe(e)?e.length>1?e:e[0]:e}function Iv(e){return Fve(e.lineBreak&&e.text&&!fe(e.text)?e.text.split(e.lineBreak):e.text)}function $$(e){const t=Iv(e);return(fe(t)?t.length-1:0)*pc(e)}function mc(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?Nve(e,n):n}function Pve(e){if(go.width===N$){const t=wS(e);return n=>$Y(n,t)}else if(go.width===zb){const t=Ls(e);return n=>NY(n,t)}else return t=>go.width(e,t)}function Nve(e,t){var n=+e.limit,i=Pve(e);if(i(t)<n)return t;var r=e.ellipsis||"",o=e.dir==="rtl",a=0,s=t.length,l;if(n-=i(r),o){for(;a<s;)l=a+s>>>1,i(t.slice(l))>n?a=l+1:s=l;return r+t.slice(a)}else{for(;a<s;)l=1+(a+s>>>1),i(t.slice(0,l))<n?a=l:s=l-1;return t.slice(0,a)+r}}function Dv(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function wS(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Ls(e)+"px "+Dv(e,t)}function O$(e){var t=e.baseline,n=Ls(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*pc(e):t==="line-bottom"?.29*n-.5*pc(e):0)}const $ve={left:"start",center:"middle",right:"end"},G0=new Yn;function SS(e){var t=e.x||0,n=e.y||0,i=e.radius||0,r;return i&&(r=(e.theta||0)-Sf,t+=i*Math.cos(r),n+=i*Math.sin(r)),G0.x1=t,G0.y1=n,G0}function Ove(e,t){var n=t.dx||0,i=(t.dy||0)+O$(t),r=SS(t),o=r.x1,a=r.y1,s=t.angle||0,l;e("text-anchor",$ve[t.align]||"start"),s?(l=Vf(o,a)+" "+R$(s),(n||i)&&(l+=" "+Vf(n,i))):l=Vf(o+n,a+i),e("transform",l)}function I$(e,t,n){var i=go.height(t),r=t.align,o=SS(t),a=o.x1,s=o.y1,l=t.dx||0,u=(t.dy||0)+O$(t)-Math.round(.8*i),c=Iv(t),d;if(fe(c)?(i+=pc(t)*(c.length-1),d=c.reduce((h,m)=>Math.max(h,go.width(t,m)),0)):d=go.width(t,c),r==="center"?l-=d/2:r==="right"&&(l-=d),e.set(l+=a,u+=s,l+d,u+i),t.angle&&!n)e.rotate(t.angle*hc,a,s);else if(n===2)return e.rotatedPoints(t.angle*hc,a,s);return e}function Ive(e,t,n){ja(t,i=>{var r=i.opacity==null?1:i.opacity,o,a,s,l,u,c,d;if(!(n&&!n.intersects(i.bounds)||r===0||i.fontSize<=0||i.text==null||i.text.length===0)){if(e.font=wS(i),e.textAlign=i.align||"left",o=SS(i),a=o.x1,s=o.y1,i.angle&&(e.save(),e.translate(a,s),e.rotate(i.angle*hc),a=s=0),a+=i.dx||0,s+=(i.dy||0)+O$(i),c=Iv(i),Vp(e,i),fe(c))for(u=pc(i),l=0;l<c.length;++l)d=mc(i,c[l]),i.fill&&Lb(e,i,r)&&e.fillText(d,a,s),i.stroke&&Yp(e,i,r)&&e.strokeText(d,a,s),s+=u;else d=mc(i,c),i.fill&&Lb(e,i,r)&&e.fillText(d,a,s),i.stroke&&Yp(e,i,r)&&e.strokeText(d,a,s);i.angle&&e.restore()}})}function Dve(e,t,n,i,r,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var a=SS(t),s=a.x1,l=a.y1,u=I$(G0,t,1),c=-t.angle*hc,d=Math.cos(c),h=Math.sin(c),m=d*r-h*o+(s-d*s+h*l),g=h*r+d*o+(l-h*s-d*l);return u.contains(m,g)}function Lve(e,t){const n=I$(G0,e,2);return tp(t,n[0],n[1],n[2],n[3])||tp(t,n[0],n[1],n[4],n[5])||tp(t,n[4],n[5],n[6],n[7])||tp(t,n[2],n[3],n[6],n[7])}var jve={type:"text",tag:"text",nested:!1,attr:Ove,bound:I$,draw:Ive,pick:xS(Dve),isect:Lve},zve=A$("trail",Lye,Jye),wo={arc:Zye,area:Qye,group:dve,image:gve,line:yve,path:_ve,rect:Sve,rule:Tve,shape:Ave,symbol:Mve,text:jve,trail:zve};function wA(e,t,n){var i=wo[e.mark.marktype],r=t||i.bound;return i.nested&&(e=e.mark),r(e.bounds||(e.bounds=new Yn),e,n)}var J4={mark:null};function OY(e,t,n){var i=wo[e.marktype],r=i.bound,o=e.items,a=o&&o.length,s,l,u,c;if(i.nested)return a?u=o[0]:(J4.mark=e,u=J4),c=wA(u,r,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new Yn,a)for(s=0,l=o.length;s<l;++s)t.union(wA(o[s],r,n));return e.bounds=t}const Bve=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function IY(e,t){return JSON.stringify(e,Bve,t)}function DY(e){const t=typeof e=="string"?JSON.parse(e):e;return LY(t)}function LY(e){var t=e.marktype,n=e.items,i,r,o;if(n)for(r=0,o=n.length;r<o;++r)i=t?"mark":"group",n[r][i]=e,n[r].zindex&&(n[r][i].zdirty=!0),(t||i)==="group"&&LY(n[r]);return t&&OY(e),e}function D$(e){arguments.length?this.root=DY(e):(this.root=jY({marktype:"group",name:"root",role:"frame"}),this.root.items=[new yS(this.root)])}D$.prototype={toJSON(e){return IY(this.root,e||0)},mark(e,t,n){t=t||this.root.items[0];const i=jY(e,t);return t.items[n]=i,i.zindex&&(i.group.zdirty=!0),i}};function jY(e,t){const n={bounds:new Yn,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Iu(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function L$(e,t){t=t.toLowerCase();for(var n=e.childNodes,i=0,r=n.length;i<r;++i)if(n[i].tagName.toLowerCase()===t)return n[i]}function Jn(e,t,n,i){var r=e.childNodes[t],o;return(!r||r.tagName.toLowerCase()!==n.toLowerCase())&&(o=r||null,r=Iu(e.ownerDocument,n,i),e.insertBefore(r,o)),r}function Io(e,t){for(var n=e.childNodes,i=n.length;i>t;)e.removeChild(n[--i]);return e}function zY(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function CS(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function Hve(e,t,n,i){var r=e&&e.mark,o,a;if(r&&(o=wo[r.marktype]).tip){for(a=CS(t,n),a[0]-=i[0],a[1]-=i[1];e=e.mark.group;)a[0]-=e.x||0,a[1]-=e.y||0;e=o.tip(r.items,a)}return e}function gc(e,t){this._active=null,this._handlers={},this._loader=e||U2(),this._tooltip=t||Uve}function Uve(e,t,n,i){e.element().setAttribute("title",i||"")}gc.prototype={initialize(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene(e){return arguments.length?(this._scene=e,this):this._scene},on(){},off(){},_handlerIndex(e,t,n){for(let i=e?e.length:0;--i>=0;)if(e[i].type===t&&(!n||e[i].handler===n))return i;return-1},handlers(e){const t=this._handlers,n=[];if(e)n.push(...t[this.eventName(e)]);else for(const i in t)n.push(...t[i]);return n},eventName(e){const t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref(e,t,n){this._loader.sanitize(n,{context:"href"}).then(i=>{const r=new MouseEvent(e.type,e),o=Iu(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(r)}).catch(()=>{})},handleTooltip(e,t,n){if(t&&t.tooltip!=null){t=Hve(t,e,this.canvas(),this._origin);const i=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,i)}},getItemBoundingClientRect(e){const t=this.canvas();if(!t)return;const n=t.getBoundingClientRect(),i=this._origin,r=e.bounds,o=r.width(),a=r.height();let s=r.x1+i[0]+n.left,l=r.y1+i[1]+n.top;for(;e.mark&&(e=e.mark.group);)s+=e.x||0,l+=e.y||0;return{x:s,y:l,width:o,height:a,left:s,top:l,right:s+o,bottom:l+a}}};function Ro(e){this._el=null,this._bgcolor=null,this._loader=new b$(e)}Ro.prototype={initialize(e,t,n,i,r){return this._el=e,this.resize(t,n,i,r)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(e){return arguments.length===0?this._bgcolor:(this._bgcolor=e,this)},resize(e,t,n,i){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=i||1,this},dirty(){},render(e,t){const n=this;return n._call=function(){n._render(e,t)},n._call(),n._call=null,n},_render(){},renderAsync(e,t){const n=this.render(e,t);return this._ready?this._ready.then(()=>n):Promise.resolve(n)},_load(e,t){var n=this,i=n._loader[e](t);if(!n._ready){const r=n._call;n._ready=n._loader.ready().then(o=>{o&&r(),n._ready=null})}return i},sanitizeURL(e){return this._load("sanitizeURL",e)},loadImage(e){return this._load("loadImage",e)}};const Wve="keydown",Gve="keypress",qve="keyup",BY="dragenter",w_="dragleave",HY="dragover",SA="pointerdown",Vve="pointerup",Bb="pointermove",q0="pointerout",UY="pointerover",CA="mousedown",Yve="mouseup",WY="mousemove",EA="mouseout",GY="mouseover",Hb="click",Zve="dblclick",Xve="wheel",qY="mousewheel",Ub="touchstart",Wb="touchmove",Gb="touchend",Kve=[Wve,Gve,qve,BY,w_,HY,SA,Vve,Bb,q0,UY,CA,Yve,WY,EA,GY,Hb,Zve,Xve,qY,Ub,Wb,Gb],kA=Bb,Hy=q0,RA=Hb;function yc(e,t){gc.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}const Jve=e=>e===Ub||e===Wb||e===Gb?[Ub,Wb,Gb]:[e];function Q4(e,t){Jve(t).forEach(n=>Qve(e,n))}function Qve(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?i=>e[t](i):i=>e.fire(t,i)))}function g0(e,t,n){t.forEach(i=>e.fire(i,n))}function ej(e,t,n){return function(i){const r=this._active,o=this.pickEvent(i);o===r?g0(this,e,i):((!r||!r.exit)&&g0(this,n,i),this._active=o,g0(this,t,i),g0(this,e,i))}}function tj(e){return function(t){g0(this,e,t),this._active=null}}be(yc,gc,{initialize(e,t,n){return this._canvas=e&&L$(e,"canvas"),[Hb,CA,SA,Bb,q0,w_].forEach(i=>Q4(this,i)),gc.prototype.initialize.call(this,e,t,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:Kve,DOMMouseScroll(e){this.fire(qY,e)},pointermove:ej([Bb,WY],[UY,GY],[q0,EA]),dragover:ej([HY],[BY],[w_]),pointerout:tj([q0,EA]),dragleave:tj([w_]),pointerdown(e){this._down=this._active,this.fire(SA,e)},mousedown(e){this._down=this._active,this.fire(CA,e)},click(e){this._down===this._active&&(this.fire(Hb,e),this._down=null)},touchstart(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Ub,e,!0)},touchmove(e){this.fire(Wb,e,!0)},touchend(e){this.fire(Gb,e,!0),this._touch=null},fire(e,t,n){const i=n?this._touch:this._active,r=this._handlers[e];if(t.vegaType=e,e===RA&&i&&i.href?this.handleHref(t,i,i.href):(e===kA||e===Hy)&&this.handleTooltip(t,i,e!==Hy),r)for(let o=0,a=r.length;o<a;++o)r[o].handler.call(this._obj,t,i)},on(e,t){const n=this.eventName(e),i=this._handlers;return this._handlerIndex(i[n],e,t)<0&&(Q4(this,e),(i[n]||(i[n]=[])).push({type:e,handler:t})),this},off(e,t){const n=this.eventName(e),i=this._handlers[n],r=this._handlerIndex(i,e,t);return r>=0&&i.splice(r,1),this},pickEvent(e){const t=CS(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick(e,t,n,i,r){const o=this.context();return wo[e.marktype].pick.call(this,o,e,t,n,i,r)}});function e1e(){return typeof window<"u"&&window.devicePixelRatio||1}function t1e(e,t,n,i,r,o){const a=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,s=e.getContext("2d"),l=a?e1e():r;e.width=t*l,e.height=n*l;for(const u in o)s[u]=o[u];return a&&l!==1&&(e.style.width=t+"px",e.style.height=n+"px"),s.pixelRatio=l,s.setTransform(l,0,0,l,l*i[0],l*i[1]),e}function Uy(e){Ro.call(this,e),this._options={},this._redraw=!1,this._dirty=new Yn,this._tempb=new Yn}const nj=Ro.prototype,n1e=(e,t,n)=>new Yn().set(0,0,t,n).translate(-e[0],-e[1]);function i1e(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}be(Uy,Ro,{initialize(e,t,n,i,r,o){return this._options=o||{},this._canvas=this._options.externalContext?null:tc(1,1,this._options.type),e&&this._canvas&&(Io(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),nj.initialize.call(this,e,t,n,i,r)},resize(e,t,n,i){if(nj.resize.call(this,e,t,n,i),this._canvas)t1e(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const r=this._options.externalContext;r||le("CanvasRenderer is missing a valid canvas or context"),r.scale(this._scale,this._scale),r.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(e){const t=this._tempb.clear().union(e.bounds);let n=e.mark.group;for(;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render(e,t){const n=this.context(),i=this._origin,r=this._width,o=this._height,a=this._dirty,s=n1e(i,r,o);n.save();const l=this._redraw||a.empty()?(this._redraw=!1,s.expand(1)):i1e(n,s.intersect(a),i);return this.clear(-i[0],-i[1],r,o),this.draw(n,e,l,t),n.restore(),a.clear(),this},draw(e,t,n,i){if(t.marktype!=="group"&&i!=null&&!i.includes(t.marktype))return;const r=wo[t.marktype];t.clip&&eve(e,t),r.draw.call(this,e,t,n,i),t.clip&&e.restore()},clear(e,t,n,i){const r=this._options,o=this.context();r.type!=="pdf"&&!r.externalContext&&o.clearRect(e,t,n,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(e,t,n,i))}});function j$(e,t){gc.call(this,e,t);const n=this;n._hrefHandler=TA(n,(i,r)=>{r&&r.href&&n.handleHref(i,r,r.href)}),n._tooltipHandler=TA(n,(i,r)=>{n.handleTooltip(i,r,i.type!==Hy)})}const TA=(e,t)=>n=>{let i=n.target.__data__;i=Array.isArray(i)?i[0]:i,n.vegaType=n.type,t.call(e._obj,n,i)};be(j$,gc,{initialize(e,t,n){let i=this._svg;return i&&(i.removeEventListener(RA,this._hrefHandler),i.removeEventListener(kA,this._tooltipHandler),i.removeEventListener(Hy,this._tooltipHandler)),this._svg=i=e&&L$(e,"svg"),i&&(i.addEventListener(RA,this._hrefHandler),i.addEventListener(kA,this._tooltipHandler),i.addEventListener(Hy,this._tooltipHandler)),gc.prototype.initialize.call(this,e,t,n)},canvas(){return this._svg},on(e,t){const n=this.eventName(e),i=this._handlers;if(this._handlerIndex(i[n],e,t)<0){const o={type:e,handler:t,listener:TA(this,t)};(i[n]||(i[n]=[])).push(o),this._svg&&this._svg.addEventListener(n,o.listener)}return this},off(e,t){const n=this.eventName(e),i=this._handlers[n],r=this._handlerIndex(i,e,t);return r>=0&&(this._svg&&this._svg.removeEventListener(n,i[r].listener),i.splice(r,1)),this}});const VY="aria-hidden",z$="aria-label",B$="role",H$="aria-roledescription",YY="graphics-object",U$="graphics-symbol",ZY=(e,t,n)=>({[B$]:e,[H$]:t,[z$]:n||void 0}),r1e=Da(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),ij={axis:{desc:"axis",caption:s1e},legend:{desc:"legend",caption:l1e},"title-text":{desc:"title",caption:e=>`Title text '${oj(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${oj(e)}'`}},rj={ariaRole:B$,ariaRoleDescription:H$,description:z$};function XY(e,t){const n=t.aria===!1;if(e(VY,n||void 0),n||t.description==null)for(const i in rj)e(rj[i],void 0);else{const i=t.mark.marktype;e(z$,t.description),e(B$,t.ariaRole||(i==="group"?YY:U$)),e(H$,t.ariaRoleDescription||`${i} mark`)}}function KY(e){return e.aria===!1?{[VY]:!0}:r1e[e.role]?null:ij[e.role]?a1e(e,ij[e.role]):o1e(e)}function o1e(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(i=>i.description!=null&&i.aria!==!1);return ZY(n?YY:U$,`${t} mark container`,e.description)}function a1e(e,t){try{const n=e.items[0],i=t.caption||(()=>"");return ZY(t.role||U$,t.desc,n.description||i(n))}catch{return null}}function oj(e){return $e(e.text).join(" ")}function s1e(e){const t=e.datum,n=e.orient,i=t.title?JY(e):null,r=e.context,o=r.scales[t.scale].value,a=r.dataflow.locale(),s=o.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(i?` titled '${i}'`:"")+` for a ${Gp(s)?"discrete":s} scale with ${hY(a,o,e)}`}function l1e(e){const t=e.datum,n=t.title?JY(e):null,i=`${t.type||""} legend`.trim(),r=t.scales,o=Object.keys(r),a=e.context,s=a.scales[r[o[0]]].value,l=a.dataflow.locale();return c1e(i)+(n?` titled '${n}'`:"")+` for ${u1e(o)} with ${hY(l,s,e)}`}function JY(e){try{return $e(Ot(e.items).items[0].text).join(" ")}catch{return null}}function u1e(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Ot(e)}function c1e(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const QY=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),f1e=e=>QY(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function W$(){let e="",t="",n="";const i=[],r=()=>t=n="",o=l=>{t&&(e+=`${t}>${n}`,r()),i.push(l)},a=(l,u)=>(u!=null&&(t+=` ${l}="${f1e(u)}"`),s),s={open(l){o(l),t="<"+l;for(var u=arguments.length,c=new Array(u>1?u-1:0),d=1;d<u;d++)c[d-1]=arguments[d];for(const h of c)for(const m in h)a(m,h[m]);return s},close(){const l=i.pop();return t?e+=t+(n?`>${n}</${l}>`:"/>"):e+=`</${l}>`,r(),s},attr:a,text:l=>(n+=QY(l),s),toString:()=>e};return s}const eZ=e=>tZ(W$(),e)+"";function tZ(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,i=n.length;for(let r=0;r<i;++r)e.attr(n[r].name,n[r].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const i of n)i.nodeType===3?e.text(i.nodeValue):tZ(e,i)}return e.close()}const qb={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},Vb={blend:"mix-blend-mode"},nZ={fill:"none","stroke-miterlimit":10},Lg=0,aj="http://www.w3.org/2000/xmlns/",Kn=By.xmlns;function ES(e){Ro.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const bk=Ro.prototype;be(ES,Ro,{initialize(e,t,n,i,r){return this._defs={},this._clearDefs(),e&&(this._svg=Jn(e,0,"svg",Kn),this._svg.setAttributeNS(aj,"xmlns",Kn),this._svg.setAttributeNS(aj,"xmlns:xlink",By["xmlns:xlink"]),this._svg.setAttribute("version",By.version),this._svg.setAttribute("class","marks"),Io(e,1),this._root=Jn(this._svg,Lg,"g",Kn),Du(this._root,nZ),Io(this._svg,Lg+1)),this.background(this._bgcolor),bk.initialize.call(this,e,t,n,i,r)},background(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),bk.background.apply(this,arguments)},resize(e,t,n,i){return bk.resize.call(this,e,t,n,i),this._svg&&(Du(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas(){return this._svg},svg(){const e=this._svg,t=this._bgcolor;if(!e)return null;let n;t&&(e.removeAttribute("style"),n=Jn(e,Lg,"rect",Kn),Du(n,{width:this._width,height:this._height,fill:t}));const i=eZ(e);return t&&(e.removeChild(n),this._svg.style.setProperty("background-color",t)),i},_render(e,t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e,void 0,t),Io(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty(e){return this._dirtyAll||!e._svg||!e._svg.ownerSVGElement||e.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const e=this._dirty;if(!e.length||!this._dirtyID)return!0;const t=++this._dirtyID;let n,i,r,o,a,s,l;for(a=0,s=e.length;a<s;++a)if(n=e[a],i=n.mark,i.marktype!==r&&(r=i.marktype,o=wo[r]),i.zdirty&&i.dirty!==t&&(this._dirtyAll=!1,sj(n,t),i.items.forEach(u=>{u.dirty=t})),!i.zdirty){if(n.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):n._svg&&(l=n._svg.parentNode,l&&l.removeChild(n._svg)),n._svg=null;continue}n=o.nested?i.items[0]:n,n._update!==t&&(!n._svg||!n._svg.ownerSVGElement?(this._dirtyAll=!1,sj(n,t)):this._update(o,n._svg,n),n._update=t)}return!this._dirtyAll},mark(e,t,n,i){if(!this.isDirty(t))return t._svg;const r=this._svg,o=t.marktype,a=wo[o],s=t.interactive===!1?"none":null,l=a.tag==="g",u=lj(t,e,n,"g",r);if(o!=="group"&&i!=null&&!i.includes(o))return Io(u,0),t._svg;u.setAttribute("class",zY(t));const c=KY(t);for(const g in c)sr(u,g,c[g]);l||sr(u,"pointer-events",s),sr(u,"clip-path",t.clip?_$(this,t,t.group):null);let d=null,h=0;const m=g=>{const y=this.isDirty(g),x=lj(g,u,d,a.tag,r);y&&(this._update(a,x,g),l&&p1e(this,x,g,i)),d=x,++h};return a.nested?t.items.length&&m(t.items[0]):ja(t,m),Io(u,h),u},_update(e,t,n){wl=t,Wi=t.__values__,XY(V0,n),e.attr(V0,n,this);const i=g1e[e.type];i&&i.call(this,e,t,n),wl&&this.style(wl,n)},style(e,t){if(t!=null){for(const n in qb){let i=n==="font"?Dv(t):t[n];if(i===Wi[n])continue;const r=qb[n];i==null?e.removeAttribute(r):(y$(i)&&(i=mY(i,this._defs.gradient,iZ())),e.setAttribute(r,i+"")),Wi[n]=i}for(const n in Vb)S_(e,Vb[n],t[n])}},defs(){const e=this._svg,t=this._defs;let n=t.el,i=0;for(const r in t.gradient)n||(t.el=n=Jn(e,Lg+1,"defs",Kn)),i=d1e(n,t.gradient[r],i);for(const r in t.clipping)n||(t.el=n=Jn(e,Lg+1,"defs",Kn)),i=h1e(n,t.clipping[r],i);n&&(i===0?(e.removeChild(n),t.el=null):Io(n,i))},_clearDefs(){const e=this._defs;e.gradient={},e.clipping={}}});function sj(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function d1e(e,t,n){let i,r,o;if(t.gradient==="radial"){let a=Jn(e,n++,"pattern",Kn);Du(a,{id:Db+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),a=Jn(a,0,"rect",Kn),Du(a,{width:1,height:1,fill:`url(${iZ()}#${t.id})`}),e=Jn(e,n++,"radialGradient",Kn),Du(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=Jn(e,n++,"linearGradient",Kn),Du(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(i=0,r=t.stops.length;i<r;++i)o=Jn(e,i,"stop",Kn),o.setAttribute("offset",t.stops[i].offset),o.setAttribute("stop-color",t.stops[i].color);return Io(e,i),n}function h1e(e,t,n){let i;return e=Jn(e,n,"clipPath",Kn),e.setAttribute("id",t.id),t.path?(i=Jn(e,0,"path",Kn),i.setAttribute("d",t.path)):(i=Jn(e,0,"rect",Kn),Du(i,{x:0,y:0,width:t.width,height:t.height})),Io(e,1),n+1}function p1e(e,t,n,i){t=t.lastChild.previousSibling;let r,o=0;ja(n,a=>{r=e.mark(t,a,r,i),++o}),Io(t,1+o)}function lj(e,t,n,i,r){let o=e._svg,a;if(!o&&(a=t.ownerDocument,o=Iu(a,i,Kn),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},i==="g"))){const s=Iu(a,"path",Kn);o.appendChild(s),s.__data__=e;const l=Iu(a,"g",Kn);o.appendChild(l),l.__data__=e;const u=Iu(a,"path",Kn);o.appendChild(u),u.__data__=e,u.__values__={fill:"default"}}return(o.ownerSVGElement!==r||m1e(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}function m1e(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let wl=null,Wi=null;const g1e={group(e,t,n){const i=wl=t.childNodes[2];Wi=i.__values__,e.foreground(V0,n,this),Wi=t.__values__,wl=t.childNodes[1],e.content(V0,n,this);const r=wl=t.childNodes[0];e.background(V0,n,this);const o=n.mark.interactive===!1?"none":null;if(o!==Wi.events&&(sr(i,"pointer-events",o),sr(r,"pointer-events",o),Wi.events=o),n.strokeForeground&&n.stroke){const a=n.fill;sr(i,"display",null),this.style(r,n),sr(r,"stroke",null),a&&(n.fill=null),Wi=i.__values__,this.style(i,n),a&&(n.fill=a),wl=null}else sr(i,"display","none")},image(e,t,n){n.smooth===!1?(S_(t,"image-rendering","optimizeSpeed"),S_(t,"image-rendering","pixelated")):S_(t,"image-rendering",null)},text(e,t,n){const i=Iv(n);let r,o,a,s;fe(i)?(o=i.map(l=>mc(n,l)),r=o.join(`
`),r!==Wi.text&&(Io(t,0),a=t.ownerDocument,s=pc(n),o.forEach((l,u)=>{const c=Iu(a,"tspan",Kn);c.__data__=n,c.textContent=l,u&&(c.setAttribute("x",0),c.setAttribute("dy",s)),t.appendChild(c)}),Wi.text=r)):(o=mc(n,i),o!==Wi.text&&(t.textContent=o,Wi.text=o)),sr(t,"font-family",Dv(n)),sr(t,"font-size",Ls(n)+"px"),sr(t,"font-style",n.fontStyle),sr(t,"font-variant",n.fontVariant),sr(t,"font-weight",n.fontWeight)}};function V0(e,t,n){t!==Wi[e]&&(n?y1e(wl,e,t,n):sr(wl,e,t),Wi[e]=t)}function S_(e,t,n){n!==Wi[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Wi[t]=n)}function Du(e,t){for(const n in t)sr(e,n,t[n])}function sr(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function y1e(e,t,n,i){n!=null?e.setAttributeNS(i,t,n):e.removeAttributeNS(i,t)}function iZ(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function G$(e){Ro.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}be(G$,Ro,{svg(){return this._text},_render(e){const t=W$();t.open("svg",xt({},By,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const n=this._bgcolor;return n&&n!=="transparent"&&n!=="none"&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",nZ,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark(e,t){const n=wo[t.marktype],i=n.tag,r=[XY,n.attr];e.open("g",{class:zY(t),"clip-path":t.clip?_$(this,t,t.group):null},KY(t),{"pointer-events":i!=="g"&&t.interactive===!1?"none":null});const o=a=>{const s=this.href(a);if(s&&e.open("a",s),e.open(i,this.attr(t,a,r,i!=="g"?i:null)),i==="text"){const l=Iv(a);if(fe(l)){const u={x:0,dy:pc(a)};for(let c=0;c<l.length;++c)e.open("tspan",c?u:null).text(mc(a,l[c])).close()}else e.text(mc(a,l))}else if(i==="g"){const l=a.strokeForeground,u=a.fill,c=a.stroke;l&&c&&(a.stroke=null),e.open("path",this.attr(t,a,n.background,"bgrect")).close(),e.open("g",this.attr(t,a,n.content)),ja(a,d=>this.mark(e,d)),e.close(),l&&c?(u&&(a.fill=null),a.stroke=c,e.open("path",this.attr(t,a,n.foreground,"bgrect")).close(),u&&(a.fill=u)):e.open("path",this.attr(t,a,n.foreground,"bgfore")).close()}e.close(),s&&e.close()};return n.nested?t.items&&t.items.length&&o(t.items[0]):ja(t,o),e.close()},href(e){const t=e.href;let n;if(t){if(n=this._hrefs&&this._hrefs[t])return n;this.sanitizeURL(t).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[t]=i})}return null},attr(e,t,n,i){const r={},o=(a,s,l,u)=>{r[u||a]=s};return Array.isArray(n)?n.forEach(a=>a(o,t,this)):n(o,t,this),i&&v1e(r,t,e,i,this._defs),r},defs(e){const t=this._defs.gradient,n=this._defs.clipping;if(Object.keys(t).length+Object.keys(n).length!==0){e.open("defs");for(const r in t){const o=t[r],a=o.stops;o.gradient==="radial"?(e.open("pattern",{id:Db+r,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+r+")"}).close(),e.close(),e.open("radialGradient",{id:r,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):e.open("linearGradient",{id:r,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let s=0;s<a.length;++s)e.open("stop",{offset:a[s].offset,"stop-color":a[s].color}).close();e.close()}for(const r in n){const o=n[r];e.open("clipPath",{id:r}),o.path?e.open("path",{d:o.path}).close():e.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),e.close()}e.close()}}});function v1e(e,t,n,i,r){let o;if(t==null||(i==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),i==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;i==="image"&&t.smooth===!1&&(o=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),i==="text"&&(e["font-family"]=Dv(t),e["font-size"]=Ls(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const a in qb){let s=t[a];const l=qb[a];s==="transparent"&&(l==="fill"||l==="stroke")||s!=null&&(y$(s)&&(s=mY(s,r.gradient,"")),e[l]=s)}for(const a in Vb){const s=t[a];s!=null&&(o=o||[],o.push(`${Vb[a]}: ${s};`))}return o&&(e.style=o.join(" ")),e}const va={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function x1e(e){va.svgMarkTypes=e.svgMarkTypes??["text"],va.svgOnTop=e.svgOnTop??!0,va.debug=e.debug??!1}function Yb(e){Ro.call(this,e),this._svgRenderer=new ES(e),this._canvasRenderer=new Uy(e)}const uj=Ro.prototype;be(Yb,Ro,{initialize(e,t,n,i,r){this._root_el=Jn(e,0,"div");const o=Jn(this._root_el,0,"div"),a=Jn(this._root_el,1,"div");return this._root_el.style.position="relative",va.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=va.svgOnTop?a:o,this._canvasEl=va.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,t,n,i,r),this._svgRenderer.initialize(this._svgEl,t,n,i,r),uj.initialize.call(this,e,t,n,i,r)},dirty(e){return va.svgMarkTypes.includes(e.mark.marktype)?this._svgRenderer.dirty(e):this._canvasRenderer.dirty(e),this},_render(e,t){const i=(t??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(r=>!va.svgMarkTypes.includes(r));this._svgRenderer.render(e,va.svgMarkTypes),this._canvasRenderer.render(e,i)},resize(e,t,n,i){return uj.resize.call(this,e,t,n,i),this._svgRenderer.resize(e,t,n,i),this._canvasRenderer.resize(e,t,n,i),this},background(e){return va.svgOnTop?this._canvasRenderer.background(e):this._svgRenderer.background(e),this}});function q$(e,t){yc.call(this,e,t)}be(q$,yc,{initialize(e,t,n){const i=Jn(Jn(e,0,"div"),va.svgOnTop?0:1,"div");return yc.prototype.initialize.call(this,i,t,n)}});const rZ="canvas",oZ="hybrid",aZ="png",sZ="svg",lZ="none",Lu={Canvas:rZ,PNG:aZ,SVG:sZ,Hybrid:oZ,None:lZ},fd={};fd[rZ]=fd[aZ]={renderer:Uy,headless:Uy,handler:yc};fd[sZ]={renderer:ES,headless:G$,handler:j$};fd[oZ]={renderer:Yb,headless:Yb,handler:q$};fd[lZ]={};function kS(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(fd[e]=t,this):fd[e]}function uZ(e,t,n){const i=[],r=new Yn().union(t),o=e.marktype;return o?cZ(e,r,n,i):o==="group"?fZ(e,r,n,i):le("Intersect scene must be mark node or group item.")}function cZ(e,t,n,i){if(_1e(e,t,n)){const r=e.items,o=e.marktype,a=r.length;let s=0;if(o==="group")for(;s<a;++s)fZ(r[s],t,n,i);else for(const l=wo[o].isect;s<a;++s){const u=r[s];dZ(u,t,l)&&i.push(u)}}return i}function _1e(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function fZ(e,t,n,i){n&&n(e.mark)&&dZ(e,t,wo.group.isect)&&i.push(e);const r=e.items,o=r&&r.length;if(o){const a=e.x||0,s=e.y||0;t.translate(-a,-s);for(let l=0;l<o;++l)cZ(r[l],t,n,i);t.translate(a,s)}return i}function dZ(e,t,n){const i=e.bounds;return t.encloses(i)||t.intersects(i)&&n(e,t)}const wk=new Yn;function hZ(e){const t=e.clip;if(_t(t))t($v(wk.clear()));else if(t)wk.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(wk)}const b1e=1e-9;function V$(e,t,n){return e===t?!0:n==="path"?pZ(e,t):e instanceof Date&&t instanceof Date?+e==+t:zt(e)&&zt(t)?Math.abs(e-t)<=b1e:!e||!t||!Ie(e)&&!Ie(t)?e==t:w1e(e,t)}function pZ(e,t){return V$(qp(e),qp(t))}function w1e(e,t){var n=Object.keys(e),i=Object.keys(t),r,o;if(n.length!==i.length)return!1;for(n.sort(),i.sort(),o=n.length-1;o>=0;o--)if(n[o]!=i[o])return!1;for(o=n.length-1;o>=0;o--)if(r=n[o],!V$(e[r],t[r],r))return!1;return typeof e==typeof t}function S1e(){wY(),V0e()}const Zp="top",Ea="left",ka="right",vc="bottom",C1e="top-left",E1e="top-right",k1e="bottom-left",R1e="bottom-right",Y$="start",AA="middle",ur="end",T1e="x",A1e="y",RS="group",Z$="axis",X$="title",M1e="frame",F1e="scope",K$="legend",mZ="row-header",gZ="row-footer",yZ="row-title",vZ="column-header",xZ="column-footer",_Z="column-title",P1e="padding",N1e="symbol",bZ="fit",wZ="fit-x",SZ="fit-y",$1e="pad",J$="none",bx="all",MA="each",Q$="flush",ju="column",zu="row";function CZ(e){ne.call(this,null,e)}be(CZ,ne,{transform(e,t){const n=t.dataflow,i=e.mark,r=i.marktype,o=wo[r],a=o.bound;let s=i.bounds,l;if(o.nested)i.items.length&&n.dirty(i.items[0]),s=wx(i,a),i.items.forEach(u=>{u.bounds.clear().union(s)});else if(r===RS||e.modified())switch(t.visit(t.MOD,u=>n.dirty(u)),s.clear(),i.items.forEach(u=>s.union(wx(u,a))),i.role){case Z$:case K$:case X$:t.reflow()}else l=t.changed(t.REM),t.visit(t.ADD,u=>{s.union(wx(u,a))}),t.visit(t.MOD,u=>{l=l||s.alignsWith(u.bounds),n.dirty(u),s.union(wx(u,a))}),l&&(s.clear(),i.items.forEach(u=>s.union(u.bounds)));return hZ(i),t.modifies("bounds")}});function wx(e,t,n){return t(e.bounds.clear(),e,n)}const cj=":vega_identifier:";function eO(e){ne.call(this,0,e)}eO.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};be(eO,ne,{transform(e,t){const n=O1e(t.dataflow),i=e.as;let r=n.value;return t.visit(t.ADD,o=>o[i]=o[i]||++r),n.set(this.value=r),t}});function O1e(e){return e._signals[cj]||(e._signals[cj]=e.add(0))}function EZ(e){ne.call(this,null,e)}be(EZ,ne,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,I1e(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const i=n.marktype===RS?yS:gS;return t.visit(t.ADD,r=>i.call(r,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function I1e(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function kZ(e){ne.call(this,null,e)}const fj={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((i,r)=>!r||!RZ(n.bounds,i.bounds,t)?(n=i,1):i.opacity=0)}},RZ=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),dj=(e,t)=>{for(var n=1,i=e.length,r=e[0].bounds,o;n<i;r=o,++n)if(RZ(r,o=e[n].bounds,t))return!0},D1e=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},L1e=(e,t,n)=>{var i=e.range(),r=new Yn;return t===Zp||t===vc?r.set(i[0],-1/0,i[1],1/0):r.set(-1/0,i[0],1/0,i[1]),r.expand(n||1),o=>r.encloses(o.bounds)},hj=e=>(e.forEach(t=>t.opacity=1),e),pj=(e,t)=>e.reflow(t.modified()).modifies("opacity");be(kZ,ne,{transform(e,t){const n=fj[e.method]||fj.parity,i=e.separation||0;let r=t.materialize(t.SOURCE).source,o,a;if(!r||!r.length)return;if(!e.method)return e.modified("method")&&(hj(r),t=pj(t,e)),t;if(r=r.filter(D1e),!r.length)return;if(e.sort&&(r=r.slice().sort(e.sort)),o=hj(r),t=pj(t,e),o.length>=3&&dj(o,i)){do o=n(o,i);while(o.length>=3&&dj(o,i));o.length<3&&!Ot(r).opacity&&(o.length>1&&(Ot(o).opacity=0),Ot(r).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(a=L1e(e.boundScale,e.boundOrient,+e.boundTolerance),r.forEach(l=>{a(l)||(l.opacity=0)}));const s=o[0].mark.bounds.clear();return r.forEach(l=>{l.opacity&&s.union(l.bounds)}),t}});function TZ(e){ne.call(this,null,e)}be(TZ,ne,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,i=>n.dirty(i)),t.fields&&t.fields.zindex){const i=t.source&&t.source[0];i&&(i.mark.zdirty=!0)}}});const Ui=new Yn;function np(e,t,n){return e[t]===n?0:(e[t]=n,1)}function j1e(e){var t=e.items[0].orient;return t===Ea||t===ka}function z1e(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function B1e(e,t,n,i){var r=t.items[0],o=r.datum,a=r.translate!=null?r.translate:.5,s=r.orient,l=z1e(o),u=r.range,c=r.offset,d=r.position,h=r.minExtent,m=r.maxExtent,g=o.title&&r.items[l[2]].items[0],y=r.titlePadding,x=r.bounds,b=g&&$$(g),w=0,S=0,k,R;switch(Ui.clear().union(x),x.clear(),(k=l[0])>-1&&x.union(r.items[k].bounds),(k=l[1])>-1&&x.union(r.items[k].bounds),s){case Zp:w=d||0,S=-c,R=Math.max(h,Math.min(m,-x.y1)),x.add(0,-R).add(u,0),g&&Sx(e,g,R,y,b,0,-1,x);break;case Ea:w=-c,S=d||0,R=Math.max(h,Math.min(m,-x.x1)),x.add(-R,0).add(0,u),g&&Sx(e,g,R,y,b,1,-1,x);break;case ka:w=n+c,S=d||0,R=Math.max(h,Math.min(m,x.x2)),x.add(0,0).add(R,u),g&&Sx(e,g,R,y,b,1,1,x);break;case vc:w=d||0,S=i+c,R=Math.max(h,Math.min(m,x.y2)),x.add(0,0).add(u,R),g&&Sx(e,g,R,y,0,0,1,x);break;default:w=r.x,S=r.y}return Vl(x.translate(w,S),r),np(r,"x",w+a)|np(r,"y",S+a)&&(r.bounds=Ui,e.dirty(r),r.bounds=x,e.dirty(r)),r.mark.bounds.clear().union(x)}function Sx(e,t,n,i,r,o,a,s){const l=t.bounds;if(t.auto){const u=a*(n+r+i);let c=0,d=0;e.dirty(t),o?c=(t.x||0)-(t.x=u):d=(t.y||0)-(t.y=u),t.mark.bounds.clear().union(l.translate(-c,-d)),e.dirty(t)}s.union(l)}const mj=(e,t)=>Math.floor(Math.min(e,t)),gj=(e,t)=>Math.ceil(Math.max(e,t));function H1e(e){var t=e.items,n=t.length,i=0,r,o;const a={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;i<n;++i)if(r=t[i],o=r.items,r.marktype===RS)switch(r.role){case Z$:case K$:case X$:break;case mZ:a.rowheaders.push(...o);break;case gZ:a.rowfooters.push(...o);break;case vZ:a.colheaders.push(...o);break;case xZ:a.colfooters.push(...o);break;case yZ:a.rowtitle=o[0];break;case _Z:a.coltitle=o[0];break;default:a.marks.push(...o)}return a}function U1e(e){return new Yn().set(0,0,e.width||0,e.height||0)}function W1e(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function _n(e,t,n){const i=Ie(e)?e[t]:e;return i??(n!==void 0?n:0)}function yj(e){return e<0?Math.ceil(-e):0}function AZ(e,t,n){var i=!n.nodirty,r=n.bounds===Q$?U1e:W1e,o=Ui.set(0,0,0,0),a=_n(n.align,ju),s=_n(n.align,zu),l=_n(n.padding,ju),u=_n(n.padding,zu),c=n.columns||t.length,d=c<=0?1:Math.ceil(t.length/c),h=t.length,m=Array(h),g=Array(c),y=0,x=Array(h),b=Array(d),w=0,S=Array(h),k=Array(h),R=Array(h),M,T,N,D,I,z,X,W,U,B,V;for(T=0;T<c;++T)g[T]=0;for(T=0;T<d;++T)b[T]=0;for(T=0;T<h;++T)z=t[T],I=R[T]=r(z),z.x=z.x||0,S[T]=0,z.y=z.y||0,k[T]=0,N=T%c,D=~~(T/c),y=Math.max(y,X=Math.ceil(I.x2)),w=Math.max(w,W=Math.ceil(I.y2)),g[N]=Math.max(g[N],X),b[D]=Math.max(b[D],W),m[T]=l+yj(I.x1),x[T]=u+yj(I.y1),i&&e.dirty(t[T]);for(T=0;T<h;++T)T%c===0&&(m[T]=0),T<c&&(x[T]=0);if(a===MA)for(N=1;N<c;++N){for(V=0,T=N;T<h;T+=c)V<m[T]&&(V=m[T]);for(T=N;T<h;T+=c)m[T]=V+g[N-1]}else if(a===bx){for(V=0,T=0;T<h;++T)T%c&&V<m[T]&&(V=m[T]);for(T=0;T<h;++T)T%c&&(m[T]=V+y)}else for(a=!1,N=1;N<c;++N)for(T=N;T<h;T+=c)m[T]+=g[N-1];if(s===MA)for(D=1;D<d;++D){for(V=0,T=D*c,M=T+c;T<M;++T)V<x[T]&&(V=x[T]);for(T=D*c;T<M;++T)x[T]=V+b[D-1]}else if(s===bx){for(V=0,T=c;T<h;++T)V<x[T]&&(V=x[T]);for(T=c;T<h;++T)x[T]=V+w}else for(s=!1,D=1;D<d;++D)for(T=D*c,M=T+c;T<M;++T)x[T]+=b[D-1];for(U=0,T=0;T<h;++T)U=m[T]+(T%c?U:0),S[T]+=U-t[T].x;for(N=0;N<c;++N)for(B=0,T=N;T<h;T+=c)B+=x[T],k[T]+=B-t[T].y;if(a&&_n(n.center,ju)&&d>1)for(T=0;T<h;++T)I=a===bx?y:g[T%c],U=I-R[T].x2-t[T].x-S[T],U>0&&(S[T]+=U/2);if(s&&_n(n.center,zu)&&c!==1)for(T=0;T<h;++T)I=s===bx?w:b[~~(T/c)],B=I-R[T].y2-t[T].y-k[T],B>0&&(k[T]+=B/2);for(T=0;T<h;++T)o.union(R[T].translate(S[T],k[T]));switch(U=_n(n.anchor,T1e),B=_n(n.anchor,A1e),_n(n.anchor,ju)){case ur:U-=o.width();break;case AA:U-=o.width()/2}switch(_n(n.anchor,zu)){case ur:B-=o.height();break;case AA:B-=o.height()/2}for(U=Math.round(U),B=Math.round(B),o.clear(),T=0;T<h;++T)t[T].mark.bounds.clear();for(T=0;T<h;++T)z=t[T],z.x+=S[T]+=U,z.y+=k[T]+=B,o.union(z.mark.bounds.union(z.bounds.translate(S[T],k[T]))),i&&e.dirty(z);return o}function G1e(e,t,n){var i=H1e(t),r=i.marks,o=n.bounds===Q$?q1e:V1e,a=n.offset,s=n.columns||r.length,l=s<=0?1:Math.ceil(r.length/s),u=l*s,c,d,h,m,g,y,x;const b=AZ(e,r,n);b.empty()&&b.set(0,0,0,0),i.rowheaders&&(y=_n(n.headerBand,zu,null),c=Cx(e,i.rowheaders,r,s,l,-_n(a,"rowHeader"),mj,0,o,"x1",0,s,1,y)),i.colheaders&&(y=_n(n.headerBand,ju,null),d=Cx(e,i.colheaders,r,s,s,-_n(a,"columnHeader"),mj,1,o,"y1",0,1,s,y)),i.rowfooters&&(y=_n(n.footerBand,zu,null),h=Cx(e,i.rowfooters,r,s,l,_n(a,"rowFooter"),gj,0,o,"x2",s-1,s,1,y)),i.colfooters&&(y=_n(n.footerBand,ju,null),m=Cx(e,i.colfooters,r,s,s,_n(a,"columnFooter"),gj,1,o,"y2",u-s,1,s,y)),i.rowtitle&&(g=_n(n.titleAnchor,zu),x=_n(a,"rowTitle"),x=g===ur?h+x:c-x,y=_n(n.titleBand,zu,.5),vj(e,i.rowtitle,x,0,b,y)),i.coltitle&&(g=_n(n.titleAnchor,ju),x=_n(a,"columnTitle"),x=g===ur?m+x:d-x,y=_n(n.titleBand,ju,.5),vj(e,i.coltitle,x,1,b,y))}function q1e(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function V1e(e,t){return e.bounds[t]}function Cx(e,t,n,i,r,o,a,s,l,u,c,d,h,m){var g=n.length,y=0,x=0,b,w,S,k,R,M,T,N,D;if(!g)return y;for(b=c;b<g;b+=d)n[b]&&(y=a(y,l(n[b],u)));if(!t.length)return y;for(t.length>r&&(e.warn("Grid headers exceed limit: "+r),t=t.slice(0,r)),y+=o,w=0,k=t.length;w<k;++w)e.dirty(t[w]),t[w].mark.bounds.clear();for(b=c,w=0,k=t.length;w<k;++w,b+=d){for(M=t[w],R=M.mark.bounds,S=b;S>=0&&(T=n[S])==null;S-=h);s?(N=m==null?T.x:Math.round(T.bounds.x1+m*T.bounds.width()),D=y):(N=y,D=m==null?T.y:Math.round(T.bounds.y1+m*T.bounds.height())),R.union(M.bounds.translate(N-(M.x||0),D-(M.y||0))),M.x=N,M.y=D,e.dirty(M),x=a(x,R[u])}return x}function vj(e,t,n,i,r,o){if(t){e.dirty(t);var a=n,s=n;i?a=Math.round(r.x1+o*r.width()):s=Math.round(r.y1+o*r.height()),t.bounds.translate(a-(t.x||0),s-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=a,t.y=s,e.dirty(t)}}function Y1e(e,t){const n=e[t]||{};return(i,r)=>n[i]!=null?n[i]:e[i]!=null?e[i]:r}function Z1e(e,t){let n=-1/0;return e.forEach(i=>{i.offset!=null&&(n=Math.max(n,i.offset))}),n>-1/0?n:t}function X1e(e,t,n,i,r,o,a){const s=Y1e(n,t),l=Z1e(e,s("offset",0)),u=s("anchor",Y$),c=u===ur?1:u===AA?.5:0,d={align:MA,bounds:s("bounds",Q$),columns:s("direction")==="vertical"?1:e.length,padding:s("margin",8),center:s("center"),nodirty:!0};switch(t){case Ea:d.anchor={x:Math.floor(i.x1)-l,column:ur,y:c*(a||i.height()+2*i.y1),row:u};break;case ka:d.anchor={x:Math.ceil(i.x2)+l,y:c*(a||i.height()+2*i.y1),row:u};break;case Zp:d.anchor={y:Math.floor(r.y1)-l,row:ur,x:c*(o||r.width()+2*r.x1),column:u};break;case vc:d.anchor={y:Math.ceil(r.y2)+l,x:c*(o||r.width()+2*r.x1),column:u};break;case C1e:d.anchor={x:l,y:l};break;case E1e:d.anchor={x:o-l,y:l,column:ur};break;case k1e:d.anchor={x:l,y:a-l,row:ur};break;case R1e:d.anchor={x:o-l,y:a-l,column:ur,row:ur};break}return d}function K1e(e,t){var n=t.items[0],i=n.datum,r=n.orient,o=n.bounds,a=n.x,s=n.y,l,u;return n._bounds?n._bounds.clear().union(o):n._bounds=o.clone(),o.clear(),Q1e(e,n,n.items[0].items[0]),o=J1e(n,o),l=2*n.padding,u=2*n.padding,o.empty()||(l=Math.ceil(o.width()+l),u=Math.ceil(o.height()+u)),i.type===N1e&&exe(n.items[0].items[0].items[0].items),r!==J$&&(n.x=a=0,n.y=s=0),n.width=l,n.height=u,Vl(o.set(a,s,a+l,s+u),n),n.mark.bounds.clear().union(o),n}function J1e(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function Q1e(e,t,n){var i=t.padding,r=i-n.x,o=i-n.y;if(!t.datum.title)(r||o)&&jg(e,n,r,o);else{var a=t.items[1].items[0],s=a.anchor,l=t.titlePadding||0,u=i-a.x,c=i-a.y;switch(a.orient){case Ea:r+=Math.ceil(a.bounds.width())+l;break;case ka:case vc:break;default:o+=a.bounds.height()+l}switch((r||o)&&jg(e,n,r,o),a.orient){case Ea:c+=Ch(t,n,a,s,1,1);break;case ka:u+=Ch(t,n,a,ur,0,0)+l,c+=Ch(t,n,a,s,1,1);break;case vc:u+=Ch(t,n,a,s,0,0),c+=Ch(t,n,a,ur,-1,0,1)+l;break;default:u+=Ch(t,n,a,s,0,0)}(u||c)&&jg(e,a,u,c),(u=Math.round(a.bounds.x1-i))<0&&(jg(e,n,-u,0),jg(e,a,-u,0))}}function Ch(e,t,n,i,r,o,a){const s=e.datum.type!=="symbol",l=n.datum.vgrad,u=s&&(o||!l)&&!a?t.items[0]:t,c=u.bounds[r?"y2":"x2"]-e.padding,d=l&&o?c:0,h=l&&o?0:c,m=r<=0?0:$$(n);return Math.round(i===Y$?d:i===ur?h-m:.5*(c-m))}function jg(e,t,n,i){t.x+=n,t.y+=i,t.bounds.translate(n,i),t.mark.bounds.translate(n,i),e.dirty(t)}function exe(e){const t=e.reduce((n,i)=>(n[i.column]=Math.max(i.bounds.x2-i.x,n[i.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function txe(e,t,n,i,r){var o=t.items[0],a=o.frame,s=o.orient,l=o.anchor,u=o.offset,c=o.padding,d=o.items[0].items[0],h=o.items[1]&&o.items[1].items[0],m=s===Ea||s===ka?i:n,g=0,y=0,x=0,b=0,w=0,S;if(a!==RS?s===Ea?(g=r.y2,m=r.y1):s===ka?(g=r.y1,m=r.y2):(g=r.x1,m=r.x2):s===Ea&&(g=i,m=0),S=l===Y$?g:l===ur?m:(g+m)/2,h&&h.text){switch(s){case Zp:case vc:w=d.bounds.height()+c;break;case Ea:b=d.bounds.width()+c;break;case ka:b=-d.bounds.width()-c;break}Ui.clear().union(h.bounds),Ui.translate(b-(h.x||0),w-(h.y||0)),np(h,"x",b)|np(h,"y",w)&&(e.dirty(h),h.bounds.clear().union(Ui),h.mark.bounds.clear().union(Ui),e.dirty(h)),Ui.clear().union(h.bounds)}else Ui.clear();switch(Ui.union(d.bounds),s){case Zp:y=S,x=r.y1-Ui.height()-u;break;case Ea:y=r.x1-Ui.width()-u,x=S;break;case ka:y=r.x2+Ui.width()+u,x=S;break;case vc:y=S,x=r.y2+u;break;default:y=o.x,x=o.y}return np(o,"x",y)|np(o,"y",x)&&(Ui.translate(y,x),e.dirty(o),o.bounds.clear().union(Ui),t.bounds.clear().union(Ui),e.dirty(o)),o.bounds}function MZ(e){ne.call(this,null,e)}be(MZ,ne,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(i=>{e.layout&&G1e(n,i,e.layout),ixe(n,i,e)}),nxe(e.mark.group)?t.reflow():t}});function nxe(e){return e&&e.mark.role!=="legend-entry"}function ixe(e,t,n){var i=t.items,r=Math.max(0,t.width||0),o=Math.max(0,t.height||0),a=new Yn().set(0,0,r,o),s=a.clone(),l=a.clone(),u=[],c,d,h,m,g,y;for(g=0,y=i.length;g<y;++g)switch(d=i[g],d.role){case Z$:m=j1e(d)?s:l,m.union(B1e(e,d,r,o));break;case X$:c=d;break;case K$:u.push(K1e(e,d));break;case M1e:case F1e:case mZ:case gZ:case yZ:case vZ:case xZ:case _Z:s.union(d.bounds),l.union(d.bounds);break;default:a.union(d.bounds)}if(u.length){const x={};u.forEach(b=>{h=b.orient||ka,h!==J$&&(x[h]||(x[h]=[])).push(b)});for(const b in x){const w=x[b];AZ(e,w,X1e(w,b,n.legends,s,l,r,o))}u.forEach(b=>{const w=b.bounds;if(w.equals(b._bounds)||(b.bounds=b._bounds,e.dirty(b),b.bounds=w,e.dirty(b)),n.autosize&&(n.autosize.type===bZ||n.autosize.type===wZ||n.autosize.type===SZ))switch(b.orient){case Ea:case ka:a.add(w.x1,0).add(w.x2,0);break;case Zp:case vc:a.add(0,w.y1).add(0,w.y2)}else a.union(w)})}a.union(s).union(l),c&&a.union(txe(e,c,r,o,a)),t.clip&&a.set(0,0,t.width||0,t.height||0),rxe(e,t,a,n)}function rxe(e,t,n,i){const r=i.autosize||{},o=r.type;if(e._autosize<1||!o)return;let a=e._width,s=e._height,l=Math.max(0,t.width||0),u=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),d=Math.max(0,Math.ceil(-n.y1));const h=Math.max(0,Math.ceil(n.x2-l)),m=Math.max(0,Math.ceil(n.y2-c));if(r.contains===P1e){const g=e.padding();a-=g.left+g.right,s-=g.top+g.bottom}o===J$?(u=0,d=0,l=a,c=s):o===bZ?(l=Math.max(0,a-u-h),c=Math.max(0,s-d-m)):o===wZ?(l=Math.max(0,a-u-h),s=c+d+m):o===SZ?(a=l+u+h,c=Math.max(0,s-d-m)):o===$1e&&(a=l+u+h,s=c+d+m),e._resizeView(a,s,l,c,[u,d],r.resize)}const oxe=Object.freeze(Object.defineProperty({__proto__:null,bound:CZ,identifier:eO,mark:EZ,overlap:kZ,render:TZ,viewlayout:MZ},Symbol.toStringTag,{value:"Module"}));function FZ(e){ne.call(this,null,e)}be(FZ,ne,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,o=e.scale,a=e.count==null?e.values?e.values.length:10:e.count,s=m$(o,a,e.minstep),l=e.format||lY(n,o,s,e.formatSpecifier,e.formatType,!!e.values),u=e.values?sY(o,e.values,s):g$(o,s);return r&&(i.rem=r),r=u.map((c,d)=>Vt({index:d/(u.length-1||1),value:c,label:l(c)})),e.extra&&r.length&&r.push(Vt({index:-1,extra:{value:r[0].value},label:""})),i.source=r,i.add=r,this.value=r,i}});function PZ(e){ne.call(this,null,e)}function axe(){return Vt({})}function sxe(e){const t=Em().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}be(PZ,ne,{transform(e,t){var n=t.dataflow,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.item||axe,o=e.key||Je,a=this.value;return fe(i.encode)&&(i.encode=null),a&&(e.modified("key")||t.modified(o))&&le("DataJoin does not support modified key function or fields."),a||(t=t.addAll(),this.value=a=sxe(o)),t.visit(t.ADD,s=>{const l=o(s);let u=a.get(l);u?u.exit?(a.empty--,i.add.push(u)):i.mod.push(u):(u=r(s),a.set(l,u),i.add.push(u)),u.datum=s,u.exit=!1}),t.visit(t.MOD,s=>{const l=o(s),u=a.get(l);u&&(u.datum=s,i.mod.push(u))}),t.visit(t.REM,s=>{const l=o(s),u=a.get(l);s===u.datum&&!u.exit&&(i.rem.push(u),u.exit=!0,++a.empty)}),t.changed(t.ADD_MOD)&&i.modifies("datum"),(t.clean()||e.clean&&a.empty>n.cleanThreshold)&&n.runAfter(a.clean),i}});function NZ(e){ne.call(this,null,e)}be(NZ,ne,{transform(e,t){var n=t.fork(t.ADD_REM),i=e.mod||!1,r=e.encoders,o=t.encode;if(fe(o))if(n.changed()||o.every(d=>r[d]))o=o[0],n.encode=null;else return t.StopPropagation;var a=o==="enter",s=r.update||mu,l=r.enter||mu,u=r.exit||mu,c=(o&&!a?r[o]:s)||mu;if(t.changed(t.ADD)&&(t.visit(t.ADD,d=>{l(d,e),s(d,e)}),n.modifies(l.output),n.modifies(s.output),c!==mu&&c!==s&&(t.visit(t.ADD,d=>{c(d,e)}),n.modifies(c.output))),t.changed(t.REM)&&u!==mu&&(t.visit(t.REM,d=>{u(d,e)}),n.modifies(u.output)),a||c!==mu){const d=t.MOD|(e.modified()?t.REFLOW:0);a?(t.visit(d,h=>{const m=l(h,e)||i;(c(h,e)||m)&&n.mod.push(h)}),n.mod.length&&n.modifies(l.output)):t.visit(d,h=>{(c(h,e)||i)&&n.mod.push(h)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function $Z(e){ne.call(this,[],e)}be($Z,ne,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,o=e.type||g_,a=e.scale,s=+e.limit,l=m$(a,e.count==null?5:e.count,e.minstep),u=!!e.values||o===g_,c=e.format||dY(n,a,l,o,e.formatSpecifier,e.formatType,u),d=e.values||fY(a,l),h,m,g,y,x;return r&&(i.rem=r),o===g_?(s&&d.length>s?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),r=d.slice(0,s-1),x=!0):r=d,_t(g=e.size)?(!e.values&&a(r[0])===0&&(r=r.slice(1)),y=r.reduce((b,w)=>Math.max(b,g(w,e)),0)):g=nr(y=g||8),r=r.map((b,w)=>Vt({index:w,label:c(b,w,r),value:b,offset:y,size:g(b,e)})),x&&(x=d[r.length],r.push(Vt({index:r.length,label:`${d.length-r.length} entries`,value:x,offset:y,size:g(x,e)})))):o===$0e?(h=a.domain(),m=rY(a,h[0],Ot(h)),d.length<3&&!e.values&&h[0]!==Ot(h)&&(d=[h[0],Ot(h)]),r=d.map((b,w)=>Vt({index:w,label:c(b,w,d),value:b,perc:m(b)}))):(g=d.length-1,m=G0e(a),r=d.map((b,w)=>Vt({index:w,label:c(b,w,d),value:b,perc:w?m(b):0,perc2:w===g?1:m(d[w+1])}))),i.source=r,i.add=r,this.value=r,i}});const lxe=e=>e.source.x,uxe=e=>e.source.y,cxe=e=>e.target.x,fxe=e=>e.target.y;function tO(e){ne.call(this,{},e)}tO.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};be(tO,ne,{transform(e,t){var n=e.sourceX||lxe,i=e.sourceY||uxe,r=e.targetX||cxe,o=e.targetY||fxe,a=e.as||"path",s=e.orient||"vertical",l=e.shape||"line",u=xj.get(l+"-"+s)||xj.get(l);return u||le("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[a]=u(n(c),i(c),r(c),o(c))}),t.reflow(e.modified()).modifies(a)}});const OZ=(e,t,n,i)=>"M"+e+","+t+"L"+n+","+i,dxe=(e,t,n,i)=>OZ(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),IZ=(e,t,n,i)=>{var r=n-e,o=i-t,a=Math.hypot(r,o)/2,s=180*Math.atan2(o,r)/Math.PI;return"M"+e+","+t+"A"+a+","+a+" "+s+" 0 1 "+n+","+i},hxe=(e,t,n,i)=>IZ(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),DZ=(e,t,n,i)=>{const r=n-e,o=i-t,a=.2*(r+o),s=.2*(o-r);return"M"+e+","+t+"C"+(e+a)+","+(t+s)+" "+(n+s)+","+(i-a)+" "+n+","+i},pxe=(e,t,n,i)=>DZ(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),mxe=(e,t,n,i)=>"M"+e+","+t+"V"+i+"H"+n,gxe=(e,t,n,i)=>"M"+e+","+t+"H"+n+"V"+i,yxe=(e,t,n,i)=>{const r=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n),l=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*r+","+t*o+"A"+t+","+t+" 0 0,"+(l?1:0)+" "+t*a+","+t*s+"L"+i*a+","+i*s},vxe=(e,t,n,i)=>{const r=(e+n)/2;return"M"+e+","+t+"C"+r+","+t+" "+r+","+i+" "+n+","+i},xxe=(e,t,n,i)=>{const r=(t+i)/2;return"M"+e+","+t+"C"+e+","+r+" "+n+","+r+" "+n+","+i},_xe=(e,t,n,i)=>{const r=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n),l=(t+i)/2;return"M"+t*r+","+t*o+"C"+l*r+","+l*o+" "+l*a+","+l*s+" "+i*a+","+i*s},xj=Em({line:OZ,"line-radial":dxe,arc:IZ,"arc-radial":hxe,curve:DZ,"curve-radial":pxe,"orthogonal-horizontal":mxe,"orthogonal-vertical":gxe,"orthogonal-radial":yxe,"diagonal-horizontal":vxe,"diagonal-vertical":xxe,"diagonal-radial":_xe});function nO(e){ne.call(this,null,e)}nO.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};be(nO,ne,{transform(e,t){var n=e.as||["startAngle","endAngle"],i=n[0],r=n[1],o=e.field||wm,a=e.startAngle||0,s=e.endAngle!=null?e.endAngle:2*Math.PI,l=t.source,u=l.map(o),c=u.length,d=a,h=(s-a)/tG(u),m=ho(c),g,y,x;for(e.sort&&m.sort((b,w)=>u[b]-u[w]),g=0;g<c;++g)x=u[m[g]],y=l[m[g]],y[i]=d,y[r]=d+=x*h;return this.value=u,t.reflow(e.modified()).modifies(n)}});const bxe=5;function wxe(e){const t=e.type;return!e.bins&&(t===Up||t===Rv||t===Tv)}function LZ(e){return d$(e)&&e!==Ss}const Sxe=Da(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function jZ(e){ne.call(this,null,e),this.modified(!0)}be(jZ,ne,{transform(e,t){var n=t.dataflow,i=this.value,r=Cxe(e);(!i||r!==i.type)&&(this.value=i=Ut(r)());for(r in e)if(!Sxe[r]){if(r==="padding"&&LZ(i.type))continue;_t(i[r])?i[r](e[r]):n.warn("Unsupported scale property: "+r)}return Mxe(i,e,Axe(i,e,kxe(i,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Cxe(e){var t=e.type,n="",i;return t===Ss?Ss+"-"+Up:(Exe(e)&&(i=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=i===2?Ss+"-":i===3?Nm+"-":""),(n+t||Up).toLowerCase())}function Exe(e){const t=e.type;return d$(t)&&t!==ud&&t!==cd&&(e.scheme||e.range&&e.range.length&&e.range.every(Oe))}function kxe(e,t,n){const i=Rxe(e,t.domainRaw,n);if(i>-1)return i;var r=t.domain,o=e.type,a=t.zero||t.zero===void 0&&wxe(e),s,l;if(!r)return 0;if(LZ(o)&&t.padding&&r[0]!==Ot(r)&&(r=Txe(o,r,t.range,t.padding,t.exponent,t.constant)),(a||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(s=(r=r.slice()).length-1||1,a&&(r[0]>0&&(r[0]=0),r[s]<0&&(r[s]=0)),t.domainMin!=null&&(r[0]=t.domainMin),t.domainMax!=null&&(r[s]=t.domainMax),t.domainMid!=null)){l=t.domainMid;const u=l>r[s]?s+1:l<r[0]?0:s;u!==s&&n.warn("Scale domainMid exceeds domain min or max.",l),r.splice(u,0,l)}return e.domain(zZ(o,r,n)),o===l$&&e.unknown(t.domainImplicit?lA:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&m$(e,t.nice)||null),r.length}function Rxe(e,t,n){return t?(e.domain(zZ(e.type,t,n)),t.length):-1}function Txe(e,t,n,i,r,o){var a=Math.abs(Ot(n)-n[0]),s=a/(a-2*i),l=e===Bl?MP(t,null,s):e===Tv?xb(t,null,s,.5):e===Rv?xb(t,null,s,r||1):e===fS?FP(t,null,s,o||1):AP(t,null,s);return t=t.slice(),t[0]=l[0],t[t.length-1]=l[1],t}function zZ(e,t,n){if(QV(e)){var i=Math.abs(t.reduce((r,o)=>r+(o<0?-1:o>0?1:0),0));i!==t.length&&n.warn("Log scale domain includes zero: "+we(t))}return t}function Axe(e,t,n){let i=t.bins;if(i&&!fe(i)){const r=e.domain(),o=r[0],a=Ot(r),s=i.step;let l=i.start==null?o:i.start,u=i.stop==null?a:i.stop;s||le("Scale bins parameter missing step property."),l<o&&(l=s*Math.ceil(o/s)),u>a&&(u=s*Math.floor(a/s)),i=ho(l,u+s/2,s)}return i?e.bins=i:e.bins&&delete e.bins,e.type===u$&&(i?!t.domain&&!t.domainRaw&&(e.domain(i),n=i.length):e.bins=e.domain()),n}function Mxe(e,t,n){var i=e.type,r=t.round||!1,o=t.range;if(t.rangeStep!=null)o=Fxe(i,t,n);else if(t.scheme&&(o=Pxe(i,t,n),_t(o))){if(e.interpolator)return e.interpolator(o);le(`Scale type ${i} does not support interpolating color schemes.`)}if(o&&eY(i))return e.interpolator(pS(FA(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(h$(t.interpolate,t.interpolateGamma)):_t(e.round)?e.round(r):_t(e.rangeRound)&&e.interpolate(r?Ev:Ic),o&&e.range(FA(o,t.reverse))}function Fxe(e,t,n){e!==VV&&e!==mA&&le("Only band and point scales support rangeStep.");var i=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,r=e===mA?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*s$(n,r,i)]}function Pxe(e,t,n){var i=t.schemeExtent,r,o;return fe(t.scheme)?o=pS(t.scheme,t.interpolate,t.interpolateGamma):(r=t.scheme.toLowerCase(),o=p$(r),o||le(`Unrecognized scheme name: ${t.scheme}`)),n=e===hS?n+1:e===u$?n-1:e===Wp||e===dS?+t.schemeCount||bxe:n,eY(e)?_j(o,i,t.reverse):_t(o)?iY(_j(o,i),n):e===l$?o:o.slice(0,n)}function _j(e,t,n){return _t(e)&&(t||n)?nY(e,FA(t||[0,1],n)):e}function FA(e,t){return t?e.slice().reverse():e}function BZ(e){ne.call(this,null,e)}be(BZ,ne,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Dd(e.sort)),this.modified(n),t}});const bj="zero",HZ="center",UZ="normalize",WZ=["y0","y1"];function iO(e){ne.call(this,null,e)}iO.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:bj,values:[bj,HZ,UZ]},{name:"as",type:"string",array:!0,length:2,default:WZ}]};be(iO,ne,{transform(e,t){var n=e.as||WZ,i=n[0],r=n[1],o=Dd(e.sort),a=e.field||wm,s=e.offset===HZ?Nxe:e.offset===UZ?$xe:Oxe,l,u,c,d;for(l=Ixe(t.source,e.groupby,o,a),u=0,c=l.length,d=l.max;u<c;++u)s(l[u],d,a,i,r);return t.reflow(e.modified()).modifies(n)}});function Nxe(e,t,n,i,r){for(var o=(t-e.sum)/2,a=e.length,s=0,l;s<a;++s)l=e[s],l[i]=o,l[r]=o+=Math.abs(n(l))}function $xe(e,t,n,i,r){for(var o=1/e.sum,a=0,s=e.length,l=0,u=0,c;l<s;++l)c=e[l],c[i]=a,c[r]=a=o*(u+=Math.abs(n(c)))}function Oxe(e,t,n,i,r){for(var o=0,a=0,s=e.length,l=0,u,c;l<s;++l)c=e[l],u=+n(c),u<0?(c[i]=a,c[r]=a+=u):(c[i]=o,c[r]=o+=u)}function Ixe(e,t,n,i){var r=[],o=y=>y(c),a,s,l,u,c,d,h,m,g;if(t==null)r.push(e.slice());else for(a={},s=0,l=e.length;s<l;++s)c=e[s],d=t.map(o),h=a[d],h||(a[d]=h=[],r.push(h)),h.push(c);for(d=0,g=0,u=r.length;d<u;++d){for(h=r[d],s=0,m=0,l=h.length;s<l;++s)m+=Math.abs(i(h[s]));h.sum=m,m>g&&(g=m),n&&h.sort(n)}return r.max=g,r}const Dxe=Object.freeze(Object.defineProperty({__proto__:null,axisticks:FZ,datajoin:PZ,encode:NZ,legendentries:$Z,linkpath:tO,pie:nO,scale:jZ,sortitems:BZ,stack:iO},Symbol.toStringTag,{value:"Module"}));var it=1e-6,Zb=1e-12,Rt=Math.PI,On=Rt/2,Xb=Rt/4,xr=Rt*2,Ln=180/Rt,Ct=Rt/180,$t=Math.abs,Om=Math.atan,ea=Math.atan2,rt=Math.cos,Ex=Math.ceil,GZ=Math.exp,PA=Math.hypot,Kb=Math.log,Sk=Math.pow,Qe=Math.sin,zo=Math.sign||function(e){return e>0?1:e<0?-1:0},_r=Math.sqrt,rO=Math.tan;function qZ(e){return e>1?0:e<-1?Rt:Math.acos(e)}function Kr(e){return e>1?On:e<-1?-On:Math.asin(e)}function Ti(){}function Jb(e,t){e&&Sj.hasOwnProperty(e.type)&&Sj[e.type](e,t)}var wj={Feature:function(e,t){Jb(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)Jb(n[i].geometry,t)}},Sj={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){NA(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)NA(n[i],t,0)},Polygon:function(e,t){Cj(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)Cj(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)Jb(n[i],t)}};function NA(e,t,n){var i=-1,r=e.length-n,o;for(t.lineStart();++i<r;)o=e[i],t.point(o[0],o[1],o[2]);t.lineEnd()}function Cj(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)NA(e[n],t,1);t.polygonEnd()}function hl(e,t){e&&wj.hasOwnProperty(e.type)?wj[e.type](e,t):Jb(e,t)}var Qb=new gr,ew=new gr,VZ,YZ,$A,OA,IA,Fs={point:Ti,lineStart:Ti,lineEnd:Ti,polygonStart:function(){Qb=new gr,Fs.lineStart=Lxe,Fs.lineEnd=jxe},polygonEnd:function(){var e=+Qb;ew.add(e<0?xr+e:e),this.lineStart=this.lineEnd=this.point=Ti},sphere:function(){ew.add(xr)}};function Lxe(){Fs.point=zxe}function jxe(){ZZ(VZ,YZ)}function zxe(e,t){Fs.point=ZZ,VZ=e,YZ=t,e*=Ct,t*=Ct,$A=e,OA=rt(t=t/2+Xb),IA=Qe(t)}function ZZ(e,t){e*=Ct,t*=Ct,t=t/2+Xb;var n=e-$A,i=n>=0?1:-1,r=i*n,o=rt(t),a=Qe(t),s=IA*a,l=OA*o+s*rt(r),u=s*i*Qe(r);Qb.add(ea(u,l)),$A=e,OA=o,IA=a}function Bxe(e){return ew=new gr,hl(e,Fs),ew*2}function tw(e){return[ea(e[1],e[0]),Kr(e[2])]}function dd(e){var t=e[0],n=e[1],i=rt(n);return[i*rt(t),i*Qe(t),Qe(n)]}function kx(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Xp(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Ck(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Rx(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function nw(e){var t=_r(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var kn,Dr,Fn,so,bf,XZ,KZ,gp,Y0,Cu,Hl,ul={point:DA,lineStart:Ej,lineEnd:kj,polygonStart:function(){ul.point=QZ,ul.lineStart=Hxe,ul.lineEnd=Uxe,Y0=new gr,Fs.polygonStart()},polygonEnd:function(){Fs.polygonEnd(),ul.point=DA,ul.lineStart=Ej,ul.lineEnd=kj,Qb<0?(kn=-(Fn=180),Dr=-(so=90)):Y0>it?so=90:Y0<-it&&(Dr=-90),Hl[0]=kn,Hl[1]=Fn},sphere:function(){kn=-(Fn=180),Dr=-(so=90)}};function DA(e,t){Cu.push(Hl=[kn=e,Fn=e]),t<Dr&&(Dr=t),t>so&&(so=t)}function JZ(e,t){var n=dd([e*Ct,t*Ct]);if(gp){var i=Xp(gp,n),r=[i[1],-i[0],0],o=Xp(r,i);nw(o),o=tw(o);var a=e-bf,s=a>0?1:-1,l=o[0]*Ln*s,u,c=$t(a)>180;c^(s*bf<l&&l<s*e)?(u=o[1]*Ln,u>so&&(so=u)):(l=(l+360)%360-180,c^(s*bf<l&&l<s*e)?(u=-o[1]*Ln,u<Dr&&(Dr=u)):(t<Dr&&(Dr=t),t>so&&(so=t))),c?e<bf?ao(kn,e)>ao(kn,Fn)&&(Fn=e):ao(e,Fn)>ao(kn,Fn)&&(kn=e):Fn>=kn?(e<kn&&(kn=e),e>Fn&&(Fn=e)):e>bf?ao(kn,e)>ao(kn,Fn)&&(Fn=e):ao(e,Fn)>ao(kn,Fn)&&(kn=e)}else Cu.push(Hl=[kn=e,Fn=e]);t<Dr&&(Dr=t),t>so&&(so=t),gp=n,bf=e}function Ej(){ul.point=JZ}function kj(){Hl[0]=kn,Hl[1]=Fn,ul.point=DA,gp=null}function QZ(e,t){if(gp){var n=e-bf;Y0.add($t(n)>180?n+(n>0?360:-360):n)}else XZ=e,KZ=t;Fs.point(e,t),JZ(e,t)}function Hxe(){Fs.lineStart()}function Uxe(){QZ(XZ,KZ),Fs.lineEnd(),$t(Y0)>it&&(kn=-(Fn=180)),Hl[0]=kn,Hl[1]=Fn,gp=null}function ao(e,t){return(t-=e)<0?t+360:t}function Wxe(e,t){return e[0]-t[0]}function Rj(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Gxe(e){var t,n,i,r,o,a,s;if(so=Fn=-(kn=Dr=1/0),Cu=[],hl(e,ul),n=Cu.length){for(Cu.sort(Wxe),t=1,i=Cu[0],o=[i];t<n;++t)r=Cu[t],Rj(i,r[0])||Rj(i,r[1])?(ao(i[0],r[1])>ao(i[0],i[1])&&(i[1]=r[1]),ao(r[0],i[1])>ao(i[0],i[1])&&(i[0]=r[0])):o.push(i=r);for(a=-1/0,n=o.length-1,t=0,i=o[n];t<=n;i=r,++t)r=o[t],(s=ao(i[1],r[0]))>a&&(a=s,kn=r[0],Fn=i[1])}return Cu=Hl=null,kn===1/0||Dr===1/0?[[NaN,NaN],[NaN,NaN]]:[[kn,Dr],[Fn,so]]}var y0,iw,rw,ow,aw,sw,lw,uw,LA,jA,zA,eX,tX,cr,fr,dr,Ra={sphere:Ti,point:oO,lineStart:Tj,lineEnd:Aj,polygonStart:function(){Ra.lineStart=Yxe,Ra.lineEnd=Zxe},polygonEnd:function(){Ra.lineStart=Tj,Ra.lineEnd=Aj}};function oO(e,t){e*=Ct,t*=Ct;var n=rt(t);Lv(n*rt(e),n*Qe(e),Qe(t))}function Lv(e,t,n){++y0,rw+=(e-rw)/y0,ow+=(t-ow)/y0,aw+=(n-aw)/y0}function Tj(){Ra.point=qxe}function qxe(e,t){e*=Ct,t*=Ct;var n=rt(t);cr=n*rt(e),fr=n*Qe(e),dr=Qe(t),Ra.point=Vxe,Lv(cr,fr,dr)}function Vxe(e,t){e*=Ct,t*=Ct;var n=rt(t),i=n*rt(e),r=n*Qe(e),o=Qe(t),a=ea(_r((a=fr*o-dr*r)*a+(a=dr*i-cr*o)*a+(a=cr*r-fr*i)*a),cr*i+fr*r+dr*o);iw+=a,sw+=a*(cr+(cr=i)),lw+=a*(fr+(fr=r)),uw+=a*(dr+(dr=o)),Lv(cr,fr,dr)}function Aj(){Ra.point=oO}function Yxe(){Ra.point=Xxe}function Zxe(){nX(eX,tX),Ra.point=oO}function Xxe(e,t){eX=e,tX=t,e*=Ct,t*=Ct,Ra.point=nX;var n=rt(t);cr=n*rt(e),fr=n*Qe(e),dr=Qe(t),Lv(cr,fr,dr)}function nX(e,t){e*=Ct,t*=Ct;var n=rt(t),i=n*rt(e),r=n*Qe(e),o=Qe(t),a=fr*o-dr*r,s=dr*i-cr*o,l=cr*r-fr*i,u=PA(a,s,l),c=Kr(u),d=u&&-c/u;LA.add(d*a),jA.add(d*s),zA.add(d*l),iw+=c,sw+=c*(cr+(cr=i)),lw+=c*(fr+(fr=r)),uw+=c*(dr+(dr=o)),Lv(cr,fr,dr)}function Kxe(e){y0=iw=rw=ow=aw=sw=lw=uw=0,LA=new gr,jA=new gr,zA=new gr,hl(e,Ra);var t=+LA,n=+jA,i=+zA,r=PA(t,n,i);return r<Zb&&(t=sw,n=lw,i=uw,iw<it&&(t=rw,n=ow,i=aw),r=PA(t,n,i),r<Zb)?[NaN,NaN]:[ea(n,t)*Ln,Kr(i/r)*Ln]}function BA(e,t){function n(i,r){return i=e(i,r),t(i[0],i[1])}return e.invert&&t.invert&&(n.invert=function(i,r){return i=t.invert(i,r),i&&e.invert(i[0],i[1])}),n}function HA(e,t){return $t(e)>Rt&&(e-=Math.round(e/xr)*xr),[e,t]}HA.invert=HA;function iX(e,t,n){return(e%=xr)?t||n?BA(Fj(e),Pj(t,n)):Fj(e):t||n?Pj(t,n):HA}function Mj(e){return function(t,n){return t+=e,$t(t)>Rt&&(t-=Math.round(t/xr)*xr),[t,n]}}function Fj(e){var t=Mj(e);return t.invert=Mj(-e),t}function Pj(e,t){var n=rt(e),i=Qe(e),r=rt(t),o=Qe(t);function a(s,l){var u=rt(l),c=rt(s)*u,d=Qe(s)*u,h=Qe(l),m=h*n+c*i;return[ea(d*r-m*o,c*n-h*i),Kr(m*r+d*o)]}return a.invert=function(s,l){var u=rt(l),c=rt(s)*u,d=Qe(s)*u,h=Qe(l),m=h*r-d*o;return[ea(d*r+h*o,c*n+m*i),Kr(m*n-c*i)]},a}function Jxe(e){e=iX(e[0]*Ct,e[1]*Ct,e.length>2?e[2]*Ct:0);function t(n){return n=e(n[0]*Ct,n[1]*Ct),n[0]*=Ln,n[1]*=Ln,n}return t.invert=function(n){return n=e.invert(n[0]*Ct,n[1]*Ct),n[0]*=Ln,n[1]*=Ln,n},t}function Qxe(e,t,n,i,r,o){if(n){var a=rt(t),s=Qe(t),l=i*n;r==null?(r=t+i*xr,o=t-l/2):(r=Nj(a,r),o=Nj(a,o),(i>0?r<o:r>o)&&(r+=i*xr));for(var u,c=r;i>0?c>o:c<o;c-=l)u=tw([a,-s*rt(c),-s*Qe(c)]),e.point(u[0],u[1])}}function Nj(e,t){t=dd(t),t[0]-=e,nw(t);var n=qZ(-t[1]);return((-t[2]<0?-n:n)+xr-it)%xr}function rX(){var e=[],t;return{point:function(n,i,r){t.push([n,i,r])},lineStart:function(){e.push(t=[])},lineEnd:Ti,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function C_(e,t){return $t(e[0]-t[0])<it&&$t(e[1]-t[1])<it}function Tx(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function oX(e,t,n,i,r){var o=[],a=[],s,l;if(e.forEach(function(g){if(!((y=g.length-1)<=0)){var y,x=g[0],b=g[y],w;if(C_(x,b)){if(!x[2]&&!b[2]){for(r.lineStart(),s=0;s<y;++s)r.point((x=g[s])[0],x[1]);r.lineEnd();return}b[0]+=2*it}o.push(w=new Tx(x,g,null,!0)),a.push(w.o=new Tx(x,null,w,!1)),o.push(w=new Tx(b,g,null,!1)),a.push(w.o=new Tx(b,null,w,!0))}}),!!o.length){for(a.sort(t),$j(o),$j(a),s=0,l=a.length;s<l;++s)a[s].e=n=!n;for(var u=o[0],c,d;;){for(var h=u,m=!0;h.v;)if((h=h.n)===u)return;c=h.z,r.lineStart();do{if(h.v=h.o.v=!0,h.e){if(m)for(s=0,l=c.length;s<l;++s)r.point((d=c[s])[0],d[1]);else i(h.x,h.n.x,1,r);h=h.n}else{if(m)for(c=h.p.z,s=c.length-1;s>=0;--s)r.point((d=c[s])[0],d[1]);else i(h.x,h.p.x,-1,r);h=h.p}h=h.o,c=h.z,m=!m}while(!h.v);r.lineEnd()}}}function $j(e){if(t=e.length){for(var t,n=0,i=e[0],r;++n<t;)i.n=r=e[n],r.p=i,i=r;i.n=r=e[0],r.p=i}}function Ek(e){return $t(e[0])<=Rt?e[0]:zo(e[0])*(($t(e[0])+Rt)%xr-Rt)}function e_e(e,t){var n=Ek(t),i=t[1],r=Qe(i),o=[Qe(n),-rt(n),0],a=0,s=0,l=new gr;r===1?i=On+it:r===-1&&(i=-On-it);for(var u=0,c=e.length;u<c;++u)if(h=(d=e[u]).length)for(var d,h,m=d[h-1],g=Ek(m),y=m[1]/2+Xb,x=Qe(y),b=rt(y),w=0;w<h;++w,g=k,x=M,b=T,m=S){var S=d[w],k=Ek(S),R=S[1]/2+Xb,M=Qe(R),T=rt(R),N=k-g,D=N>=0?1:-1,I=D*N,z=I>Rt,X=x*M;if(l.add(ea(X*D*Qe(I),b*T+X*rt(I))),a+=z?N+D*xr:N,z^g>=n^k>=n){var W=Xp(dd(m),dd(S));nw(W);var U=Xp(o,W);nw(U);var B=(z^N>=0?-1:1)*Kr(U[2]);(i>B||i===B&&(W[0]||W[1]))&&(s+=z^N>=0?1:-1)}}return(a<-it||a<it&&l<-Zb)^s&1}function aX(e,t,n,i){return function(r){var o=t(r),a=rX(),s=t(a),l=!1,u,c,d,h={point:m,lineStart:y,lineEnd:x,polygonStart:function(){h.point=b,h.lineStart=w,h.lineEnd=S,c=[],u=[]},polygonEnd:function(){h.point=m,h.lineStart=y,h.lineEnd=x,c=eG(c);var k=e_e(u,i);c.length?(l||(r.polygonStart(),l=!0),oX(c,n_e,k,n,r)):k&&(l||(r.polygonStart(),l=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),c=u=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function m(k,R){e(k,R)&&r.point(k,R)}function g(k,R){o.point(k,R)}function y(){h.point=g,o.lineStart()}function x(){h.point=m,o.lineEnd()}function b(k,R){d.push([k,R]),s.point(k,R)}function w(){s.lineStart(),d=[]}function S(){b(d[0][0],d[0][1]),s.lineEnd();var k=s.clean(),R=a.result(),M,T=R.length,N,D,I;if(d.pop(),u.push(d),d=null,!!T){if(k&1){if(D=R[0],(N=D.length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),M=0;M<N;++M)r.point((I=D[M])[0],I[1]);r.lineEnd()}return}T>1&&k&2&&R.push(R.pop().concat(R.shift())),c.push(R.filter(t_e))}}return h}}function t_e(e){return e.length>1}function n_e(e,t){return((e=e.x)[0]<0?e[1]-On-it:On-e[1])-((t=t.x)[0]<0?t[1]-On-it:On-t[1])}const Oj=aX(function(){return!0},i_e,o_e,[-Rt,-On]);function i_e(e){var t=NaN,n=NaN,i=NaN,r;return{lineStart:function(){e.lineStart(),r=1},point:function(o,a){var s=o>0?Rt:-Rt,l=$t(o-t);$t(l-Rt)<it?(e.point(t,n=(n+a)/2>0?On:-On),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(s,n),e.point(o,n),r=0):i!==s&&l>=Rt&&($t(t-i)<it&&(t-=i*it),$t(o-s)<it&&(o-=s*it),n=r_e(t,n,o,a),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(s,n),r=0),e.point(t=o,n=a),i=s},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-r}}}function r_e(e,t,n,i){var r,o,a=Qe(e-n);return $t(a)>it?Om((Qe(t)*(o=rt(i))*Qe(n)-Qe(i)*(r=rt(t))*Qe(e))/(r*o*a)):(t+i)/2}function o_e(e,t,n,i){var r;if(e==null)r=n*On,i.point(-Rt,r),i.point(0,r),i.point(Rt,r),i.point(Rt,0),i.point(Rt,-r),i.point(0,-r),i.point(-Rt,-r),i.point(-Rt,0),i.point(-Rt,r);else if($t(e[0]-t[0])>it){var o=e[0]<t[0]?Rt:-Rt;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(t[0],t[1])}function a_e(e){var t=rt(e),n=6*Ct,i=t>0,r=$t(t)>it;function o(c,d,h,m){Qxe(m,e,n,h,c,d)}function a(c,d){return rt(c)*rt(d)>t}function s(c){var d,h,m,g,y;return{lineStart:function(){g=m=!1,y=1},point:function(x,b){var w=[x,b],S,k=a(x,b),R=i?k?0:u(x,b):k?u(x+(x<0?Rt:-Rt),b):0;if(!d&&(g=m=k)&&c.lineStart(),k!==m&&(S=l(d,w),(!S||C_(d,S)||C_(w,S))&&(w[2]=1)),k!==m)y=0,k?(c.lineStart(),S=l(w,d),c.point(S[0],S[1])):(S=l(d,w),c.point(S[0],S[1],2),c.lineEnd()),d=S;else if(r&&d&&i^k){var M;!(R&h)&&(M=l(w,d,!0))&&(y=0,i?(c.lineStart(),c.point(M[0][0],M[0][1]),c.point(M[1][0],M[1][1]),c.lineEnd()):(c.point(M[1][0],M[1][1]),c.lineEnd(),c.lineStart(),c.point(M[0][0],M[0][1],3)))}k&&(!d||!C_(d,w))&&c.point(w[0],w[1]),d=w,m=k,h=R},lineEnd:function(){m&&c.lineEnd(),d=null},clean:function(){return y|(g&&m)<<1}}}function l(c,d,h){var m=dd(c),g=dd(d),y=[1,0,0],x=Xp(m,g),b=kx(x,x),w=x[0],S=b-w*w;if(!S)return!h&&c;var k=t*b/S,R=-t*w/S,M=Xp(y,x),T=Rx(y,k),N=Rx(x,R);Ck(T,N);var D=M,I=kx(T,D),z=kx(D,D),X=I*I-z*(kx(T,T)-1);if(!(X<0)){var W=_r(X),U=Rx(D,(-I-W)/z);if(Ck(U,T),U=tw(U),!h)return U;var B=c[0],V=d[0],K=c[1],H=d[1],J;V<B&&(J=B,B=V,V=J);var Q=V-B,oe=$t(Q-Rt)<it,me=oe||Q<it;if(!oe&&H<K&&(J=K,K=H,H=J),me?oe?K+H>0^U[1]<($t(U[0]-B)<it?K:H):K<=U[1]&&U[1]<=H:Q>Rt^(B<=U[0]&&U[0]<=V)){var ke=Rx(D,(-I+W)/z);return Ck(ke,T),[U,tw(ke)]}}}function u(c,d){var h=i?e:Rt-e,m=0;return c<-h?m|=1:c>h&&(m|=2),d<-h?m|=4:d>h&&(m|=8),m}return aX(a,s,o,i?[0,-e]:[-Rt,e-Rt])}function s_e(e,t,n,i,r,o){var a=e[0],s=e[1],l=t[0],u=t[1],c=0,d=1,h=l-a,m=u-s,g;if(g=n-a,!(!h&&g>0)){if(g/=h,h<0){if(g<c)return;g<d&&(d=g)}else if(h>0){if(g>d)return;g>c&&(c=g)}if(g=r-a,!(!h&&g<0)){if(g/=h,h<0){if(g>d)return;g>c&&(c=g)}else if(h>0){if(g<c)return;g<d&&(d=g)}if(g=i-s,!(!m&&g>0)){if(g/=m,m<0){if(g<c)return;g<d&&(d=g)}else if(m>0){if(g>d)return;g>c&&(c=g)}if(g=o-s,!(!m&&g<0)){if(g/=m,m<0){if(g>d)return;g>c&&(c=g)}else if(m>0){if(g<c)return;g<d&&(d=g)}return c>0&&(e[0]=a+c*h,e[1]=s+c*m),d<1&&(t[0]=a+d*h,t[1]=s+d*m),!0}}}}}var v0=1e9,Ax=-v0;function sX(e,t,n,i){function r(u,c){return e<=u&&u<=n&&t<=c&&c<=i}function o(u,c,d,h){var m=0,g=0;if(u==null||(m=a(u,d))!==(g=a(c,d))||l(u,c)<0^d>0)do h.point(m===0||m===3?e:n,m>1?i:t);while((m=(m+d+4)%4)!==g);else h.point(c[0],c[1])}function a(u,c){return $t(u[0]-e)<it?c>0?0:3:$t(u[0]-n)<it?c>0?2:1:$t(u[1]-t)<it?c>0?1:0:c>0?3:2}function s(u,c){return l(u.x,c.x)}function l(u,c){var d=a(u,1),h=a(c,1);return d!==h?d-h:d===0?c[1]-u[1]:d===1?u[0]-c[0]:d===2?u[1]-c[1]:c[0]-u[0]}return function(u){var c=u,d=rX(),h,m,g,y,x,b,w,S,k,R,M,T={point:N,lineStart:X,lineEnd:W,polygonStart:I,polygonEnd:z};function N(B,V){r(B,V)&&c.point(B,V)}function D(){for(var B=0,V=0,K=m.length;V<K;++V)for(var H=m[V],J=1,Q=H.length,oe=H[0],me,ke,ge=oe[0],Se=oe[1];J<Q;++J)me=ge,ke=Se,oe=H[J],ge=oe[0],Se=oe[1],ke<=i?Se>i&&(ge-me)*(i-ke)>(Se-ke)*(e-me)&&++B:Se<=i&&(ge-me)*(i-ke)<(Se-ke)*(e-me)&&--B;return B}function I(){c=d,h=[],m=[],M=!0}function z(){var B=D(),V=M&&B,K=(h=eG(h)).length;(V||K)&&(u.polygonStart(),V&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),K&&oX(h,s,B,o,u),u.polygonEnd()),c=u,h=m=g=null}function X(){T.point=U,m&&m.push(g=[]),R=!0,k=!1,w=S=NaN}function W(){h&&(U(y,x),b&&k&&d.rejoin(),h.push(d.result())),T.point=N,k&&c.lineEnd()}function U(B,V){var K=r(B,V);if(m&&g.push([B,V]),R)y=B,x=V,b=K,R=!1,K&&(c.lineStart(),c.point(B,V));else if(K&&k)c.point(B,V);else{var H=[w=Math.max(Ax,Math.min(v0,w)),S=Math.max(Ax,Math.min(v0,S))],J=[B=Math.max(Ax,Math.min(v0,B)),V=Math.max(Ax,Math.min(v0,V))];s_e(H,J,e,t,n,i)?(k||(c.lineStart(),c.point(H[0],H[1])),c.point(J[0],J[1]),K||c.lineEnd(),M=!1):K&&(c.lineStart(),c.point(B,V),M=!1)}w=B,S=V,k=K}return T}}function Ij(e,t,n){var i=ho(e,t-it,n).concat(t);return function(r){return i.map(function(o){return[r,o]})}}function Dj(e,t,n){var i=ho(e,t-it,n).concat(t);return function(r){return i.map(function(o){return[o,r]})}}function l_e(){var e,t,n,i,r,o,a,s,l=10,u=l,c=90,d=360,h,m,g,y,x=2.5;function b(){return{type:"MultiLineString",coordinates:w()}}function w(){return ho(Ex(i/c)*c,n,c).map(g).concat(ho(Ex(s/d)*d,a,d).map(y)).concat(ho(Ex(t/l)*l,e,l).filter(function(S){return $t(S%c)>it}).map(h)).concat(ho(Ex(o/u)*u,r,u).filter(function(S){return $t(S%d)>it}).map(m))}return b.lines=function(){return w().map(function(S){return{type:"LineString",coordinates:S}})},b.outline=function(){return{type:"Polygon",coordinates:[g(i).concat(y(a).slice(1),g(n).reverse().slice(1),y(s).reverse().slice(1))]}},b.extent=function(S){return arguments.length?b.extentMajor(S).extentMinor(S):b.extentMinor()},b.extentMajor=function(S){return arguments.length?(i=+S[0][0],n=+S[1][0],s=+S[0][1],a=+S[1][1],i>n&&(S=i,i=n,n=S),s>a&&(S=s,s=a,a=S),b.precision(x)):[[i,s],[n,a]]},b.extentMinor=function(S){return arguments.length?(t=+S[0][0],e=+S[1][0],o=+S[0][1],r=+S[1][1],t>e&&(S=t,t=e,e=S),o>r&&(S=o,o=r,r=S),b.precision(x)):[[t,o],[e,r]]},b.step=function(S){return arguments.length?b.stepMajor(S).stepMinor(S):b.stepMinor()},b.stepMajor=function(S){return arguments.length?(c=+S[0],d=+S[1],b):[c,d]},b.stepMinor=function(S){return arguments.length?(l=+S[0],u=+S[1],b):[l,u]},b.precision=function(S){return arguments.length?(x=+S,h=Ij(o,r,90),m=Dj(t,e,x),g=Ij(s,a,90),y=Dj(i,n,x),b):x},b.extentMajor([[-180,-90+it],[180,90-it]]).extentMinor([[-180,-80-it],[180,80+it]])}const Wy=e=>e;var kk=new gr,UA=new gr,lX,uX,WA,GA,pl={point:Ti,lineStart:Ti,lineEnd:Ti,polygonStart:function(){pl.lineStart=u_e,pl.lineEnd=f_e},polygonEnd:function(){pl.lineStart=pl.lineEnd=pl.point=Ti,kk.add($t(UA)),UA=new gr},result:function(){var e=kk/2;return kk=new gr,e}};function u_e(){pl.point=c_e}function c_e(e,t){pl.point=cX,lX=WA=e,uX=GA=t}function cX(e,t){UA.add(GA*e-WA*t),WA=e,GA=t}function f_e(){cX(lX,uX)}var Kp=1/0,cw=Kp,Gy=-Kp,fw=Gy,dw={point:d_e,lineStart:Ti,lineEnd:Ti,polygonStart:Ti,polygonEnd:Ti,result:function(){var e=[[Kp,cw],[Gy,fw]];return Gy=fw=-(cw=Kp=1/0),e}};function d_e(e,t){e<Kp&&(Kp=e),e>Gy&&(Gy=e),t<cw&&(cw=t),t>fw&&(fw=t)}var qA=0,VA=0,x0=0,hw=0,pw=0,ip=0,YA=0,ZA=0,_0=0,fX,dX,ps,ms,Do={point:hd,lineStart:Lj,lineEnd:jj,polygonStart:function(){Do.lineStart=m_e,Do.lineEnd=g_e},polygonEnd:function(){Do.point=hd,Do.lineStart=Lj,Do.lineEnd=jj},result:function(){var e=_0?[YA/_0,ZA/_0]:ip?[hw/ip,pw/ip]:x0?[qA/x0,VA/x0]:[NaN,NaN];return qA=VA=x0=hw=pw=ip=YA=ZA=_0=0,e}};function hd(e,t){qA+=e,VA+=t,++x0}function Lj(){Do.point=h_e}function h_e(e,t){Do.point=p_e,hd(ps=e,ms=t)}function p_e(e,t){var n=e-ps,i=t-ms,r=_r(n*n+i*i);hw+=r*(ps+e)/2,pw+=r*(ms+t)/2,ip+=r,hd(ps=e,ms=t)}function jj(){Do.point=hd}function m_e(){Do.point=y_e}function g_e(){hX(fX,dX)}function y_e(e,t){Do.point=hX,hd(fX=ps=e,dX=ms=t)}function hX(e,t){var n=e-ps,i=t-ms,r=_r(n*n+i*i);hw+=r*(ps+e)/2,pw+=r*(ms+t)/2,ip+=r,r=ms*e-ps*t,YA+=r*(ps+e),ZA+=r*(ms+t),_0+=r*3,hd(ps=e,ms=t)}function pX(e){this._context=e}pX.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,xr);break}}},result:Ti};var XA=new gr,Rk,mX,gX,b0,w0,qy={point:Ti,lineStart:function(){qy.point=v_e},lineEnd:function(){Rk&&yX(mX,gX),qy.point=Ti},polygonStart:function(){Rk=!0},polygonEnd:function(){Rk=null},result:function(){var e=+XA;return XA=new gr,e}};function v_e(e,t){qy.point=yX,mX=b0=e,gX=w0=t}function yX(e,t){b0-=e,w0-=t,XA.add(_r(b0*b0+w0*w0)),b0=e,w0=t}let zj,mw,Bj,Hj;class Uj{constructor(t){this._append=t==null?vX:x_e(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Bj||this._append!==mw){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,Bj=i,mw=this._append,Hj=this._,this._=r}this._+=Hj;break}}}result(){const t=this._;return this._="",t.length?t:null}}function vX(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function x_e(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return vX;if(t!==zj){const n=10**t;zj=t,mw=function(r){let o=1;this._+=r[0];for(const a=r.length;o<a;++o)this._+=Math.round(arguments[o]*n)/n+r[o]}}return mw}function xX(e,t){let n=3,i=4.5,r,o;function a(s){return s&&(typeof i=="function"&&o.pointRadius(+i.apply(this,arguments)),hl(s,r(o))),o.result()}return a.area=function(s){return hl(s,r(pl)),pl.result()},a.measure=function(s){return hl(s,r(qy)),qy.result()},a.bounds=function(s){return hl(s,r(dw)),dw.result()},a.centroid=function(s){return hl(s,r(Do)),Do.result()},a.projection=function(s){return arguments.length?(r=s==null?(e=null,Wy):(e=s).stream,a):e},a.context=function(s){return arguments.length?(o=s==null?(t=null,new Uj(n)):new pX(t=s),typeof i!="function"&&o.pointRadius(i),a):t},a.pointRadius=function(s){return arguments.length?(i=typeof s=="function"?s:(o.pointRadius(+s),+s),a):i},a.digits=function(s){if(!arguments.length)return n;if(s==null)n=null;else{const l=Math.floor(s);if(!(l>=0))throw new RangeError(`invalid digits: ${s}`);n=l}return t===null&&(o=new Uj(n)),a},a.projection(e).digits(n).context(t)}function TS(e){return function(t){var n=new KA;for(var i in e)n[i]=e[i];return n.stream=t,n}}function KA(){}KA.prototype={constructor:KA,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function aO(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),i!=null&&e.clipExtent(null),hl(n,e.stream(dw)),t(dw.result()),i!=null&&e.clipExtent(i),e}function AS(e,t,n){return aO(e,function(i){var r=t[1][0]-t[0][0],o=t[1][1]-t[0][1],a=Math.min(r/(i[1][0]-i[0][0]),o/(i[1][1]-i[0][1])),s=+t[0][0]+(r-a*(i[1][0]+i[0][0]))/2,l=+t[0][1]+(o-a*(i[1][1]+i[0][1]))/2;e.scale(150*a).translate([s,l])},n)}function sO(e,t,n){return AS(e,[[0,0],t],n)}function lO(e,t,n){return aO(e,function(i){var r=+t,o=r/(i[1][0]-i[0][0]),a=(r-o*(i[1][0]+i[0][0]))/2,s=-o*i[0][1];e.scale(150*o).translate([a,s])},n)}function uO(e,t,n){return aO(e,function(i){var r=+t,o=r/(i[1][1]-i[0][1]),a=-o*i[0][0],s=(r-o*(i[1][1]+i[0][1]))/2;e.scale(150*o).translate([a,s])},n)}var Wj=16,__e=rt(30*Ct);function Gj(e,t){return+t?w_e(e,t):b_e(e)}function b_e(e){return TS({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function w_e(e,t){function n(i,r,o,a,s,l,u,c,d,h,m,g,y,x){var b=u-i,w=c-r,S=b*b+w*w;if(S>4*t&&y--){var k=a+h,R=s+m,M=l+g,T=_r(k*k+R*R+M*M),N=Kr(M/=T),D=$t($t(M)-1)<it||$t(o-d)<it?(o+d)/2:ea(R,k),I=e(D,N),z=I[0],X=I[1],W=z-i,U=X-r,B=w*W-b*U;(B*B/S>t||$t((b*W+w*U)/S-.5)>.3||a*h+s*m+l*g<__e)&&(n(i,r,o,a,s,l,z,X,D,k/=T,R/=T,M,y,x),x.point(z,X),n(z,X,D,k,R,M,u,c,d,h,m,g,y,x))}}return function(i){var r,o,a,s,l,u,c,d,h,m,g,y,x={point:b,lineStart:w,lineEnd:k,polygonStart:function(){i.polygonStart(),x.lineStart=R},polygonEnd:function(){i.polygonEnd(),x.lineStart=w}};function b(N,D){N=e(N,D),i.point(N[0],N[1])}function w(){d=NaN,x.point=S,i.lineStart()}function S(N,D){var I=dd([N,D]),z=e(N,D);n(d,h,c,m,g,y,d=z[0],h=z[1],c=N,m=I[0],g=I[1],y=I[2],Wj,i),i.point(d,h)}function k(){x.point=b,i.lineEnd()}function R(){w(),x.point=M,x.lineEnd=T}function M(N,D){S(r=N,D),o=d,a=h,s=m,l=g,u=y,x.point=S}function T(){n(d,h,c,m,g,y,o,a,r,s,l,u,Wj,i),x.lineEnd=k,k()}return x}}var S_e=TS({point:function(e,t){this.stream.point(e*Ct,t*Ct)}});function C_e(e){return TS({point:function(t,n){var i=e(t,n);return this.stream.point(i[0],i[1])}})}function E_e(e,t,n,i,r){function o(a,s){return a*=i,s*=r,[t+e*a,n-e*s]}return o.invert=function(a,s){return[(a-t)/e*i,(n-s)/e*r]},o}function qj(e,t,n,i,r,o){if(!o)return E_e(e,t,n,i,r);var a=rt(o),s=Qe(o),l=a*e,u=s*e,c=a/e,d=s/e,h=(s*n-a*t)/e,m=(s*t+a*n)/e;function g(y,x){return y*=i,x*=r,[l*y-u*x+t,n-u*y-l*x]}return g.invert=function(y,x){return[i*(c*y-d*x+h),r*(m-d*y-c*x)]},g}function js(e){return _X(function(){return e})()}function _X(e){var t,n=150,i=480,r=250,o=0,a=0,s=0,l=0,u=0,c,d=0,h=1,m=1,g=null,y=Oj,x=null,b,w,S,k=Wy,R=.5,M,T,N,D,I;function z(B){return N(B[0]*Ct,B[1]*Ct)}function X(B){return B=N.invert(B[0],B[1]),B&&[B[0]*Ln,B[1]*Ln]}z.stream=function(B){return D&&I===B?D:D=S_e(C_e(c)(y(M(k(I=B)))))},z.preclip=function(B){return arguments.length?(y=B,g=void 0,U()):y},z.postclip=function(B){return arguments.length?(k=B,x=b=w=S=null,U()):k},z.clipAngle=function(B){return arguments.length?(y=+B?a_e(g=B*Ct):(g=null,Oj),U()):g*Ln},z.clipExtent=function(B){return arguments.length?(k=B==null?(x=b=w=S=null,Wy):sX(x=+B[0][0],b=+B[0][1],w=+B[1][0],S=+B[1][1]),U()):x==null?null:[[x,b],[w,S]]},z.scale=function(B){return arguments.length?(n=+B,W()):n},z.translate=function(B){return arguments.length?(i=+B[0],r=+B[1],W()):[i,r]},z.center=function(B){return arguments.length?(o=B[0]%360*Ct,a=B[1]%360*Ct,W()):[o*Ln,a*Ln]},z.rotate=function(B){return arguments.length?(s=B[0]%360*Ct,l=B[1]%360*Ct,u=B.length>2?B[2]%360*Ct:0,W()):[s*Ln,l*Ln,u*Ln]},z.angle=function(B){return arguments.length?(d=B%360*Ct,W()):d*Ln},z.reflectX=function(B){return arguments.length?(h=B?-1:1,W()):h<0},z.reflectY=function(B){return arguments.length?(m=B?-1:1,W()):m<0},z.precision=function(B){return arguments.length?(M=Gj(T,R=B*B),U()):_r(R)},z.fitExtent=function(B,V){return AS(z,B,V)},z.fitSize=function(B,V){return sO(z,B,V)},z.fitWidth=function(B,V){return lO(z,B,V)},z.fitHeight=function(B,V){return uO(z,B,V)};function W(){var B=qj(n,0,0,h,m,d).apply(null,t(o,a)),V=qj(n,i-B[0],r-B[1],h,m,d);return c=iX(s,l,u),T=BA(t,V),N=BA(c,T),M=Gj(T,R),U()}function U(){return D=I=null,z}return function(){return t=e.apply(this,arguments),z.invert=t.invert&&X,W()}}function cO(e){var t=0,n=Rt/3,i=_X(e),r=i(t,n);return r.parallels=function(o){return arguments.length?i(t=o[0]*Ct,n=o[1]*Ct):[t*Ln,n*Ln]},r}function k_e(e){var t=rt(e);function n(i,r){return[i*t,Qe(r)/t]}return n.invert=function(i,r){return[i/t,Kr(r*t)]},n}function R_e(e,t){var n=Qe(e),i=(n+Qe(t))/2;if($t(i)<it)return k_e(e);var r=1+n*(2*i-n),o=_r(r)/i;function a(s,l){var u=_r(r-2*i*Qe(l))/i;return[u*Qe(s*=i),o-u*rt(s)]}return a.invert=function(s,l){var u=o-l,c=ea(s,$t(u))*zo(u);return u*i<0&&(c-=Rt*zo(s)*zo(u)),[c/i,Kr((r-(s*s+u*u)*i*i)/(2*i))]},a}function gw(){return cO(R_e).scale(155.424).center([0,33.6442])}function bX(){return gw().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function T_e(e){var t=e.length;return{point:function(n,i){for(var r=-1;++r<t;)e[r].point(n,i)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function A_e(){var e,t,n=bX(),i,r=gw().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,a=gw().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s,l,u={point:function(h,m){l=[h,m]}};function c(h){var m=h[0],g=h[1];return l=null,i.point(m,g),l||(o.point(m,g),l)||(s.point(m,g),l)}c.invert=function(h){var m=n.scale(),g=n.translate(),y=(h[0]-g[0])/m,x=(h[1]-g[1])/m;return(x>=.12&&x<.234&&y>=-.425&&y<-.214?r:x>=.166&&x<.234&&y>=-.214&&y<-.115?a:n).invert(h)},c.stream=function(h){return e&&t===h?e:e=T_e([n.stream(t=h),r.stream(h),a.stream(h)])},c.precision=function(h){return arguments.length?(n.precision(h),r.precision(h),a.precision(h),d()):n.precision()},c.scale=function(h){return arguments.length?(n.scale(h),r.scale(h*.35),a.scale(h),c.translate(n.translate())):n.scale()},c.translate=function(h){if(!arguments.length)return n.translate();var m=n.scale(),g=+h[0],y=+h[1];return i=n.translate(h).clipExtent([[g-.455*m,y-.238*m],[g+.455*m,y+.238*m]]).stream(u),o=r.translate([g-.307*m,y+.201*m]).clipExtent([[g-.425*m+it,y+.12*m+it],[g-.214*m-it,y+.234*m-it]]).stream(u),s=a.translate([g-.205*m,y+.212*m]).clipExtent([[g-.214*m+it,y+.166*m+it],[g-.115*m-it,y+.234*m-it]]).stream(u),d()},c.fitExtent=function(h,m){return AS(c,h,m)},c.fitSize=function(h,m){return sO(c,h,m)},c.fitWidth=function(h,m){return lO(c,h,m)},c.fitHeight=function(h,m){return uO(c,h,m)};function d(){return e=t=null,c}return c.scale(1070)}function wX(e){return function(t,n){var i=rt(t),r=rt(n),o=e(i*r);return o===1/0?[2,0]:[o*r*Qe(t),o*Qe(n)]}}function jv(e){return function(t,n){var i=_r(t*t+n*n),r=e(i),o=Qe(r),a=rt(r);return[ea(t*o,i*a),Kr(i&&n*o/i)]}}var SX=wX(function(e){return _r(2/(1+e))});SX.invert=jv(function(e){return 2*Kr(e/2)});function M_e(){return js(SX).scale(124.75).clipAngle(180-.001)}var CX=wX(function(e){return(e=qZ(e))&&e/Qe(e)});CX.invert=jv(function(e){return e});function F_e(){return js(CX).scale(79.4188).clipAngle(180-.001)}function MS(e,t){return[e,Kb(rO((On+t)/2))]}MS.invert=function(e,t){return[e,2*Om(GZ(t))-On]};function P_e(){return EX(MS).scale(961/xr)}function EX(e){var t=js(e),n=t.center,i=t.scale,r=t.translate,o=t.clipExtent,a=null,s,l,u;t.scale=function(d){return arguments.length?(i(d),c()):i()},t.translate=function(d){return arguments.length?(r(d),c()):r()},t.center=function(d){return arguments.length?(n(d),c()):n()},t.clipExtent=function(d){return arguments.length?(d==null?a=s=l=u=null:(a=+d[0][0],s=+d[0][1],l=+d[1][0],u=+d[1][1]),c()):a==null?null:[[a,s],[l,u]]};function c(){var d=Rt*i(),h=t(Jxe(t.rotate()).invert([0,0]));return o(a==null?[[h[0]-d,h[1]-d],[h[0]+d,h[1]+d]]:e===MS?[[Math.max(h[0]-d,a),s],[Math.min(h[0]+d,l),u]]:[[a,Math.max(h[1]-d,s)],[l,Math.min(h[1]+d,u)]])}return c()}function Mx(e){return rO((On+e)/2)}function N_e(e,t){var n=rt(e),i=e===t?Qe(e):Kb(n/rt(t))/Kb(Mx(t)/Mx(e)),r=n*Sk(Mx(e),i)/i;if(!i)return MS;function o(a,s){r>0?s<-On+it&&(s=-On+it):s>On-it&&(s=On-it);var l=r/Sk(Mx(s),i);return[l*Qe(i*a),r-l*rt(i*a)]}return o.invert=function(a,s){var l=r-s,u=zo(i)*_r(a*a+l*l),c=ea(a,$t(l))*zo(l);return l*i<0&&(c-=Rt*zo(a)*zo(l)),[c/i,2*Om(Sk(r/u,1/i))-On]},o}function $_e(){return cO(N_e).scale(109.5).parallels([30,30])}function yw(e,t){return[e,t]}yw.invert=yw;function O_e(){return js(yw).scale(152.63)}function I_e(e,t){var n=rt(e),i=e===t?Qe(e):(n-rt(t))/(t-e),r=n/i+e;if($t(i)<it)return yw;function o(a,s){var l=r-s,u=i*a;return[l*Qe(u),r-l*rt(u)]}return o.invert=function(a,s){var l=r-s,u=ea(a,$t(l))*zo(l);return l*i<0&&(u-=Rt*zo(a)*zo(l)),[u/i,r-zo(i)*_r(a*a+l*l)]},o}function D_e(){return cO(I_e).scale(131.154).center([0,13.9389])}var Z0=1.340264,X0=-.081106,K0=893e-6,J0=.003796,vw=_r(3)/2,L_e=12;function kX(e,t){var n=Kr(vw*Qe(t)),i=n*n,r=i*i*i;return[e*rt(n)/(vw*(Z0+3*X0*i+r*(7*K0+9*J0*i))),n*(Z0+X0*i+r*(K0+J0*i))]}kX.invert=function(e,t){for(var n=t,i=n*n,r=i*i*i,o=0,a,s,l;o<L_e&&(s=n*(Z0+X0*i+r*(K0+J0*i))-t,l=Z0+3*X0*i+r*(7*K0+9*J0*i),n-=a=s/l,i=n*n,r=i*i*i,!($t(a)<Zb));++o);return[vw*e*(Z0+3*X0*i+r*(7*K0+9*J0*i))/rt(n),Kr(Qe(n)/vw)]};function j_e(){return js(kX).scale(177.158)}function RX(e,t){var n=rt(t),i=rt(e)*n;return[n*Qe(e)/i,Qe(t)/i]}RX.invert=jv(Om);function z_e(){return js(RX).scale(144.049).clipAngle(60)}function B_e(){var e=1,t=0,n=0,i=1,r=1,o=0,a,s,l=null,u,c,d,h=1,m=1,g=TS({point:function(k,R){var M=S([k,R]);this.stream.point(M[0],M[1])}}),y=Wy,x,b;function w(){return h=e*i,m=e*r,x=b=null,S}function S(k){var R=k[0]*h,M=k[1]*m;if(o){var T=M*a-R*s;R=R*a+M*s,M=T}return[R+t,M+n]}return S.invert=function(k){var R=k[0]-t,M=k[1]-n;if(o){var T=M*a+R*s;R=R*a-M*s,M=T}return[R/h,M/m]},S.stream=function(k){return x&&b===k?x:x=g(y(b=k))},S.postclip=function(k){return arguments.length?(y=k,l=u=c=d=null,w()):y},S.clipExtent=function(k){return arguments.length?(y=k==null?(l=u=c=d=null,Wy):sX(l=+k[0][0],u=+k[0][1],c=+k[1][0],d=+k[1][1]),w()):l==null?null:[[l,u],[c,d]]},S.scale=function(k){return arguments.length?(e=+k,w()):e},S.translate=function(k){return arguments.length?(t=+k[0],n=+k[1],w()):[t,n]},S.angle=function(k){return arguments.length?(o=k%360*Ct,s=Qe(o),a=rt(o),w()):o*Ln},S.reflectX=function(k){return arguments.length?(i=k?-1:1,w()):i<0},S.reflectY=function(k){return arguments.length?(r=k?-1:1,w()):r<0},S.fitExtent=function(k,R){return AS(S,k,R)},S.fitSize=function(k,R){return sO(S,k,R)},S.fitWidth=function(k,R){return lO(S,k,R)},S.fitHeight=function(k,R){return uO(S,k,R)},S}function TX(e,t){var n=t*t,i=n*n;return[e*(.8707-.131979*n+i*(-.013791+i*(.003971*n-.001529*i))),t*(1.007226+n*(.015085+i*(-.044475+.028874*n-.005916*i)))]}TX.invert=function(e,t){var n=t,i=25,r;do{var o=n*n,a=o*o;n-=r=(n*(1.007226+o*(.015085+a*(-.044475+.028874*o-.005916*a)))-t)/(1.007226+o*(.015085*3+a*(-.044475*7+.028874*9*o-.005916*11*a)))}while($t(r)>it&&--i>0);return[e/(.8707+(o=n*n)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),n]};function H_e(){return js(TX).scale(175.295)}function AX(e,t){return[rt(t)*Qe(e),Qe(t)]}AX.invert=jv(Kr);function U_e(){return js(AX).scale(249.5).clipAngle(90+it)}function MX(e,t){var n=rt(t),i=1+rt(e)*n;return[n*Qe(e)/i,Qe(t)/i]}MX.invert=jv(function(e){return 2*Om(e)});function W_e(){return js(MX).scale(250).clipAngle(142)}function FX(e,t){return[Kb(rO((On+t)/2)),-e]}FX.invert=function(e,t){return[-t,2*Om(GZ(e))-On]};function G_e(){var e=EX(FX),t=e.center,n=e.rotate;return e.center=function(i){return arguments.length?t([-i[1],i[0]]):(i=t(),[i[1],-i[0]])},e.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}var q_e=Math.abs,JA=Math.cos,xw=Math.sin,V_e=1e-6,PX=Math.PI,QA=PX/2,Vj=Y_e(2);function Yj(e){return e>1?QA:e<-1?-QA:Math.asin(e)}function Y_e(e){return e>0?Math.sqrt(e):0}function Z_e(e,t){var n=e*xw(t),i=30,r;do t-=r=(t+xw(t)-n)/(1+JA(t));while(q_e(r)>V_e&&--i>0);return t/2}function X_e(e,t,n){function i(r,o){return[e*r*JA(o=Z_e(n,o)),t*xw(o)]}return i.invert=function(r,o){return o=Yj(o/t),[r/(e*JA(o)),Yj((2*o+xw(2*o))/n)]},i}var K_e=X_e(Vj/QA,Vj,PX);function J_e(){return js(K_e).scale(169.529)}const Q_e=xX(),eM=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function ebe(e,t){return function n(){const i=t();return i.type=e,i.path=xX().projection(i),i.copy=i.copy||function(){const r=n();return eM.forEach(o=>{i[o]&&r[o](i[o]())}),r.path.pointRadius(i.path.pointRadius()),r},KV(i)}}function fO(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(_w[e]=ebe(e,t),this):_w[e]||null}function NX(e){return e&&e.path||Q_e}const _w={albers:bX,albersusa:A_e,azimuthalequalarea:M_e,azimuthalequidistant:F_e,conicconformal:$_e,conicequalarea:gw,conicequidistant:D_e,equalEarth:j_e,equirectangular:O_e,gnomonic:z_e,identity:B_e,mercator:P_e,mollweide:J_e,naturalEarth1:H_e,orthographic:U_e,stereographic:W_e,transversemercator:G_e};for(const e in _w)fO(e,_w[e]);function tbe(){}const nl=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function $X(){var e=1,t=1,n=s;function i(l,u){return u.map(c=>r(l,c))}function r(l,u){var c=[],d=[];return o(l,u,h=>{n(h,l,u),nbe(h)>0?c.push([h]):d.push(h)}),d.forEach(h=>{for(var m=0,g=c.length,y;m<g;++m)if(ibe((y=c[m])[0],h)!==-1){y.push(h);return}}),{type:"MultiPolygon",value:u,coordinates:c}}function o(l,u,c){var d=new Array,h=new Array,m,g,y,x,b,w;for(m=g=-1,x=l[0]>=u,nl[x<<1].forEach(S);++m<e-1;)y=x,x=l[m+1]>=u,nl[y|x<<1].forEach(S);for(nl[x<<0].forEach(S);++g<t-1;){for(m=-1,x=l[g*e+e]>=u,b=l[g*e]>=u,nl[x<<1|b<<2].forEach(S);++m<e-1;)y=x,x=l[g*e+e+m+1]>=u,w=b,b=l[g*e+m+1]>=u,nl[y|x<<1|b<<2|w<<3].forEach(S);nl[x|b<<3].forEach(S)}for(m=-1,b=l[g*e]>=u,nl[b<<2].forEach(S);++m<e-1;)w=b,b=l[g*e+m+1]>=u,nl[b<<2|w<<3].forEach(S);nl[b<<3].forEach(S);function S(k){var R=[k[0][0]+m,k[0][1]+g],M=[k[1][0]+m,k[1][1]+g],T=a(R),N=a(M),D,I;(D=h[T])?(I=d[N])?(delete h[D.end],delete d[I.start],D===I?(D.ring.push(M),c(D.ring)):d[D.start]=h[I.end]={start:D.start,end:I.end,ring:D.ring.concat(I.ring)}):(delete h[D.end],D.ring.push(M),h[D.end=N]=D):(D=d[N])?(I=h[T])?(delete d[D.start],delete h[I.end],D===I?(D.ring.push(M),c(D.ring)):d[I.start]=h[D.end]={start:I.start,end:D.end,ring:I.ring.concat(D.ring)}):(delete d[D.start],D.ring.unshift(R),d[D.start=T]=D):d[T]=h[N]={start:T,end:N,ring:[R,M]}}}function a(l){return l[0]*2+l[1]*(e+1)*4}function s(l,u,c){l.forEach(d=>{var h=d[0],m=d[1],g=h|0,y=m|0,x,b=u[y*e+g];h>0&&h<e&&g===h&&(x=u[y*e+g-1],d[0]=h+(c-x)/(b-x)-.5),m>0&&m<t&&y===m&&(x=u[(y-1)*e+g],d[1]=m+(c-x)/(b-x)-.5)})}return i.contour=r,i.size=function(l){if(!arguments.length)return[e,t];var u=Math.floor(l[0]),c=Math.floor(l[1]);return u>=0&&c>=0||le("invalid size"),e=u,t=c,i},i.smooth=function(l){return arguments.length?(n=l?s:tbe,i):n===s},i}function nbe(e){for(var t=0,n=e.length,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i}function ibe(e,t){for(var n=-1,i=t.length,r;++n<i;)if(r=rbe(e,t[n]))return r;return 0}function rbe(e,t){for(var n=t[0],i=t[1],r=-1,o=0,a=e.length,s=a-1;o<a;s=o++){var l=e[o],u=l[0],c=l[1],d=e[s],h=d[0],m=d[1];if(obe(l,d,t))return 0;c>i!=m>i&&n<(h-u)*(i-c)/(m-c)+u&&(r=-r)}return r}function obe(e,t,n){var i;return abe(e,t,n)&&sbe(e[i=+(e[0]===t[0])],n[i],t[i])}function abe(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function sbe(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function OX(e,t,n){return function(i){var r=Rs(i),o=n?Math.min(r[0],0):r[0],a=r[1],s=a-o,l=t?uc(o,a,e):s/(e+1);return ho(o+l,a,l)}}function dO(e){ne.call(this,null,e)}dO.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};be(dO,ne,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=e.field||tr,o=$X().smooth(e.smooth!==!1),a=e.thresholds||lbe(i,r,e),s=e.as===null?null:e.as||"contour",l=[];return i.forEach(u=>{const c=r(u),d=o.size([c.width,c.height])(c.values,fe(a)?a:a(c.values));ube(d,c,u,e),d.forEach(h=>{l.push(q2(u,Vt(s!=null?{[s]:h}:h)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function lbe(e,t,n){const i=OX(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?i:i(e.map(r=>Wf(t(r).values)))}function ube(e,t,n,i){let r=i.scale||t.scale,o=i.translate||t.translate;if(_t(r)&&(r=r(n,i)),_t(o)&&(o=o(n,i)),(r===1||r==null)&&!o)return;const a=(zt(r)?r:r[0])||1,s=(zt(r)?r:r[1])||1,l=o&&o[0]||0,u=o&&o[1]||0;e.forEach(IX(t,a,s,l,u))}function IX(e,t,n,i,r){const o=e.x1||0,a=e.y1||0,s=t*n<0;function l(d){d.forEach(u)}function u(d){s&&d.reverse(),d.forEach(c)}function c(d){d[0]=(d[0]-o)*t+i,d[1]=(d[1]-a)*n+r}return function(d){return d.coordinates.forEach(l),d}}function Zj(e,t,n){const i=e>=0?e:tN(t,n);return Math.round((Math.sqrt(4*i*i+1)-1)/2)}function Tk(e){return _t(e)?e:nr(+e)}function DX(){var e=l=>l[0],t=l=>l[1],n=wm,i=[-1,-1],r=960,o=500,a=2;function s(l,u){const c=Zj(i[0],l,e)>>a,d=Zj(i[1],l,t)>>a,h=c?c+2:0,m=d?d+2:0,g=2*h+(r>>a),y=2*m+(o>>a),x=new Float32Array(g*y),b=new Float32Array(g*y);let w=x;l.forEach(k=>{const R=h+(+e(k)>>a),M=m+(+t(k)>>a);R>=0&&R<g&&M>=0&&M<y&&(x[R+M*g]+=+n(k))}),c>0&&d>0?(Eh(g,y,x,b,c),kh(g,y,b,x,d),Eh(g,y,x,b,c),kh(g,y,b,x,d),Eh(g,y,x,b,c),kh(g,y,b,x,d)):c>0?(Eh(g,y,x,b,c),Eh(g,y,b,x,c),Eh(g,y,x,b,c),w=b):d>0&&(kh(g,y,x,b,d),kh(g,y,b,x,d),kh(g,y,x,b,d),w=b);const S=u?Math.pow(2,-2*a):1/tG(w);for(let k=0,R=g*y;k<R;++k)w[k]*=S;return{values:w,scale:1<<a,width:g,height:y,x1:h,y1:m,x2:h+(r>>a),y2:m+(o>>a)}}return s.x=function(l){return arguments.length?(e=Tk(l),s):e},s.y=function(l){return arguments.length?(t=Tk(l),s):t},s.weight=function(l){return arguments.length?(n=Tk(l),s):n},s.size=function(l){if(!arguments.length)return[r,o];var u=+l[0],c=+l[1];return u>=0&&c>=0||le("invalid size"),r=u,o=c,s},s.cellSize=function(l){return arguments.length?((l=+l)>=1||le("invalid cell size"),a=Math.floor(Math.log(l)/Math.LN2),s):1<<a},s.bandwidth=function(l){return arguments.length?(l=$e(l),l.length===1&&(l=[+l[0],+l[0]]),l.length!==2&&le("invalid bandwidth"),i=l,s):i},s}function Eh(e,t,n,i,r){const o=(r<<1)+1;for(let a=0;a<t;++a)for(let s=0,l=0;s<e+r;++s)s<e&&(l+=n[s+a*e]),s>=r&&(s>=o&&(l-=n[s-o+a*e]),i[s-r+a*e]=l/Math.min(s+1,e-1+o-s,o))}function kh(e,t,n,i,r){const o=(r<<1)+1;for(let a=0;a<e;++a)for(let s=0,l=0;s<t+r;++s)s<t&&(l+=n[a+s*e]),s>=r&&(s>=o&&(l-=n[a+(s-o)*e]),i[a+(s-r)*e]=l/Math.min(s+1,t-1+o-s,o))}function hO(e){ne.call(this,null,e)}hO.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const cbe=["x","y","weight","size","cellSize","bandwidth"];function LX(e,t){return cbe.forEach(n=>t[n]!=null?e[n](t[n]):0),e}be(hO,ne,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=fbe(i,e.groupby),o=(e.groupby||[]).map(In),a=LX(DX(),e),s=e.as||"grid",l=[];function u(c,d){for(let h=0;h<o.length;++h)c[o[h]]=d[h];return c}return l=r.map(c=>Vt(u({[s]:a(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function fbe(e,t){var n=[],i=c=>c(s),r,o,a,s,l,u;if(t==null)n.push(e);else for(r={},o=0,a=e.length;o<a;++o)s=e[o],l=t.map(i),u=r[l],u||(r[l]=u=[],u.dims=l,n.push(u)),u.push(s);return n}function pO(e){ne.call(this,null,e)}pO.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};be(pO,ne,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=$X().smooth(e.smooth!==!1),r=e.values,o=e.thresholds||OX(e.count||10,e.nice,!!r),a=e.size,s,l;return r||(r=t.materialize(t.SOURCE).source,s=LX(DX(),e)(r,!0),l=IX(s,s.scale||1,s.scale||1,0,0),a=[s.width,s.height],r=s.values),o=fe(o)?o:o(r),r=i.size(a)(r,o),l&&r.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(r||[]).map(Vt),n}});const tM="Feature",mO="FeatureCollection",dbe="MultiPoint";function gO(e){ne.call(this,null,e)}gO.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};be(gO,ne,{transform(e,t){var n=this._features,i=this._points,r=e.fields,o=r&&r[0],a=r&&r[1],s=e.geojson||!r&&tr,l=t.ADD,u;u=e.modified()||t.changed(t.REM)||t.modified(Xi(s))||o&&t.modified(Xi(o))||a&&t.modified(Xi(a)),(!this.value||u)&&(l=t.SOURCE,this._features=n=[],this._points=i=[]),s&&t.visit(l,c=>n.push(s(c))),o&&a&&(t.visit(l,c=>{var d=o(c),h=a(c);d!=null&&h!=null&&(d=+d)===d&&(h=+h)===h&&i.push([d,h])}),n=n.concat({type:tM,geometry:{type:dbe,coordinates:i}})),this.value={type:mO,features:n}}});function yO(e){ne.call(this,null,e)}yO.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};be(yO,ne,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.field||tr,o=e.as||"path",a=n.SOURCE;!i||e.modified()?(this.value=i=NX(e.projection),n.materialize().reflow()):a=r===tr||t.modified(r.fields)?n.ADD_MOD:n.ADD;const s=hbe(i,e.pointRadius);return n.visit(a,l=>l[o]=i(r(l))),i.pointRadius(s),n.modifies(o)}});function hbe(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function vO(e){ne.call(this,null,e)}vO.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};be(vO,ne,{transform(e,t){var n=e.projection,i=e.fields[0],r=e.fields[1],o=e.as||["x","y"],a=o[0],s=o[1],l;function u(c){const d=n([i(c),r(c)]);d?(c[a]=d[0],c[s]=d[1]):(c[a]=void 0,c[s]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,u):(l=t.modified(i.fields)||t.modified(r.fields),t.visit(l?t.ADD_MOD:t.ADD,u)),t.modifies(o)}});function xO(e){ne.call(this,null,e)}xO.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};be(xO,ne,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.as||"shape",o=n.ADD;return(!i||e.modified())&&(this.value=i=pbe(NX(e.projection),e.field||Xo("datum"),e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,a=>a[r]=i),n.modifies(r)}});function pbe(e,t,n){const i=n==null?r=>e(t(r)):r=>{var o=e.pointRadius(),a=e.pointRadius(n)(t(r));return e.pointRadius(o),a};return i.context=r=>(e.context(r),i),i}function _O(e){ne.call(this,[],e),this.generator=l_e()}_O.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};be(_O,ne,{transform(e,t){var n=this.value,i=this.generator,r;if(!n.length||e.modified())for(const o in e)_t(i[o])&&i[o](e[o]);return r=i(),n.length?t.mod.push(XG(n[0],r)):t.add.push(Vt(r)),n[0]=r,t}});function bO(e){ne.call(this,null,e)}bO.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};be(bO,ne,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,i=e.resolve==="shared",r=e.field||tr,o=gbe(e.opacity,e),a=mbe(e.color,e),s=e.as||"image",l={$x:0,$y:0,$value:0,$max:i?Wf(n.map(u=>Wf(r(u).values))):0};return n.forEach(u=>{const c=r(u),d=xt({},u,l);i||(d.$max=Wf(c.values||[])),u[s]=ybe(c,d,a.dep?a:nr(a(d)),o.dep?o:nr(o(d)))}),t.reflow(!0).modifies(s)}});function mbe(e,t){let n;return _t(e)?(n=i=>dc(e(i,t)),n.dep=jX(e)):n=nr(dc(e||"#888")),n}function gbe(e,t){let n;return _t(e)?(n=i=>e(i,t),n.dep=jX(e)):e?n=nr(e):(n=i=>i.$value/i.$max||0,n.dep=!0),n}function jX(e){if(!_t(e))return!1;const t=Da(Xi(e));return t.$x||t.$y||t.$value||t.$max}function ybe(e,t,n,i){const r=e.width,o=e.height,a=e.x1||0,s=e.y1||0,l=e.x2||r,u=e.y2||o,c=e.values,d=c?x=>c[x]:Au,h=tc(l-a,u-s),m=h.getContext("2d"),g=m.getImageData(0,0,l-a,u-s),y=g.data;for(let x=s,b=0;x<u;++x){t.$y=x-s;for(let w=a,S=x*r;w<l;++w,b+=4){t.$x=w-a,t.$value=d(w+S);const k=n(t);y[b+0]=k.r,y[b+1]=k.g,y[b+2]=k.b,y[b+3]=~~(255*i(t))}}return m.putImageData(g,0,0),h}function zX(e){ne.call(this,null,e),this.modified(!0)}be(zX,ne,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=xbe(e.type),eM.forEach(i=>{e[i]!=null&&Xj(n,i,e[i])})):eM.forEach(i=>{e.modified(i)&&Xj(n,i,e[i])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&vbe(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function vbe(e,t){const n=_be(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function xbe(e){const t=fO((e||"mercator").toLowerCase());return t||le("Unrecognized projection type: "+e),t()}function Xj(e,t,n){_t(e[t])&&e[t](n)}function _be(e){return e=$e(e),e.length===1?e[0]:{type:mO,features:e.reduce((t,n)=>t.concat(bbe(n)),[])}}function bbe(e){return e.type===mO?e.features:$e(e).filter(t=>t!=null).map(t=>t.type===tM?t:{type:tM,geometry:t})}const wbe=Object.freeze(Object.defineProperty({__proto__:null,contour:pO,geojson:gO,geopath:yO,geopoint:vO,geoshape:xO,graticule:_O,heatmap:bO,isocontour:dO,kde2d:hO,projection:zX},Symbol.toStringTag,{value:"Module"}));function Sbe(e,t){var n,i=1;e==null&&(e=0),t==null&&(t=0);function r(){var o,a=n.length,s,l=0,u=0;for(o=0;o<a;++o)s=n[o],l+=s.x,u+=s.y;for(l=(l/a-e)*i,u=(u/a-t)*i,o=0;o<a;++o)s=n[o],s.x-=l,s.y-=u}return r.initialize=function(o){n=o},r.x=function(o){return arguments.length?(e=+o,r):e},r.y=function(o){return arguments.length?(t=+o,r):t},r.strength=function(o){return arguments.length?(i=+o,r):i},r}function Cbe(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return BX(this.cover(t,n),t,n,e)}function BX(e,t,n,i){if(isNaN(t)||isNaN(n))return e;var r,o=e._root,a={data:i},s=e._x0,l=e._y0,u=e._x1,c=e._y1,d,h,m,g,y,x,b,w;if(!o)return e._root=a,e;for(;o.length;)if((y=t>=(d=(s+u)/2))?s=d:u=d,(x=n>=(h=(l+c)/2))?l=h:c=h,r=o,!(o=o[b=x<<1|y]))return r[b]=a,e;if(m=+e._x.call(null,o.data),g=+e._y.call(null,o.data),t===m&&n===g)return a.next=o,r?r[b]=a:e._root=a,e;do r=r?r[b]=new Array(4):e._root=new Array(4),(y=t>=(d=(s+u)/2))?s=d:u=d,(x=n>=(h=(l+c)/2))?l=h:c=h;while((b=x<<1|y)===(w=(g>=h)<<1|m>=d));return r[w]=o,r[b]=a,e}function Ebe(e){var t,n,i=e.length,r,o,a=new Array(i),s=new Array(i),l=1/0,u=1/0,c=-1/0,d=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(a[n]=r,s[n]=o,r<l&&(l=r),r>c&&(c=r),o<u&&(u=o),o>d&&(d=o));if(l>c||u>d)return this;for(this.cover(l,u).cover(c,d),n=0;n<i;++n)BX(this,a[n],s[n],e[n]);return this}function kbe(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,i=this._y0,r=this._x1,o=this._y1;if(isNaN(n))r=(n=Math.floor(e))+1,o=(i=Math.floor(t))+1;else{for(var a=r-n||1,s=this._root,l,u;n>e||e>=r||i>t||t>=o;)switch(u=(t<i)<<1|e<n,l=new Array(4),l[u]=s,s=l,a*=2,u){case 0:r=n+a,o=i+a;break;case 1:n=r-a,o=i+a;break;case 2:r=n+a,i=o-a;break;case 3:n=r-a,i=o-a;break}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=i,this._x1=r,this._y1=o,this}function Rbe(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Tbe(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function hr(e,t,n,i,r){this.node=e,this.x0=t,this.y0=n,this.x1=i,this.y1=r}function Abe(e,t,n){var i,r=this._x0,o=this._y0,a,s,l,u,c=this._x1,d=this._y1,h=[],m=this._root,g,y;for(m&&h.push(new hr(m,r,o,c,d)),n==null?n=1/0:(r=e-n,o=t-n,c=e+n,d=t+n,n*=n);g=h.pop();)if(!(!(m=g.node)||(a=g.x0)>c||(s=g.y0)>d||(l=g.x1)<r||(u=g.y1)<o))if(m.length){var x=(a+l)/2,b=(s+u)/2;h.push(new hr(m[3],x,b,l,u),new hr(m[2],a,b,x,u),new hr(m[1],x,s,l,b),new hr(m[0],a,s,x,b)),(y=(t>=b)<<1|e>=x)&&(g=h[h.length-1],h[h.length-1]=h[h.length-1-y],h[h.length-1-y]=g)}else{var w=e-+this._x.call(null,m.data),S=t-+this._y.call(null,m.data),k=w*w+S*S;if(k<n){var R=Math.sqrt(n=k);r=e-R,o=t-R,c=e+R,d=t+R,i=m.data}}return i}function Mbe(e){if(isNaN(c=+this._x.call(null,e))||isNaN(d=+this._y.call(null,e)))return this;var t,n=this._root,i,r,o,a=this._x0,s=this._y0,l=this._x1,u=this._y1,c,d,h,m,g,y,x,b;if(!n)return this;if(n.length)for(;;){if((g=c>=(h=(a+l)/2))?a=h:l=h,(y=d>=(m=(s+u)/2))?s=m:u=m,t=n,!(n=n[x=y<<1|g]))return this;if(!n.length)break;(t[x+1&3]||t[x+2&3]||t[x+3&3])&&(i=t,b=x)}for(;n.data!==e;)if(r=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,r?(o?r.next=o:delete r.next,this):t?(o?t[x]=o:delete t[x],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(i?i[b]=n:this._root=n),this):(this._root=o,this)}function Fbe(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Pbe(){return this._root}function Nbe(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function $be(e){var t=[],n,i=this._root,r,o,a,s,l;for(i&&t.push(new hr(i,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(i=n.node,o=n.x0,a=n.y0,s=n.x1,l=n.y1)&&i.length){var u=(o+s)/2,c=(a+l)/2;(r=i[3])&&t.push(new hr(r,u,c,s,l)),(r=i[2])&&t.push(new hr(r,o,c,u,l)),(r=i[1])&&t.push(new hr(r,u,a,s,c)),(r=i[0])&&t.push(new hr(r,o,a,u,c))}return this}function Obe(e){var t=[],n=[],i;for(this._root&&t.push(new hr(this._root,this._x0,this._y0,this._x1,this._y1));i=t.pop();){var r=i.node;if(r.length){var o,a=i.x0,s=i.y0,l=i.x1,u=i.y1,c=(a+l)/2,d=(s+u)/2;(o=r[0])&&t.push(new hr(o,a,s,c,d)),(o=r[1])&&t.push(new hr(o,c,s,l,d)),(o=r[2])&&t.push(new hr(o,a,d,c,u)),(o=r[3])&&t.push(new hr(o,c,d,l,u))}n.push(i)}for(;i=n.pop();)e(i.node,i.x0,i.y0,i.x1,i.y1);return this}function Ibe(e){return e[0]}function Dbe(e){return arguments.length?(this._x=e,this):this._x}function Lbe(e){return e[1]}function jbe(e){return arguments.length?(this._y=e,this):this._y}function wO(e,t,n){var i=new SO(t??Ibe,n??Lbe,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}function SO(e,t,n,i,r,o){this._x=e,this._y=t,this._x0=n,this._y0=i,this._x1=r,this._y1=o,this._root=void 0}function Kj(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Cr=wO.prototype=SO.prototype;Cr.copy=function(){var e=new SO(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,i;if(!t)return e;if(!t.length)return e._root=Kj(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var r=0;r<4;++r)(i=t.source[r])&&(i.length?n.push({source:i,target:t.target[r]=new Array(4)}):t.target[r]=Kj(i));return e};Cr.add=Cbe;Cr.addAll=Ebe;Cr.cover=kbe;Cr.data=Rbe;Cr.extent=Tbe;Cr.find=Abe;Cr.remove=Mbe;Cr.removeAll=Fbe;Cr.root=Pbe;Cr.size=Nbe;Cr.visit=$be;Cr.visitAfter=Obe;Cr.x=Dbe;Cr.y=jbe;function pr(e){return function(){return e}}function Bu(e){return(e()-.5)*1e-6}function zbe(e){return e.x+e.vx}function Bbe(e){return e.y+e.vy}function Hbe(e){var t,n,i,r=1,o=1;typeof e!="function"&&(e=pr(e==null?1:+e));function a(){for(var u,c=t.length,d,h,m,g,y,x,b=0;b<o;++b)for(d=wO(t,zbe,Bbe).visitAfter(s),u=0;u<c;++u)h=t[u],y=n[h.index],x=y*y,m=h.x+h.vx,g=h.y+h.vy,d.visit(w);function w(S,k,R,M,T){var N=S.data,D=S.r,I=y+D;if(N){if(N.index>h.index){var z=m-N.x-N.vx,X=g-N.y-N.vy,W=z*z+X*X;W<I*I&&(z===0&&(z=Bu(i),W+=z*z),X===0&&(X=Bu(i),W+=X*X),W=(I-(W=Math.sqrt(W)))/W*r,h.vx+=(z*=W)*(I=(D*=D)/(x+D)),h.vy+=(X*=W)*I,N.vx-=z*(I=1-I),N.vy-=X*I)}return}return k>m+I||M<m-I||R>g+I||T<g-I}}function s(u){if(u.data)return u.r=n[u.data.index];for(var c=u.r=0;c<4;++c)u[c]&&u[c].r>u.r&&(u.r=u[c].r)}function l(){if(t){var u,c=t.length,d;for(n=new Array(c),u=0;u<c;++u)d=t[u],n[d.index]=+e(d,u,t)}}return a.initialize=function(u,c){t=u,i=c,l()},a.iterations=function(u){return arguments.length?(o=+u,a):o},a.strength=function(u){return arguments.length?(r=+u,a):r},a.radius=function(u){return arguments.length?(e=typeof u=="function"?u:pr(+u),l(),a):e},a}function Ube(e){return e.index}function Jj(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Wbe(e){var t=Ube,n=d,i,r=pr(30),o,a,s,l,u,c=1;e==null&&(e=[]);function d(x){return 1/Math.min(s[x.source.index],s[x.target.index])}function h(x){for(var b=0,w=e.length;b<c;++b)for(var S=0,k,R,M,T,N,D,I;S<w;++S)k=e[S],R=k.source,M=k.target,T=M.x+M.vx-R.x-R.vx||Bu(u),N=M.y+M.vy-R.y-R.vy||Bu(u),D=Math.sqrt(T*T+N*N),D=(D-o[S])/D*x*i[S],T*=D,N*=D,M.vx-=T*(I=l[S]),M.vy-=N*I,R.vx+=T*(I=1-I),R.vy+=N*I}function m(){if(a){var x,b=a.length,w=e.length,S=new Map(a.map((R,M)=>[t(R,M,a),R])),k;for(x=0,s=new Array(b);x<w;++x)k=e[x],k.index=x,typeof k.source!="object"&&(k.source=Jj(S,k.source)),typeof k.target!="object"&&(k.target=Jj(S,k.target)),s[k.source.index]=(s[k.source.index]||0)+1,s[k.target.index]=(s[k.target.index]||0)+1;for(x=0,l=new Array(w);x<w;++x)k=e[x],l[x]=s[k.source.index]/(s[k.source.index]+s[k.target.index]);i=new Array(w),g(),o=new Array(w),y()}}function g(){if(a)for(var x=0,b=e.length;x<b;++x)i[x]=+n(e[x],x,e)}function y(){if(a)for(var x=0,b=e.length;x<b;++x)o[x]=+r(e[x],x,e)}return h.initialize=function(x,b){a=x,u=b,m()},h.links=function(x){return arguments.length?(e=x,m(),h):e},h.id=function(x){return arguments.length?(t=x,h):t},h.iterations=function(x){return arguments.length?(c=+x,h):c},h.strength=function(x){return arguments.length?(n=typeof x=="function"?x:pr(+x),g(),h):n},h.distance=function(x){return arguments.length?(r=typeof x=="function"?x:pr(+x),y(),h):r},h}var Gbe={value:()=>{}};function HX(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new E_(n)}function E_(e){this._=e}function qbe(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}E_.prototype=HX.prototype={constructor:E_,on:function(e,t){var n=this._,i=qbe(e+"",n),r,o=-1,a=i.length;if(arguments.length<2){for(;++o<a;)if((r=(e=i[o]).type)&&(r=Vbe(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(r=(e=i[o]).type)n[r]=Qj(n[r],e.name,t);else if(t==null)for(r in n)n[r]=Qj(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new E_(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,o;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],i=0,r=o.length;i<r;++i)o[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)}};function Vbe(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function Qj(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=Gbe,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var Jp=0,S0=0,zg=0,UX=1e3,bw,C0,ww=0,pd=0,FS=0,Vy=typeof performance=="object"&&performance.now?performance:Date,WX=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function CO(){return pd||(WX(Ybe),pd=Vy.now()+FS)}function Ybe(){pd=0}function Sw(){this._call=this._time=this._next=null}Sw.prototype=GX.prototype={constructor:Sw,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?CO():+n)+(t==null?0:+t),!this._next&&C0!==this&&(C0?C0._next=this:bw=this,C0=this),this._call=e,this._time=n,nM()},stop:function(){this._call&&(this._call=null,this._time=1/0,nM())}};function GX(e,t,n){var i=new Sw;return i.restart(e,t,n),i}function Zbe(){CO(),++Jp;for(var e=bw,t;e;)(t=pd-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Jp}function ez(){pd=(ww=Vy.now())+FS,Jp=S0=0;try{Zbe()}finally{Jp=0,Kbe(),pd=0}}function Xbe(){var e=Vy.now(),t=e-ww;t>UX&&(FS-=t,ww=e)}function Kbe(){for(var e,t=bw,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:bw=n);C0=e,nM(i)}function nM(e){if(!Jp){S0&&(S0=clearTimeout(S0));var t=e-pd;t>24?(e<1/0&&(S0=setTimeout(ez,e-Vy.now()-FS)),zg&&(zg=clearInterval(zg))):(zg||(ww=Vy.now(),zg=setInterval(Xbe,UX)),Jp=1,WX(ez))}}function Jbe(e,t,n){var i=new Sw,r=t;return t==null?(i.restart(e,t,n),i):(i._restart=i.restart,i.restart=function(o,a,s){a=+a,s=s==null?CO():+s,i._restart(function l(u){u+=r,i._restart(l,r+=a,s),o(u)},a,s)},i.restart(e,t,n),i)}const Qbe=1664525,ewe=1013904223,tz=4294967296;function twe(){let e=1;return()=>(e=(Qbe*e+ewe)%tz)/tz}function nwe(e){return e.x}function iwe(e){return e.y}var rwe=10,owe=Math.PI*(3-Math.sqrt(5));function awe(e){var t,n=1,i=.001,r=1-Math.pow(i,1/300),o=0,a=.6,s=new Map,l=GX(d),u=HX("tick","end"),c=twe();e==null&&(e=[]);function d(){h(),u.call("tick",t),n<i&&(l.stop(),u.call("end",t))}function h(y){var x,b=e.length,w;y===void 0&&(y=1);for(var S=0;S<y;++S)for(n+=(o-n)*r,s.forEach(function(k){k(n)}),x=0;x<b;++x)w=e[x],w.fx==null?w.x+=w.vx*=a:(w.x=w.fx,w.vx=0),w.fy==null?w.y+=w.vy*=a:(w.y=w.fy,w.vy=0);return t}function m(){for(var y=0,x=e.length,b;y<x;++y){if(b=e[y],b.index=y,b.fx!=null&&(b.x=b.fx),b.fy!=null&&(b.y=b.fy),isNaN(b.x)||isNaN(b.y)){var w=rwe*Math.sqrt(.5+y),S=y*owe;b.x=w*Math.cos(S),b.y=w*Math.sin(S)}(isNaN(b.vx)||isNaN(b.vy))&&(b.vx=b.vy=0)}}function g(y){return y.initialize&&y.initialize(e,c),y}return m(),t={tick:h,restart:function(){return l.restart(d),t},stop:function(){return l.stop(),t},nodes:function(y){return arguments.length?(e=y,m(),s.forEach(g),t):e},alpha:function(y){return arguments.length?(n=+y,t):n},alphaMin:function(y){return arguments.length?(i=+y,t):i},alphaDecay:function(y){return arguments.length?(r=+y,t):+r},alphaTarget:function(y){return arguments.length?(o=+y,t):o},velocityDecay:function(y){return arguments.length?(a=1-y,t):1-a},randomSource:function(y){return arguments.length?(c=y,s.forEach(g),t):c},force:function(y,x){return arguments.length>1?(x==null?s.delete(y):s.set(y,g(x)),t):s.get(y)},find:function(y,x,b){var w=0,S=e.length,k,R,M,T,N;for(b==null?b=1/0:b*=b,w=0;w<S;++w)T=e[w],k=y-T.x,R=x-T.y,M=k*k+R*R,M<b&&(N=T,b=M);return N},on:function(y,x){return arguments.length>1?(u.on(y,x),t):u.on(y)}}}function swe(){var e,t,n,i,r=pr(-30),o,a=1,s=1/0,l=.81;function u(m){var g,y=e.length,x=wO(e,nwe,iwe).visitAfter(d);for(i=m,g=0;g<y;++g)t=e[g],x.visit(h)}function c(){if(e){var m,g=e.length,y;for(o=new Array(g),m=0;m<g;++m)y=e[m],o[y.index]=+r(y,m,e)}}function d(m){var g=0,y,x,b=0,w,S,k;if(m.length){for(w=S=k=0;k<4;++k)(y=m[k])&&(x=Math.abs(y.value))&&(g+=y.value,b+=x,w+=x*y.x,S+=x*y.y);m.x=w/b,m.y=S/b}else{y=m,y.x=y.data.x,y.y=y.data.y;do g+=o[y.data.index];while(y=y.next)}m.value=g}function h(m,g,y,x){if(!m.value)return!0;var b=m.x-t.x,w=m.y-t.y,S=x-g,k=b*b+w*w;if(S*S/l<k)return k<s&&(b===0&&(b=Bu(n),k+=b*b),w===0&&(w=Bu(n),k+=w*w),k<a&&(k=Math.sqrt(a*k)),t.vx+=b*m.value*i/k,t.vy+=w*m.value*i/k),!0;if(m.length||k>=s)return;(m.data!==t||m.next)&&(b===0&&(b=Bu(n),k+=b*b),w===0&&(w=Bu(n),k+=w*w),k<a&&(k=Math.sqrt(a*k)));do m.data!==t&&(S=o[m.data.index]*i/k,t.vx+=b*S,t.vy+=w*S);while(m=m.next)}return u.initialize=function(m,g){e=m,n=g,c()},u.strength=function(m){return arguments.length?(r=typeof m=="function"?m:pr(+m),c(),u):r},u.distanceMin=function(m){return arguments.length?(a=m*m,u):Math.sqrt(a)},u.distanceMax=function(m){return arguments.length?(s=m*m,u):Math.sqrt(s)},u.theta=function(m){return arguments.length?(l=m*m,u):Math.sqrt(l)},u}function lwe(e){var t=pr(.1),n,i,r;typeof e!="function"&&(e=pr(e==null?0:+e));function o(s){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vx+=(r[l]-c.x)*i[l]*s}function a(){if(n){var s,l=n.length;for(i=new Array(l),r=new Array(l),s=0;s<l;++s)i[s]=isNaN(r[s]=+e(n[s],s,n))?0:+t(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(t=typeof s=="function"?s:pr(+s),a(),o):t},o.x=function(s){return arguments.length?(e=typeof s=="function"?s:pr(+s),a(),o):e},o}function uwe(e){var t=pr(.1),n,i,r;typeof e!="function"&&(e=pr(e==null?0:+e));function o(s){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vy+=(r[l]-c.y)*i[l]*s}function a(){if(n){var s,l=n.length;for(i=new Array(l),r=new Array(l),s=0;s<l;++s)i[s]=isNaN(r[s]=+e(n[s],s,n))?0:+t(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(t=typeof s=="function"?s:pr(+s),a(),o):t},o.y=function(s){return arguments.length?(e=typeof s=="function"?s:pr(+s),a(),o):e},o}const nz={center:Sbe,collide:Hbe,nbody:swe,link:Wbe,x:lwe,y:uwe},E0="forces",iM=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],cwe=["static","iterations"],qX=["x","y","vx","vy"];function EO(e){ne.call(this,null,e)}EO.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:qX}]};be(EO,ne,{transform(e,t){var n=this.value,i=t.changed(t.ADD_REM),r=e.modified(iM),o=e.iterations||300;if(n?(i&&(t.modifies("index"),n.nodes(t.source)),(r||t.changed(t.MOD))&&VX(n,e,0,t)):(this.value=n=dwe(t.source,e),n.on("tick",fwe(t.dataflow,this)),e.static||(i=!0,n.tick()),t.modifies("index")),r||i||e.modified(cwe)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/o)),e.static)for(n.stop();--o>=0;)n.tick();else if(n.stopped()&&n.restart(),!i)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let s=this._argops,l=0,u=s.length,c;l<u;++l)if(c=s[l],!(c.name!==E0||c.op._argval.force!=="link")){for(var i=c.op._argops,r=0,o=i.length,a;r<o;++r)if(i[r].name==="links"&&(a=i[r].op.source)){n.pulse(a,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(qX)}});function fwe(e,t){return()=>e.touch(t).run()}function dwe(e,t){const n=awe(e),i=n.stop,r=n.restart;let o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,r()),n.stop=()=>(o=!0,i()),VX(n,t,!0).on("end",()=>o=!0)}function VX(e,t,n,i){var r=$e(t.forces),o,a,s,l;for(o=0,a=iM.length;o<a;++o)s=iM[o],s!==E0&&t.modified(s)&&e[s](t[s]);for(o=0,a=r.length;o<a;++o)l=E0+o,s=n||t.modified(E0,o)?pwe(r[o]):i&&hwe(r[o],i)?e.force(l):null,s&&e.force(l,s);for(a=e.numForces||0;o<a;++o)e.force(E0+o,null);return e.numForces=r.length,e}function hwe(e,t){var n,i;for(n in e)if(_t(i=e[n])&&t.modified(Xi(i)))return 1;return 0}function pwe(e){var t,n;et(nz,e.force)||le("Unrecognized force: "+e.force),t=nz[e.force]();for(n in e)_t(t[n])&&mwe(t[n],e[n],e);return t}function mwe(e,t,n){e(_t(t)?i=>t(i,n):t)}const gwe=Object.freeze(Object.defineProperty({__proto__:null,force:EO},Symbol.toStringTag,{value:"Module"}));function ywe(e,t){return e.parent===t.parent?1:2}function vwe(e){return e.reduce(xwe,0)/e.length}function xwe(e,t){return e+t.x}function _we(e){return 1+e.reduce(bwe,0)}function bwe(e,t){return Math.max(e,t.y)}function wwe(e){for(var t;t=e.children;)e=t[0];return e}function Swe(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Cwe(){var e=ywe,t=1,n=1,i=!1;function r(o){var a,s=0;o.eachAfter(function(h){var m=h.children;m?(h.x=vwe(m),h.y=_we(m)):(h.x=a?s+=e(h,a):0,h.y=0,a=h)});var l=wwe(o),u=Swe(o),c=l.x-e(l,u)/2,d=u.x+e(u,l)/2;return o.eachAfter(i?function(h){h.x=(h.x-o.x)*t,h.y=(o.y-h.y)*n}:function(h){h.x=(h.x-c)/(d-c)*t,h.y=(1-(o.y?h.y/o.y:1))*n})}return r.separation=function(o){return arguments.length?(e=o,r):e},r.size=function(o){return arguments.length?(i=!1,t=+o[0],n=+o[1],r):i?null:[t,n]},r.nodeSize=function(o){return arguments.length?(i=!0,t=+o[0],n=+o[1],r):i?[t,n]:null},r}function Ewe(e){var t=0,n=e.children,i=n&&n.length;if(!i)t=1;else for(;--i>=0;)t+=n[i].value;e.value=t}function kwe(){return this.eachAfter(Ewe)}function Rwe(e,t){let n=-1;for(const i of this)e.call(t,i,++n,this);return this}function Twe(e,t){for(var n=this,i=[n],r,o,a=-1;n=i.pop();)if(e.call(t,n,++a,this),r=n.children)for(o=r.length-1;o>=0;--o)i.push(r[o]);return this}function Awe(e,t){for(var n=this,i=[n],r=[],o,a,s,l=-1;n=i.pop();)if(r.push(n),o=n.children)for(a=0,s=o.length;a<s;++a)i.push(o[a]);for(;n=r.pop();)e.call(t,n,++l,this);return this}function Mwe(e,t){let n=-1;for(const i of this)if(e.call(t,i,++n,this))return i}function Fwe(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,r=i&&i.length;--r>=0;)n+=i[r].value;t.value=n})}function Pwe(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Nwe(e){for(var t=this,n=$we(t,e),i=[t];t!==n;)t=t.parent,i.push(t);for(var r=i.length;e!==n;)i.splice(r,0,e),e=e.parent;return i}function $we(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),r=null;for(e=n.pop(),t=i.pop();e===t;)r=e,e=n.pop(),t=i.pop();return r}function Owe(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Iwe(){return Array.from(this)}function Dwe(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Lwe(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*jwe(){var e=this,t,n=[e],i,r,o;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,i=e.children)for(r=0,o=i.length;r<o;++r)n.push(i[r]);while(n.length)}function kO(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Hwe)):t===void 0&&(t=Bwe);for(var n=new Qp(e),i,r=[n],o,a,s,l;i=r.pop();)if((a=t(i.data))&&(l=(a=Array.from(a)).length))for(i.children=a,s=l-1;s>=0;--s)r.push(o=a[s]=new Qp(a[s])),o.parent=i,o.depth=i.depth+1;return n.eachBefore(YX)}function zwe(){return kO(this).eachBefore(Uwe)}function Bwe(e){return e.children}function Hwe(e){return Array.isArray(e)?e[1]:null}function Uwe(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function YX(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Qp(e){this.data=e,this.depth=this.height=0,this.parent=null}Qp.prototype=kO.prototype={constructor:Qp,count:kwe,each:Rwe,eachAfter:Awe,eachBefore:Twe,find:Mwe,sum:Fwe,sort:Pwe,path:Nwe,ancestors:Owe,descendants:Iwe,leaves:Dwe,links:Lwe,copy:zwe,[Symbol.iterator]:jwe};function k_(e){return e==null?null:ZX(e)}function ZX(e){if(typeof e!="function")throw new Error;return e}function kf(){return 0}function Dh(e){return function(){return e}}const Wwe=1664525,Gwe=1013904223,iz=4294967296;function qwe(){let e=1;return()=>(e=(Wwe*e+Gwe)%iz)/iz}function Vwe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ywe(e,t){let n=e.length,i,r;for(;n;)r=t()*n--|0,i=e[n],e[n]=e[r],e[r]=i;return e}function Zwe(e,t){for(var n=0,i=(e=Ywe(Array.from(e),t)).length,r=[],o,a;n<i;)o=e[n],a&&XX(a,o)?++n:(a=Kwe(r=Xwe(r,o)),n=0);return a}function Xwe(e,t){var n,i;if(Ak(t,e))return[t];for(n=0;n<e.length;++n)if(Fx(t,e[n])&&Ak(k0(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(i=n+1;i<e.length;++i)if(Fx(k0(e[n],e[i]),t)&&Fx(k0(e[n],t),e[i])&&Fx(k0(e[i],t),e[n])&&Ak(KX(e[n],e[i],t),e))return[e[n],e[i],t];throw new Error}function Fx(e,t){var n=e.r-t.r,i=t.x-e.x,r=t.y-e.y;return n<0||n*n<i*i+r*r}function XX(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function Ak(e,t){for(var n=0;n<t.length;++n)if(!XX(e,t[n]))return!1;return!0}function Kwe(e){switch(e.length){case 1:return Jwe(e[0]);case 2:return k0(e[0],e[1]);case 3:return KX(e[0],e[1],e[2])}}function Jwe(e){return{x:e.x,y:e.y,r:e.r}}function k0(e,t){var n=e.x,i=e.y,r=e.r,o=t.x,a=t.y,s=t.r,l=o-n,u=a-i,c=s-r,d=Math.sqrt(l*l+u*u);return{x:(n+o+l/d*c)/2,y:(i+a+u/d*c)/2,r:(d+r+s)/2}}function KX(e,t,n){var i=e.x,r=e.y,o=e.r,a=t.x,s=t.y,l=t.r,u=n.x,c=n.y,d=n.r,h=i-a,m=i-u,g=r-s,y=r-c,x=l-o,b=d-o,w=i*i+r*r-o*o,S=w-a*a-s*s+l*l,k=w-u*u-c*c+d*d,R=m*g-h*y,M=(g*k-y*S)/(R*2)-i,T=(y*x-g*b)/R,N=(m*S-h*k)/(R*2)-r,D=(h*b-m*x)/R,I=T*T+D*D-1,z=2*(o+M*T+N*D),X=M*M+N*N-o*o,W=-(Math.abs(I)>1e-6?(z+Math.sqrt(z*z-4*I*X))/(2*I):X/z);return{x:i+M+T*W,y:r+N+D*W,r:W}}function rz(e,t,n){var i=e.x-t.x,r,o,a=e.y-t.y,s,l,u=i*i+a*a;u?(o=t.r+n.r,o*=o,l=e.r+n.r,l*=l,o>l?(r=(u+l-o)/(2*u),s=Math.sqrt(Math.max(0,l/u-r*r)),n.x=e.x-r*i-s*a,n.y=e.y-r*a+s*i):(r=(u+o-l)/(2*u),s=Math.sqrt(Math.max(0,o/u-r*r)),n.x=t.x+r*i-s*a,n.y=t.y+r*a+s*i)):(n.x=t.x+n.r,n.y=t.y)}function oz(e,t){var n=e.r+t.r-1e-6,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function az(e){var t=e._,n=e.next._,i=t.r+n.r,r=(t.x*n.r+n.x*t.r)/i,o=(t.y*n.r+n.y*t.r)/i;return r*r+o*o}function Px(e){this._=e,this.next=null,this.previous=null}function Qwe(e,t){if(!(o=(e=Vwe(e)).length))return 0;var n,i,r,o,a,s,l,u,c,d,h;if(n=e[0],n.x=0,n.y=0,!(o>1))return n.r;if(i=e[1],n.x=-i.r,i.x=n.r,i.y=0,!(o>2))return n.r+i.r;rz(i,n,r=e[2]),n=new Px(n),i=new Px(i),r=new Px(r),n.next=r.previous=i,i.next=n.previous=r,r.next=i.previous=n;e:for(l=3;l<o;++l){rz(n._,i._,r=e[l]),r=new Px(r),u=i.next,c=n.previous,d=i._.r,h=n._.r;do if(d<=h){if(oz(u._,r._)){i=u,n.next=i,i.previous=n,--l;continue e}d+=u._.r,u=u.next}else{if(oz(c._,r._)){n=c,n.next=i,i.previous=n,--l;continue e}h+=c._.r,c=c.previous}while(u!==c.next);for(r.previous=n,r.next=i,n.next=i.previous=i=r,a=az(n);(r=r.next)!==i;)(s=az(r))<a&&(n=r,a=s);i=n.next}for(n=[i._],r=i;(r=r.next)!==i;)n.push(r._);for(r=Zwe(n,t),l=0;l<o;++l)n=e[l],n.x-=r.x,n.y-=r.y;return r.r}function e2e(e){return Math.sqrt(e.value)}function t2e(){var e=null,t=1,n=1,i=kf;function r(o){const a=qwe();return o.x=t/2,o.y=n/2,e?o.eachBefore(sz(e)).eachAfter(Mk(i,.5,a)).eachBefore(lz(1)):o.eachBefore(sz(e2e)).eachAfter(Mk(kf,1,a)).eachAfter(Mk(i,o.r/Math.min(t,n),a)).eachBefore(lz(Math.min(t,n)/(2*o.r))),o}return r.radius=function(o){return arguments.length?(e=k_(o),r):e},r.size=function(o){return arguments.length?(t=+o[0],n=+o[1],r):[t,n]},r.padding=function(o){return arguments.length?(i=typeof o=="function"?o:Dh(+o),r):i},r}function sz(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function Mk(e,t,n){return function(i){if(r=i.children){var r,o,a=r.length,s=e(i)*t||0,l;if(s)for(o=0;o<a;++o)r[o].r+=s;if(l=Qwe(r,n),s)for(o=0;o<a;++o)r[o].r-=s;i.r=l+s}}}function lz(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function JX(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function zv(e,t,n,i,r){for(var o=e.children,a,s=-1,l=o.length,u=e.value&&(i-t)/e.value;++s<l;)a=o[s],a.y0=n,a.y1=r,a.x0=t,a.x1=t+=a.value*u}function n2e(){var e=1,t=1,n=0,i=!1;function r(a){var s=a.height+1;return a.x0=a.y0=n,a.x1=e,a.y1=t/s,a.eachBefore(o(t,s)),i&&a.eachBefore(JX),a}function o(a,s){return function(l){l.children&&zv(l,l.x0,a*(l.depth+1)/s,l.x1,a*(l.depth+2)/s);var u=l.x0,c=l.y0,d=l.x1-n,h=l.y1-n;d<u&&(u=d=(u+d)/2),h<c&&(c=h=(c+h)/2),l.x0=u,l.y0=c,l.x1=d,l.y1=h}}return r.round=function(a){return arguments.length?(i=!!a,r):i},r.size=function(a){return arguments.length?(e=+a[0],t=+a[1],r):[e,t]},r.padding=function(a){return arguments.length?(n=+a,r):n},r}var i2e={depth:-1},uz={},Fk={};function r2e(e){return e.id}function o2e(e){return e.parentId}function cz(){var e=r2e,t=o2e,n;function i(r){var o=Array.from(r),a=e,s=t,l,u,c,d,h,m,g,y,x=new Map;if(n!=null){const b=o.map((k,R)=>a2e(n(k,R,r))),w=b.map(fz),S=new Set(b).add("");for(const k of w)S.has(k)||(S.add(k),b.push(k),w.push(fz(k)),o.push(Fk));a=(k,R)=>b[R],s=(k,R)=>w[R]}for(c=0,l=o.length;c<l;++c)u=o[c],m=o[c]=new Qp(u),(g=a(u,c,r))!=null&&(g+="")&&(y=m.id=g,x.set(y,x.has(y)?uz:m)),(g=s(u,c,r))!=null&&(g+="")&&(m.parent=g);for(c=0;c<l;++c)if(m=o[c],g=m.parent){if(h=x.get(g),!h)throw new Error("missing: "+g);if(h===uz)throw new Error("ambiguous: "+g);h.children?h.children.push(m):h.children=[m],m.parent=h}else{if(d)throw new Error("multiple roots");d=m}if(!d)throw new Error("no root");if(n!=null){for(;d.data===Fk&&d.children.length===1;)d=d.children[0],--l;for(let b=o.length-1;b>=0&&(m=o[b],m.data===Fk);--b)m.data=null}if(d.parent=i2e,d.eachBefore(function(b){b.depth=b.parent.depth+1,--l}).eachBefore(YX),d.parent=null,l>0)throw new Error("cycle");return d}return i.id=function(r){return arguments.length?(e=k_(r),i):e},i.parentId=function(r){return arguments.length?(t=k_(r),i):t},i.path=function(r){return arguments.length?(n=k_(r),i):n},i}function a2e(e){e=`${e}`;let t=e.length;return rM(e,t-1)&&!rM(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function fz(e){let t=e.length;if(t<2)return"";for(;--t>1&&!rM(e,t););return e.slice(0,t)}function rM(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function s2e(e,t){return e.parent===t.parent?1:2}function Pk(e){var t=e.children;return t?t[0]:e.t}function Nk(e){var t=e.children;return t?t[t.length-1]:e.t}function l2e(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function u2e(e){for(var t=0,n=0,i=e.children,r=i.length,o;--r>=0;)o=i[r],o.z+=t,o.m+=t,t+=o.s+(n+=o.c)}function c2e(e,t,n){return e.a.parent===t.parent?e.a:n}function R_(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}R_.prototype=Object.create(Qp.prototype);function f2e(e){for(var t=new R_(e,0),n,i=[t],r,o,a,s;n=i.pop();)if(o=n._.children)for(n.children=new Array(s=o.length),a=s-1;a>=0;--a)i.push(r=n.children[a]=new R_(o[a],a)),r.parent=n;return(t.parent=new R_(null,0)).children=[t],t}function d2e(){var e=s2e,t=1,n=1,i=null;function r(u){var c=f2e(u);if(c.eachAfter(o),c.parent.m=-c.z,c.eachBefore(a),i)u.eachBefore(l);else{var d=u,h=u,m=u;u.eachBefore(function(w){w.x<d.x&&(d=w),w.x>h.x&&(h=w),w.depth>m.depth&&(m=w)});var g=d===h?1:e(d,h)/2,y=g-d.x,x=t/(h.x+g+y),b=n/(m.depth||1);u.eachBefore(function(w){w.x=(w.x+y)*x,w.y=w.depth*b})}return u}function o(u){var c=u.children,d=u.parent.children,h=u.i?d[u.i-1]:null;if(c){u2e(u);var m=(c[0].z+c[c.length-1].z)/2;h?(u.z=h.z+e(u._,h._),u.m=u.z-m):u.z=m}else h&&(u.z=h.z+e(u._,h._));u.parent.A=s(u,h,u.parent.A||d[0])}function a(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function s(u,c,d){if(c){for(var h=u,m=u,g=c,y=h.parent.children[0],x=h.m,b=m.m,w=g.m,S=y.m,k;g=Nk(g),h=Pk(h),g&&h;)y=Pk(y),m=Nk(m),m.a=u,k=g.z+w-h.z-x+e(g._,h._),k>0&&(l2e(c2e(g,u,d),u,k),x+=k,b+=k),w+=g.m,x+=h.m,S+=y.m,b+=m.m;g&&!Nk(m)&&(m.t=g,m.m+=w-b),h&&!Pk(y)&&(y.t=h,y.m+=x-S,d=u)}return d}function l(u){u.x*=t,u.y=u.depth*n}return r.separation=function(u){return arguments.length?(e=u,r):e},r.size=function(u){return arguments.length?(i=!1,t=+u[0],n=+u[1],r):i?null:[t,n]},r.nodeSize=function(u){return arguments.length?(i=!0,t=+u[0],n=+u[1],r):i?[t,n]:null},r}function PS(e,t,n,i,r){for(var o=e.children,a,s=-1,l=o.length,u=e.value&&(r-n)/e.value;++s<l;)a=o[s],a.x0=t,a.x1=i,a.y0=n,a.y1=n+=a.value*u}var QX=(1+Math.sqrt(5))/2;function eK(e,t,n,i,r,o){for(var a=[],s=t.children,l,u,c=0,d=0,h=s.length,m,g,y=t.value,x,b,w,S,k,R,M;c<h;){m=r-n,g=o-i;do x=s[d++].value;while(!x&&d<h);for(b=w=x,R=Math.max(g/m,m/g)/(y*e),M=x*x*R,k=Math.max(w/M,M/b);d<h;++d){if(x+=u=s[d].value,u<b&&(b=u),u>w&&(w=u),M=x*x*R,S=Math.max(w/M,M/b),S>k){x-=u;break}k=S}a.push(l={value:x,dice:m<g,children:s.slice(c,d)}),l.dice?zv(l,n,i,r,y?i+=g*x/y:o):PS(l,n,i,y?n+=m*x/y:r,o),y-=x,c=d}return a}const tK=function e(t){function n(i,r,o,a,s){eK(t,i,r,o,a,s)}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(QX);function h2e(){var e=tK,t=!1,n=1,i=1,r=[0],o=kf,a=kf,s=kf,l=kf,u=kf;function c(h){return h.x0=h.y0=0,h.x1=n,h.y1=i,h.eachBefore(d),r=[0],t&&h.eachBefore(JX),h}function d(h){var m=r[h.depth],g=h.x0+m,y=h.y0+m,x=h.x1-m,b=h.y1-m;x<g&&(g=x=(g+x)/2),b<y&&(y=b=(y+b)/2),h.x0=g,h.y0=y,h.x1=x,h.y1=b,h.children&&(m=r[h.depth+1]=o(h)/2,g+=u(h)-m,y+=a(h)-m,x-=s(h)-m,b-=l(h)-m,x<g&&(g=x=(g+x)/2),b<y&&(y=b=(y+b)/2),e(h,g,y,x,b))}return c.round=function(h){return arguments.length?(t=!!h,c):t},c.size=function(h){return arguments.length?(n=+h[0],i=+h[1],c):[n,i]},c.tile=function(h){return arguments.length?(e=ZX(h),c):e},c.padding=function(h){return arguments.length?c.paddingInner(h).paddingOuter(h):c.paddingInner()},c.paddingInner=function(h){return arguments.length?(o=typeof h=="function"?h:Dh(+h),c):o},c.paddingOuter=function(h){return arguments.length?c.paddingTop(h).paddingRight(h).paddingBottom(h).paddingLeft(h):c.paddingTop()},c.paddingTop=function(h){return arguments.length?(a=typeof h=="function"?h:Dh(+h),c):a},c.paddingRight=function(h){return arguments.length?(s=typeof h=="function"?h:Dh(+h),c):s},c.paddingBottom=function(h){return arguments.length?(l=typeof h=="function"?h:Dh(+h),c):l},c.paddingLeft=function(h){return arguments.length?(u=typeof h=="function"?h:Dh(+h),c):u},c}function p2e(e,t,n,i,r){var o=e.children,a,s=o.length,l,u=new Array(s+1);for(u[0]=l=a=0;a<s;++a)u[a+1]=l+=o[a].value;c(0,s,e.value,t,n,i,r);function c(d,h,m,g,y,x,b){if(d>=h-1){var w=o[d];w.x0=g,w.y0=y,w.x1=x,w.y1=b;return}for(var S=u[d],k=m/2+S,R=d+1,M=h-1;R<M;){var T=R+M>>>1;u[T]<k?R=T+1:M=T}k-u[R-1]<u[R]-k&&d+1<R&&--R;var N=u[R]-S,D=m-N;if(x-g>b-y){var I=m?(g*D+x*N)/m:x;c(d,R,N,g,y,I,b),c(R,h,D,I,y,x,b)}else{var z=m?(y*D+b*N)/m:b;c(d,R,N,g,y,x,z),c(R,h,D,g,z,x,b)}}}function m2e(e,t,n,i,r){(e.depth&1?PS:zv)(e,t,n,i,r)}const g2e=function e(t){function n(i,r,o,a,s){if((l=i._squarify)&&l.ratio===t)for(var l,u,c,d,h=-1,m,g=l.length,y=i.value;++h<g;){for(u=l[h],c=u.children,d=u.value=0,m=c.length;d<m;++d)u.value+=c[d].value;u.dice?zv(u,r,o,a,y?o+=(s-o)*u.value/y:s):PS(u,r,o,y?r+=(a-r)*u.value/y:a,s),y-=u.value}else i._squarify=l=eK(t,i,r,o,a,s),l.ratio=t}return n.ratio=function(i){return e((i=+i)>1?i:1)},n}(QX);function oM(e,t,n){const i={};return e.each(r=>{const o=r.data;n(o)&&(i[t(o)]=r)}),e.lookup=i,e}function RO(e){ne.call(this,null,e)}RO.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const y2e=e=>e.values;be(RO,ne,{transform(e,t){t.source||le("Nest transform requires an upstream data source.");var n=e.generate,i=e.modified(),r=t.clone(),o=this.value;return(!o||i||t.changed())&&(o&&o.each(a=>{a.children&&G2(a.data)&&r.rem.push(a.data)}),this.value=o=kO({values:$e(e.keys).reduce((a,s)=>(a.key(s),a),v2e()).entries(r.source)},y2e),n&&o.each(a=>{a.children&&(a=Vt(a.data),r.add.push(a),r.source.push(a))}),oM(o,Je,Je)),r.source.root=o,r}});function v2e(){const e=[],t={entries:r=>i(n(r,0),0),key:r=>(e.push(r),t)};function n(r,o){if(o>=e.length)return r;const a=r.length,s=e[o++],l={},u={};let c=-1,d,h,m;for(;++c<a;)d=s(h=r[c])+"",(m=l[d])?m.push(h):l[d]=[h];for(d in l)u[d]=n(l[d],o);return u}function i(r,o){if(++o>e.length)return r;const a=[];for(const s in r)a.push({key:s,values:i(r[s],o)});return a}return t}function Yl(e){ne.call(this,null,e)}const x2e=(e,t)=>e.parent===t.parent?1:2;be(Yl,ne,{transform(e,t){(!t.source||!t.source.root)&&le(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),i=this.fields,r=t.source.root,o=e.as||i;e.field?r.sum(e.field):r.count(),e.sort&&r.sort(Dd(e.sort,a=>a.data)),_2e(n,this.params,e),n.separation&&n.separation(e.separation!==!1?x2e:wm);try{this.value=n(r)}catch(a){le(a)}return r.each(a=>b2e(a,i,o)),t.reflow(e.modified()).modifies(o).modifies("leaf")}});function _2e(e,t,n){for(let i,r=0,o=t.length;r<o;++r)i=t[r],i in n&&e[i](n[i])}function b2e(e,t,n){const i=e.data,r=t.length-1;for(let o=0;o<r;++o)i[n[o]]=e[t[o]];i[n[r]]=e.children?e.children.length:0}const aM=["x","y","r","depth","children"];function TO(e){Yl.call(this,e)}TO.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:aM.length,default:aM}]};be(TO,Yl,{layout:t2e,params:["radius","size","padding"],fields:aM});const sM=["x0","y0","x1","y1","depth","children"];function AO(e){Yl.call(this,e)}AO.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:sM.length,default:sM}]};be(AO,Yl,{layout:n2e,params:["size","round","padding"],fields:sM});function MO(e){ne.call(this,null,e)}MO.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};be(MO,ne,{transform(e,t){t.source||le("Stratify transform requires an upstream data source.");let n=this.value;const i=e.modified(),r=t.fork(t.ALL).materialize(t.SOURCE),o=!n||i||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return r.source=r.source.slice(),o&&(n=r.source.length?oM(cz().id(e.key).parentId(e.parentKey)(r.source),e.key,Ko):oM(cz()([{}]),e.key,e.key)),r.source.root=this.value=n,r}});const dz={tidy:d2e,cluster:Cwe},lM=["x","y","depth","children"];function FO(e){Yl.call(this,e)}FO.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:lM.length,default:lM}]};be(FO,Yl,{layout(e){const t=e||"tidy";if(et(dz,t))return dz[t]();le("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:lM});function PO(e){ne.call(this,[],e)}PO.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};be(PO,ne,{transform(e,t){const n=this.value,i=t.source&&t.source.root,r=t.fork(t.NO_SOURCE),o={};return i||le("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(r.rem=n,t.visit(t.SOURCE,a=>o[Je(a)]=1),i.each(a=>{const s=a.data,l=a.parent&&a.parent.data;l&&o[Je(s)]&&o[Je(l)]&&r.add.push(Vt({source:l,target:s}))}),this.value=r.add):t.changed(t.MOD)&&(t.visit(t.MOD,a=>o[Je(a)]=1),n.forEach(a=>{(o[Je(a.source)]||o[Je(a.target)])&&r.mod.push(a)})),r}});const hz={binary:p2e,dice:zv,slice:PS,slicedice:m2e,squarify:tK,resquarify:g2e},uM=["x0","y0","x1","y1","depth","children"];function NO(e){Yl.call(this,e)}NO.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:uM.length,default:uM}]};be(NO,Yl,{layout(){const e=h2e();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{et(hz,t)?e.tile(hz[t]):le("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:uM});const w2e=Object.freeze(Object.defineProperty({__proto__:null,nest:RO,pack:TO,partition:AO,stratify:MO,tree:FO,treelinks:PO,treemap:NO},Symbol.toStringTag,{value:"Module"})),$k=4278190080;function S2e(e,t){const n=e.bitmap();return(t||[]).forEach(i=>n.set(e(i.boundary[0]),e(i.boundary[3]))),[n,void 0]}function C2e(e,t,n,i,r){const o=e.width,a=e.height,s=i||r,l=tc(o,a).getContext("2d"),u=tc(o,a).getContext("2d"),c=s&&tc(o,a).getContext("2d");n.forEach(N=>T_(l,N,!1)),T_(u,t,!1),s&&T_(c,t,!0);const d=Ok(l,o,a),h=Ok(u,o,a),m=s&&Ok(c,o,a),g=e.bitmap(),y=s&&e.bitmap();let x,b,w,S,k,R,M,T;for(b=0;b<a;++b)for(x=0;x<o;++x)k=b*o+x,R=d[k]&$k,T=h[k]&$k,M=s&&m[k]&$k,(R||M||T)&&(w=e(x),S=e(b),!r&&(R||T)&&g.set(w,S),s&&(R||M)&&y.set(w,S));return[g,y]}function Ok(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function T_(e,t,n){if(!t.length)return;const i=t[0].mark.marktype;i==="group"?t.forEach(r=>{r.items.forEach(o=>T_(e,o.items,n))}):wo[i].draw(e,{items:n?t.map(E2e):t})}function E2e(e){const t=q2(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const il=5,or=31,Yy=32,Eu=new Uint32Array(Yy+1),Sa=new Uint32Array(Yy+1);Sa[0]=0;Eu[0]=~Sa[0];for(let e=1;e<=Yy;++e)Sa[e]=Sa[e-1]<<1|1,Eu[e]=~Sa[e];function k2e(e,t){const n=new Uint32Array(~~((e*t+Yy)/Yy));function i(o,a){n[o]|=a}function r(o,a){n[o]&=a}return{array:n,get:(o,a)=>{const s=a*e+o;return n[s>>>il]&1<<(s&or)},set:(o,a)=>{const s=a*e+o;i(s>>>il,1<<(s&or))},clear:(o,a)=>{const s=a*e+o;r(s>>>il,~(1<<(s&or)))},getRange:(o,a,s,l)=>{let u=l,c,d,h,m;for(;u>=a;--u)if(c=u*e+o,d=u*e+s,h=c>>>il,m=d>>>il,h===m){if(n[h]&Eu[c&or]&Sa[(d&or)+1])return!0}else{if(n[h]&Eu[c&or]||n[m]&Sa[(d&or)+1])return!0;for(let g=h+1;g<m;++g)if(n[g])return!0}return!1},setRange:(o,a,s,l)=>{let u,c,d,h,m;for(;a<=l;++a)if(u=a*e+o,c=a*e+s,d=u>>>il,h=c>>>il,d===h)i(d,Eu[u&or]&Sa[(c&or)+1]);else for(i(d,Eu[u&or]),i(h,Sa[(c&or)+1]),m=d+1;m<h;++m)i(m,4294967295)},clearRange:(o,a,s,l)=>{let u,c,d,h,m;for(;a<=l;++a)if(u=a*e+o,c=a*e+s,d=u>>>il,h=c>>>il,d===h)r(d,Sa[u&or]|Eu[(c&or)+1]);else for(r(d,Sa[u&or]),r(h,Eu[(c&or)+1]),m=d+1;m<h;++m)r(m,0)},outOfBounds:(o,a,s,l)=>o<0||a<0||l>=t||s>=e}}function R2e(e,t,n){const i=Math.max(1,Math.sqrt(e*t/1e6)),r=~~((e+2*n+i)/i),o=~~((t+2*n+i)/i),a=s=>~~((s+n)/i);return a.invert=s=>s*i-n,a.bitmap=()=>k2e(r,o),a.ratio=i,a.padding=n,a.width=e,a.height=t,a}function T2e(e,t,n,i){const r=e.width,o=e.height;return function(a){const s=a.datum.datum.items[i].items,l=s.length,u=a.datum.fontSize,c=go.width(a.datum,a.datum.text);let d=0,h,m,g,y,x,b,w;for(let S=0;S<l;++S)h=s[S].x,g=s[S].y,m=s[S].x2===void 0?h:s[S].x2,y=s[S].y2===void 0?g:s[S].y2,x=(h+m)/2,b=(g+y)/2,w=Math.abs(m-h+y-g),w>=d&&(d=w,a.x=x,a.y=b);return x=c/2,b=u/2,h=a.x-x,m=a.x+x,g=a.y-b,y=a.y+b,a.align="center",h<0&&m<=r?a.align="left":0<=h&&r<m&&(a.align="right"),a.baseline="middle",g<0&&y<=o?a.baseline="top":0<=g&&o<y&&(a.baseline="bottom"),!0}}function Cw(e,t,n,i,r,o){let a=n/2;return e-a<0||e+a>r||t-(a=i/2)<0||t+a>o}function Hu(e,t,n,i,r,o,a,s){const l=r*o/(i*2),u=e(t-l),c=e(t+l),d=e(n-(o=o/2)),h=e(n+o);return a.outOfBounds(u,d,c,h)||a.getRange(u,d,c,h)||s&&s.getRange(u,d,c,h)}function A2e(e,t,n,i){const r=e.width,o=e.height,a=t[0],s=t[1];function l(u,c,d,h,m){const g=e.invert(u),y=e.invert(c);let x=d,b=o,w;if(!Cw(g,y,h,m,r,o)&&!Hu(e,g,y,m,h,x,a,s)&&!Hu(e,g,y,m,h,m,a,null)){for(;b-x>=1;)w=(x+b)/2,Hu(e,g,y,m,h,w,a,s)?b=w:x=w;if(x>d)return[g,y,x,!0]}}return function(u){const c=u.datum.datum.items[i].items,d=c.length,h=u.datum.fontSize,m=go.width(u.datum,u.datum.text);let g=n?h:0,y=!1,x=!1,b=0,w,S,k,R,M,T,N,D,I,z,X,W,U,B,V,K,H;for(let J=0;J<d;++J){for(w=c[J].x,k=c[J].y,S=c[J].x2===void 0?w:c[J].x2,R=c[J].y2===void 0?k:c[J].y2,w>S&&(H=w,w=S,S=H),k>R&&(H=k,k=R,R=H),I=e(w),X=e(S),z=~~((I+X)/2),W=e(k),B=e(R),U=~~((W+B)/2),N=z;N>=I;--N)for(D=U;D>=W;--D)K=l(N,D,g,m,h),K&&([u.x,u.y,g,y]=K);for(N=z;N<=X;++N)for(D=U;D<=B;++D)K=l(N,D,g,m,h),K&&([u.x,u.y,g,y]=K);!y&&!n&&(V=Math.abs(S-w+R-k),M=(w+S)/2,T=(k+R)/2,V>=b&&!Cw(M,T,m,h,r,o)&&!Hu(e,M,T,h,m,h,a,null)&&(b=V,u.x=M,u.y=T,x=!0))}return y||x?(M=m/2,T=h/2,a.setRange(e(u.x-M),e(u.y-T),e(u.x+M),e(u.y+T)),u.align="center",u.baseline="middle",!0):!1}}const M2e=[-1,-1,1,1],F2e=[-1,1,-1,1];function P2e(e,t,n,i){const r=e.width,o=e.height,a=t[0],s=t[1],l=e.bitmap();return function(u){const c=u.datum.datum.items[i].items,d=c.length,h=u.datum.fontSize,m=go.width(u.datum,u.datum.text),g=[];let y=n?h:0,x=!1,b=!1,w=0,S,k,R,M,T,N,D,I,z,X,W,U;for(let B=0;B<d;++B){for(S=c[B].x,R=c[B].y,k=c[B].x2===void 0?S:c[B].x2,M=c[B].y2===void 0?R:c[B].y2,g.push([e((S+k)/2),e((R+M)/2)]);g.length;)if([D,I]=g.pop(),!(a.get(D,I)||s.get(D,I)||l.get(D,I))){l.set(D,I);for(let V=0;V<4;++V)T=D+M2e[V],N=I+F2e[V],l.outOfBounds(T,N,T,N)||g.push([T,N]);if(T=e.invert(D),N=e.invert(I),z=y,X=o,!Cw(T,N,m,h,r,o)&&!Hu(e,T,N,h,m,z,a,s)&&!Hu(e,T,N,h,m,h,a,null)){for(;X-z>=1;)W=(z+X)/2,Hu(e,T,N,h,m,W,a,s)?X=W:z=W;z>y&&(u.x=T,u.y=N,y=z,x=!0)}}!x&&!n&&(U=Math.abs(k-S+M-R),T=(S+k)/2,N=(R+M)/2,U>=w&&!Cw(T,N,m,h,r,o)&&!Hu(e,T,N,h,m,h,a,null)&&(w=U,u.x=T,u.y=N,b=!0))}return x||b?(T=m/2,N=h/2,a.setRange(e(u.x-T),e(u.y-N),e(u.x+T),e(u.y+N)),u.align="center",u.baseline="middle",!0):!1}}const N2e=["right","center","left"],$2e=["bottom","middle","top"];function O2e(e,t,n,i){const r=e.width,o=e.height,a=t[0],s=t[1],l=i.length;return function(u){const c=u.boundary,d=u.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>r||c[3]>o)return!1;let h=u.textWidth??0,m,g,y,x,b,w,S,k,R,M,T,N,D,I,z;for(let X=0;X<l;++X){if(m=(n[X]&3)-1,g=(n[X]>>>2&3)-1,y=m===0&&g===0||i[X]<0,x=m&&g?Math.SQRT1_2:1,b=i[X]<0?-1:1,w=c[1+m]+i[X]*m*x,T=c[4+g]+b*d*g/2+i[X]*g*x,k=T-d/2,R=T+d/2,N=e(w),I=e(k),z=e(R),!h)if(pz(N,N,I,z,a,s,w,w,k,R,c,y))h=go.width(u.datum,u.datum.text);else continue;if(M=w+b*h*m/2,w=M-h/2,S=M+h/2,N=e(w),D=e(S),pz(N,D,I,z,a,s,w,S,k,R,c,y))return u.x=m?m*b<0?S:w:M,u.y=g?g*b<0?R:k:T,u.align=N2e[m*b+1],u.baseline=$2e[g*b+1],a.setRange(N,I,D,z),!0}return!1}}function pz(e,t,n,i,r,o,a,s,l,u,c,d){return!(r.outOfBounds(e,n,t,i)||(d&&o||r).getRange(e,n,t,i))}const Ik=0,Dk=4,Lk=8,jk=0,zk=1,Bk=2,I2e={"top-left":Ik+jk,top:Ik+zk,"top-right":Ik+Bk,left:Dk+jk,middle:Dk+zk,right:Dk+Bk,"bottom-left":Lk+jk,bottom:Lk+zk,"bottom-right":Lk+Bk},D2e={naive:T2e,"reduced-search":A2e,floodfill:P2e};function L2e(e,t,n,i,r,o,a,s,l,u,c){if(!e.length)return e;const d=Math.max(i.length,r.length),h=j2e(i,d),m=z2e(r,d),g=B2e(e[0].datum),y=g==="group"&&e[0].datum.items[l].marktype,x=y==="area",b=H2e(g,y,s,l),w=u===null||u===1/0,S=x&&c==="naive";let k=-1,R=-1;const M=e.map(I=>{const z=w?go.width(I,I.text):void 0;return k=Math.max(k,z),R=Math.max(R,I.fontSize),{datum:I,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:b(I),textWidth:z}});u=u===null||u===1/0?Math.max(k,R)+Math.max(...i):u;const T=R2e(t[0],t[1],u);let N;if(!S){n&&M.sort((X,W)=>n(X.datum,W.datum));let I=!1;for(let X=0;X<m.length&&!I;++X)I=m[X]===5||h[X]<0;const z=(g&&a||x)&&e.map(X=>X.datum);N=o.length||z?C2e(T,z||[],o,I,x):S2e(T,a&&M)}const D=x?D2e[c](T,N,a,l):O2e(T,N,m,h);return M.forEach(I=>I.opacity=+D(I)),M}function j2e(e,t){const n=new Float64Array(t),i=e.length;for(let r=0;r<i;++r)n[r]=e[r]||0;for(let r=i;r<t;++r)n[r]=n[i-1];return n}function z2e(e,t){const n=new Int8Array(t),i=e.length;for(let r=0;r<i;++r)n[r]|=I2e[e[r]];for(let r=i;r<t;++r)n[r]=n[i-1];return n}function B2e(e){return e&&e.mark&&e.mark.marktype}function H2e(e,t,n,i){const r=o=>[o.x,o.x,o.x,o.y,o.y,o.y];return e?e==="line"||e==="area"?o=>r(o.datum):t==="line"?o=>{const a=o.datum.items[i].items;return r(a.length?a[n==="start"?0:a.length-1]:{x:NaN,y:NaN})}:o=>{const a=o.datum.bounds;return[a.x1,(a.x1+a.x2)/2,a.x2,a.y1,(a.y1+a.y2)/2,a.y2]}:r}const cM=["x","y","opacity","align","baseline"],nK=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function $O(e){ne.call(this,null,e)}$O.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:nK},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:cM.length,default:cM}]};be($O,ne,{transform(e,t){function n(o){const a=e[o];return _t(a)&&t.modified(a.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&le("Size parameter should be specified as a [width, height] array.");const r=e.as||cM;return L2e(t.materialize(t.SOURCE).source||[],e.size,e.sort,$e(e.offset==null?1:e.offset),$e(e.anchor||nK),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(o=>{const a=o.datum;a[r[0]]=o.x,a[r[1]]=o.y,a[r[2]]=o.opacity,a[r[3]]=o.align,a[r[4]]=o.baseline}),t.reflow(i).modifies(r)}});const U2e=Object.freeze(Object.defineProperty({__proto__:null,label:$O},Symbol.toStringTag,{value:"Module"}));function iK(e,t){var n=[],i=function(c){return c(s)},r,o,a,s,l,u;if(t==null)n.push(e);else for(r={},o=0,a=e.length;o<a;++o)s=e[o],l=t.map(i),u=r[l],u||(r[l]=u=[],u.dims=l,n.push(u)),u.push(s);return n}function OO(e){ne.call(this,null,e)}OO.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};be(OO,ne,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=iK(i,e.groupby),o=(e.groupby||[]).map(In),a=o.length,s=e.as||[In(e.x),In(e.y)],l=[];r.forEach(u=>{pq(u,e.x,e.y,e.bandwidth||.3).forEach(c=>{const d={};for(let h=0;h<a;++h)d[o[h]]=u.dims[h];d[s[0]]=c[0],d[s[1]]=c[1],l.push(Vt(d))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const fM={constant:hN,linear:pN,log:cq,exp:fq,pow:dq,quad:mN,poly:hq},W2e=(e,t)=>e==="poly"?t:e==="quad"?2:1;function IO(e){ne.call(this,null,e)}IO.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(fM)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};be(IO,ne,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=iK(i,e.groupby),o=(e.groupby||[]).map(In),a=e.method||"linear",s=e.order==null?3:e.order,l=W2e(a,s),u=e.as||[In(e.x),In(e.y)],c=fM[a],d=[];let h=e.extent;et(fM,a)||le("Invalid regression method: "+a),h!=null&&a==="log"&&h[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),h=null),r.forEach(m=>{if(m.length<=l){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const y=c(m,e.x,e.y,s);if(e.params){d.push(Vt({keys:m.dims,coef:y.coef,rSquared:y.rSquared}));return}const x=h||Rs(m,e.x),b=w=>{const S={};for(let k=0;k<o.length;++k)S[o[k]]=m.dims[k];S[u[0]]=w[0],S[u[1]]=w[1],d.push(Vt(S))};a==="linear"||a==="constant"?x.forEach(w=>b([w,y.predict(w)])):Q2(y.predict,x,25,200).forEach(b)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=d}return n}});const G2e=Object.freeze(Object.defineProperty({__proto__:null,loess:OO,regression:IO},Symbol.toStringTag,{value:"Module"})),Tl=11102230246251565e-32,Bi=134217729,q2e=(3+8*Tl)*Tl;function Hk(e,t,n,i,r){let o,a,s,l,u=t[0],c=i[0],d=0,h=0;c>u==c>-u?(o=u,u=t[++d]):(o=c,c=i[++h]);let m=0;if(d<e&&h<n)for(c>u==c>-u?(a=u+o,s=o-(a-u),u=t[++d]):(a=c+o,s=o-(a-c),c=i[++h]),o=a,s!==0&&(r[m++]=s);d<e&&h<n;)c>u==c>-u?(a=o+u,l=a-o,s=o-(a-l)+(u-l),u=t[++d]):(a=o+c,l=a-o,s=o-(a-l)+(c-l),c=i[++h]),o=a,s!==0&&(r[m++]=s);for(;d<e;)a=o+u,l=a-o,s=o-(a-l)+(u-l),u=t[++d],o=a,s!==0&&(r[m++]=s);for(;h<n;)a=o+c,l=a-o,s=o-(a-l)+(c-l),c=i[++h],o=a,s!==0&&(r[m++]=s);return(o!==0||m===0)&&(r[m++]=o),m}function V2e(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}function Bv(e){return new Float64Array(e)}const Y2e=(3+16*Tl)*Tl,Z2e=(2+12*Tl)*Tl,X2e=(9+64*Tl)*Tl*Tl,Rh=Bv(4),mz=Bv(8),gz=Bv(12),yz=Bv(16),ar=Bv(4);function K2e(e,t,n,i,r,o,a){let s,l,u,c,d,h,m,g,y,x,b,w,S,k,R,M,T,N;const D=e-r,I=n-r,z=t-o,X=i-o;k=D*X,h=Bi*D,m=h-(h-D),g=D-m,h=Bi*X,y=h-(h-X),x=X-y,R=g*x-(k-m*y-g*y-m*x),M=z*I,h=Bi*z,m=h-(h-z),g=z-m,h=Bi*I,y=h-(h-I),x=I-y,T=g*x-(M-m*y-g*y-m*x),b=R-T,d=R-b,Rh[0]=R-(b+d)+(d-T),w=k+b,d=w-k,S=k-(w-d)+(b-d),b=S-M,d=S-b,Rh[1]=S-(b+d)+(d-M),N=w+b,d=N-w,Rh[2]=w-(N-d)+(b-d),Rh[3]=N;let W=V2e(4,Rh),U=Z2e*a;if(W>=U||-W>=U||(d=e-D,s=e-(D+d)+(d-r),d=n-I,u=n-(I+d)+(d-r),d=t-z,l=t-(z+d)+(d-o),d=i-X,c=i-(X+d)+(d-o),s===0&&l===0&&u===0&&c===0)||(U=X2e*a+q2e*Math.abs(W),W+=D*c+X*s-(z*u+I*l),W>=U||-W>=U))return W;k=s*X,h=Bi*s,m=h-(h-s),g=s-m,h=Bi*X,y=h-(h-X),x=X-y,R=g*x-(k-m*y-g*y-m*x),M=l*I,h=Bi*l,m=h-(h-l),g=l-m,h=Bi*I,y=h-(h-I),x=I-y,T=g*x-(M-m*y-g*y-m*x),b=R-T,d=R-b,ar[0]=R-(b+d)+(d-T),w=k+b,d=w-k,S=k-(w-d)+(b-d),b=S-M,d=S-b,ar[1]=S-(b+d)+(d-M),N=w+b,d=N-w,ar[2]=w-(N-d)+(b-d),ar[3]=N;const B=Hk(4,Rh,4,ar,mz);k=D*c,h=Bi*D,m=h-(h-D),g=D-m,h=Bi*c,y=h-(h-c),x=c-y,R=g*x-(k-m*y-g*y-m*x),M=z*u,h=Bi*z,m=h-(h-z),g=z-m,h=Bi*u,y=h-(h-u),x=u-y,T=g*x-(M-m*y-g*y-m*x),b=R-T,d=R-b,ar[0]=R-(b+d)+(d-T),w=k+b,d=w-k,S=k-(w-d)+(b-d),b=S-M,d=S-b,ar[1]=S-(b+d)+(d-M),N=w+b,d=N-w,ar[2]=w-(N-d)+(b-d),ar[3]=N;const V=Hk(B,mz,4,ar,gz);k=s*c,h=Bi*s,m=h-(h-s),g=s-m,h=Bi*c,y=h-(h-c),x=c-y,R=g*x-(k-m*y-g*y-m*x),M=l*u,h=Bi*l,m=h-(h-l),g=l-m,h=Bi*u,y=h-(h-u),x=u-y,T=g*x-(M-m*y-g*y-m*x),b=R-T,d=R-b,ar[0]=R-(b+d)+(d-T),w=k+b,d=w-k,S=k-(w-d)+(b-d),b=S-M,d=S-b,ar[1]=S-(b+d)+(d-M),N=w+b,d=N-w,ar[2]=w-(N-d)+(b-d),ar[3]=N;const K=Hk(V,gz,4,ar,yz);return yz[K-1]}function Nx(e,t,n,i,r,o){const a=(t-o)*(n-r),s=(e-r)*(i-o),l=a-s,u=Math.abs(a+s);return Math.abs(l)>=Y2e*u?l:-K2e(e,t,n,i,r,o,u)}const vz=Math.pow(2,-52),$x=new Uint32Array(512);class Ew{static from(t,n=nSe,i=iSe){const r=t.length,o=new Float64Array(r*2);for(let a=0;a<r;a++){const s=t[a];o[2*a]=n(s),o[2*a+1]=i(s)}return new Ew(o)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:i,_hullTri:r,_hullHash:o}=this,a=t.length>>1;let s=1/0,l=1/0,u=-1/0,c=-1/0;for(let I=0;I<a;I++){const z=t[2*I],X=t[2*I+1];z<s&&(s=z),X<l&&(l=X),z>u&&(u=z),X>c&&(c=X),this._ids[I]=I}const d=(s+u)/2,h=(l+c)/2;let m=1/0,g,y,x;for(let I=0;I<a;I++){const z=Uk(d,h,t[2*I],t[2*I+1]);z<m&&(g=I,m=z)}const b=t[2*g],w=t[2*g+1];m=1/0;for(let I=0;I<a;I++){if(I===g)continue;const z=Uk(b,w,t[2*I],t[2*I+1]);z<m&&z>0&&(y=I,m=z)}let S=t[2*y],k=t[2*y+1],R=1/0;for(let I=0;I<a;I++){if(I===g||I===y)continue;const z=eSe(b,w,S,k,t[2*I],t[2*I+1]);z<R&&(x=I,R=z)}let M=t[2*x],T=t[2*x+1];if(R===1/0){for(let X=0;X<a;X++)this._dists[X]=t[2*X]-t[0]||t[2*X+1]-t[1];rp(this._ids,this._dists,0,a-1);const I=new Uint32Array(a);let z=0;for(let X=0,W=-1/0;X<a;X++){const U=this._ids[X];this._dists[U]>W&&(I[z++]=U,W=this._dists[U])}this.hull=I.subarray(0,z),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Nx(b,w,S,k,M,T)<0){const I=y,z=S,X=k;y=x,S=M,k=T,x=I,M=z,T=X}const N=tSe(b,w,S,k,M,T);this._cx=N.x,this._cy=N.y;for(let I=0;I<a;I++)this._dists[I]=Uk(t[2*I],t[2*I+1],N.x,N.y);rp(this._ids,this._dists,0,a-1),this._hullStart=g;let D=3;i[g]=n[x]=y,i[y]=n[g]=x,i[x]=n[y]=g,r[g]=0,r[y]=1,r[x]=2,o.fill(-1),o[this._hashKey(b,w)]=g,o[this._hashKey(S,k)]=y,o[this._hashKey(M,T)]=x,this.trianglesLen=0,this._addTriangle(g,y,x,-1,-1,-1);for(let I=0,z,X;I<this._ids.length;I++){const W=this._ids[I],U=t[2*W],B=t[2*W+1];if(I>0&&Math.abs(U-z)<=vz&&Math.abs(B-X)<=vz||(z=U,X=B,W===g||W===y||W===x))continue;let V=0;for(let oe=0,me=this._hashKey(U,B);oe<this._hashSize&&(V=o[(me+oe)%this._hashSize],!(V!==-1&&V!==i[V]));oe++);V=n[V];let K=V,H;for(;H=i[K],Nx(U,B,t[2*K],t[2*K+1],t[2*H],t[2*H+1])>=0;)if(K=H,K===V){K=-1;break}if(K===-1)continue;let J=this._addTriangle(K,W,i[K],-1,-1,r[K]);r[W]=this._legalize(J+2),r[K]=J,D++;let Q=i[K];for(;H=i[Q],Nx(U,B,t[2*Q],t[2*Q+1],t[2*H],t[2*H+1])<0;)J=this._addTriangle(Q,W,H,r[W],-1,r[Q]),r[W]=this._legalize(J+2),i[Q]=Q,D--,Q=H;if(K===V)for(;H=n[K],Nx(U,B,t[2*H],t[2*H+1],t[2*K],t[2*K+1])<0;)J=this._addTriangle(H,W,K,-1,r[K],r[H]),this._legalize(J+2),r[H]=J,i[K]=K,D--,K=H;this._hullStart=n[W]=K,i[K]=n[Q]=W,i[W]=Q,o[this._hashKey(U,B)]=W,o[this._hashKey(t[2*K],t[2*K+1])]=K}this.hull=new Uint32Array(D);for(let I=0,z=this._hullStart;I<D;I++)this.hull[I]=z,z=i[z];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(J2e(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:i,coords:r}=this;let o=0,a=0;for(;;){const s=i[t],l=t-t%3;if(a=l+(t+2)%3,s===-1){if(o===0)break;t=$x[--o];continue}const u=s-s%3,c=l+(t+1)%3,d=u+(s+2)%3,h=n[a],m=n[t],g=n[c],y=n[d];if(Q2e(r[2*h],r[2*h+1],r[2*m],r[2*m+1],r[2*g],r[2*g+1],r[2*y],r[2*y+1])){n[t]=y,n[s]=h;const b=i[d];if(b===-1){let S=this._hullStart;do{if(this._hullTri[S]===d){this._hullTri[S]=t;break}S=this._hullPrev[S]}while(S!==this._hullStart)}this._link(t,b),this._link(s,i[a]),this._link(a,d);const w=u+(s+1)%3;o<$x.length&&($x[o++]=w)}else{if(o===0)break;t=$x[--o]}}return a}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,i,r,o,a){const s=this.trianglesLen;return this._triangles[s]=t,this._triangles[s+1]=n,this._triangles[s+2]=i,this._link(s,r),this._link(s+1,o),this._link(s+2,a),this.trianglesLen+=3,s}}function J2e(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function Uk(e,t,n,i){const r=e-n,o=t-i;return r*r+o*o}function Q2e(e,t,n,i,r,o,a,s){const l=e-a,u=t-s,c=n-a,d=i-s,h=r-a,m=o-s,g=l*l+u*u,y=c*c+d*d,x=h*h+m*m;return l*(d*x-y*m)-u*(c*x-y*h)+g*(c*m-d*h)<0}function eSe(e,t,n,i,r,o){const a=n-e,s=i-t,l=r-e,u=o-t,c=a*a+s*s,d=l*l+u*u,h=.5/(a*u-s*l),m=(u*c-s*d)*h,g=(a*d-l*c)*h;return m*m+g*g}function tSe(e,t,n,i,r,o){const a=n-e,s=i-t,l=r-e,u=o-t,c=a*a+s*s,d=l*l+u*u,h=.5/(a*u-s*l),m=e+(u*c-s*d)*h,g=t+(a*d-l*c)*h;return{x:m,y:g}}function rp(e,t,n,i){if(i-n<=20)for(let r=n+1;r<=i;r++){const o=e[r],a=t[o];let s=r-1;for(;s>=n&&t[e[s]]>a;)e[s+1]=e[s--];e[s+1]=o}else{const r=n+i>>1;let o=n+1,a=i;Bg(e,r,o),t[e[n]]>t[e[i]]&&Bg(e,n,i),t[e[o]]>t[e[i]]&&Bg(e,o,i),t[e[n]]>t[e[o]]&&Bg(e,n,o);const s=e[o],l=t[s];for(;;){do o++;while(t[e[o]]<l);do a--;while(t[e[a]]>l);if(a<o)break;Bg(e,o,a)}e[n+1]=e[a],e[a]=s,i-o+1>=a-n?(rp(e,t,o,i),rp(e,t,n,a-1)):(rp(e,t,n,a-1),rp(e,t,o,i))}}function Bg(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function nSe(e){return e[0]}function iSe(e){return e[1]}const xz=1e-6;class Of{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,i){t=+t,n=+n,i=+i;const r=t+i,o=n;if(i<0)throw new Error("negative radius");this._x1===null?this._+=`M${r},${o}`:(Math.abs(this._x1-r)>xz||Math.abs(this._y1-o)>xz)&&(this._+="L"+r+","+o),i&&(this._+=`A${i},${i},0,1,1,${t-i},${n}A${i},${i},0,1,1,${this._x1=r},${this._y1=o}`)}rect(t,n,i,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+i}v${+r}h${-i}Z`}value(){return this._||null}}class dM{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let rSe=class{constructor(t,[n,i,r,o]=[0,0,960,500]){if(!((r=+r)>=(n=+n))||!((o=+o)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=r,this.xmin=n,this.ymax=o,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:i},vectors:r}=this;let o,a;const s=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let y=0,x=0,b=i.length,w,S;y<b;y+=3,x+=2){const k=i[y]*2,R=i[y+1]*2,M=i[y+2]*2,T=t[k],N=t[k+1],D=t[R],I=t[R+1],z=t[M],X=t[M+1],W=D-T,U=I-N,B=z-T,V=X-N,K=(W*V-U*B)*2;if(Math.abs(K)<1e-9){if(o===void 0){o=a=0;for(const J of n)o+=t[J*2],a+=t[J*2+1];o/=n.length,a/=n.length}const H=1e9*Math.sign((o-T)*V-(a-N)*B);w=(T+z)/2-H*V,S=(N+X)/2+H*B}else{const H=1/K,J=W*W+U*U,Q=B*B+V*V;w=T+(V*J-U*Q)*H,S=N+(W*Q-B*J)*H}s[x]=w,s[x+1]=S}let l=n[n.length-1],u,c=l*4,d,h=t[2*l],m,g=t[2*l+1];r.fill(0);for(let y=0;y<n.length;++y)l=n[y],u=c,d=h,m=g,c=l*4,h=t[2*l],g=t[2*l+1],r[u+2]=r[c]=m-g,r[u+3]=r[c+1]=h-d}render(t){const n=t==null?t=new Of:void 0,{delaunay:{halfedges:i,inedges:r,hull:o},circumcenters:a,vectors:s}=this;if(o.length<=1)return null;for(let c=0,d=i.length;c<d;++c){const h=i[c];if(h<c)continue;const m=Math.floor(c/3)*2,g=Math.floor(h/3)*2,y=a[m],x=a[m+1],b=a[g],w=a[g+1];this._renderSegment(y,x,b,w,t)}let l,u=o[o.length-1];for(let c=0;c<o.length;++c){l=u,u=o[c];const d=Math.floor(r[u]/3)*2,h=a[d],m=a[d+1],g=l*4,y=this._project(h,m,s[g+2],s[g+3]);y&&this._renderSegment(h,m,y[0],y[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Of:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const i=n==null?n=new Of:void 0,r=this._clip(t);if(r===null||!r.length)return;n.moveTo(r[0],r[1]);let o=r.length;for(;r[0]===r[o-2]&&r[1]===r[o-1]&&o>1;)o-=2;for(let a=2;a<o;a+=2)(r[a]!==r[a-2]||r[a+1]!==r[a-1])&&n.lineTo(r[a],r[a+1]);return n.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,i=t.length/2;n<i;++n){const r=this.cellPolygon(n);r&&(r.index=n,yield r)}}cellPolygon(t){const n=new dM;return this.renderCell(t,n),n.value()}_renderSegment(t,n,i,r,o){let a;const s=this._regioncode(t,n),l=this._regioncode(i,r);s===0&&l===0?(o.moveTo(t,n),o.lineTo(i,r)):(a=this._clipSegment(t,n,i,r,s,l))&&(o.moveTo(a[0],a[1]),o.lineTo(a[2],a[3]))}contains(t,n,i){return n=+n,n!==n||(i=+i,i!==i)?!1:this.delaunay._step(t,n,i)===t}*neighbors(t){const n=this._clip(t);if(n)for(const i of this.delaunay.neighbors(t)){const r=this._clip(i);if(r){e:for(let o=0,a=n.length;o<a;o+=2)for(let s=0,l=r.length;s<l;s+=2)if(n[o]===r[s]&&n[o+1]===r[s+1]&&n[(o+2)%a]===r[(s+l-2)%l]&&n[(o+3)%a]===r[(s+l-1)%l]){yield i;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:i,halfedges:r,triangles:o}}=this,a=i[t];if(a===-1)return null;const s=[];let l=a;do{const u=Math.floor(l/3);if(s.push(n[u*2],n[u*2+1]),l=l%3===2?l-2:l+1,o[l]!==t)break;l=r[l]}while(l!==a&&l!==-1);return s}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:i}=this,r=t*4;return this._simplify(i[r]||i[r+1]?this._clipInfinite(t,n,i[r],i[r+1],i[r+2],i[r+3]):this._clipFinite(t,n))}_clipFinite(t,n){const i=n.length;let r=null,o,a,s=n[i-2],l=n[i-1],u,c=this._regioncode(s,l),d,h=0;for(let m=0;m<i;m+=2)if(o=s,a=l,s=n[m],l=n[m+1],u=c,c=this._regioncode(s,l),u===0&&c===0)d=h,h=0,r?r.push(s,l):r=[s,l];else{let g,y,x,b,w;if(u===0){if((g=this._clipSegment(o,a,s,l,u,c))===null)continue;[y,x,b,w]=g}else{if((g=this._clipSegment(s,l,o,a,c,u))===null)continue;[b,w,y,x]=g,d=h,h=this._edgecode(y,x),d&&h&&this._edge(t,d,h,r,r.length),r?r.push(y,x):r=[y,x]}d=h,h=this._edgecode(b,w),d&&h&&this._edge(t,d,h,r,r.length),r?r.push(b,w):r=[b,w]}if(r)d=h,h=this._edgecode(r[0],r[1]),d&&h&&this._edge(t,d,h,r,r.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(t,n,i,r,o,a){const s=o<a;for(s&&([t,n,i,r,o,a]=[i,r,t,n,a,o]);;){if(o===0&&a===0)return s?[i,r,t,n]:[t,n,i,r];if(o&a)return null;let l,u,c=o||a;c&8?(l=t+(i-t)*(this.ymax-n)/(r-n),u=this.ymax):c&4?(l=t+(i-t)*(this.ymin-n)/(r-n),u=this.ymin):c&2?(u=n+(r-n)*(this.xmax-t)/(i-t),l=this.xmax):(u=n+(r-n)*(this.xmin-t)/(i-t),l=this.xmin),o?(t=l,n=u,o=this._regioncode(t,n)):(i=l,r=u,a=this._regioncode(i,r))}}_clipInfinite(t,n,i,r,o,a){let s=Array.from(n),l;if((l=this._project(s[0],s[1],i,r))&&s.unshift(l[0],l[1]),(l=this._project(s[s.length-2],s[s.length-1],o,a))&&s.push(l[0],l[1]),s=this._clipFinite(t,s))for(let u=0,c=s.length,d,h=this._edgecode(s[c-2],s[c-1]);u<c;u+=2)d=h,h=this._edgecode(s[u],s[u+1]),d&&h&&(u=this._edge(t,d,h,s,u),c=s.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(t,n,i,r,o){for(;n!==i;){let a,s;switch(n){case 5:n=4;continue;case 4:n=6,a=this.xmax,s=this.ymin;break;case 6:n=2;continue;case 2:n=10,a=this.xmax,s=this.ymax;break;case 10:n=8;continue;case 8:n=9,a=this.xmin,s=this.ymax;break;case 9:n=1;continue;case 1:n=5,a=this.xmin,s=this.ymin;break}(r[o]!==a||r[o+1]!==s)&&this.contains(t,a,s)&&(r.splice(o,0,a,s),o+=2)}return o}_project(t,n,i,r){let o=1/0,a,s,l;if(r<0){if(n<=this.ymin)return null;(a=(this.ymin-n)/r)<o&&(l=this.ymin,s=t+(o=a)*i)}else if(r>0){if(n>=this.ymax)return null;(a=(this.ymax-n)/r)<o&&(l=this.ymax,s=t+(o=a)*i)}if(i>0){if(t>=this.xmax)return null;(a=(this.xmax-t)/i)<o&&(s=this.xmax,l=n+(o=a)*r)}else if(i<0){if(t<=this.xmin)return null;(a=(this.xmin-t)/i)<o&&(s=this.xmin,l=n+(o=a)*r)}return[s,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const i=(n+2)%t.length,r=(n+4)%t.length;(t[n]===t[i]&&t[i]===t[r]||t[n+1]===t[i+1]&&t[i+1]===t[r+1])&&(t.splice(i,2),n-=2)}t.length||(t=null)}return t}};const oSe=2*Math.PI,Th=Math.pow;function aSe(e){return e[0]}function sSe(e){return e[1]}function lSe(e){const{triangles:t,coords:n}=e;for(let i=0;i<t.length;i+=3){const r=2*t[i],o=2*t[i+1],a=2*t[i+2];if((n[a]-n[r])*(n[o+1]-n[r+1])-(n[o]-n[r])*(n[a+1]-n[r+1])>1e-10)return!1}return!0}function uSe(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class DO{static from(t,n=aSe,i=sSe,r){return new DO("length"in t?cSe(t,n,i,r):Float64Array.from(fSe(t,n,i,r)))}constructor(t){this._delaunator=new Ew(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&lSe(t)){this.collinear=Int32Array.from({length:n.length/2},(h,m)=>m).sort((h,m)=>n[2*h]-n[2*m]||n[2*h+1]-n[2*m+1]);const l=this.collinear[0],u=this.collinear[this.collinear.length-1],c=[n[2*l],n[2*l+1],n[2*u],n[2*u+1]],d=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let h=0,m=n.length/2;h<m;++h){const g=uSe(n[2*h],n[2*h+1],d);n[2*h]=g[0],n[2*h+1]=g[1]}this._delaunator=new Ew(n)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,a=this.inedges.fill(-1),s=this._hullIndex.fill(-1);for(let l=0,u=i.length;l<u;++l){const c=o[l%3===2?l-2:l+1];(i[l]===-1||a[c]===-1)&&(a[c]=l)}for(let l=0,u=r.length;l<u;++l)s[r[l]]=l;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],a[r[0]]=1,r.length===2&&(a[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new rSe(this,t)}*neighbors(t){const{inedges:n,hull:i,_hullIndex:r,halfedges:o,triangles:a,collinear:s}=this;if(s){const d=s.indexOf(t);d>0&&(yield s[d-1]),d<s.length-1&&(yield s[d+1]);return}const l=n[t];if(l===-1)return;let u=l,c=-1;do{if(yield c=a[u],u=u%3===2?u-2:u+1,a[u]!==t)return;if(u=o[u],u===-1){const d=i[(r[t]+1)%i.length];d!==c&&(yield d);return}}while(u!==l)}find(t,n,i=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const r=i;let o;for(;(o=this._step(i,t,n))>=0&&o!==i&&o!==r;)i=o;return o}_step(t,n,i){const{inedges:r,hull:o,_hullIndex:a,halfedges:s,triangles:l,points:u}=this;if(r[t]===-1||!u.length)return(t+1)%(u.length>>1);let c=t,d=Th(n-u[t*2],2)+Th(i-u[t*2+1],2);const h=r[t];let m=h;do{let g=l[m];const y=Th(n-u[g*2],2)+Th(i-u[g*2+1],2);if(y<d&&(d=y,c=g),m=m%3===2?m-2:m+1,l[m]!==t)break;if(m=s[m],m===-1){if(m=o[(a[t]+1)%o.length],m!==g&&Th(n-u[m*2],2)+Th(i-u[m*2+1],2)<d)return m;break}}while(m!==h);return c}render(t){const n=t==null?t=new Of:void 0,{points:i,halfedges:r,triangles:o}=this;for(let a=0,s=r.length;a<s;++a){const l=r[a];if(l<a)continue;const u=o[a]*2,c=o[l]*2;t.moveTo(i[u],i[u+1]),t.lineTo(i[c],i[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const i=t==null?t=new Of:void 0,{points:r}=this;for(let o=0,a=r.length;o<a;o+=2){const s=r[o],l=r[o+1];t.moveTo(s+n,l),t.arc(s,l,n,0,oSe)}return i&&i.value()}renderHull(t){const n=t==null?t=new Of:void 0,{hull:i,points:r}=this,o=i[0]*2,a=i.length;t.moveTo(r[o],r[o+1]);for(let s=1;s<a;++s){const l=2*i[s];t.lineTo(r[l],r[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new dM;return this.renderHull(t),t.value()}renderTriangle(t,n){const i=n==null?n=new Of:void 0,{points:r,triangles:o}=this,a=o[t*=3]*2,s=o[t+1]*2,l=o[t+2]*2;return n.moveTo(r[a],r[a+1]),n.lineTo(r[s],r[s+1]),n.lineTo(r[l],r[l+1]),n.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,i=t.length/3;n<i;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new dM;return this.renderTriangle(t,n),n.value()}}function cSe(e,t,n,i){const r=e.length,o=new Float64Array(r*2);for(let a=0;a<r;++a){const s=e[a];o[a*2]=t.call(i,s,a,e),o[a*2+1]=n.call(i,s,a,e)}return o}function*fSe(e,t,n,i){let r=0;for(const o of e)yield t.call(i,o,r,e),yield n.call(i,o,r,e),++r}function LO(e){ne.call(this,null,e)}LO.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const dSe=[-1e5,-1e5,1e5,1e5];be(LO,ne,{transform(e,t){const n=e.as||"path",i=t.source;if(!i||!i.length)return t;let r=e.size;r=r?[0,0,r[0],r[1]]:(r=e.extent)?[r[0][0],r[0][1],r[1][0],r[1][1]]:dSe;const o=this.value=DO.from(i,e.x,e.y).voronoi(r);for(let a=0,s=i.length;a<s;++a){const l=o.cellPolygon(a);i[a][n]=l&&!pSe(l)?hSe(l):null}return t.reflow(e.modified()).modifies(n)}});function hSe(e){const t=e[0][0],n=e[0][1];let i=e.length-1;for(;e[i][0]===t&&e[i][1]===n;--i);return"M"+e.slice(0,i+1).join("L")+"Z"}function pSe(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const mSe=Object.freeze(Object.defineProperty({__proto__:null,voronoi:LO},Symbol.toStringTag,{value:"Module"}));var Wk=Math.PI/180,R0=64,A_=2048;function gSe(){var e=[256,256],t,n,i,r,o,a,s,l=rK,u=[],c=Math.random,d={};d.layout=function(){for(var g=h(tc()),y=wSe((e[0]>>5)*e[1]),x=null,b=u.length,w=-1,S=[],k=u.map(M=>({text:t(M),font:n(M),style:r(M),weight:o(M),rotate:a(M),size:~~(i(M)+1e-14),padding:s(M),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:M})).sort((M,T)=>T.size-M.size);++w<b;){var R=k[w];R.x=e[0]*(c()+.5)>>1,R.y=e[1]*(c()+.5)>>1,ySe(g,R,k,w),R.hasText&&m(y,R,x)&&(S.push(R),x?xSe(x,R):x=[{x:R.x+R.x0,y:R.y+R.y0},{x:R.x+R.x1,y:R.y+R.y1}],R.x-=e[0]>>1,R.y-=e[1]>>1)}return S};function h(g){g.width=g.height=1;var y=Math.sqrt(g.getContext("2d").getImageData(0,0,1,1).data.length>>2);g.width=(R0<<5)/y,g.height=A_/y;var x=g.getContext("2d");return x.fillStyle=x.strokeStyle="red",x.textAlign="center",{context:x,ratio:y}}function m(g,y,x){for(var b=y.x,w=y.y,S=Math.sqrt(e[0]*e[0]+e[1]*e[1]),k=l(e),R=c()<.5?1:-1,M=-R,T,N,D;(T=k(M+=R))&&(N=~~T[0],D=~~T[1],!(Math.min(Math.abs(N),Math.abs(D))>=S));)if(y.x=b+N,y.y=w+D,!(y.x+y.x0<0||y.y+y.y0<0||y.x+y.x1>e[0]||y.y+y.y1>e[1])&&(!x||!vSe(y,g,e[0]))&&(!x||_Se(y,x))){for(var I=y.sprite,z=y.width>>5,X=e[0]>>5,W=y.x-(z<<4),U=W&127,B=32-U,V=y.y1-y.y0,K=(y.y+y.y0)*X+(W>>5),H,J=0;J<V;J++){H=0;for(var Q=0;Q<=z;Q++)g[K+Q]|=H<<B|(Q<z?(H=I[J*z+Q])>>>U:0);K+=X}return y.sprite=null,!0}return!1}return d.words=function(g){return arguments.length?(u=g,d):u},d.size=function(g){return arguments.length?(e=[+g[0],+g[1]],d):e},d.font=function(g){return arguments.length?(n=af(g),d):n},d.fontStyle=function(g){return arguments.length?(r=af(g),d):r},d.fontWeight=function(g){return arguments.length?(o=af(g),d):o},d.rotate=function(g){return arguments.length?(a=af(g),d):a},d.text=function(g){return arguments.length?(t=af(g),d):t},d.spiral=function(g){return arguments.length?(l=SSe[g]||g,d):l},d.fontSize=function(g){return arguments.length?(i=af(g),d):i},d.padding=function(g){return arguments.length?(s=af(g),d):s},d.random=function(g){return arguments.length?(c=g,d):c},d}function ySe(e,t,n,i){if(!t.sprite){var r=e.context,o=e.ratio;r.clearRect(0,0,(R0<<5)/o,A_/o);var a=0,s=0,l=0,u=n.length,c,d,h,m,g;for(--i;++i<u;){if(t=n[i],r.save(),r.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,c=r.measureText(t.text+"m").width*o,h=t.size<<1,t.rotate){var y=Math.sin(t.rotate*Wk),x=Math.cos(t.rotate*Wk),b=c*x,w=c*y,S=h*x,k=h*y;c=Math.max(Math.abs(b+k),Math.abs(b-k))+31>>5<<5,h=~~Math.max(Math.abs(w+S),Math.abs(w-S))}else c=c+31>>5<<5;if(h>l&&(l=h),a+c>=R0<<5&&(a=0,s+=l,l=0),s+h>=A_)break;r.translate((a+(c>>1))/o,(s+(h>>1))/o),t.rotate&&r.rotate(t.rotate*Wk),r.fillText(t.text,0,0),t.padding&&(r.lineWidth=2*t.padding,r.strokeText(t.text,0,0)),r.restore(),t.width=c,t.height=h,t.xoff=a,t.yoff=s,t.x1=c>>1,t.y1=h>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,a+=c}for(var R=r.getImageData(0,0,(R0<<5)/o,A_/o).data,M=[];--i>=0;)if(t=n[i],!!t.hasText){for(c=t.width,d=c>>5,h=t.y1-t.y0,m=0;m<h*d;m++)M[m]=0;if(a=t.xoff,a==null)return;s=t.yoff;var T=0,N=-1;for(g=0;g<h;g++){for(m=0;m<c;m++){var D=d*g+(m>>5),I=R[(s+g)*(R0<<5)+(a+m)<<2]?1<<31-m%32:0;M[D]|=I,T|=I}T?N=g:(t.y0++,h--,g--,s++)}t.y1=t.y0+N,t.sprite=M.slice(0,(t.y1-t.y0)*d)}}}function vSe(e,t,n){n>>=5;for(var i=e.sprite,r=e.width>>5,o=e.x-(r<<4),a=o&127,s=32-a,l=e.y1-e.y0,u=(e.y+e.y0)*n+(o>>5),c,d=0;d<l;d++){c=0;for(var h=0;h<=r;h++)if((c<<s|(h<r?(c=i[d*r+h])>>>a:0))&t[u+h])return!0;u+=n}return!1}function xSe(e,t){var n=e[0],i=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>i.x&&(i.x=t.x+t.x1),t.y+t.y1>i.y&&(i.y=t.y+t.y1)}function _Se(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function rK(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function bSe(e){var t=4,n=t*e[0]/e[1],i=0,r=0;return function(o){var a=o<0?-1:1;switch(Math.sqrt(1+4*a*o)-a&3){case 0:i+=n;break;case 1:r+=t;break;case 2:i-=n;break;default:r-=t;break}return[i,r]}}function wSe(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function af(e){return typeof e=="function"?e:function(){return e}}var SSe={archimedean:rK,rectangular:bSe};const oK=["x","y","font","fontSize","fontStyle","fontWeight","angle"],CSe=["text","font","rotate","fontSize","fontStyle","fontWeight"];function jO(e){ne.call(this,gSe(),e)}jO.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:oK}]};be(jO,ne,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&le("Wordcloud size dimensions must be non-zero.");function n(g){const y=e[g];return _t(y)&&t.modified(y.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||CSe.some(n)))return;const r=t.materialize(t.SOURCE).source,o=this.value,a=e.as||oK;let s=e.fontSize||14,l;if(_t(s)?l=e.fontSizeRange:s=nr(s),l){const g=s,y=Ut("sqrt")().domain(Rs(r,g)).range(l);s=x=>y(g(x))}r.forEach(g=>{g[a[0]]=NaN,g[a[1]]=NaN,g[a[3]]=0});const u=o.words(r).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(s).random(Qo).layout(),c=o.size(),d=c[0]>>1,h=c[1]>>1,m=u.length;for(let g=0,y,x;g<m;++g)y=u[g],x=y.datum,x[a[0]]=y.x+d,x[a[1]]=y.y+h,x[a[2]]=y.font,x[a[3]]=y.size,x[a[4]]=y.style,x[a[5]]=y.weight,x[a[6]]=y.rotate;return t.reflow(i).modifies(a)}});const ESe=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:jO},Symbol.toStringTag,{value:"Module"})),kSe=e=>new Uint8Array(e),RSe=e=>new Uint16Array(e),Q0=e=>new Uint32Array(e);function TSe(){let e=8,t=[],n=Q0(0),i=Ox(0,e),r=Ox(0,e);return{data:()=>t,seen:()=>n=ASe(n,t.length),add(o){for(let a=0,s=t.length,l=o.length,u;a<l;++a)u=o[a],u._index=s++,t.push(u)},remove(o,a){const s=t.length,l=Array(s-o),u=t;let c,d,h;for(d=0;!a[d]&&d<s;++d)l[d]=t[d],u[d]=d;for(h=d;d<s;++d)c=t[d],a[d]?u[d]=-1:(u[d]=h,i[h]=i[d],r[h]=r[d],l[h]=c,c._index=h++),i[d]=0;return t=l,u},size:()=>t.length,curr:()=>i,prev:()=>r,reset:o=>r[o]=i[o],all:()=>e<257?255:e<65537?65535:4294967295,set(o,a){i[o]|=a},clear(o,a){i[o]&=~a},resize(o,a){const s=i.length;(o>s||a>e)&&(e=Math.max(a,e),i=Ox(o,e,i),r=Ox(o,e))}}}function ASe(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function Ox(e,t,n){const i=(t<257?kSe:t<65537?RSe:Q0)(e);return n&&i.set(n),i}function _z(e,t,n){const i=1<<t;return{one:i,zero:~i,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(r,o){const a=this,s=a.bisect(a.range,r.value),l=r.index,u=s[0],c=s[1],d=l.length;let h;for(h=0;h<u;++h)o[l[h]]|=i;for(h=c;h<d;++h)o[l[h]]|=i;return a}}}function bz(){let e=Q0(0),t=[],n=0;function i(s,l,u){if(!l.length)return[];const c=n,d=l.length,h=Q0(d);let m=Array(d),g,y,x;for(x=0;x<d;++x)m[x]=s(l[x]),h[x]=x;if(m=MSe(m,h),c)g=t,y=e,t=Array(c+d),e=Q0(c+d),FSe(u,g,y,c,m,h,d,t,e);else{if(u>0)for(x=0;x<d;++x)h[x]+=u;t=m,e=h}return n=c+d,{index:h,value:m}}function r(s,l){const u=n;let c,d,h;for(d=0;!l[e[d]]&&d<u;++d);for(h=d;d<u;++d)l[c=e[d]]||(e[h]=c,t[h]=t[d],++h);n=u-s}function o(s){for(let l=0,u=n;l<u;++l)e[l]=s[e[l]]}function a(s,l){let u;return l?u=l.length:(l=t,u=n),[Gfe(l,s[0],0,u),lc(l,s[1],0,u)]}return{insert:i,remove:r,bisect:a,reindex:o,index:()=>e,size:()=>n}}function MSe(e,t){return e.sort.call(t,(n,i)=>{const r=e[n],o=e[i];return r<o?-1:r>o?1:0}),Yfe(e,t)}function FSe(e,t,n,i,r,o,a,s,l){let u=0,c=0,d;for(d=0;u<i&&c<a;++d)t[u]<r[c]?(s[d]=t[u],l[d]=n[u++]):(s[d]=r[c],l[d]=o[c++]+e);for(;u<i;++u,++d)s[d]=t[u],l[d]=n[u];for(;c<a;++c,++d)s[d]=r[c],l[d]=o[c]+e}function zO(e){ne.call(this,TSe(),e),this._indices=null,this._dims=null}zO.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};be(zO,ne,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(i=>t.modified(i.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,i=e.query,r=this._indices={},o=this._dims=[],a=i.length;let s=0,l,u;for(;s<a;++s)l=n[s].fname,u=r[l]||(r[l]=bz()),o.push(_z(u,s,i[s]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),i=e.fields,r=e.query,o=this._indices,a=this._dims,s=this.value,l=s.curr(),u=s.prev(),c=s.all(),d=n.rem=n.add,h=n.mod,m=r.length,g={};let y,x,b,w,S,k,R,M,T;if(u.set(l),t.rem.length&&(S=this.remove(e,t,n)),t.add.length&&s.add(t.add),t.mod.length)for(k={},w=t.mod,R=0,M=w.length;R<M;++R)k[w[R]._index]=1;for(R=0;R<m;++R)T=i[R],(!a[R]||e.modified("fields",R)||t.modified(T.fields))&&(b=T.fname,(y=g[b])||(o[b]=x=bz(),g[b]=y=x.insert(T,t.source,0)),a[R]=_z(x,R,r[R]).onAdd(y,l));for(R=0,M=s.data().length;R<M;++R)S[R]||(u[R]!==l[R]?d.push(R):k[R]&&l[R]!==c&&h.push(R));return s.mask=(1<<m)-1,n},eval(e,t){const n=t.materialize().fork(),i=this._dims.length;let r=0;return t.rem.length&&(this.remove(e,t,n),r|=(1<<i)-1),e.modified("query")&&!e.modified("fields")&&(r|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),r|=(1<<i)-1),t.mod.length&&(this.modify(t,n),r|=(1<<i)-1),this.value.mask=r,n},insert(e,t,n){const i=t.add,r=this.value,o=this._dims,a=this._indices,s=e.fields,l={},u=n.add,c=r.size()+i.length,d=o.length;let h=r.size(),m,g,y;r.resize(c,d),r.add(i);const x=r.curr(),b=r.prev(),w=r.all();for(m=0;m<d;++m)g=s[m].fname,y=l[g]||(l[g]=a[g].insert(s[m],i,h)),o[m].onAdd(y,x);for(;h<c;++h)b[h]=w,x[h]!==w&&u.push(h)},modify(e,t){const n=t.mod,i=this.value,r=i.curr(),o=i.all(),a=e.mod;let s,l,u;for(s=0,l=a.length;s<l;++s)u=a[s]._index,r[u]!==o&&n.push(u)},remove(e,t,n){const i=this._indices,r=this.value,o=r.curr(),a=r.prev(),s=r.all(),l={},u=n.rem,c=t.rem;let d,h,m,g;for(d=0,h=c.length;d<h;++d)m=c[d]._index,l[m]=1,a[m]=g=o[m],o[m]=s,g!==s&&u.push(m);for(m in i)i[m].remove(h,l);return this.reindex(t,h,l),l},reindex(e,t,n){const i=this._indices,r=this.value;e.runAfter(()=>{const o=r.remove(t,n);for(const a in i)i[a].reindex(o)})},update(e,t,n){const i=this._dims,r=e.query,o=t.stamp,a=i.length;let s=0,l,u;for(n.filters=0,u=0;u<a;++u)e.modified("query",u)&&(l=u,++s);if(s===1)s=i[l].one,this.incrementOne(i[l],r[l],n.add,n.rem);else for(u=0,s=0;u<a;++u)e.modified("query",u)&&(s|=i[u].one,this.incrementAll(i[u],r[u],o,n.add),n.rem=n.add);return s},incrementAll(e,t,n,i){const r=this.value,o=r.seen(),a=r.curr(),s=r.prev(),l=e.index(),u=e.bisect(e.range),c=e.bisect(t),d=c[0],h=c[1],m=u[0],g=u[1],y=e.one;let x,b,w;if(d<m)for(x=d,b=Math.min(m,h);x<b;++x)w=l[x],o[w]!==n&&(s[w]=a[w],o[w]=n,i.push(w)),a[w]^=y;else if(d>m)for(x=m,b=Math.min(d,g);x<b;++x)w=l[x],o[w]!==n&&(s[w]=a[w],o[w]=n,i.push(w)),a[w]^=y;if(h>g)for(x=Math.max(d,g),b=h;x<b;++x)w=l[x],o[w]!==n&&(s[w]=a[w],o[w]=n,i.push(w)),a[w]^=y;else if(h<g)for(x=Math.max(m,h),b=g;x<b;++x)w=l[x],o[w]!==n&&(s[w]=a[w],o[w]=n,i.push(w)),a[w]^=y;e.range=t.slice()},incrementOne(e,t,n,i){const r=this.value,o=r.curr(),a=e.index(),s=e.bisect(e.range),l=e.bisect(t),u=l[0],c=l[1],d=s[0],h=s[1],m=e.one;let g,y,x;if(u<d)for(g=u,y=Math.min(d,c);g<y;++g)x=a[g],o[x]^=m,n.push(x);else if(u>d)for(g=d,y=Math.min(u,h);g<y;++g)x=a[g],o[x]^=m,i.push(x);if(c>h)for(g=Math.max(u,h),y=c;g<y;++g)x=a[g],o[x]^=m,n.push(x);else if(c<h)for(g=Math.max(d,c),y=h;g<y;++g)x=a[g],o[x]^=m,i.push(x);e.range=t.slice()}});function BO(e){ne.call(this,null,e)}BO.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};be(BO,ne,{transform(e,t){const n=~(e.ignore||0),i=e.filter,r=i.mask;if(!(r&n))return t.StopPropagation;const o=t.fork(t.ALL),a=i.data(),s=i.curr(),l=i.prev(),u=c=>s[c]&n?null:a[c];return o.filter(o.MOD,u),r&r-1?(o.filter(o.ADD,c=>{const d=s[c]&n;return!d&&d^l[c]&n?a[c]:null}),o.filter(o.REM,c=>{const d=s[c]&n;return d&&!(d^(d^l[c]&n))?a[c]:null})):(o.filter(o.ADD,u),o.filter(o.REM,c=>(s[c]&n)===r?a[c]:null)),o.filter(o.SOURCE,c=>u(c._index))}});const PSe=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:zO,resolvefilter:BO},Symbol.toStringTag,{value:"Module"})),NSe="RawCode",md="Literal",$Se="Property",OSe="Identifier",ISe="ArrayExpression",DSe="BinaryExpression",aK="CallExpression",LSe="ConditionalExpression",jSe="LogicalExpression",zSe="MemberExpression",BSe="ObjectExpression",HSe="UnaryExpression";function Ha(e){this.type=e}Ha.prototype.visit=function(e){let t,n,i;if(e(this))return 1;for(t=USe(this),n=0,i=t.length;n<i;++n)if(t[n].visit(e))return 1};function USe(e){switch(e.type){case ISe:return e.elements;case DSe:case jSe:return[e.left,e.right];case aK:return[e.callee].concat(e.arguments);case LSe:return[e.test,e.consequent,e.alternate];case zSe:return[e.object,e.property];case BSe:return e.properties;case $Se:return[e.key,e.value];case HSe:return[e.argument];case OSe:case md:case NSe:default:return[]}}var zs,qe,se,Ji,en,NS=1,Hv=2,gd=3,Lc=4,$S=5,Bd=6,Or=7,Uv=8,WSe=9;zs={};zs[NS]="Boolean";zs[Hv]="<end>";zs[gd]="Identifier";zs[Lc]="Keyword";zs[$S]="Null";zs[Bd]="Numeric";zs[Or]="Punctuator";zs[Uv]="String";zs[WSe]="RegularExpression";var GSe="ArrayExpression",qSe="BinaryExpression",VSe="CallExpression",YSe="ConditionalExpression",sK="Identifier",ZSe="Literal",XSe="LogicalExpression",KSe="MemberExpression",JSe="ObjectExpression",QSe="Property",eCe="UnaryExpression",mi="Unexpected token %0",tCe="Unexpected number",nCe="Unexpected string",iCe="Unexpected identifier",rCe="Unexpected reserved word",oCe="Unexpected end of input",hM="Invalid regular expression",Gk="Invalid regular expression: missing /",lK="Octal literals are not allowed in strict mode.",aCe="Duplicate data property in object literal not allowed in strict mode",Ai="ILLEGAL",Zy="Disabled.",sCe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),lCe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function OS(e,t){if(!e)throw new Error("ASSERT: "+t)}function cl(e){return e>=48&&e<=57}function HO(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function ey(e){return"01234567".indexOf(e)>=0}function uCe(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function Xy(e){return e===10||e===13||e===8232||e===8233}function Wv(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&sCe.test(String.fromCharCode(e))}function kw(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&lCe.test(String.fromCharCode(e))}const cCe={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function uK(){for(;se<Ji;){const e=qe.charCodeAt(se);if(uCe(e)||Xy(e))++se;else break}}function pM(e){var t,n,i,r=0;for(n=e==="u"?4:2,t=0;t<n;++t)se<Ji&&HO(qe[se])?(i=qe[se++],r=r*16+"0123456789abcdef".indexOf(i.toLowerCase())):Bt({},mi,Ai);return String.fromCharCode(r)}function fCe(){var e,t,n,i;for(e=qe[se],t=0,e==="}"&&Bt({},mi,Ai);se<Ji&&(e=qe[se++],!!HO(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Bt({},mi,Ai),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,i=(t-65536&1023)+56320,String.fromCharCode(n,i))}function cK(){var e,t;for(e=qe.charCodeAt(se++),t=String.fromCharCode(e),e===92&&(qe.charCodeAt(se)!==117&&Bt({},mi,Ai),++se,e=pM("u"),(!e||e==="\\"||!Wv(e.charCodeAt(0)))&&Bt({},mi,Ai),t=e);se<Ji&&(e=qe.charCodeAt(se),!!kw(e));)++se,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),qe.charCodeAt(se)!==117&&Bt({},mi,Ai),++se,e=pM("u"),(!e||e==="\\"||!kw(e.charCodeAt(0)))&&Bt({},mi,Ai),t+=e);return t}function dCe(){var e,t;for(e=se++;se<Ji;){if(t=qe.charCodeAt(se),t===92)return se=e,cK();if(kw(t))++se;else break}return qe.slice(e,se)}function hCe(){var e,t,n;return e=se,t=qe.charCodeAt(se)===92?cK():dCe(),t.length===1?n=gd:cCe.hasOwnProperty(t)?n=Lc:t==="null"?n=$S:t==="true"||t==="false"?n=NS:n=gd,{type:n,value:t,start:e,end:se}}function qk(){var e=se,t=qe.charCodeAt(se),n,i=qe[se],r,o,a;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++se,{type:Or,value:String.fromCharCode(t),start:e,end:se};default:if(n=qe.charCodeAt(se+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return se+=2,{type:Or,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:se};case 33:case 61:return se+=2,qe.charCodeAt(se)===61&&++se,{type:Or,value:qe.slice(e,se),start:e,end:se}}}if(a=qe.substr(se,4),a===">>>=")return se+=4,{type:Or,value:a,start:e,end:se};if(o=a.substr(0,3),o===">>>"||o==="<<="||o===">>=")return se+=3,{type:Or,value:o,start:e,end:se};if(r=o.substr(0,2),i===r[1]&&"+-<>&|".indexOf(i)>=0||r==="=>")return se+=2,{type:Or,value:r,start:e,end:se};if(r==="//"&&Bt({},mi,Ai),"<>=!+-*%&|^/".indexOf(i)>=0)return++se,{type:Or,value:i,start:e,end:se};Bt({},mi,Ai)}function pCe(e){let t="";for(;se<Ji&&HO(qe[se]);)t+=qe[se++];return t.length===0&&Bt({},mi,Ai),Wv(qe.charCodeAt(se))&&Bt({},mi,Ai),{type:Bd,value:parseInt("0x"+t,16),start:e,end:se}}function mCe(e){let t="0"+qe[se++];for(;se<Ji&&ey(qe[se]);)t+=qe[se++];return(Wv(qe.charCodeAt(se))||cl(qe.charCodeAt(se)))&&Bt({},mi,Ai),{type:Bd,value:parseInt(t,8),octal:!0,start:e,end:se}}function wz(){var e,t,n;if(n=qe[se],OS(cl(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=se,e="",n!=="."){if(e=qe[se++],n=qe[se],e==="0"){if(n==="x"||n==="X")return++se,pCe(t);if(ey(n))return mCe(t);n&&cl(n.charCodeAt(0))&&Bt({},mi,Ai)}for(;cl(qe.charCodeAt(se));)e+=qe[se++];n=qe[se]}if(n==="."){for(e+=qe[se++];cl(qe.charCodeAt(se));)e+=qe[se++];n=qe[se]}if(n==="e"||n==="E")if(e+=qe[se++],n=qe[se],(n==="+"||n==="-")&&(e+=qe[se++]),cl(qe.charCodeAt(se)))for(;cl(qe.charCodeAt(se));)e+=qe[se++];else Bt({},mi,Ai);return Wv(qe.charCodeAt(se))&&Bt({},mi,Ai),{type:Bd,value:parseFloat(e),start:t,end:se}}function gCe(){var e="",t,n,i,r,o=!1;for(t=qe[se],OS(t==="'"||t==='"',"String literal must starts with a quote"),n=se,++se;se<Ji;)if(i=qe[se++],i===t){t="";break}else if(i==="\\")if(i=qe[se++],!i||!Xy(i.charCodeAt(0)))switch(i){case"u":case"x":qe[se]==="{"?(++se,e+=fCe()):e+=pM(i);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:ey(i)?(r="01234567".indexOf(i),r!==0&&(o=!0),se<Ji&&ey(qe[se])&&(o=!0,r=r*8+"01234567".indexOf(qe[se++]),"0123".indexOf(i)>=0&&se<Ji&&ey(qe[se])&&(r=r*8+"01234567".indexOf(qe[se++]))),e+=String.fromCharCode(r)):e+=i;break}else i==="\r"&&qe[se]===`
`&&++se;else{if(Xy(i.charCodeAt(0)))break;e+=i}return t!==""&&Bt({},mi,Ai),{type:Uv,value:e,octal:o,start:n,end:se}}function yCe(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,r)=>{if(parseInt(r,16)<=1114111)return"x";Bt({},hM)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Bt({},hM)}try{return new RegExp(e,t)}catch{return null}}function vCe(){var e,t,n,i,r;for(e=qe[se],OS(e==="/","Regular expression literal must start with a slash"),t=qe[se++],n=!1,i=!1;se<Ji;)if(e=qe[se++],t+=e,e==="\\")e=qe[se++],Xy(e.charCodeAt(0))&&Bt({},Gk),t+=e;else if(Xy(e.charCodeAt(0)))Bt({},Gk);else if(n)e==="]"&&(n=!1);else if(e==="/"){i=!0;break}else e==="["&&(n=!0);return i||Bt({},Gk),r=t.substr(1,t.length-2),{value:r,literal:t}}function xCe(){var e,t,n;for(t="",n="";se<Ji&&(e=qe[se],!!kw(e.charCodeAt(0)));)++se,e==="\\"&&se<Ji?Bt({},mi,Ai):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Bt({},hM,n),{value:n,literal:t}}function _Ce(){var e,t,n,i;return en=null,uK(),e=se,t=vCe(),n=xCe(),i=yCe(t.value,n.value),{literal:t.literal+n.literal,value:i,regex:{pattern:t.value,flags:n.value},start:e,end:se}}function bCe(e){return e.type===gd||e.type===Lc||e.type===NS||e.type===$S}function fK(){if(uK(),se>=Ji)return{type:Hv,start:se,end:se};const e=qe.charCodeAt(se);return Wv(e)?hCe():e===40||e===41||e===59?qk():e===39||e===34?gCe():e===46?cl(qe.charCodeAt(se+1))?wz():qk():cl(e)?wz():qk()}function jr(){const e=en;return se=e.end,en=fK(),se=e.end,e}function dK(){const e=se;en=fK(),se=e}function wCe(e){const t=new Ha(GSe);return t.elements=e,t}function Sz(e,t,n){const i=new Ha(e==="||"||e==="&&"?XSe:qSe);return i.operator=e,i.left=t,i.right=n,i}function SCe(e,t){const n=new Ha(VSe);return n.callee=e,n.arguments=t,n}function CCe(e,t,n){const i=new Ha(YSe);return i.test=e,i.consequent=t,i.alternate=n,i}function UO(e){const t=new Ha(sK);return t.name=e,t}function T0(e){const t=new Ha(ZSe);return t.value=e.value,t.raw=qe.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function Cz(e,t,n){const i=new Ha(KSe);return i.computed=e==="[",i.object=t,i.property=n,i.computed||(n.member=!0),i}function ECe(e){const t=new Ha(JSe);return t.properties=e,t}function Ez(e,t,n){const i=new Ha(QSe);return i.key=t,i.value=n,i.kind=e,i}function kCe(e,t){const n=new Ha(eCe);return n.operator=e,n.argument=t,n.prefix=!0,n}function Bt(e,t){var n,i=Array.prototype.slice.call(arguments,2),r=t.replace(/%(\d)/g,(o,a)=>(OS(a<i.length,"Message reference must be in range"),i[a]));throw n=new Error(r),n.index=se,n.description=r,n}function IS(e){e.type===Hv&&Bt(e,oCe),e.type===Bd&&Bt(e,tCe),e.type===Uv&&Bt(e,nCe),e.type===gd&&Bt(e,iCe),e.type===Lc&&Bt(e,rCe),Bt(e,mi,e.value)}function Qi(e){const t=jr();(t.type!==Or||t.value!==e)&&IS(t)}function mn(e){return en.type===Or&&en.value===e}function Vk(e){return en.type===Lc&&en.value===e}function RCe(){const e=[];for(se=en.start,Qi("[");!mn("]");)mn(",")?(jr(),e.push(null)):(e.push(yd()),mn("]")||Qi(","));return jr(),wCe(e)}function kz(){se=en.start;const e=jr();return e.type===Uv||e.type===Bd?(e.octal&&Bt(e,lK),T0(e)):UO(e.value)}function TCe(){var e,t,n,i;if(se=en.start,e=en,e.type===gd)return n=kz(),Qi(":"),i=yd(),Ez("init",n,i);if(e.type===Hv||e.type===Or)IS(e);else return t=kz(),Qi(":"),i=yd(),Ez("init",t,i)}function ACe(){var e=[],t,n,i,r={},o=String;for(se=en.start,Qi("{");!mn("}");)t=TCe(),t.key.type===sK?n=t.key.name:n=o(t.key.value),i="$"+n,Object.prototype.hasOwnProperty.call(r,i)?Bt({},aCe):r[i]=!0,e.push(t),mn("}")||Qi(",");return Qi("}"),ECe(e)}function MCe(){Qi("(");const e=WO();return Qi(")"),e}const FCe={if:1};function PCe(){var e,t,n;if(mn("("))return MCe();if(mn("["))return RCe();if(mn("{"))return ACe();if(e=en.type,se=en.start,e===gd||FCe[en.value])n=UO(jr().value);else if(e===Uv||e===Bd)en.octal&&Bt(en,lK),n=T0(jr());else{if(e===Lc)throw new Error(Zy);e===NS?(t=jr(),t.value=t.value==="true",n=T0(t)):e===$S?(t=jr(),t.value=null,n=T0(t)):mn("/")||mn("/=")?(n=T0(_Ce()),dK()):IS(jr())}return n}function NCe(){const e=[];if(Qi("("),!mn(")"))for(;se<Ji&&(e.push(yd()),!mn(")"));)Qi(",");return Qi(")"),e}function $Ce(){se=en.start;const e=jr();return bCe(e)||IS(e),UO(e.value)}function OCe(){return Qi("."),$Ce()}function ICe(){Qi("[");const e=WO();return Qi("]"),e}function DCe(){var e,t,n;for(e=PCe();;)if(mn("."))n=OCe(),e=Cz(".",e,n);else if(mn("("))t=NCe(),e=SCe(e,t);else if(mn("["))n=ICe(),e=Cz("[",e,n);else break;return e}function Rz(){const e=DCe();if(en.type===Or&&(mn("++")||mn("--")))throw new Error(Zy);return e}function M_(){var e,t;if(en.type!==Or&&en.type!==Lc)t=Rz();else{if(mn("++")||mn("--"))throw new Error(Zy);if(mn("+")||mn("-")||mn("~")||mn("!"))e=jr(),t=M_(),t=kCe(e.value,t);else{if(Vk("delete")||Vk("void")||Vk("typeof"))throw new Error(Zy);t=Rz()}}return t}function Tz(e){let t=0;if(e.type!==Or&&e.type!==Lc)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function LCe(){var e,t,n,i,r,o,a,s,l,u;if(e=en,l=M_(),i=en,r=Tz(i),r===0)return l;for(i.prec=r,jr(),t=[e,en],a=M_(),o=[l,i,a];(r=Tz(en))>0;){for(;o.length>2&&r<=o[o.length-2].prec;)a=o.pop(),s=o.pop().value,l=o.pop(),t.pop(),n=Sz(s,l,a),o.push(n);i=jr(),i.prec=r,o.push(i),t.push(en),n=M_(),o.push(n)}for(u=o.length-1,n=o[u],t.pop();u>1;)t.pop(),n=Sz(o[u-1].value,o[u-2],n),u-=2;return n}function yd(){var e,t,n;return e=LCe(),mn("?")&&(jr(),t=yd(),Qi(":"),n=yd(),e=CCe(e,t,n)),e}function WO(){const e=yd();if(mn(","))throw new Error(Zy);return e}function GO(e){qe=e,se=0,Ji=qe.length,en=null,dK();const t=WO();if(en.type!==Hv)throw new Error("Unexpect token after expression.");return t}var hK={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function pK(e){function t(a,s,l,u){let c=e(s[0]);return l&&(c=l+"("+c+")",l.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+a+(u<0?"":u===0?"()":"("+s.slice(1).map(e).join(",")+")")}function n(a,s,l){return u=>t(a,u,s,l)}const i="new Date",r="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(a){a.length<3&&le("Missing arguments to clamp function."),a.length>3&&le("Too many arguments to clamp function.");const s=a.map(e);return"Math.max("+s[1]+", Math.min("+s[2]+","+s[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:i,date:n("getDate",i,0),day:n("getDay",i,0),year:n("getFullYear",i,0),month:n("getMonth",i,0),hours:n("getHours",i,0),minutes:n("getMinutes",i,0),seconds:n("getSeconds",i,0),milliseconds:n("getMilliseconds",i,0),time:n("getTime",i,0),timezoneoffset:n("getTimezoneOffset",i,0),utcdate:n("getUTCDate",i,0),utcday:n("getUTCDay",i,0),utcyear:n("getUTCFullYear",i,0),utcmonth:n("getUTCMonth",i,0),utchours:n("getUTCHours",i,0),utcminutes:n("getUTCMinutes",i,0),utcseconds:n("getUTCSeconds",i,0),utcmilliseconds:n("getUTCMilliseconds",i,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",r,0),lower:n("toLowerCase",r,0),substring:n("substring",r),split:n("split",r),trim:n("trim",r,0),regexp:o,test:n("test",o),if:function(a){a.length<3&&le("Missing arguments to if function."),a.length>3&&le("Too many arguments to if function.");const s=a.map(e);return"("+s[0]+"?"+s[1]+":"+s[2]+")"}}}function jCe(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function mK(e){e=e||{};const t=e.allowed?Da(e.allowed):{},n=e.forbidden?Da(e.forbidden):{},i=e.constants||hK,r=(e.functions||pK)(d),o=e.globalvar,a=e.fieldvar,s=_t(o)?o:g=>`${o}["${g}"]`;let l={},u={},c=0;function d(g){if(Oe(g))return g;const y=h[g.type];return y==null&&le("Unsupported type: "+g.type),y(g)}const h={Literal:g=>g.raw,Identifier:g=>{const y=g.name;return c>0?y:et(n,y)?le("Illegal identifier: "+y):et(i,y)?i[y]:et(t,y)?y:(l[y]=1,s(y))},MemberExpression:g=>{const y=!g.computed,x=d(g.object);y&&(c+=1);const b=d(g.property);return x===a&&(u[jCe(b)]=1),y&&(c-=1),x+(y?"."+b:"["+b+"]")},CallExpression:g=>{g.callee.type!=="Identifier"&&le("Illegal callee type: "+g.callee.type);const y=g.callee.name,x=g.arguments,b=et(r,y)&&r[y];return b||le("Unrecognized function: "+y),_t(b)?b(x):b+"("+x.map(d).join(",")+")"},ArrayExpression:g=>"["+g.elements.map(d).join(",")+"]",BinaryExpression:g=>"("+d(g.left)+" "+g.operator+" "+d(g.right)+")",UnaryExpression:g=>"("+g.operator+d(g.argument)+")",ConditionalExpression:g=>"("+d(g.test)+"?"+d(g.consequent)+":"+d(g.alternate)+")",LogicalExpression:g=>"("+d(g.left)+g.operator+d(g.right)+")",ObjectExpression:g=>"{"+g.properties.map(d).join(",")+"}",Property:g=>{c+=1;const y=d(g.key);return c-=1,y+":"+d(g.value)}};function m(g){const y={code:d(g),globals:Object.keys(l),fields:Object.keys(u)};return l={},u={},y}return m.functions=r,m.constants=i,m}const Az=Symbol("vega_selection_getter");function gK(e){return(!e.getter||!e.getter[Az])&&(e.getter=Xo(e.field),e.getter[Az]=!0),e.getter}const qO="intersect",Mz="union",zCe="vlMulti",BCe="vlPoint",Fz="or",HCe="and",fs="_vgsid_",Ky=Xo(fs),UCe="E",WCe="R",GCe="R-E",qCe="R-LE",VCe="R-RE",Rw="index:unit";function Pz(e,t){for(var n=t.fields,i=t.values,r=n.length,o=0,a,s;o<r;++o)if(s=n[o],a=gK(s)(e),Ju(a)&&(a=Vi(a)),Ju(i[o])&&(i[o]=Vi(i[o])),fe(i[o])&&Ju(i[o][0])&&(i[o]=i[o].map(Vi)),s.type===UCe){if(fe(i[o])?i[o].indexOf(a)<0:a!==i[o])return!1}else if(s.type===WCe){if(!ep(a,i[o]))return!1}else if(s.type===VCe){if(!ep(a,i[o],!0,!1))return!1}else if(s.type===GCe){if(!ep(a,i[o],!1,!1))return!1}else if(s.type===qCe&&!ep(a,i[o],!1,!0))return!1;return!0}function YCe(e,t,n){for(var i=this.context.data[e],r=i?i.values.value:[],o=i?i[Rw]&&i[Rw].value:void 0,a=n===qO,s=r.length,l=0,u,c,d,h,m;l<s;++l)if(u=r[l],o&&a){if(c=c||{},d=c[h=u.unit]||0,d===-1)continue;if(m=Pz(t,u),c[h]=m?-1:++d,m&&o.size===1)return!0;if(!m&&d===o.get(h).count)return!1}else if(m=Pz(t,u),a^m)return m;return s&&a}const yK=km(Ky),ZCe=yK.left,XCe=yK.right;function KCe(e,t,n){const i=this.context.data[e],r=i?i.values.value:[],o=i?i[Rw]&&i[Rw].value:void 0,a=n===qO,s=Ky(t),l=ZCe(r,s);if(l===r.length||Ky(r[l])!==s)return!1;if(o&&a){if(o.size===1)return!0;if(XCe(r,s)-l<o.size)return!1}return!0}function JCe(e,t){return e.map(n=>xt(t.fields?{values:t.fields.map(i=>gK(i)(n.datum))}:{[fs]:Ky(n.datum)},t))}function QCe(e,t,n,i){for(var r=this.context.data[e],o=r?r.values.value:[],a={},s={},l={},u,c,d,h,m,g,y,x,b,w,S=o.length,k=0,R,M;k<S;++k)if(u=o[k],h=u.unit,c=u.fields,d=u.values,c&&d){for(R=0,M=c.length;R<M;++R)m=c[R],y=a[m.field]||(a[m.field]={}),x=y[h]||(y[h]=[]),l[m.field]=b=m.type.charAt(0),w=Yk[`${b}_union`],y[h]=w(x,$e(d[R]));n&&(x=s[h]||(s[h]=[]),x.push($e(d).reduce((T,N,D)=>(T[c[D].field]=N,T),{})))}else m=fs,g=Ky(u),y=a[m]||(a[m]={}),x=y[h]||(y[h]=[]),x.push(g),n&&(x=s[h]||(s[h]=[]),x.push({[fs]:g}));if(t=t||Mz,a[fs]?a[fs]=Yk[`${fs}_${t}`](...Object.values(a[fs])):Object.keys(a).forEach(T=>{a[T]=Object.keys(a[T]).map(N=>a[T][N]).reduce((N,D)=>N===void 0?D:Yk[`${l[T]}_${t}`](N,D))}),o=Object.keys(s),n&&o.length){const T=i?BCe:zCe;a[T]=t===Mz?{[Fz]:o.reduce((N,D)=>(N.push(...s[D]),N),[])}:{[HCe]:o.map(N=>({[Fz]:s[N]}))}}return a}var Yk={[`${fs}_union`]:ide,[`${fs}_intersect`]:tde,E_union:function(e,t){if(!e.length)return t;for(var n=0,i=t.length;n<i;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=Vi(t[0]),i=Vi(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<i&&(e[1]=i),e):[n,i]},R_intersect:function(e,t){var n=Vi(t[0]),i=Vi(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?i<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>i&&(e[1]=i),e):[n,i]}};const eEe=":",tEe="@";function VO(e,t,n,i){t[0].type!==md&&le("First argument to selection functions must be a string literal.");const r=t[0].value,o=t.length>=2&&Ot(t).value,a="unit",s=tEe+a,l=eEe+r;o===qO&&!et(i,s)&&(i[s]=n.getData(r).indataRef(n,a)),et(i,l)||(i[l]=n.getData(r).tuplesRef())}function vK(e){const t=this.context.data[e];return t?t.values.value:[]}function nEe(e,t,n){const i=this.context.data[e]["index:"+t],r=i?i.value.get(n):void 0;return r&&r.count}function iEe(e,t){const n=this.context.dataflow,i=this.context.data[e],r=i.input;return n.pulse(r,n.changeset().remove(Ko).insert(t)),1}function rEe(e,t,n){if(e){const i=this.context.dataflow,r=e.mark.source;i.pulse(r,i.changeset().encode(e,t))}return n!==void 0?n:e}const Gv=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},oEe=Gv("format"),xK=Gv("timeFormat"),aEe=Gv("utcFormat"),sEe=Gv("timeParse"),lEe=Gv("utcParse"),Ix=new Date(2e3,0,1);function DS(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(Ix.setYear(2e3),Ix.setMonth(e),Ix.setDate(t),xK.call(this,Ix,n))}function uEe(e){return DS.call(this,e,1,"%B")}function cEe(e){return DS.call(this,e,1,"%b")}function fEe(e){return DS.call(this,0,2+e,"%A")}function dEe(e){return DS.call(this,0,2+e,"%a")}const hEe=":",pEe="@",mM="%",_K="$";function YO(e,t,n,i){t[0].type!==md&&le("First argument to data functions must be a string literal.");const r=t[0].value,o=hEe+r;if(!et(o,i))try{i[o]=n.getData(r).tuplesRef()}catch{}}function mEe(e,t,n,i){t[0].type!==md&&le("First argument to indata must be a string literal."),t[1].type!==md&&le("Second argument to indata must be a string literal.");const r=t[0].value,o=t[1].value,a=pEe+o;et(a,i)||(i[a]=n.getData(r).indataRef(n,o))}function yr(e,t,n,i){if(t[0].type===md)Nz(n,i,t[0].value);else for(e in n.scales)Nz(n,i,e)}function Nz(e,t,n){const i=mM+n;if(!et(t,i))try{t[i]=e.scaleRef(n)}catch{}}function Bs(e,t){if(_t(e))return e;if(Oe(e)){const n=t.scales[e];return n&&k0e(n.value)?n.value:void 0}}function gEe(e,t,n){t.__bandwidth=r=>r&&r.bandwidth?r.bandwidth():0,n._bandwidth=yr,n._range=yr,n._scale=yr;const i=r=>"_["+(r.type===md?we(mM+r.value):we(mM)+"+"+e(r))+"]";return{_bandwidth:r=>`this.__bandwidth(${i(r[0])})`,_range:r=>`${i(r[0])}.range()`,_scale:r=>`${i(r[0])}(${e(r[1])})`}}function ZO(e,t){return function(n,i,r){if(n){const o=Bs(n,(r||this).context);return o&&o.path[e](i)}else return t(i)}}const yEe=ZO("area",Bxe),vEe=ZO("bounds",Gxe),xEe=ZO("centroid",Kxe);function _Ee(e,t){const n=Bs(e,(t||this).context);return n&&n.scale()}function bEe(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function XO(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(i){e.warn(i)}return n[n.length-1]}function wEe(){return XO(this.context.dataflow,"warn",arguments)}function SEe(){return XO(this.context.dataflow,"info",arguments)}function CEe(){return XO(this.context.dataflow,"debug",arguments)}function Zk(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function gM(e){const t=dc(e),n=Zk(t.r),i=Zk(t.g),r=Zk(t.b);return .2126*n+.7152*i+.0722*r}function EEe(e,t){const n=gM(e),i=gM(t),r=Math.max(n,i),o=Math.min(n,i);return(r+.05)/(o+.05)}function kEe(){const e=[].slice.call(arguments);return e.unshift({}),xt(...e)}function bK(e,t){return e===t||e!==e&&t!==t?!0:fe(e)?fe(t)&&e.length===t.length?REe(e,t):!1:Ie(e)&&Ie(t)?wK(e,t):!1}function REe(e,t){for(let n=0,i=e.length;n<i;++n)if(!bK(e[n],t[n]))return!1;return!0}function wK(e,t){for(const n in e)if(!bK(e[n],t[n]))return!1;return!0}function $z(e){return t=>wK(e,t)}function TEe(e,t,n,i,r,o){const a=this.context.dataflow,s=this.context.data[e],l=s.input,u=a.stamp();let c=s.changes,d,h;if(a._trigger===!1||!(l.value.length||t||i))return 0;if((!c||c.stamp<u)&&(s.changes=c=a.changeset(),c.stamp=u,a.runAfter(()=>{s.modified=!0,a.pulse(l,c).run()},!0,1)),n&&(d=n===!0?Ko:fe(n)||G2(n)?n:$z(n),c.remove(d)),t&&c.insert(t),i&&(d=$z(i),l.value.some(d)?c.remove(d):c.insert(i)),r)for(h in o)c.modify(r,h,o[h]);return 1}function AEe(e){const t=e.touches,n=t[0].clientX-t[1].clientX,i=t[0].clientY-t[1].clientY;return Math.hypot(n,i)}function MEe(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const Oz={};function FEe(e,t){const n=Oz[t]||(Oz[t]=Xo(t));return fe(e)?e.map(n):n(e)}function KO(e){return fe(e)||ArrayBuffer.isView(e)?e:null}function JO(e){return KO(e)||(Oe(e)?e:null)}function PEe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return KO(e).join(...n)}function NEe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return JO(e).indexOf(...n)}function $Ee(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return JO(e).lastIndexOf(...n)}function OEe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return JO(e).slice(...n)}function IEe(e,t,n){return _t(n)&&le("Function argument passed to replace."),String(e).replace(t,n)}function DEe(e){return KO(e).slice().reverse()}function LEe(e,t,n){return s$(e||0,t||0,n||0)}function jEe(e,t){const n=Bs(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function zEe(e,t){const n=Bs(e,(t||this).context);return n?n.copy():void 0}function BEe(e,t){const n=Bs(e,(t||this).context);return n?n.domain():[]}function HEe(e,t,n){const i=Bs(e,(n||this).context);return i?fe(t)?(i.invertRange||i.invert)(t):(i.invert||i.invertExtent)(t):void 0}function UEe(e,t){const n=Bs(e,(t||this).context);return n&&n.range?n.range():[]}function WEe(e,t,n){const i=Bs(e,(n||this).context);return i?i(t):void 0}function GEe(e,t,n,i,r){e=Bs(e,(r||this).context);const o=gY(t,n);let a=e.domain(),s=a[0],l=Ot(a),u=tr;return l-s?u=rY(e,s,l):e=(e.interpolator?Ut("sequential")().interpolator(e.interpolator()):Ut("linear")().interpolate(e.interpolate()).range(e.range())).domain([s=0,l=1]),e.ticks&&(a=e.ticks(+i||15),s!==a[0]&&a.unshift(s),l!==Ot(a)&&a.push(l)),a.forEach(c=>o.stop(u(c),e(c))),o}function qEe(e,t,n){const i=Bs(e,(n||this).context);return function(r){return i?i.path.context(r)(t):""}}function VEe(e){let t=null;return function(n){return n?jy(n,t=t||qp(e)):e}}const SK=e=>e.data;function CK(e,t){const n=vK.call(t,e);return n.root&&n.root.lookup||{}}function YEe(e,t,n){const i=CK(e,this),r=i[t],o=i[n];return r&&o?r.path(o).map(SK):void 0}function ZEe(e,t){const n=CK(e,this)[t];return n?n.ancestors().map(SK):void 0}const EK=()=>typeof window<"u"&&window||null;function XEe(){const e=EK();return e?e.screen:{}}function KEe(){const e=EK();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function JEe(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function kK(e,t,n){if(!e)return[];const[i,r]=e,o=new Yn().set(i[0],i[1],r[0],r[1]),a=n||this.context.dataflow.scenegraph().root;return uZ(a,o,QEe(t))}function QEe(e){let t=null;if(e){const n=$e(e.marktype),i=$e(e.markname);t=r=>(!n.length||n.some(o=>r.marktype===o))&&(!i.length||i.some(o=>r.name===o))}return t}function eke(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=$e(e);const r=e[e.length-1];return r===void 0||Math.hypot(r[0]-t,r[1]-n)>i?[...e,[t,n]]:e}function tke(e){return $e(e).reduce((t,n,i)=>{let[r,o]=n;return t+=i==0?`M ${r},${o} `:i===e.length-1?" Z":`L ${r},${o} `},"")}function nke(e,t,n){const{x:i,y:r,mark:o}=n,a=new Yn().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,u]of t)l<a.x1&&(a.x1=l),l>a.x2&&(a.x2=l),u<a.y1&&(a.y1=u),u>a.y2&&(a.y2=u);return a.translate(i,r),kK([[a.x1,a.y1],[a.x2,a.y2]],e,o).filter(l=>ike(l.x,l.y,t))}function ike(e,t,n){let i=0;for(let r=0,o=n.length-1;r<n.length;o=r++){const[a,s]=n[o],[l,u]=n[r];u>t!=s>t&&e<(a-l)*(t-u)/(s-u)+l&&i++}return i&1}const Jy={random(){return Qo()},cumulativeNormal:X2,cumulativeLogNormal:sN,cumulativeUniform:fN,densityNormal:nN,densityLogNormal:aN,densityUniform:cN,quantileNormal:K2,quantileLogNormal:lN,quantileUniform:dN,sampleNormal:Z2,sampleLogNormal:oN,sampleUniform:uN,isArray:fe,isBoolean:Nc,isDate:Ju,isDefined(e){return e!==void 0},isNumber:zt,isObject:Ie,isRegExp:DW,isString:Oe,isTuple:G2,isValid(e){return e!=null&&e===e},toBoolean:OP,toDate(e){return IP(e)},toNumber:Vi,toString:DP,indexof:NEe,join:PEe,lastindexof:$Ee,replace:IEe,reverse:DEe,slice:OEe,flush:OW,lerp:LW,merge:kEe,pad:BW,peek:Ot,pluck:FEe,span:_v,inrange:ep,truncate:HW,rgb:dc,lab:$b,hcl:Ob,hsl:Pb,luminance:gM,contrast:EEe,sequence:ho,format:oEe,utcFormat:aEe,utcParse:lEe,utcOffset:bG,utcSequence:CG,timeFormat:xK,timeParse:sEe,timeOffset:_G,timeSequence:SG,timeUnitSpecifier:uG,monthFormat:uEe,monthAbbrevFormat:cEe,dayFormat:fEe,dayAbbrevFormat:dEe,quarter:FW,utcquarter:PW,week:fG,utcweek:pG,dayofyear:cG,utcdayofyear:hG,warn:wEe,info:SEe,debug:CEe,extent(e){return Rs(e)},inScope:bEe,intersect:kK,clampRange:NW,pinchDistance:AEe,pinchAngle:MEe,screen:XEe,containerSize:JEe,windowSize:KEe,bandspace:LEe,setdata:iEe,pathShape:VEe,panLinear:RW,panLog:TW,panPow:AW,panSymlog:MW,zoomLinear:AP,zoomLog:MP,zoomPow:xb,zoomSymlog:FP,encode:rEe,modify:TEe,lassoAppend:eke,lassoPath:tke,intersectLasso:nke},rke=["view","item","group","xy","x","y"],oke="event.vega.",RK="this.",QO={},TK={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${we(_K+e)}]`,functions:ake,constants:hK,visitors:QO},yM=mK(TK);function ake(e){const t=pK(e);rke.forEach(n=>t[n]=oke+n);for(const n in Jy)t[n]=RK+n;return xt(t,gEe(e,Jy,QO)),t}function Hn(e,t,n){return arguments.length===1?Jy[e]:(Jy[e]=t,n&&(QO[e]=n),yM&&(yM.functions[e]=RK+e),this)}Hn("bandwidth",jEe,yr);Hn("copy",zEe,yr);Hn("domain",BEe,yr);Hn("range",UEe,yr);Hn("invert",HEe,yr);Hn("scale",WEe,yr);Hn("gradient",GEe,yr);Hn("geoArea",yEe,yr);Hn("geoBounds",vEe,yr);Hn("geoCentroid",xEe,yr);Hn("geoShape",qEe,yr);Hn("geoScale",_Ee,yr);Hn("indata",nEe,mEe);Hn("data",vK,YO);Hn("treePath",YEe,YO);Hn("treeAncestors",ZEe,YO);Hn("vlSelectionTest",YCe,VO);Hn("vlSelectionIdTest",KCe,VO);Hn("vlSelectionResolve",QCe,VO);Hn("vlSelectionTuples",JCe);function Ps(e,t){const n={};let i;try{e=Oe(e)?e:we(e)+"",i=GO(e)}catch{le("Expression parse error: "+e)}i.visit(o=>{if(o.type!==aK)return;const a=o.callee.name,s=TK.visitors[a];s&&s(a,o.arguments,t,n)});const r=yM(i);return r.globals.forEach(o=>{const a=_K+o;!et(n,a)&&t.getSignal(o)&&(n[a]=t.signalRef(o))}),{$expr:xt({code:r.code},t.options.ast?{ast:i}:null),$fields:r.fields,$params:n}}function ske(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(i=>t.parseOperator(i)),n.forEach(i=>t.parseOperatorParameters(i)),(e.streams||[]).forEach(i=>t.parseStream(i)),(e.updates||[]).forEach(i=>t.parseUpdate(i)),t.resolve()}const lke=Da(["rule"]),Iz=Da(["group","image","rect"]);function uke(e,t){let n="";return lke[t]||(e.x2&&(e.x?(Iz[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(Iz[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function eI(e){return(e+"").toLowerCase()}function cke(e){return eI(e)==="operator"}function fke(e){return eI(e)==="collect"}function Hg(e,t,n){n.endsWith(";")||(n="return("+n+");");const i=Function(...t.concat(n));return e&&e.functions?i.bind(e.functions):i}function dke(e,t,n,i){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${i}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${i} : `}var hke={operator:(e,t)=>Hg(e,["_"],t.code),parameter:(e,t)=>Hg(e,["datum","_"],t.code),event:(e,t)=>Hg(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return Hg(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:i}=t;let r="var o=item,datum=o.datum,m=0,$;";for(const o in i){const a="o["+we(o)+"]";r+=`$=${i[o].code};if(${a}!==$)${a}=$,m=1;`}return r+=uke(i,n),r+="return m;",Hg(e,["item","_"],r)},codegen:{get(e){const t=`[${e.map(we).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const i=(o,a)=>{const s=t[a];let l,u;return o.path?(l=`a${o.path}`,u=`b${o.path}`):((n=n||{})["f"+a]=o,l=`this.f${a}(a)`,u=`this.f${a}(b)`),dke(l,u,-s,s)},r=Function("a","b","var u, v; return "+e.map(i).join("")+"0;");return n?r.bind(n):r}}};function pke(e){const t=this;cke(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function mke(e){const t=this;if(e.params){const n=t.get(e.id);n||le("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function gke(e,t){t=t||{};const n=this;for(const i in e){const r=e[i];t[i]=fe(r)?r.map(o=>Dz(o,n,t)):Dz(r,n,t)}return t}function Dz(e,t,n){if(!e||!Ie(e))return e;for(let i=0,r=Lz.length,o;i<r;++i)if(o=Lz[i],et(e,o.key))return o.parse(e,t,n);return e}var Lz=[{key:"$ref",parse:yke},{key:"$key",parse:xke},{key:"$expr",parse:vke},{key:"$field",parse:_ke},{key:"$encode",parse:wke},{key:"$compare",parse:bke},{key:"$context",parse:Ske},{key:"$subflow",parse:Cke},{key:"$tupleid",parse:Eke}];function yke(e,t){return t.get(e.$ref)||le("Operator not defined: "+e.$ref)}function vke(e,t,n){e.$params&&t.parseParameters(e.$params,n);const i="e:"+e.$expr.code;return t.fn[i]||(t.fn[i]=to(t.parameterExpression(e.$expr),e.$fields))}function xke(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=$P(e.$key,e.$flat,t.expr.codegen))}function _ke(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Xo(e.$field,e.$name,t.expr.codegen))}function bke(e,t){const n="c:"+e.$compare+"_"+e.$order,i=$e(e.$compare).map(r=>r&&r.$tupleid?Je:r);return t.fn[n]||(t.fn[n]=PP(i,e.$order,t.expr.codegen))}function wke(e,t){const n=e.$encode,i={};for(const r in n){const o=n[r];i[r]=to(t.encodeExpression(o.$expr),o.$fields),i[r].output=o.$output}return i}function Ske(e,t){return t}function Cke(e,t){const n=e.$subflow;return function(i,r,o){const a=t.fork().parse(n),s=a.get(n.operators[0].id),l=a.signals.parent;return l&&l.set(o),s.detachSubflow=()=>t.detach(a),s}}function Eke(){return Je}function kke(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,i=e.stream!=null?t.get(e.stream):void 0,r;e.source?i=t.events(e.source,e.type,n):e.merge&&(r=e.merge.map(o=>t.get(o)),i=r[0].merge.apply(r[0],r.slice(1))),e.between&&(r=e.between.map(o=>t.get(o)),i=i.between(r[0],r[1])),e.filter&&(i=i.filter(n)),e.throttle!=null&&(i=i.throttle(+e.throttle)),e.debounce!=null&&(i=i.debounce(+e.debounce)),i==null&&le("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),t.stream(e,i)}function Rke(e){var t=this,n=Ie(n=e.source)?n.$ref:n,i=t.get(n),r=null,o=e.update,a=void 0;i||le("Source not defined: "+e.source),r=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),o&&o.$expr&&(o.$params&&(a=t.parseParameters(o.$params)),o=t.handlerExpression(o.$expr)),t.update(e,i,r,o,a)}const Tke={skip:!0};function Ake(e){var t=this,n={};if(e.signals){var i=n.signals={};Object.keys(t.signals).forEach(o=>{const a=t.signals[o];e.signals(o,a)&&(i[o]=a.value)})}if(e.data){var r=n.data={};Object.keys(t.data).forEach(o=>{const a=t.data[o];e.data(o,a)&&(r[o]=a.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(o=>o.getState(e))),n}function Mke(e){var t=this,n=t.dataflow,i=e.data,r=e.signals;Object.keys(r||{}).forEach(o=>{n.update(t.signals[o],r[o],Tke)}),Object.keys(i||{}).forEach(o=>{n.pulse(t.data[o].input,n.changeset().remove(Ko).insert(i[o]))}),(e.subcontext||[]).forEach((o,a)=>{const s=t.subcontext[a];s&&s.setState(o)})}function AK(e,t,n,i){return new MK(e,t,n,i)}function MK(e,t,n,i){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=i||hke,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function jz(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}MK.prototype=jz.prototype={fork(){const e=new jz(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,i=n.dataflow,r=e.value;if(n.set(e.id,t),fke(e.type)&&r&&(r.$ingest?i.ingest(t,r.$ingest,r.$format):r.$request?i.preload(t,r.$request,r.$format):i.pulse(t,i.changeset().insert(r))),e.root&&(n.root=t),e.parent){let o=n.get(e.parent.$ref);o?(i.connect(o,[t]),t.targets().add(o)):(n.unresolved=n.unresolved||[]).push(()=>{o=n.get(e.parent.$ref),i.connect(o,[t]),t.targets().add(o)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const o in e.data){const a=n.data[o]||(n.data[o]={});e.data[o].forEach(s=>a[s]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[eI(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,i,r){this.dataflow.on(t,n,i,r,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:ske,parseOperator:pke,parseOperatorParameters:mke,parseParameters:gke,parseStream:kke,parseUpdate:Rke,getState:Ake,setState:Mke};function Fke(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),FK(t,e.description()))}function FK(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function Pke(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const Xk="default";function Nke(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:Xk,item:null}));e.on(e.events("view","pointermove"),t,(n,i)=>{const r=t.value,o=r?Oe(r)?r:r.user:Xk,a=i.item&&i.item.cursor||null;return r&&o===r.user&&a==r.item?r:{user:o,item:a}}),e.add(null,function(n){let i=n.cursor,r=this.value;return Oe(i)||(r=i.item,i=i.user),vM(e,i&&i!==Xk?i:r||i),r},{cursor:t})}function vM(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function Tw(e,t){var n=e._runtime.data;return et(n,t)||le("Unrecognized data set: "+t),n[t]}function $ke(e,t){return arguments.length<2?Tw(this,e).values.value:LS.call(this,e,Ld().remove(Ko).insert(t))}function LS(e,t){KG(t)||le("Second argument to changes must be a changeset.");const n=Tw(this,e);return n.modified=!0,this.pulse(n.input,t)}function Oke(e,t){return LS.call(this,e,Ld().insert(t))}function Ike(e,t){return LS.call(this,e,Ld().remove(t))}function PK(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function NK(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function jS(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function Dke(e){var t=jS(e),n=PK(e),i=NK(e);e._renderer.background(e.background()),e._renderer.resize(n,i,t),e._handler.origin(t),e._resizeListeners.forEach(r=>{try{r(n,i)}catch(o){e.error(o)}})}function Lke(e,t,n){var i=e._renderer,r=i&&i.canvas(),o,a,s;return r&&(s=jS(e),a=t.changedTouches?t.changedTouches[0]:t,o=CS(a,r),o[0]-=s[0],o[1]-=s[1]),t.dataflow=e,t.item=n,t.vega=jke(e,n,o),t}function jke(e,t,n){const i=t?t.mark.marktype==="group"?t:t.mark.group:null;function r(a){var s=i,l;if(a){for(l=t;l;l=l.mark.group)if(l.mark.name===a){s=l;break}}return s&&s.mark&&s.mark.interactive?s:{}}function o(a){if(!a)return n;Oe(a)&&(a=r(a));const s=n.slice();for(;a;)s[0]-=a.x||0,s[1]-=a.y||0,a=a.mark&&a.mark.group;return s}return{view:nr(e),item:nr(t||{}),group:r,xy:o,x:a=>o(a)[0],y:a=>o(a)[1]}}const zz="view",zke="timer",Bke="window",Hke={trap:!1};function Uke(e){const t=xt({defaults:{}},e),n=(i,r)=>{r.forEach(o=>{fe(i[o])&&(i[o]=Da(i[o]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function $K(e,t,n,i){e._eventListeners.push({type:n,sources:$e(t),handler:i})}function Wke(e,t){var n=e._eventConfig.defaults,i=n.prevent,r=n.allow;return i===!1||r===!0?!1:i===!0||r===!1?!0:i?i[t]:r?!r[t]:e.preventDefault()}function Dx(e,t,n){const i=e._eventConfig&&e._eventConfig[t];return i===!1||Ie(i)&&!i[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function Gke(e,t,n){var i=this,r=new Y2(n),o=function(u,c){i.runAsync(null,()=>{e===zz&&Wke(i,t)&&u.preventDefault(),r.receive(Lke(i,u,c))})},a;if(e===zke)Dx(i,"timer",t)&&i.timer(o,t);else if(e===zz)Dx(i,"view",t)&&i.addEventListener(t,o,Hke);else if(e===Bke?Dx(i,"window",t)&&typeof window<"u"&&(a=[window]):typeof document<"u"&&Dx(i,"selector",t)&&(a=Array.from(document.querySelectorAll(e))),!a)i.warn("Can not resolve event source: "+e);else{for(var s=0,l=a.length;s<l;++s)a[s].addEventListener(t,o);$K(i,a,t,o)}return r}function Bz(e){return e.item}function Hz(e){return e.item.mark.source}function Uz(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function qke(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",Bz),Hz,Uz(e)),this.on(this.events("view","pointerout",Bz),Hz,Uz(t)),this}function Vke(){var e=this._tooltip,t=this._timers,n=this._eventListeners,i,r,o;for(i=t.length;--i>=0;)t[i].stop();for(i=n.length;--i>=0;)for(o=n[i],r=o.sources.length;--r>=0;)o.sources[r].removeEventListener(o.type,o.handler);return e&&e.call(this,this._handler,null,null,null),this}function yo(e,t,n){const i=document.createElement(e);for(const r in t)i.setAttribute(r,t[r]);return n!=null&&(i.textContent=n),i}const Yke="vega-bind",Zke="vega-bind-name",Xke="vega-bind-radio";function Kke(e,t,n){if(!t)return;const i=n.param;let r=n.state;return r||(r=n.state={elements:null,active:!1,set:null,update:a=>{a!=e.signal(i.signal)&&e.runAsync(null,()=>{r.source=!0,e.signal(i.signal,a)})}},i.debounce&&(r.update=NP(i.debounce,r.update))),(i.input==null&&i.element?Jke:eRe)(r,t,i,e),r.active||(e.on(e._signals[i.signal],null,()=>{r.source?r.source=!1:r.set(e.signal(i.signal))}),r.active=!0),r}function Jke(e,t,n,i){const r=n.event||"input",o=()=>e.update(t.value);i.signal(n.signal,t.value),t.addEventListener(r,o),$K(i,t,r,o),e.set=a=>{t.value=a,t.dispatchEvent(Qke(r))}}function Qke(e){return typeof Event<"u"?new Event(e):{type:e}}function eRe(e,t,n,i){const r=i.signal(n.signal),o=yo("div",{class:Yke}),a=n.input==="radio"?o:o.appendChild(yo("label"));a.appendChild(yo("span",{class:Zke},n.name||n.signal)),t.appendChild(o);let s=tRe;switch(n.input){case"checkbox":s=nRe;break;case"select":s=iRe;break;case"radio":s=rRe;break;case"range":s=oRe;break}s(e,a,n,r)}function tRe(e,t,n,i){const r=yo("input");for(const o in n)o!=="signal"&&o!=="element"&&r.setAttribute(o==="input"?"type":o,n[o]);r.setAttribute("name",n.signal),r.value=i,t.appendChild(r),r.addEventListener("input",()=>e.update(r.value)),e.elements=[r],e.set=o=>r.value=o}function nRe(e,t,n,i){const r={type:"checkbox",name:n.signal};i&&(r.checked=!0);const o=yo("input",r);t.appendChild(o),o.addEventListener("change",()=>e.update(o.checked)),e.elements=[o],e.set=a=>o.checked=!!a||null}function iRe(e,t,n,i){const r=yo("select",{name:n.signal}),o=n.labels||[];n.options.forEach((a,s)=>{const l={value:a};Aw(a,i)&&(l.selected=!0),r.appendChild(yo("option",l,(o[s]||a)+""))}),t.appendChild(r),r.addEventListener("change",()=>{e.update(n.options[r.selectedIndex])}),e.elements=[r],e.set=a=>{for(let s=0,l=n.options.length;s<l;++s)if(Aw(n.options[s],a)){r.selectedIndex=s;return}}}function rRe(e,t,n,i){const r=yo("span",{class:Xke}),o=n.labels||[];t.appendChild(r),e.elements=n.options.map((a,s)=>{const l={type:"radio",name:n.signal,value:a};Aw(a,i)&&(l.checked=!0);const u=yo("input",l);u.addEventListener("change",()=>e.update(a));const c=yo("label",{},(o[s]||a)+"");return c.prepend(u),r.appendChild(c),u}),e.set=a=>{const s=e.elements,l=s.length;for(let u=0;u<l;++u)Aw(s[u].value,a)&&(s[u].checked=!0)}}function oRe(e,t,n,i){i=i!==void 0?i:(+n.max+ +n.min)/2;const r=n.max!=null?n.max:Math.max(100,+i)||100,o=n.min||Math.min(0,r,+i)||0,a=n.step||uc(o,r,100),s=yo("input",{type:"range",name:n.signal,min:o,max:r,step:a});s.value=i;const l=yo("span",{},+i);t.appendChild(s),t.appendChild(l);const u=()=>{l.textContent=s.value,e.update(+s.value)};s.addEventListener("input",u),s.addEventListener("change",u),e.elements=[s],e.set=c=>{s.value=c,l.textContent=c}}function Aw(e,t){return e===t||e+""==t+""}function OK(e,t,n,i,r,o){return t=t||new i(e.loader()),t.initialize(n,PK(e),NK(e),jS(e),r,o).background(e.background())}function tI(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function aRe(e,t,n,i){const r=new i(e.loader(),tI(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,jS(e),e);return t&&t.handlers().forEach(o=>{r.on(o.type,o.handler)}),r}function sRe(e,t){const n=this,i=n._renderType,r=n._eventConfig.bind,o=kS(i);e=n._el=e?Kk(n,e,!0):null,Fke(n),o||n.error("Unrecognized renderer type: "+i);const a=o.handler||yc,s=e?o.renderer:o.headless;return n._renderer=s?OK(n,n._renderer,e,s):null,n._handler=aRe(n,n._handler,e,a),n._redraw=!0,e&&r!=="none"&&(t=t?n._elBind=Kk(n,t,!0):e.appendChild(yo("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&r!=="container"&&(l.element=Kk(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{Kke(n,l.element||t,l)})),n}function Kk(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(i){t=null,e.error(i)}return t}const Ug=e=>+e||0,lRe=e=>({top:e,bottom:e,left:e,right:e});function Wz(e){return Ie(e)?{top:Ug(e.top),bottom:Ug(e.bottom),left:Ug(e.left),right:Ug(e.right)}:lRe(Ug(e))}async function nI(e,t,n,i){const r=kS(t),o=r&&r.headless;return o||le("Unrecognized renderer type: "+t),await e.runAsync(),OK(e,null,null,o,n,i).renderAsync(e._scenegraph.root)}async function uRe(e,t){e!==Lu.Canvas&&e!==Lu.SVG&&e!==Lu.PNG&&le("Unrecognized image type: "+e);const n=await nI(this,e,t);return e===Lu.SVG?cRe(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function cRe(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function fRe(e,t){return(await nI(this,Lu.Canvas,e,t)).canvas()}async function dRe(e){return(await nI(this,Lu.SVG,e)).svg()}function hRe(e,t,n){return AK(e,zp,Jy,n).parse(t)}function pRe(e){var t=this._runtime.scales;return et(t,e)||le("Unrecognized scale or projection: "+e),t[e].value}var IK="width",DK="height",iI="padding",Gz={skip:!0};function LK(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===iI?i.left+i.right:0)}function jK(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===iI?i.top+i.bottom:0)}function mRe(e){var t=e._signals,n=t[IK],i=t[DK],r=t[iI];function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,s=>{e._width=s.size,e._viewWidth=LK(e,s.size),o()},{size:n}),e._resizeHeight=e.add(null,s=>{e._height=s.size,e._viewHeight=jK(e,s.size),o()},{size:i});const a=e.add(null,o,{pad:r});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=i.rank+1,a.rank=r.rank+1}function gRe(e,t,n,i,r,o){this.runAfter(a=>{let s=0;a._autosize=0,a.width()!==n&&(s=1,a.signal(IK,n,Gz),a._resizeWidth.skip(!0)),a.height()!==i&&(s=1,a.signal(DK,i,Gz),a._resizeHeight.skip(!0)),a._viewWidth!==e&&(a._resize=1,a._viewWidth=e),a._viewHeight!==t&&(a._resize=1,a._viewHeight=t),(a._origin[0]!==r[0]||a._origin[1]!==r[1])&&(a._resize=1,a._origin=r),s&&a.run("enter"),o&&a.runAfter(l=>l.resize())},!1,1)}function yRe(e){return this._runtime.getState(e||{data:vRe,signals:xRe,recurse:!0})}function vRe(e,t){return t.modified&&fe(t.input.value)&&!e.startsWith("_:vega:_")}function xRe(e,t){return!(e==="parent"||t instanceof zp.proxy)}function _Re(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function bRe(e,t){function n(i){e({timestamp:Date.now(),elapsed:i})}this._timers.push(Jbe(n,t))}function wRe(e,t,n,i){const r=e.element();r&&r.setAttribute("title",SRe(i))}function SRe(e){return e==null?"":fe(e)?zK(e):Ie(e)&&!Ju(e)?CRe(e):e+""}function CRe(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(fe(n)?zK(n):BK(n))}).join(`
`)}function zK(e){return"["+e.map(BK).join(", ")+"]"}function BK(e){return fe(e)?"[]":Ie(e)&&!Ju(e)?"{}":e}function ERe(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function HK(e,t){const n=this;if(t=t||{},hp.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const o=xt({},e.locale,t.locale);n.locale(BG(o.number,o.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Lu.Canvas,n._scenegraph=new D$;const i=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||wRe,n._redraw=!0,n._handler=new yc().scene(i),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=Uke(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const r=hRe(n,e,t.expr);n._runtime=r,n._signals=r.signals,n._bind=(e.bindings||[]).map(o=>({state:null,param:xt({},o)})),r.root&&r.root.set(i),i.source=r.data.root.input,n.pulse(r.data.root.input,n.changeset().insert(i.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=LK(n,n._width),n._viewHeight=jK(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,mRe(n),Pke(n),Nke(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function Lx(e,t){return et(e._signals,t)?e._signals[t]:le("Unrecognized signal name: "+we(t))}function UK(e,t){const n=(e._targets||[]).filter(i=>i._update&&i._update.handler===t);return n.length?n[0]:null}function qz(e,t,n,i){let r=UK(n,i);return r||(r=tI(e,()=>i(t,n.value)),r.handler=i,e.on(n,null,r)),e}function Vz(e,t,n){const i=UK(t,n);return i&&t._targets.remove(i),e}be(HK,hp,{async evaluate(e,t,n){if(await hp.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,Dke(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(i){this.error(i)}return n&&p_(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&FK(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const i=Lx(this,e);return arguments.length===1?i.value:this.update(i,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",Wz(e)):Wz(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(kS(e)||le("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(hp.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(Lx(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:gRe,addEventListener(e,t,n){let i=t;return n&&n.trap===!1||(i=tI(this,t),i.raw=t),this._handler.on(e,i),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),i=n.length,r,o;--i>=0;)if(o=n[i].type,r=n[i].handler,e===o&&(t===r||t===r.raw)){this._handler.off(o,r);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return qz(this,e,Lx(this,e),t)},removeSignalListener(e,t){return Vz(this,Lx(this,e),t)},addDataListener(e,t){return qz(this,e,Tw(this,e).values,t)},removeDataListener(e,t){return Vz(this,Tw(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=vM(this,null);this._globalCursor=!!e,t&&vM(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:bRe,events:Gke,finalize:Vke,hover:qke,data:$ke,change:LS,insert:Oke,remove:Ike,scale:pRe,initialize:sRe,toImageURL:uRe,toCanvas:fRe,toSVG:dRe,getState:yRe,setState:_Re,_watchPixelRatio:ERe});const kRe="view",Mw="[",Fw="]",WK="{",GK="}",RRe=":",qK=",",TRe="@",ARe=">",MRe=/[[\]{}]/,FRe={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let VK,YK;function jc(e,t,n){return VK=t||kRe,YK=n||FRe,ZK(e.trim()).map(xM)}function PRe(e){return YK[e]}function ty(e,t,n,i,r){const o=e.length;let a=0,s;for(;t<o;++t){if(s=e[t],!a&&s===n)return t;r&&r.indexOf(s)>=0?--a:i&&i.indexOf(s)>=0&&++a}return t}function ZK(e){const t=[],n=e.length;let i=0,r=0;for(;r<n;)r=ty(e,r,qK,Mw+WK,Fw+GK),t.push(e.substring(i,r).trim()),i=++r;if(t.length===0)throw"Empty event selector: "+e;return t}function xM(e){return e[0]==="["?NRe(e):$Re(e)}function NRe(e){const t=e.length;let n=1,i;if(n=ty(e,n,Fw,Mw,Fw),n===t)throw"Empty between selector: "+e;if(i=ZK(e.substring(1,n)),i.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==ARe)throw"Expected '>' after between selector: "+e;i=i.map(xM);const r=xM(e.slice(1).trim());return r.between?{between:i,stream:r}:(r.between=i,r)}function $Re(e){const t={source:VK},n=[];let i=[0,0],r=0,o=0,a=e.length,s=0,l,u;if(e[a-1]===GK){if(s=e.lastIndexOf(WK),s>=0){try{i=ORe(e.substring(s+1,a-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,s).trim(),a=e.length}else throw"Unmatched right brace: "+e;s=0}if(!a)throw e;if(e[0]===TRe&&(r=++s),l=ty(e,s,RRe),l<a&&(n.push(e.substring(o,l).trim()),o=s=++l),s=ty(e,s,Mw),s===a)n.push(e.substring(o,a).trim());else if(n.push(e.substring(o,s).trim()),u=[],o=++s,o===a)throw"Unmatched left bracket: "+e;for(;s<a;){if(s=ty(e,s,Fw),s===a)throw"Unmatched left bracket: "+e;if(u.push(e.substring(o,s).trim()),s<a-1&&e[++s]!==Mw)throw"Expected left bracket: "+e;o=++s}if(!(a=n.length)||MRe.test(n[a-1]))throw"Invalid event selector: "+e;return a>1?(t.type=n[1],r?t.markname=n[0].slice(1):PRe(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),u!=null&&(t.filter=u),i[0]&&(t.throttle=i[0]),i[1]&&(t.debounce=i[1]),t}function ORe(e){const t=e.split(qK);if(!e.length||t.length>2)throw e;return t.map(n=>{const i=+n;if(i!==i)throw e;return i})}function IRe(e){return Ie(e)?e:{type:e||"pad"}}const Wg=e=>+e||0,DRe=e=>({top:e,bottom:e,left:e,right:e});function LRe(e){return Ie(e)?e.signal?e:{top:Wg(e.top),bottom:Wg(e.bottom),left:Wg(e.left),right:Wg(e.right)}:DRe(Wg(e))}const gi=e=>Ie(e)&&!fe(e)?xt({},e):{value:e};function Yz(e,t,n,i){return n!=null?(Ie(n)&&!fe(n)||fe(n)&&n.length&&Ie(n[0])?e.update[t]=n:e[i||"enter"][t]={value:n},1):0}function $i(e,t,n){for(const i in t)Yz(e,i,t[i]);for(const i in n)Yz(e,i,n[i],"update")}function Im(e,t,n){for(const i in t)n&&et(n,i)||(e[i]=xt(e[i]||{},t[i]));return e}function Lh(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const rI="mark",oI="frame",aI="scope",jRe="axis",zRe="axis-domain",BRe="axis-grid",HRe="axis-label",URe="axis-tick",WRe="axis-title",GRe="legend",qRe="legend-band",VRe="legend-entry",YRe="legend-gradient",XK="legend-label",ZRe="legend-symbol",XRe="legend-title",KRe="title",JRe="title-text",QRe="title-subtitle";function eTe(e,t,n,i,r){const o={},a={};let s,l,u,c;l="lineBreak",t==="text"&&r[l]!=null&&!Lh(l,e)&&Jk(o,l,r[l]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===oI?r.group:n===rI?xt({},r.mark,r[t]):null;for(l in c)u=Lh(l,e)||(l==="fill"||l==="stroke")&&(Lh("fill",e)||Lh("stroke",e)),u||Jk(o,l,c[l]);$e(i).forEach(d=>{const h=r.style&&r.style[d];for(const m in h)Lh(m,e)||Jk(o,m,h[m])}),e=xt({},e);for(l in o)c=o[l],c.signal?(s=s||{})[l]=c:a[l]=c;return e.enter=xt(a,e.enter),s&&(e.update=xt(s,e.update)),e}function Jk(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const KK=e=>Oe(e)?we(e):e.signal?`(${e.signal})`:JK(e);function zS(e){if(e.gradient!=null)return nTe(e);let t=e.signal?`(${e.signal})`:e.color?tTe(e.color):e.field!=null?JK(e.field):e.value!==void 0?we(e.value):void 0;return e.scale!=null&&(t=iTe(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${F_(e.exponent)})`),e.mult!=null&&(t+=`*${F_(e.mult)}`),e.offset!=null&&(t+=`+${F_(e.offset)}`),e.round&&(t=`round(${t})`),t}const jx=(e,t,n,i)=>`(${e}(${[t,n,i].map(zS).join(",")})+'')`;function tTe(e){return e.c?jx("hcl",e.h,e.c,e.l):e.h||e.s?jx("hsl",e.h,e.s,e.l):e.l||e.a?jx("lab",e.l,e.a,e.b):e.r||e.g||e.b?jx("rgb",e.r,e.g,e.b):null}function nTe(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:we(n));for(;t.length&&Ot(t)==null;)t.pop();return t.unshift(KK(e.gradient)),`gradient(${t.join(",")})`}function F_(e){return Ie(e)?"("+zS(e)+")":e}function JK(e){return QK(Ie(e)?e:{datum:e})}function QK(e){let t,n,i;if(e.signal)t="datum",i=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(i=e.parent,t+=".datum"):i=e.group}else e.datum?(t="datum",i=e.datum):le("Invalid field reference: "+we(e));return e.signal||(i=Oe(i)?Is(i).map(we).join("]["):QK(i)),t+"["+i+"]"}function iTe(e,t){const n=KK(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+F_(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function rTe(e){let t="";return e.forEach(n=>{const i=zS(n);t+=n.test?`(${n.test})?${i}:`:i}),Ot(t)===":"&&(t+="null"),t}function eJ(e,t,n,i,r,o){const a={};o=o||{},o.encoders={$encode:a},e=eTe(e,t,n,i,r.config);for(const s in e)a[s]=oTe(e[s],t,o,r);return o}function oTe(e,t,n,i){const r={},o={};for(const a in e)e[a]!=null&&(r[a]=sTe(aTe(e[a]),i,n,o));return{$expr:{marktype:t,channels:r},$fields:Object.keys(o),$output:Object.keys(e)}}function aTe(e){return fe(e)?rTe(e):zS(e)}function sTe(e,t,n,i){const r=Ps(e,t);return r.$fields.forEach(o=>i[o]=1),xt(n,r.$params),r.$expr}const lTe="outer",uTe=["value","update","init","react","bind"];function Zz(e,t){le(e+' for "outer" push: '+we(t))}function tJ(e,t){const n=e.name;if(e.push===lTe)t.signals[n]||Zz("No prior signal definition",n),uTe.forEach(i=>{e[i]!==void 0&&Zz("Invalid property ",i)});else{const i=t.addSignal(n,e.value);e.react===!1&&(i.react=!1),e.bind&&t.addBinding(n,e.bind)}}function _M(e,t,n,i){this.id=-1,this.type=e,this.value=t,this.params=n,i&&(this.parent=i)}function BS(e,t,n,i){return new _M(e,t,n,i)}function Pw(e,t){return BS("operator",e,t)}function Ke(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function Qy(e,t){return t?{$field:e,$name:t}:{$field:e}}const bM=Qy("key");function Xz(e,t){return{$compare:e,$order:t}}function cTe(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const fTe="ascending",dTe="descending";function hTe(e){return Ie(e)?(e.order===dTe?"-":"+")+HS(e.op,e.field):""}function HS(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const sI="scope",wM="view";function ii(e){return e&&e.signal}function pTe(e){return e&&e.expr}function P_(e){if(ii(e))return!0;if(Ie(e)){for(const t in e)if(P_(e[t]))return!0}return!1}function xa(e,t){return e??t}function Yf(e){return e&&e.signal||e}const Kz="timer";function ev(e,t){return(e.merge?gTe:e.stream?yTe:e.type?vTe:le("Invalid stream specification: "+we(e)))(e,t)}function mTe(e){return e===sI?wM:e||wM}function gTe(e,t){const n=e.merge.map(r=>ev(r,t)),i=lI({merge:n},e,t);return t.addStream(i).id}function yTe(e,t){const n=ev(e.stream,t),i=lI({stream:n},e,t);return t.addStream(i).id}function vTe(e,t){let n;e.type===Kz?(n=t.event(Kz,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(mTe(e.source),e.type);const i=lI({stream:n},e,t);return Object.keys(i).length===1?n:t.addStream(i).id}function lI(e,t,n){let i=t.between;return i&&(i.length!==2&&le('Stream "between" parameter must have 2 entries: '+we(t)),e.between=[ev(i[0],n),ev(i[1],n)]),i=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&i.push(xTe(t.marktype,t.markname,t.markrole)),t.source===sI&&i.push("inScope(event.item)"),i.length&&(e.filter=Ps("("+i.join(")&&(")+")",n).$expr),(i=t.throttle)!=null&&(e.throttle=+i),(i=t.debounce)!=null&&(e.debounce=+i),t.consume&&(e.consume=!0),e}function xTe(e,t,n){const i="event.item";return i+(e&&e!=="*"?"&&"+i+".mark.marktype==='"+e+"'":"")+(n?"&&"+i+".mark.role==='"+n+"'":"")+(t?"&&"+i+".mark.name==='"+t+"'":"")}const _Te={code:"_.$value",ast:{type:"Identifier",value:"value"}};function bTe(e,t,n){const i=e.encode,r={target:n};let o=e.events,a=e.update,s=[];o||le("Signal update missing events specification."),Oe(o)&&(o=jc(o,t.isSubscope()?sI:wM)),o=$e(o).filter(l=>l.signal||l.scale?(s.push(l),0):1),s.length>1&&(s=[STe(s)]),o.length&&s.push(o.length>1?{merge:o}:o[0]),i!=null&&(a&&le("Signal encode and update are mutually exclusive."),a="encode(item(),"+we(i)+")"),r.update=Oe(a)?Ps(a,t):a.expr!=null?Ps(a.expr,t):a.value!=null?a.value:a.signal!=null?{$expr:_Te,$params:{$value:t.signalRef(a.signal)}}:le("Invalid signal update specification."),e.force&&(r.options={force:!0}),s.forEach(l=>t.addUpdate(xt(wTe(l,t),r)))}function wTe(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):ev(e,t)}}function STe(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function CTe(e,t){const n=t.getSignal(e.name);let i=e.update;e.init&&(i?le("Signals can not include both init and update expressions."):(i=e.init,n.initonly=!0)),i&&(i=Ps(i,t),n.update=i.$expr,n.params=i.$params),e.on&&e.on.forEach(r=>bTe(r,t,n.id))}const sn=e=>(t,n,i)=>BS(e,n,t||void 0,i),nJ=sn("aggregate"),ETe=sn("axisticks"),iJ=sn("bound"),Ua=sn("collect"),Jz=sn("compare"),kTe=sn("datajoin"),rJ=sn("encode"),RTe=sn("expression"),TTe=sn("facet"),ATe=sn("field"),MTe=sn("key"),FTe=sn("legendentries"),PTe=sn("load"),NTe=sn("mark"),$Te=sn("multiextent"),OTe=sn("multivalues"),ITe=sn("overlap"),DTe=sn("params"),oJ=sn("prefacet"),LTe=sn("projection"),jTe=sn("proxy"),zTe=sn("relay"),aJ=sn("render"),BTe=sn("scale"),Hd=sn("sieve"),HTe=sn("sortitems"),sJ=sn("viewlayout"),UTe=sn("values");let WTe=0;const lJ={min:"min",max:"max",count:"sum"};function GTe(e,t){const n=e.type||"linear";JV(n)||le("Unrecognized scale type: "+we(n)),t.addScale(e.name,{type:n,domain:void 0})}function qTe(e,t){const n=t.getScale(e.name).params;let i;n.domain=uJ(e.domain,e,t),e.range!=null&&(n.range=fJ(e,t,n)),e.interpolate!=null&&nAe(e.interpolate,n),e.nice!=null&&(n.nice=tAe(e.nice)),e.bins!=null&&(n.bins=eAe(e.bins,t));for(i in e)et(n,i)||i==="name"||(n[i]=Bo(e[i],t))}function Bo(e,t){return Ie(e)?e.signal?t.signalRef(e.signal):le("Unsupported object: "+we(e)):e}function N_(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Bo(n,t))}function US(e){le("Can not find data set: "+we(e))}function uJ(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&le("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(fe(e)?VTe:e.fields?ZTe:YTe)(e,t,n)}function VTe(e,t,n){return e.map(i=>Bo(i,n))}function YTe(e,t,n){const i=n.getData(e.data);return i||US(e.data),Gp(t.type)?i.valuesRef(n,e.field,cJ(e.sort,!1)):tY(t.type)?i.domainRef(n,e.field):i.extentRef(n,e.field)}function ZTe(e,t,n){const i=e.data,r=e.fields.reduce((o,a)=>(a=Oe(a)?{data:i,field:a}:fe(a)||a.signal?XTe(a,n):a,o.push(a),o),[]);return(Gp(t.type)?KTe:tY(t.type)?JTe:QTe)(e,n,r)}function XTe(e,t){const n="_:vega:_"+WTe++,i=Ua({});if(fe(e))i.value={$ingest:e};else if(e.signal){const r="setdata("+we(n)+","+e.signal+")";i.params.input=t.signalRef(r)}return t.addDataPipeline(n,[i,Hd({})]),{data:n,field:"data"}}function KTe(e,t,n){const i=cJ(e.sort,!0);let r,o;const a=n.map(u=>{const c=t.getData(u.data);return c||US(u.data),c.countsRef(t,u.field,i)}),s={groupby:bM,pulse:a};i&&(r=i.op||"count",o=i.field?HS(r,i.field):"count",s.ops=[lJ[r]],s.fields=[t.fieldRef(o)],s.as=[o]),r=t.add(nJ(s));const l=t.add(Ua({pulse:Ke(r)}));return o=t.add(UTe({field:bM,sort:t.sortRef(i),pulse:Ke(l)})),Ke(o)}function cJ(e,t){return e&&(!e.field&&!e.op?Ie(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?le("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!lJ[e.op]&&le("Multiple domain scales can not be sorted using "+e.op)),e}function JTe(e,t,n){const i=n.map(r=>{const o=t.getData(r.data);return o||US(r.data),o.domainRef(t,r.field)});return Ke(t.add(OTe({values:i})))}function QTe(e,t,n){const i=n.map(r=>{const o=t.getData(r.data);return o||US(r.data),o.extentRef(t,r.field)});return Ke(t.add($Te({extents:i})))}function eAe(e,t){return e.signal||fe(e)?N_(e,t):t.objectProperty(e)}function tAe(e){return Ie(e)?{interval:Bo(e.interval),step:Bo(e.step)}:Bo(e)}function nAe(e,t){t.interpolate=Bo(e.type||e),e.gamma!=null&&(t.interpolateGamma=Bo(e.gamma))}function fJ(e,t,n){const i=t.config.range;let r=e.range;if(r.signal)return t.signalRef(r.signal);if(Oe(r)){if(i&&et(i,r))return e=xt({},e,{range:i[r]}),fJ(e,t,n);r==="width"?r=[0,{signal:"width"}]:r==="height"?r=Gp(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:le("Unrecognized scale range value: "+we(r))}else if(r.scheme){n.scheme=fe(r.scheme)?N_(r.scheme,t):Bo(r.scheme,t),r.extent&&(n.schemeExtent=N_(r.extent,t)),r.count&&(n.schemeCount=Bo(r.count,t));return}else if(r.step){n.rangeStep=Bo(r.step,t);return}else{if(Gp(e.type)&&!fe(r))return uJ(r,e,t);fe(r)||le("Unsupported range type: "+we(r))}return r.map(o=>(fe(o)?N_:Bo)(o,t))}function iAe(e,t){const n=t.config.projection||{},i={};for(const r in e)r!=="name"&&(i[r]=SM(e[r],r,t));for(const r in n)i[r]==null&&(i[r]=SM(n[r],r,t));t.addProjection(e.name,i)}function SM(e,t,n){return fe(e)?e.map(i=>SM(i,t,n)):Ie(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:le("Unsupported parameter object: "+we(e)):e}const Wa="top",Dm="left",Lm="right",xc="bottom",dJ="center",rAe="vertical",oAe="start",aAe="middle",sAe="end",CM="index",uI="label",lAe="offset",em="perc",uAe="perc2",Wo="value",qv="guide-label",cI="guide-title",cAe="group-title",fAe="group-subtitle",Qz="symbol",$_="gradient",EM="discrete",kM="size",dAe="shape",hAe="fill",pAe="stroke",mAe="strokeWidth",gAe="strokeDash",yAe="opacity",fI=[kM,dAe,hAe,pAe,mAe,gAe,yAe],Vv={name:1,style:1,interactive:1},Lt={value:0},Go={value:1},WS="group",hJ="rect",dI="rule",vAe="symbol",Ud="text";function tv(e){return e.type=WS,e.interactive=e.interactive||!1,e}function no(e,t){const n=(i,r)=>xa(e[i],xa(t[i],r));return n.isVertical=i=>rAe===xa(e.direction,t.direction||(i?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>xa(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>xa(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>xa(e.columns,xa(t.columns,+n.isVertical(!0))),n}function pJ(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function xAe(e,t,n){const i=t.config.style[n];return i&&i[e]}function GS(e,t,n){return`item.anchor === '${oAe}' ? ${e} : item.anchor === '${sAe}' ? ${t} : ${n}`}const hI=GS(we(Dm),we(Lm),we(dJ));function _Ae(e){const t=e("tickBand");let n=e("tickOffset"),i,r;return t?t.signal?(i={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},r={signal:`(${t.signal}) === 'extent'`},Ie(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(i=1,r=!0,n=0):(i=.5,r=!1):(i=e("bandPosition"),r=e("tickExtra")),{extra:r,band:i,offset:n}}function mJ(e,t){return t?e?Ie(e)?Object.assign({},e,{offset:mJ(e.offset,t)}):{value:e,offset:t}:t:e}function So(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=Im(e.encode,t,Vv)):e.interactive=!1,e}function bAe(e,t,n,i){const r=no(e,n),o=r.isVertical(),a=r.gradientThickness(),s=r.gradientLength();let l,u,c,d,h;o?(u=[0,1],c=[0,0],d=a,h=s):(u=[0,0],c=[1,0],d=s,h=a);const m={enter:l={opacity:Lt,x:Lt,y:Lt,width:gi(d),height:gi(h)},update:xt({},l,{opacity:Go,fill:{gradient:t,start:u,stop:c}}),exit:{opacity:Lt}};return $i(m,{stroke:r("gradientStrokeColor"),strokeWidth:r("gradientStrokeWidth")},{opacity:r("gradientOpacity")}),So({type:hJ,role:YRe,encode:m},i)}function wAe(e,t,n,i,r){const o=no(e,n),a=o.isVertical(),s=o.gradientThickness(),l=o.gradientLength();let u,c,d,h,m="";a?(u="y",d="y2",c="x",h="width",m="1-"):(u="x",d="x2",c="y",h="height");const g={opacity:Lt,fill:{scale:t,field:Wo}};g[u]={signal:m+"datum."+em,mult:l},g[c]=Lt,g[d]={signal:m+"datum."+uAe,mult:l},g[h]=gi(s);const y={enter:g,update:xt({},g,{opacity:Go}),exit:{opacity:Lt}};return $i(y,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),So({type:hJ,role:qRe,key:Wo,from:r,encode:y},i)}const SAe=`datum.${em}<=0?"${Dm}":datum.${em}>=1?"${Lm}":"${dJ}"`,CAe=`datum.${em}<=0?"${xc}":datum.${em}>=1?"${Wa}":"${aAe}"`;function e6(e,t,n,i){const r=no(e,t),o=r.isVertical(),a=gi(r.gradientThickness()),s=r.gradientLength();let l=r("labelOverlap"),u,c,d,h,m="";const g={enter:u={opacity:Lt},update:c={opacity:Go,text:{field:uI}},exit:{opacity:Lt}};return $i(g,{fill:r("labelColor"),fillOpacity:r("labelOpacity"),font:r("labelFont"),fontSize:r("labelFontSize"),fontStyle:r("labelFontStyle"),fontWeight:r("labelFontWeight"),limit:xa(e.labelLimit,t.gradientLabelLimit)}),o?(u.align={value:"left"},u.baseline=c.baseline={signal:CAe},d="y",h="x",m="1-"):(u.align=c.align={signal:SAe},u.baseline={value:"top"},d="x",h="y"),u[d]=c[d]={signal:m+"datum."+em,mult:s},u[h]=c[h]=a,a.offset=xa(e.labelOffset,t.gradientLabelOffset)||0,l=l?{separation:r("labelSeparation"),method:l,order:"datum."+CM}:void 0,So({type:Ud,role:XK,style:qv,key:Wo,from:i,encode:g,overlap:l},n)}function EAe(e,t,n,i,r){const o=no(e,t),a=n.entries,s=!!(a&&a.interactive),l=a?a.name:void 0,u=o("clipHeight"),c=o("symbolOffset"),d={data:"value"},h=`(${r}) ? datum.${lAe} : datum.${kM}`,m=u?gi(u):{field:kM},g=`datum.${CM}`,y=`max(1, ${r})`;let x,b,w,S,k;m.mult=.5,x={enter:b={opacity:Lt,x:{signal:h,mult:.5,offset:c},y:m},update:w={opacity:Go,x:b.x,y:b.y},exit:{opacity:Lt}};let R=null,M=null;e.fill||(R=t.symbolBaseFillColor,M=t.symbolBaseStrokeColor),$i(x,{fill:o("symbolFillColor",R),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",M),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),fI.forEach(I=>{e[I]&&(w[I]=b[I]={scale:e[I],field:Wo})});const T=So({type:vAe,role:ZRe,key:Wo,from:d,clip:u?!0:void 0,encode:x},n.symbols),N=gi(c);N.offset=o("labelOffset"),x={enter:b={opacity:Lt,x:{signal:h,offset:N},y:m},update:w={opacity:Go,text:{field:uI},x:b.x,y:b.y},exit:{opacity:Lt}},$i(x,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});const D=So({type:Ud,role:XK,style:qv,key:Wo,from:d,encode:x},n.labels);return x={enter:{noBound:{value:!u},width:Lt,height:u?gi(u):Lt,opacity:Lt},exit:{opacity:Lt},update:w={opacity:Go,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(S=`ceil(item.mark.items.length / ${y})`,w.row.signal=`${g}%${S}`,w.column.signal=`floor(${g} / ${S})`,k={field:["row",g]}):(w.row.signal=`floor(${g} / ${y})`,w.column.signal=`${g} % ${y}`,k={field:g}),w.column.signal=`(${r})?${w.column.signal}:${g}`,i={facet:{data:i,name:"value",groupby:CM}},tv({role:aI,from:i,encode:Im(x,a,Vv),marks:[T,D],name:l,interactive:s,sort:k})}function kAe(e,t){const n=no(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const pI='item.orient === "left"',mI='item.orient === "right"',qS=`(${pI} || ${mI})`,RAe=`datum.vgrad && ${qS}`,TAe=GS('"top"','"bottom"','"middle"'),AAe=GS('"right"','"left"','"center"'),MAe=`datum.vgrad && ${mI} ? (${AAe}) : (${qS} && !(datum.vgrad && ${pI})) ? "left" : ${hI}`,FAe=`item._anchor || (${qS} ? "middle" : "start")`,PAe=`${RAe} ? (${pI} ? -90 : 90) : 0`,NAe=`${qS} ? (datum.vgrad ? (${mI} ? "bottom" : "top") : ${TAe}) : "top"`;function $Ae(e,t,n,i){const r=no(e,t),o={enter:{opacity:Lt},update:{opacity:Go,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Lt}};return $i(o,{orient:r("titleOrient"),_anchor:r("titleAnchor"),anchor:{signal:FAe},angle:{signal:PAe},align:{signal:MAe},baseline:{signal:NAe},text:e.title,fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),baseline:r("titleBaseline")}),So({type:Ud,role:XRe,style:cI,from:i,encode:o},n)}function OAe(e,t){let n;return Ie(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+t6(e.path)+")":e.sphere&&(n="geoShape("+t6(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function t6(e){return Ie(e)&&e.signal?e.signal:we(e)}function gJ(e){const t=e.role||"";return!t.indexOf("axis")||!t.indexOf("legend")||!t.indexOf("title")?t:e.type===WS?aI:t||rI}function IAe(e){return{marktype:e.type,name:e.name||void 0,role:e.role||gJ(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function DAe(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function gI(e,t){const n=eq(e.type);n||le("Unrecognized transform type: "+we(e.type));const i=BS(n.type.toLowerCase(),null,yJ(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(i)),i.metadata=n.metadata||{},i}function yJ(e,t,n){const i={},r=e.params.length;for(let o=0;o<r;++o){const a=e.params[o];i[a.name]=LAe(a,t,n)}return i}function LAe(e,t,n){const i=e.type,r=t[e.name];if(i==="index")return jAe(e,t,n);if(r===void 0){e.required&&le("Missing required "+we(t.type)+" parameter: "+we(e.name));return}else{if(i==="param")return zAe(e,t,n);if(i==="projection")return n.projectionRef(t[e.name])}return e.array&&!ii(r)?r.map(o=>n6(e,o,n)):n6(e,r,n)}function n6(e,t,n){const i=e.type;if(ii(t))return r6(i)?le("Expression references can not be signals."):Qk(i)?n.fieldRef(t):o6(i)?n.compareRef(t):n.signalRef(t.signal);{const r=e.expr||Qk(i);return r&&BAe(t)?n.exprRef(t.expr,t.as):r&&HAe(t)?Qy(t.field,t.as):r6(i)?Ps(t,n):UAe(i)?Ke(n.getData(t).values):Qk(i)?Qy(t):o6(i)?n.compareRef(t):t}}function jAe(e,t,n){return Oe(t.from)||le('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function zAe(e,t,n){const i=t[e.name];return e.array?(fe(i)||le("Expected an array of sub-parameters. Instead: "+we(i)),i.map(r=>i6(e,r,n))):i6(e,i,n)}function i6(e,t,n){const i=e.params.length;let r;for(let a=0;a<i;++a){r=e.params[a];for(const s in r.key)if(r.key[s]!==t[s]){r=null;break}if(r)break}r||le("Unsupported parameter: "+we(t));const o=xt(yJ(r,t,n),r.key);return Ke(n.add(DTe(o)))}const BAe=e=>e&&e.expr,HAe=e=>e&&e.field,UAe=e=>e==="data",r6=e=>e==="expr",Qk=e=>e==="field",o6=e=>e==="compare";function WAe(e,t,n){let i,r,o,a,s;return e?(i=e.facet)&&(t||le("Only group marks can be faceted."),i.field!=null?a=s=O_(i,n):(e.data?s=Ke(n.getData(e.data).aggregate):(o=gI(xt({type:"aggregate",groupby:$e(i.groupby)},i.aggregate),n),o.params.key=n.keyRef(i.groupby),o.params.pulse=O_(i,n),a=s=Ke(n.add(o))),r=n.keyRef(i.groupby,!0))):a=Ke(n.add(Ua(null,[{}]))),a||(a=O_(e,n)),{key:r,pulse:a,parent:s}}function O_(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Ke(t.getData(e.data).output)}function vd(e,t,n,i,r){this.scope=e,this.input=t,this.output=n,this.values=i,this.aggregate=r,this.index={}}vd.fromEntries=function(e,t){const n=t.length,i=t[n-1],r=t[n-2];let o=t[0],a=null,s=1;for(o&&o.type==="load"&&(o=t[1]),e.add(t[0]);s<n;++s)t[s].params.pulse=Ke(t[s-1]),e.add(t[s]),t[s].type==="aggregate"&&(a=t[s]);return new vd(e,o,r,i,a)};function vJ(e){return Oe(e)?e:null}function a6(e,t,n){const i=HS(n.op,n.field);let r;if(t.ops){for(let o=0,a=t.as.length;o<a;++o)if(t.as[o]===i)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((r=n.op.signal)?e.signalRef(r):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(i))}function Gg(e,t,n,i,r,o,a){const s=t[n]||(t[n]={}),l=hTe(o);let u=vJ(r),c,d;if(u!=null&&(e=t.scope,u=u+(l?"|"+l:""),c=s[u]),!c){const h=o?{field:bM,pulse:t.countsRef(e,r,o)}:{field:e.fieldRef(r),pulse:Ke(t.output)};l&&(h.sort=e.sortRef(o)),d=e.add(BS(i,void 0,h)),a&&(t.index[r]=d),c=Ke(d),u!=null&&(s[u]=c)}return c}vd.prototype={countsRef(e,t,n){const i=this,r=i.counts||(i.counts={}),o=vJ(t);let a,s,l;return o!=null&&(e=i.scope,a=r[o]),a?n&&n.field&&a6(e,a.agg.params,n):(l={groupby:e.fieldRef(t,"key"),pulse:Ke(i.output)},n&&n.field&&a6(e,l,n),s=e.add(nJ(l)),a=e.add(Ua({pulse:Ke(s)})),a={agg:s,ref:Ke(a)},o!=null&&(r[o]=a)),a.ref},tuplesRef(){return Ke(this.values)},extentRef(e,t){return Gg(e,this,"extent","extent",t,!1)},domainRef(e,t){return Gg(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return Gg(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return Gg(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return Gg(e,this,"indata","tupleindex",t,!0,!0)}};function GAe(e,t,n){const i=e.from.facet,r=i.name,o=O_(i,t);let a;i.name||le("Facet must have a name: "+we(i)),i.data||le("Facet must reference a data set: "+we(i)),i.field?a=t.add(oJ({field:t.fieldRef(i.field),pulse:o})):i.groupby?a=t.add(TTe({key:t.keyRef(i.groupby),group:Ke(t.proxy(n.parent)),pulse:o})):le("Facet must specify groupby or field: "+we(i));const s=t.fork(),l=s.add(Ua()),u=s.add(Hd({pulse:Ke(l)}));s.addData(r,new vd(s,l,l,u)),s.addSignal("parent",null),a.params.subflow={$subflow:s.parse(e).toRuntime()}}function qAe(e,t,n){const i=t.add(oJ({pulse:n.pulse})),r=t.fork();r.add(Hd()),r.addSignal("parent",null),i.params.subflow={$subflow:r.parse(e).toRuntime()}}function xJ(e,t,n){const i=e.remove,r=e.insert,o=e.toggle,a=e.modify,s=e.values,l=t.add(Pw()),u="if("+e.trigger+',modify("'+n+'",'+[r,i,o,a,s].map(d=>d??"null").join(",")+"),0)",c=Ps(u,t);l.update=c.$expr,l.params=c.$params}function VS(e,t){const n=gJ(e),i=e.type===WS,r=e.from&&e.from.facet,o=e.overlap;let a=e.layout||n===aI||n===oI,s,l,u,c,d,h,m;const g=n===rI||a||r,y=WAe(e.from,i,t);l=t.add(kTe({key:y.key||(e.key?Qy(e.key):void 0),pulse:y.pulse,clean:!i}));const x=Ke(l);l=u=t.add(Ua({pulse:x})),l=t.add(NTe({markdef:IAe(e),interactive:DAe(e.interactive,t),clip:OAe(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Ke(l)}));const b=Ke(l);l=c=t.add(rJ(eJ(e.encode,e.type,n,e.style,t,{mod:!1,pulse:b}))),l.params.parent=t.encode(),e.transform&&e.transform.forEach(M=>{const T=gI(M,t),N=T.metadata;(N.generates||N.changes)&&le("Mark transforms should not generate new data."),N.nomod||(c.params.mod=!0),T.params.pulse=Ke(l),t.add(l=T)}),e.sort&&(l=t.add(HTe({sort:t.compareRef(e.sort),pulse:Ke(l)})));const w=Ke(l);(r||a)&&(a=t.add(sJ({layout:t.objectProperty(e.layout),legends:t.legends,mark:b,pulse:w})),h=Ke(a));const S=t.add(iJ({mark:b,pulse:h||w}));m=Ke(S),i&&(g&&(s=t.operators,s.pop(),a&&s.pop()),t.pushState(w,h||m,x),r?GAe(e,t,y):g?qAe(e,t,y):t.parse(e),t.popState(),g&&(a&&s.push(a),s.push(S))),o&&(m=VAe(o,m,t));const k=t.add(aJ({pulse:m})),R=t.add(Hd({pulse:Ke(k)},void 0,t.parent()));e.name!=null&&(d=e.name,t.addData(d,new vd(t,u,k,R)),e.on&&e.on.forEach(M=>{(M.insert||M.remove||M.toggle)&&le("Marks only support modify triggers."),xJ(M,t,d)}))}function VAe(e,t,n){const i=e.method,r=e.bound,o=e.separation,a={separation:ii(o)?n.signalRef(o.signal):o,method:ii(i)?n.signalRef(i.signal):i,pulse:t};if(e.order&&(a.sort=n.compareRef({field:e.order})),r){const s=r.tolerance;a.boundTolerance=ii(s)?n.signalRef(s.signal):+s,a.boundScale=n.scaleRef(r.scale),a.boundOrient=r.orient}return Ke(n.add(ITe(a)))}function YAe(e,t){const n=t.config.legend,i=e.encode||{},r=no(e,n),o=i.legend||{},a=o.name||void 0,s=o.interactive,l=o.style,u={};let c=0,d,h,m;fI.forEach(S=>e[S]?(u[S]=e[S],c=c||e[S]):0),c||le("Missing valid scale for legend.");const g=ZAe(e,t.scaleType(c)),y={title:e.title!=null,scales:u,type:g,vgrad:g!=="symbol"&&r.isVertical()},x=Ke(t.add(Ua(null,[y]))),b={enter:{x:{value:0},y:{value:0}}},w=Ke(t.add(FTe(h={type:g,scale:t.scaleRef(c),count:t.objectProperty(r("tickCount")),limit:t.property(r("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return g===$_?(m=[bAe(e,c,n,i.gradient),e6(e,n,i.labels,w)],h.count=h.count||t.signalRef(`max(2,2*floor((${Yf(r.gradientLength())})/100))`)):g===EM?m=[wAe(e,c,n,i.gradient,w),e6(e,n,i.labels,w)]:(d=kAe(e,n),m=[EAe(e,n,i,w,Yf(d.columns))],h.size=JAe(e,t,m[0].marks)),m=[tv({role:VRe,from:x,encode:b,marks:m,layout:d,interactive:s})],y.title&&m.push($Ae(e,n,i.title,x)),VS(tv({role:GRe,from:x,encode:Im(KAe(r,e,n),o,Vv),marks:m,aria:r("aria"),description:r("description"),zindex:r("zindex"),name:a,interactive:s,style:l}),t)}function ZAe(e,t){let n=e.type||Qz;return!e.type&&XAe(e)===1&&(e.fill||e.stroke)&&(n=d$(t)?$_:gA(t)?EM:Qz),n!==$_?n:gA(t)?EM:$_}function XAe(e){return fI.reduce((t,n)=>t+(e[n]?1:0),0)}function KAe(e,t,n){const i={enter:{},update:{}};return $i(i,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),i}function JAe(e,t,n){const i=Yf(s6("size",e,n)),r=Yf(s6("strokeWidth",e,n)),o=Yf(QAe(n[1].encode,t,qv));return Ps(`max(ceil(sqrt(${i})+${r}),${o})`,t)}function s6(e,t,n){return t[e]?`scale("${t[e]}",datum)`:pJ(e,n[0].encode)}function QAe(e,t,n){return pJ("fontSize",e)||xAe("fontSize",t,n)}const eMe=`item.orient==="${Dm}"?-90:item.orient==="${Lm}"?90:0`;function tMe(e,t){e=Oe(e)?{text:e}:e;const n=no(e,t.config.title),i=e.encode||{},r=i.group||{},o=r.name||void 0,a=r.interactive,s=r.style,l=[],u={},c=Ke(t.add(Ua(null,[u])));return l.push(rMe(e,n,nMe(e),c)),e.subtitle&&l.push(oMe(e,n,i.subtitle,c)),VS(tv({role:KRe,from:c,encode:iMe(n,r),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:a,style:s}),t)}function nMe(e){const t=e.encode;return t&&t.title||xt({name:e.name,interactive:e.interactive,style:e.style},t)}function iMe(e,t){const n={enter:{},update:{}};return $i(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:hI},angle:{signal:eMe},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),Im(n,t,Vv)}function rMe(e,t,n,i){const r={value:0},o=e.text,a={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return $i(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),So({type:Ud,role:JRe,style:cAe,from:i,encode:a},n)}function oMe(e,t,n,i){const r={value:0},o=e.subtitle,a={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return $i(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),So({type:Ud,role:QRe,style:fAe,from:i,encode:a},n)}function aMe(e,t){const n=[];e.transform&&e.transform.forEach(i=>{n.push(gI(i,t))}),e.on&&e.on.forEach(i=>{xJ(i,t,e.name)}),t.addDataPipeline(e.name,sMe(e,t,n))}function sMe(e,t,n){const i=[];let r=null,o=!1,a=!1,s,l,u,c,d;for(e.values?ii(e.values)||P_(e.format)?(i.push(l6(t,e)),i.push(r=sf())):i.push(r=sf({$ingest:e.values,$format:e.format})):e.url?P_(e.url)||P_(e.format)?(i.push(l6(t,e)),i.push(r=sf())):i.push(r=sf({$request:e.url,$format:e.format})):e.source&&(r=s=$e(e.source).map(h=>Ke(t.getData(h).output)),i.push(null)),l=0,u=n.length;l<u;++l)c=n[l],d=c.metadata,!r&&!d.source&&i.push(r=sf()),i.push(c),d.generates&&(a=!0),d.modifies&&!a&&(o=!0),d.source?r=c:d.changes&&(r=null);return s&&(u=s.length-1,i[0]=zTe({derive:o,pulse:u?s:s[0]}),(o||u)&&i.splice(1,0,sf())),r||i.push(sf()),i.push(Hd({})),i}function sf(e){const t=Ua({},e);return t.metadata={source:!0},t}function l6(e,t){return PTe({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const _J=e=>e===xc||e===Wa,YS=(e,t,n)=>ii(e)?fMe(e.signal,t,n):e===Dm||e===Wa?t:n,yi=(e,t,n)=>ii(e)?uMe(e.signal,t,n):_J(e)?t:n,Na=(e,t,n)=>ii(e)?cMe(e.signal,t,n):_J(e)?n:t,bJ=(e,t,n)=>ii(e)?dMe(e.signal,t,n):e===Wa?{value:t}:{value:n},lMe=(e,t,n)=>ii(e)?hMe(e.signal,t,n):e===Lm?{value:t}:{value:n},uMe=(e,t,n)=>wJ(`${e} === '${Wa}' || ${e} === '${xc}'`,t,n),cMe=(e,t,n)=>wJ(`${e} !== '${Wa}' && ${e} !== '${xc}'`,t,n),fMe=(e,t,n)=>yI(`${e} === '${Dm}' || ${e} === '${Wa}'`,t,n),dMe=(e,t,n)=>yI(`${e} === '${Wa}'`,t,n),hMe=(e,t,n)=>yI(`${e} === '${Lm}'`,t,n),wJ=(e,t,n)=>(t=t!=null?gi(t):t,n=n!=null?gi(n):n,u6(t)&&u6(n)?(t=t?t.signal||we(t.value):null,n=n?n.signal||we(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[xt({test:e},t)].concat(n||[])),u6=e=>e==null||Object.keys(e).length===1,yI=(e,t,n)=>({signal:`${e} ? (${op(t)}) : (${op(n)})`}),pMe=(e,t,n,i,r)=>({signal:(i!=null?`${e} === '${Dm}' ? (${op(i)}) : `:"")+(n!=null?`${e} === '${xc}' ? (${op(n)}) : `:"")+(r!=null?`${e} === '${Lm}' ? (${op(r)}) : `:"")+(t!=null?`${e} === '${Wa}' ? (${op(t)}) : `:"")+"(null)"}),op=e=>ii(e)?e.signal:e==null?null:we(e),mMe=(e,t)=>t===0?0:ii(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},yp=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function Ah(e,t,n,i){let r;if(t&&et(t,e))return t[e];if(et(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":r="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":r=e[5].toLowerCase()+e.slice(6)}return i[cI][r]}else if(e.startsWith("label")){switch(e){case"labelColor":r="fill";break;case"labelFont":case"labelFontSize":r=e[5].toLowerCase()+e.slice(6)}return i[qv][r]}return null}function c6(e){const t={};for(const n of e)if(n)for(const i in n)t[i]=1;return Object.keys(t)}function gMe(e,t){var n=t.config,i=n.style,r=n.axis,o=t.scaleType(e.scale)==="band"&&n.axisBand,a=e.orient,s,l,u;if(ii(a)){const d=c6([n.axisX,n.axisY]),h=c6([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);s={};for(u of d)s[u]=yi(a,Ah(u,n.axisX,r,i),Ah(u,n.axisY,r,i));l={};for(u of h)l[u]=pMe(a.signal,Ah(u,n.axisTop,r,i),Ah(u,n.axisBottom,r,i),Ah(u,n.axisLeft,r,i),Ah(u,n.axisRight,r,i))}else s=a===Wa||a===xc?n.axisX:n.axisY,l=n["axis"+a[0].toUpperCase()+a.slice(1)];return s||l||o?xt({},r,s,l,o):r}function yMe(e,t,n,i){const r=no(e,t),o=e.orient;let a,s;const l={enter:a={opacity:Lt},update:s={opacity:Go},exit:{opacity:Lt}};$i(l,{stroke:r("domainColor"),strokeCap:r("domainCap"),strokeDash:r("domainDash"),strokeDashOffset:r("domainDashOffset"),strokeWidth:r("domainWidth"),strokeOpacity:r("domainOpacity")});const u=f6(e,0),c=f6(e,1);return a.x=s.x=yi(o,u,Lt),a.x2=s.x2=yi(o,c),a.y=s.y=Na(o,u,Lt),a.y2=s.y2=Na(o,c),So({type:dI,role:zRe,from:i,encode:l},n)}function f6(e,t){return{scale:e.scale,range:t}}function vMe(e,t,n,i,r){const o=no(e,t),a=e.orient,s=e.gridScale,l=YS(a,1,-1),u=xMe(e.offset,l);let c,d,h;const m={enter:c={opacity:Lt},update:h={opacity:Go},exit:d={opacity:Lt}};$i(m,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});const g={scale:e.scale,field:Wo,band:r.band,extra:r.extra,offset:r.offset,round:o("tickRound")},y=yi(a,{signal:"height"},{signal:"width"}),x=s?{scale:s,range:0,mult:l,offset:u}:{value:0,offset:u},b=s?{scale:s,range:1,mult:l,offset:u}:xt(y,{mult:l,offset:u});return c.x=h.x=yi(a,g,x),c.y=h.y=Na(a,g,x),c.x2=h.x2=Na(a,b),c.y2=h.y2=yi(a,b),d.x=yi(a,g),d.y=Na(a,g),So({type:dI,role:BRe,key:Wo,from:i,encode:m},n)}function xMe(e,t){if(t!==1)if(!Ie(e))e=ii(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=xt({},e);for(;n.mult!=null;)if(Ie(n.mult))n=n.mult=xt({},n.mult);else return n.mult=ii(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function _Me(e,t,n,i,r,o){const a=no(e,t),s=e.orient,l=YS(s,-1,1);let u,c,d;const h={enter:u={opacity:Lt},update:d={opacity:Go},exit:c={opacity:Lt}};$i(h,{stroke:a("tickColor"),strokeCap:a("tickCap"),strokeDash:a("tickDash"),strokeDashOffset:a("tickDashOffset"),strokeOpacity:a("tickOpacity"),strokeWidth:a("tickWidth")});const m=gi(r);m.mult=l;const g={scale:e.scale,field:Wo,band:o.band,extra:o.extra,offset:o.offset,round:a("tickRound")};return d.y=u.y=yi(s,Lt,g),d.y2=u.y2=yi(s,m),c.x=yi(s,g),d.x=u.x=Na(s,Lt,g),d.x2=u.x2=Na(s,m),c.y=Na(s,g),So({type:dI,role:URe,key:Wo,from:i,encode:h},n)}function eR(e,t,n,i,r){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+i+","+r+")"}}function bMe(e,t,n,i,r,o){const a=no(e,t),s=e.orient,l=e.scale,u=YS(s,-1,1),c=Yf(a("labelFlush")),d=Yf(a("labelFlushOffset")),h=a("labelAlign"),m=a("labelBaseline");let g=c===0||!!c,y;const x=gi(r);x.mult=u,x.offset=gi(a("labelPadding")||0),x.offset.mult=u;const b={scale:l,field:Wo,band:.5,offset:mJ(o.offset,a("labelOffset"))},w=yi(s,g?eR(l,c,'"left"','"right"','"center"'):{value:"center"},lMe(s,"left","right")),S=yi(s,bJ(s,"bottom","top"),g?eR(l,c,'"top"','"bottom"','"middle"'):{value:"middle"}),k=eR(l,c,`-(${d})`,d,0);g=g&&d;const R={opacity:Lt,x:yi(s,b,x),y:Na(s,b,x)},M={enter:R,update:y={opacity:Go,text:{field:uI},x:R.x,y:R.y,align:w,baseline:S},exit:{opacity:Lt,x:R.x,y:R.y}};$i(M,{dx:!h&&g?yi(s,k):null,dy:!m&&g?Na(s,k):null}),$i(M,{angle:a("labelAngle"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontWeight:a("labelFontWeight"),fontStyle:a("labelFontStyle"),limit:a("labelLimit"),lineHeight:a("labelLineHeight")},{align:h,baseline:m});const T=a("labelBound");let N=a("labelOverlap");return N=N||T?{separation:a("labelSeparation"),method:N,order:"datum.index",bound:T?{scale:l,orient:s,tolerance:T}:null}:void 0,y.align!==w&&(y.align=yp(y.align,w)),y.baseline!==S&&(y.baseline=yp(y.baseline,S)),So({type:Ud,role:HRe,style:qv,key:Wo,from:i,encode:M,overlap:N},n)}function wMe(e,t,n,i){const r=no(e,t),o=e.orient,a=YS(o,-1,1);let s,l;const u={enter:s={opacity:Lt,anchor:gi(r("titleAnchor",null)),align:{signal:hI}},update:l=xt({},s,{opacity:Go,text:gi(e.title)}),exit:{opacity:Lt}},c={signal:`lerp(range("${e.scale}"), ${GS(0,1,.5)})`};return l.x=yi(o,c),l.y=Na(o,c),s.angle=yi(o,Lt,mMe(a,90)),s.baseline=yi(o,bJ(o,xc,Wa),{value:xc}),l.angle=s.angle,l.baseline=s.baseline,$i(u,{fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),angle:r("titleAngle"),baseline:r("titleBaseline")}),SMe(r,o,u,n),u.update.align=yp(u.update.align,s.align),u.update.angle=yp(u.update.angle,s.angle),u.update.baseline=yp(u.update.baseline,s.baseline),So({type:Ud,role:WRe,style:cI,from:i,encode:u},n)}function SMe(e,t,n,i){const r=(s,l)=>s!=null?(n.update[l]=yp(gi(s),n.update[l]),!1):!Lh(l,i),o=r(e("titleX"),"x"),a=r(e("titleY"),"y");n.enter.auto=a===o?gi(a):yi(t,gi(a),gi(o))}function CMe(e,t){const n=gMe(e,t),i=e.encode||{},r=i.axis||{},o=r.name||void 0,a=r.interactive,s=r.style,l=no(e,n),u=_Ae(l),c={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:e.title!=null},d=Ke(t.add(Ua({},[c]))),h=Ke(t.add(ETe({scale:t.scaleRef(e.scale),extra:t.property(u.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),m=[];let g;return c.grid&&m.push(vMe(e,n,i.grid,h,u)),c.ticks&&(g=l("tickSize"),m.push(_Me(e,n,i.ticks,h,g,u))),c.labels&&(g=c.ticks?g:0,m.push(bMe(e,n,i.labels,h,g,u))),c.domain&&m.push(yMe(e,n,i.domain,d)),c.title&&m.push(wMe(e,n,i.title,d)),VS(tv({role:jRe,from:d,encode:Im(EMe(l,e),r,Vv),marks:m,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:o,interactive:a,style:s}),t)}function EMe(e,t){const n={enter:{},update:{}};return $i(n,{orient:e("orient"),offset:e("offset")||0,position:xa(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function SJ(e,t,n){const i=$e(e.signals),r=$e(e.scales);return n||i.forEach(o=>tJ(o,t)),$e(e.projections).forEach(o=>iAe(o,t)),r.forEach(o=>GTe(o,t)),$e(e.data).forEach(o=>aMe(o,t)),r.forEach(o=>qTe(o,t)),(n||i).forEach(o=>CTe(o,t)),$e(e.axes).forEach(o=>CMe(o,t)),$e(e.marks).forEach(o=>VS(o,t)),$e(e.legends).forEach(o=>YAe(o,t)),e.title&&tMe(e.title,t),t.parseLambdas(),t}const kMe=e=>Im({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function RMe(e,t){const n=t.config,i=Ke(t.root=t.add(Pw())),r=TMe(e,n);r.forEach(u=>tJ(u,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const o=t.add(Ua()),a=t.add(rJ(eJ(kMe(e.encode),WS,oI,e.style,t,{pulse:Ke(o)}))),s=t.add(sJ({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:i,pulse:Ke(a)}));t.operators.pop(),t.pushState(Ke(a),Ke(s),null),SJ(e,t,r),t.operators.push(s);let l=t.add(iJ({mark:i,pulse:Ke(s)}));return l=t.add(aJ({pulse:Ke(l)})),l=t.add(Hd({pulse:Ke(l)})),t.addData("root",new vd(t,o,o,l)),t}function qg(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function TMe(e,t){const n=a=>xa(e[a],t[a]),i=[qg("background",n("background")),qg("autosize",IRe(n("autosize"))),qg("padding",LRe(n("padding"))),qg("width",n("width")||0),qg("height",n("height")||0)],r=i.reduce((a,s)=>(a[s.name]=s,a),{}),o={};return $e(e.signals).forEach(a=>{et(r,a.name)?a=xt(r[a.name],a):i.push(a),o[a.name]=a}),$e(t.signals).forEach(a=>{!et(o,a.name)&&!et(r,a.name)&&i.push(a)}),i}function CJ(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function d6(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}CJ.prototype=d6.prototype={parse(e){return SJ(e,this)},fork(){return new d6(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof _M?Ke(e):e;return this.add(jTe({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(i,r,o){let a,s;i&&(a=i.data||(i.data={}),s=a[r]||(a[r]=[]),s.push(o))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const i in t.index)n(t.index[i],e,"index:"+i)}return this},pushState(e,t,n){this._encode.push(Ke(this.add(Hd({pulse:e})))),this._parent.push(t),this._lookup.push(n?Ke(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Ot(this._parent)},encode(){return Ot(this._encode)},lookup(){return Ot(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Oe(e))return Qy(e,t);e.signal||le("Unsupported field reference: "+we(e));const n=e.signal;let i=this.field[n];if(!i){const r={name:this.signalRef(n)};t&&(r.as=t),this.field[n]=i=Ke(this.add(ATe(r)))}return i},compareRef(e){let t=!1;const n=o=>ii(o)?(t=!0,this.signalRef(o.signal)):pTe(o)?(t=!0,this.exprRef(o.expr)):o,i=$e(e.field).map(n),r=$e(e.order).map(n);return t?Ke(this.add(Jz({fields:i,orders:r}))):Xz(i,r)},keyRef(e,t){let n=!1;const i=o=>ii(o)?(n=!0,Ke(r[o.signal])):o,r=this.signals;return e=$e(e).map(i),n?Ke(this.add(MTe({fields:e,flat:t}))):cTe(e,t)},sortRef(e){if(!e)return e;const t=HS(e.op,e.field),n=e.order||fTe;return n.signal?Ke(this.add(Jz({fields:t,orders:this.signalRef(n.signal)}))):Xz(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const i=this.id();this.streams.push({id:i,source:e,type:t}),this.events[n]=i}return this.events[n]},hasOwnSignal(e){return et(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&le("Duplicate signal name: "+we(e));const n=t instanceof _M?t:this.add(Pw(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||le("Unrecognized signal name: "+we(e)),this.signals[e]},signalRef(e){return this.signals[e]?Ke(this.signals[e]):(et(this.lambdas,e)||(this.lambdas[e]=this.add(Pw(null))),Ke(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const i=e[t],r=Ps(i,this),o=this.lambdas[i];o.params=r.$params,o.update=r.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!Ie(e)?e:this.signalRef(e.signal||vI(e))},exprRef(e,t){const n={expr:Ps(e,this)};return t&&(n.expr.$name=t),Ke(this.add(RTe(n)))},addBinding(e,t){this.bindings||le("Nested signals do not support binding: "+we(e)),this.bindings.push(xt({signal:e},t))},addScaleProj(e,t){et(this.scales,e)&&le("Duplicate scale or projection name: "+we(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,BTe(t))},addProjection(e,t){this.addScaleProj(e,LTe(t))},getScale(e){return this.scales[e]||le("Unrecognized scale name: "+we(e)),this.scales[e]},scaleRef(e){return Ke(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return et(this.data,e)&&le("Duplicate data set name: "+we(e)),this.data[e]=t},getData(e){return this.data[e]||le("Undefined data set name: "+we(e)),this.data[e]},addDataPipeline(e,t){return et(this.data,e)&&le("Duplicate data set name: "+we(e)),this.addData(e,vd.fromEntries(this,t))}};function vI(e){return(fe(e)?AMe:MMe)(e)}function AMe(e){const t=e.length;let n="[";for(let i=0;i<t;++i){const r=e[i];n+=(i>0?",":"")+(Ie(r)?r.signal||vI(r):we(r))}return n+"]"}function MMe(e){let t="{",n=0,i,r;for(i in e)r=e[i],t+=(++n>1?",":"")+we(i)+":"+(Ie(r)?r.signal||vI(r):we(r));return t+"}"}function FMe(){const e="sans-serif",i="#4c78a8",r="#000",o="#888",a="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:i},area:{fill:i},image:null,line:{stroke:i,strokeWidth:2},path:{stroke:i},rect:{fill:i},rule:{stroke:r},shape:{stroke:i},symbol:{fill:i,size:64},text:{fill:r,font:e,fontSize:11},trail:{fill:i,size:2},style:{"guide-label":{fill:r,font:e,fontSize:10},"guide-title":{fill:r,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:r,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:r,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:a},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:o,grid:!1,gridWidth:1,gridColor:a,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:o,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:a,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:o,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function PMe(e,t,n){return Ie(e)||le("Input Vega specification must be an object."),t=Sm(FMe(),t,e.config),RMe(e,new CJ(t,n)).toRuntime()}var NMe="5.27.0";xt(zp,Lme,oxe,Dxe,wbe,gwe,U2e,w2e,G2e,mSe,ESe,PSe);const $Me=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Yn,CanvasHandler:yc,CanvasRenderer:Uy,DATE:Xr,DAY:qi,DAYOFYEAR:Ms,Dataflow:hp,Debug:wW,Error:kP,EventStream:Y2,Gradient:gY,GroupItem:yS,HOURS:_o,Handler:gc,HybridHandler:q$,HybridRenderer:Yb,Info:bW,Item:gS,MILLISECONDS:La,MINUTES:bo,MONTH:Ki,Marks:wo,MultiPulse:KP,None:_W,Operator:ln,Parameters:V2,Pulse:ec,QUARTER:Zr,RenderType:Lu,Renderer:Ro,ResourceLoader:b$,SECONDS:Jo,SVGHandler:j$,SVGRenderer:ES,SVGStringRenderer:G$,Scenegraph:D$,TIME_UNITS:BP,Transform:ne,View:HK,WEEK:ei,Warn:RP,YEAR:Fi,accessor:to,accessorFields:Xi,accessorName:In,array:$e,ascending:I2,bandwidthNRD:tN,bin:iq,bootstrapCI:rq,boundClip:hZ,boundContext:$v,boundItem:wA,boundMark:OY,boundStroke:Vl,changeset:Ld,clampRange:NW,codegenExpression:mK,compare:PP,constant:nr,cumulativeLogNormal:sN,cumulativeNormal:X2,cumulativeUniform:fN,dayofyear:cG,debounce:NP,defaultLocale:qP,definition:eq,densityLogNormal:aN,densityNormal:nN,densityUniform:cN,domChild:Jn,domClear:Io,domCreate:Iu,domFind:L$,dotbin:oq,error:le,expressionFunction:Hn,extend:xt,extent:Rs,extentIndex:$W,falsy:mu,fastmap:Em,field:Xo,flush:OW,font:wS,fontFamily:Dv,fontSize:Ls,format:h_,formatLocale:Eb,formats:ZP,hasOwnProperty:et,id:xv,identity:tr,inferType:UG,inferTypes:WG,ingest:Vt,inherits:be,inrange:ep,interpolate:h$,interpolateColors:pS,interpolateRange:nY,intersect:uZ,intersectBoxLine:tp,intersectPath:w$,intersectPoint:S$,intersectRule:CY,isArray:fe,isBoolean:Nc,isDate:Ju,isFunction:_t,isIterable:IW,isNumber:zt,isObject:Ie,isRegExp:DW,isString:Oe,isTuple:G2,key:$P,lerp:LW,lineHeight:pc,loader:U2,locale:BG,logger:TP,lruCache:jW,markup:W$,merge:zW,mergeConfig:Sm,multiLineOffset:$$,one:wm,pad:BW,panLinear:RW,panLog:TW,panPow:AW,panSymlog:MW,parse:PMe,parseExpression:GO,parseSelector:jc,path:tS,pathCurves:v$,pathEqual:pZ,pathParse:qp,pathRectangle:xY,pathRender:jy,pathSymbols:vY,pathTrail:_Y,peek:Ot,point:CS,projection:fO,quantileLogNormal:lN,quantileNormal:K2,quantileUniform:dN,quantiles:QP,quantizeInterpolator:iY,quarter:FW,quartiles:eN,get random(){return Qo},randomInteger:Hpe,randomKDE:rN,randomLCG:Bpe,randomLogNormal:sq,randomMixture:lq,randomNormal:iN,randomUniform:uq,read:VG,regressionConstant:hN,regressionExp:fq,regressionLinear:pN,regressionLoess:pq,regressionLog:cq,regressionPoly:hq,regressionPow:dq,regressionQuad:mN,renderModule:kS,repeat:l0,resetDefaultLocale:Lhe,resetSVGClipId:wY,resetSVGDefIds:S1e,responseType:qG,runtimeContext:AK,sampleCurve:Q2,sampleLogNormal:oN,sampleNormal:Z2,sampleUniform:uN,scale:Ut,sceneEqual:V$,sceneFromJSON:DY,scenePickVisit:jb,sceneToJSON:IY,sceneVisit:ja,sceneZOrder:C$,scheme:p$,serializeXML:eZ,setHybridRendererOptions:x1e,setRandom:jpe,span:_v,splitAccessPath:Is,stringValue:we,textMetrics:go,timeBin:RG,timeFloor:yG,timeFormatLocale:Ny,timeInterval:Am,timeOffset:_G,timeSequence:SG,timeUnitSpecifier:uG,timeUnits:HP,toBoolean:OP,toDate:IP,toNumber:Vi,toSet:Da,toString:DP,transform:tq,transforms:zp,truncate:HW,truthy:Ko,tupleid:Je,typeParsers:rA,utcFloor:vG,utcInterval:Mm,utcOffset:bG,utcSequence:CG,utcdayofyear:hG,utcquarter:PW,utcweek:pG,version:NMe,visitArray:wu,week:fG,writeConfig:Cm,zero:Au,zoomLinear:AP,zoomLog:MP,zoomPow:xb,zoomSymlog:FP},Symbol.toStringTag,{value:"Module"}));function OMe(e,t,n){let i;t.x2&&(t.x?(n&&e.x>e.x2&&(i=e.x,e.x=e.x2,e.x2=i),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(i=e.y,e.y=e.y2,e.y2=i),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var IMe={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},DMe={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},LMe={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const jMe=Array.prototype.slice,lf=(e,t,n)=>{const i=n?n(t[0]):t[0];return i[e].apply(i,jMe.call(t,1))},zMe=(e,t,n,i,r,o,a)=>new Date(e,t||0,n??1,i||0,r||0,o||0,a||0);var BMe={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:zMe,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return lf("join",arguments)},indexof:function(){return lf("indexOf",arguments)},lastindexof:function(){return lf("lastIndexOf",arguments)},slice:function(){return lf("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return lf("substring",arguments,String)},split:function(){return lf("split",arguments,String)},replace:function(){return lf("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const HMe=["view","item","group","xy","x","y"],RM=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&RM.add(setImmediate);const UMe={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:IMe[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,i=e(t.object);n&&(e.memberDepth+=1);const r=e(t.property);if(n&&(e.memberDepth-=1),RM.has(i[r])){console.error(`Prevented interpretation of member "${r}" which could lead to insecure code execution`);return}return i[r]},CallExpression:(e,t)=>{const n=t.arguments;let i=t.callee.name;return i.startsWith("_")&&(i=i.slice(1)),i==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[i]||BMe[i]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>DMe[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>LMe[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,i)=>{e.memberDepth+=1;const r=e(i.key);return e.memberDepth-=1,RM.has(e(i.value))?console.error(`Prevented interpretation of property "${r}" which could lead to insecure code execution`):n[r]=e(i.value),n},{})};function Vg(e,t,n,i,r,o){const a=s=>UMe[s.type](a,s);return a.memberDepth=0,a.fn=Object.create(t),a.params=n,a.datum=i,a.event=r,a.item=o,HMe.forEach(s=>a.fn[s]=function(){return r.vega[s](...arguments)}),a(e)}var WMe={operator(e,t){const n=t.ast,i=e.functions;return r=>Vg(n,i,r)},parameter(e,t){const n=t.ast,i=e.functions;return(r,o)=>Vg(n,i,o,r)},event(e,t){const n=t.ast,i=e.functions;return r=>Vg(n,i,void 0,void 0,r)},handler(e,t){const n=t.ast,i=e.functions;return(r,o)=>{const a=o.item&&o.item.datum;return Vg(n,i,r,a,o)}},encode(e,t){const{marktype:n,channels:i}=t,r=e.functions,o=n==="group"||n==="image"||n==="rect";return(a,s)=>{const l=a.datum;let u=0,c;for(const d in i)c=Vg(i[d].ast,r,s,l,void 0,a),a[d]!==c&&(a[d]=c,u=1);return n!=="rule"&&OMe(a,i,o),u}}};const GMe="vega-lite",qMe='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',VMe="5.16.3",YMe=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],ZMe="https://vega.github.io/vega-lite/",XMe="Vega-Lite is a concise high-level language for interactive visualization.",KMe=["vega","chart","visualization"],JMe="build/vega-lite.js",QMe="build/vega-lite.min.js",eFe="build/vega-lite.min.js",tFe="build/src/index",nFe="build/src/index.d.ts",iFe={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},rFe=["bin","build","src","vega-lite*","tsconfig.json"],oFe={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",jest:"NODE_OPTIONS=--experimental-vm-modules npx jest",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk --experimental-vm-modules ./node_modules/.bin/jest --runInBand test","test:runtime":"NODE_OPTIONS=--experimental-vm-modules TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"NODE_OPTIONS=--experimental-vm-modules TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},aFe={type:"git",url:"https://github.com/vega/vega-lite.git"},sFe="BSD-3-Clause",lFe={url:"https://github.com/vega/vega-lite/issues"},uFe={"@babel/core":"^7.22.10","@babel/plugin-proposal-class-properties":"^7.18.6","@babel/preset-env":"^7.22.10","@babel/preset-typescript":"^7.22.5","@release-it/conventional-changelog":"^7.0.0","@rollup/plugin-alias":"^5.0.0","@rollup/plugin-babel":"^6.0.3","@rollup/plugin-commonjs":"^25.0.4","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.2.1","@rollup/plugin-terser":"^0.4.3","@types/chai":"^4.3.5","@types/d3":"^7.4.0","@types/jest":"^29.5.4","@types/pako":"^2.0.0","@typescript-eslint/eslint-plugin":"^6.4.1","@typescript-eslint/parser":"^6.4.1",ajv:"^8.12.0","ajv-formats":"^2.1.1",chai:"^4.3.7",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.0.0",d3:"^7.8.5","del-cli":"^5.0.0",eslint:"^8.47.0","eslint-config-prettier":"^9.0.0","eslint-plugin-jest":"^27.2.3","eslint-plugin-prettier":"^5.0.0","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.8.0",jest:"^29.6.3","jest-dev-server":"^9.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.0.2",puppeteer:"^15.0.0","release-it":"^16.1.5",rollup:"^3.28.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-sourcemaps":"^0.6.3",serve:"^14.2.1",terser:"^5.19.2","ts-jest":"^29.1.1","ts-json-schema-generator":"^1.3.0",typescript:"~5.2.2","vega-cli":"^5.25.0","vega-datasets":"^2.7.0","vega-embed":"^6.22.2","vega-tooltip":"^0.33.0","yaml-front-matter":"^4.1.1"},cFe={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},fFe={vega:"^5.24.0"},dFe={node:">=18"},hFe={name:GMe,author:qMe,version:VMe,collaborators:YMe,homepage:ZMe,description:XMe,keywords:KMe,main:JMe,unpkg:QMe,jsdelivr:eFe,module:tFe,types:nFe,bin:iFe,files:rFe,scripts:oFe,repository:aFe,license:sFe,bugs:lFe,devDependencies:uFe,dependencies:cFe,peerDependencies:fFe,engines:dFe};function xI(e){return!!e.or}function _I(e){return!!e.and}function bI(e){return!!e.not}function I_(e,t){if(bI(e))I_(e.not,t);else if(_I(e))for(const n of e.and)I_(n,t);else if(xI(e))for(const n of e.or)I_(n,t);else t(e)}function vp(e,t){return bI(e)?{not:vp(e.not,t)}:_I(e)?{and:e.and.map(n=>vp(n,t))}:xI(e)?{or:e.or.map(n=>vp(n,t))}:t(e)}const ht=structuredClone;function EJ(e){throw new Error(e)}function tm(e,t){const n={};for(const i of t)et(e,i)&&(n[i]=e[i]);return n}function Vr(e,t){const n={...e};for(const i of t)delete n[i];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>an(e)).join(",")})`};function Mt(e){if(zt(e))return e;const t=Oe(e)?e:an(e);if(t.length<250)return t;let n=0;for(let i=0;i<t.length;i++){const r=t.charCodeAt(i);n=(n<<5)-n+r,n=n&n}return n}function TM(e){return e===!1||e===null}function Ft(e,t){return e.includes(t)}function xd(e,t){let n=0;for(const[i,r]of e.entries())if(t(r,i,n++))return!0;return!1}function wI(e,t){let n=0;for(const[i,r]of e.entries())if(!t(r,i,n++))return!1;return!0}function kJ(e,...t){for(const n of t)pFe(e,n??{});return e}function pFe(e,t){for(const n of pe(t))Cm(e,n,t[n],!0)}function gs(e,t){const n=[],i={};let r;for(const o of e)r=t(o),!(r in i)&&(i[r]=1,n.push(o));return n}function mFe(e,t){const n=pe(e),i=pe(t);if(n.length!==i.length)return!1;for(const r of n)if(e[r]!==t[r])return!1;return!0}function RJ(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function SI(e,t){for(const n of e)if(t.has(n))return!0;return!1}function AM(e){const t=new Set;for(const n of e){const r=Is(n).map((a,s)=>s===0?a:`[${a}]`),o=r.map((a,s)=>r.slice(0,s+1).join(""));for(const a of o)t.add(a)}return t}function CI(e,t){return e===void 0||t===void 0?!0:SI(AM(e),AM(t))}function on(e){return pe(e).length===0}const pe=Object.keys,Pi=Object.values,_c=Object.entries;function nv(e){return e===!0||e===!1}function Sn(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function ny(e,t){return bI(e)?`!(${ny(e.not,t)})`:_I(e)?`(${e.and.map(n=>ny(n,t)).join(") && (")})`:xI(e)?`(${e.or.map(n=>ny(n,t)).join(") || (")})`:t(e)}function Nw(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&Nw(e[n],t)&&delete e[n],on(e)}function Yv(e){return e.charAt(0).toUpperCase()+e.substr(1)}function EI(e,t="datum"){const n=Is(e),i=[];for(let r=1;r<=n.length;r++){const o=`[${n.slice(0,r).map(we).join("][")}]`;i.push(`${t}${o}`)}return i.join(" && ")}function TJ(e,t="datum"){return`${t}[${we(Is(e).join("."))}]`}function gFe(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function ta(e){return`${Is(e).map(gFe).join("\\.")}`}function _d(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function kI(e){return`${Is(e).join(".")}`}function nm(e){return e?Is(e).length:0}function zn(...e){for(const t of e)if(t!==void 0)return t}let AJ=42;function MJ(e){const t=++AJ;return e?String(e)+t:t}function yFe(){AJ=42}function FJ(e){return PJ(e)?e:`__${e}`}function PJ(e){return e.startsWith("__")}function iv(e){if(e!==void 0)return(e%360+360)%360}function ZS(e){return zt(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const h6=Object.getPrototypeOf(structuredClone({}));function po(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(!po(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;for(i of e.entries())if(!po(i[1],t.get(i[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==h6.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==h6.toString)return e.toString()===t.toString();const r=Object.keys(e);if(n=r.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,r[i]))return!1;for(i=n;i--!==0;){const o=r[i];if(!po(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function an(e){const t=[];return function n(i){if(i&&i.toJSON&&typeof i.toJSON=="function"&&(i=i.toJSON()),i===void 0)return;if(typeof i=="number")return isFinite(i)?""+i:"null";if(typeof i!="object")return JSON.stringify(i);let r,o;if(Array.isArray(i)){for(o="[",r=0;r<i.length;r++)r&&(o+=","),o+=n(i[r])||"null";return o+"]"}if(i===null)return"null";if(t.includes(i))throw new TypeError("Converting circular structure to JSON");const a=t.push(i)-1,s=Object.keys(i).sort();for(o="",r=0;r<s.length;r++){const l=s[r],u=n(i[l]);u&&(o&&(o+=","),o+=JSON.stringify(l)+":"+u)}return t.splice(a,1),`{${o}}`}(e)}const Al="row",Ml="column",XS="facet",Cn="x",wi="y",Ga="x2",Hs="y2",zc="xOffset",jm="yOffset",qa="radius",Zl="radius2",ra="theta",Xl="theta2",Va="latitude",Ya="longitude",Za="latitude2",na="longitude2",Jr="color",Us="fill",Ws="stroke",Qr="shape",Kl="size",Wd="angle",Jl="opacity",Bc="fillOpacity",Hc="strokeOpacity",Uc="strokeWidth",Wc="strokeDash",Zv="text",im="order",Xv="detail",KS="key",bd="tooltip",JS="href",QS="url",eC="description",vFe={x:1,y:1,x2:1,y2:1},NJ={theta:1,theta2:1,radius:1,radius2:1};function $J(e){return e in NJ}const RI={longitude:1,longitude2:1,latitude:1,latitude2:1};function OJ(e){switch(e){case Va:return"y";case Za:return"y2";case Ya:return"x";case na:return"x2"}}function IJ(e){return e in RI}const xFe=pe(RI),TI={...vFe,...NJ,...RI,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function xp(e){return e===Jr||e===Us||e===Ws}const DJ={row:1,column:1,facet:1},Ho=pe(DJ),AI={...TI,...DJ},_Fe=pe(AI),{order:eBe,detail:tBe,tooltip:nBe,...bFe}=AI,{row:iBe,column:rBe,facet:oBe,...wFe}=bFe;function SFe(e){return!!wFe[e]}function LJ(e){return!!AI[e]}const CFe=[Ga,Hs,Za,na,Xl,Zl];function jJ(e){return Gd(e)!==e}function Gd(e){switch(e){case Ga:return Cn;case Hs:return wi;case Za:return Va;case na:return Ya;case Xl:return ra;case Zl:return qa}return e}function bc(e){if($J(e))switch(e){case ra:return"startAngle";case Xl:return"endAngle";case qa:return"outerRadius";case Zl:return"innerRadius"}return e}function Gs(e){switch(e){case Cn:return Ga;case wi:return Hs;case Va:return Za;case Ya:return na;case ra:return Xl;case qa:return Zl}}function eo(e){switch(e){case Cn:case Ga:return"width";case wi:case Hs:return"height"}}function zJ(e){switch(e){case Cn:return"xOffset";case wi:return"yOffset";case Ga:return"x2Offset";case Hs:return"y2Offset";case ra:return"thetaOffset";case qa:return"radiusOffset";case Xl:return"theta2Offset";case Zl:return"radius2Offset"}}function MI(e){switch(e){case Cn:return"xOffset";case wi:return"yOffset"}}function EFe(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const kFe=pe(TI),{x:aBe,y:sBe,x2:lBe,y2:uBe,xOffset:cBe,yOffset:fBe,latitude:dBe,longitude:hBe,latitude2:pBe,longitude2:mBe,theta:gBe,theta2:yBe,radius:vBe,radius2:xBe,...FI}=TI,RFe=pe(FI),PI={x:1,y:1},qs=pe(PI);function Bn(e){return e in PI}const NI={theta:1,radius:1},TFe=pe(NI);function tC(e){return e==="width"?Cn:wi}const BJ={xOffset:1,yOffset:1};function Kv(e){return e in BJ}const{text:_Be,tooltip:bBe,href:wBe,url:SBe,description:CBe,detail:EBe,key:kBe,order:RBe,...HJ}=FI,AFe=pe(HJ);function MFe(e){return!!FI[e]}function FFe(e){switch(e){case Jr:case Us:case Ws:case Kl:case Qr:case Jl:case Uc:case Wc:return!0;case Bc:case Hc:case Wd:return!1}}const UJ={...PI,...NI,...BJ,...HJ},nC=pe(UJ);function Ql(e){return!!UJ[e]}function PFe(e,t){return $Fe(e)[t]}const WJ={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:TBe,...NFe}=WJ;function $Fe(e){switch(e){case Jr:case Us:case Ws:case eC:case Xv:case KS:case bd:case JS:case im:case Jl:case Bc:case Hc:case Uc:case XS:case Al:case Ml:return WJ;case Cn:case wi:case zc:case jm:case Va:case Ya:return NFe;case Ga:case Hs:case Za:case na:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Kl:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Wc:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Qr:return{point:"always",geoshape:"always"};case Zv:return{text:"always"};case Wd:return{point:"always",square:"always",text:"always"};case QS:return{image:"always"};case ra:return{text:"always",arc:"always"};case qa:return{text:"always",arc:"always"};case Xl:case Zl:return{arc:"always"}}}function tR(e){switch(e){case Cn:case wi:case ra:case qa:case zc:case jm:case Kl:case Wd:case Uc:case Jl:case Bc:case Hc:case Ga:case Hs:case Xl:case Zl:return;case XS:case Al:case Ml:case Qr:case Wc:case Zv:case bd:case JS:case QS:case eC:return"discrete";case Jr:case Us:case Ws:return"flexible";case Va:case Ya:case Za:case na:case Xv:case KS:case im:return}}const OFe={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},IFe={count:1,min:1,max:1};function Ul(e){return!!e&&!!e.argmin}function Gc(e){return!!e&&!!e.argmax}function $I(e){return Oe(e)&&!!OFe[e]}const DFe=new Set(["count","valid","missing","distinct"]);function GJ(e){return Oe(e)&&DFe.has(e)}function LFe(e){return Oe(e)&&Ft(["min","max"],e)}const jFe=new Set(["count","sum","distinct","valid","missing"]),zFe=new Set(["mean","average","median","q1","q3","min","max"]);function qJ(e){return Nc(e)&&(e=pC(e,void 0)),"bin"+pe(e).map(t=>iC(e[t])?Sn(`_${t}_${_c(e[t])}`):Sn(`_${t}_${e[t]}`)).join("")}function fn(e){return e===!0||qd(e)&&!e.binned}function ki(e){return e==="binned"||qd(e)&&e.binned===!0}function qd(e){return Ie(e)}function iC(e){return e==null?void 0:e.param}function p6(e){switch(e){case Al:case Ml:case Kl:case Jr:case Us:case Ws:case Uc:case Jl:case Bc:case Hc:case Qr:return 6;case Wc:return 4;default:return 10}}function Jv(e){return!!(e!=null&&e.expr)}function Lr(e){const t=pe(e||{}),n={};for(const i of t)n[i]=uo(e[i]);return n}function VJ(e){const{anchor:t,frame:n,offset:i,orient:r,angle:o,limit:a,color:s,subtitleColor:l,subtitleFont:u,subtitleFontSize:c,subtitleFontStyle:d,subtitleFontWeight:h,subtitleLineHeight:m,subtitlePadding:g,...y}=e,x={...y,...s?{fill:s}:{}},b={...t?{anchor:t}:{},...n?{frame:n}:{},...i?{offset:i}:{},...r?{orient:r}:{},...o!==void 0?{angle:o}:{},...a!==void 0?{limit:a}:{}},w={...l?{subtitleColor:l}:{},...u?{subtitleFont:u}:{},...c?{subtitleFontSize:c}:{},...d?{subtitleFontStyle:d}:{},...h?{subtitleFontWeight:h}:{},...m?{subtitleLineHeight:m}:{},...g?{subtitlePadding:g}:{}},S=tm(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:x,subtitleMarkConfig:S,nonMarkTitleProperties:b,subtitle:w}}function ku(e){return Oe(e)||fe(e)&&Oe(e[0])}function Ve(e){return!!(e!=null&&e.signal)}function qc(e){return!!e.step}function BFe(e){return fe(e)?!1:"fields"in e&&!("data"in e)}function HFe(e){return fe(e)?!1:"fields"in e&&"data"in e}function Sl(e){return fe(e)?!1:"field"in e&&"data"in e}const UFe={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},WFe=pe(UFe),GFe={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},MM=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function YJ(e){const t=fe(e.condition)?e.condition.map(m6):m6(e.condition);return{...uo(e),condition:t}}function uo(e){if(Jv(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function m6(e){if(Jv(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function gn(e){if(Jv(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Ve(e)?e:e!==void 0?{value:e}:void 0}function qFe(e){return Ve(e)?e.signal:we(e)}function g6(e){return Ve(e)?e.signal:we(e.value)}function Ta(e){return Ve(e)?e.signal:e==null?null:we(e)}function VFe(e,t,n){for(const i of n){const r=Wl(i,t.markDef,t.config);r!==void 0&&(e[i]=gn(r))}return e}function ZJ(e){return[].concat(e.type,e.style??[])}function Jt(e,t,n,i={}){const{vgChannel:r,ignoreVgConfig:o}=i;return r&&t[r]!==void 0?t[r]:t[e]!==void 0?t[e]:o&&(!r||r===e)?void 0:Wl(e,t,n,i)}function Wl(e,t,n,{vgChannel:i}={}){return zn(i?$w(e,t,n.style):void 0,$w(e,t,n.style),i?n[t.type][i]:void 0,n[t.type][e],i?n.mark[i]:n.mark[e])}function $w(e,t,n){return XJ(e,ZJ(t),n)}function XJ(e,t,n){t=$e(t);let i;for(const r of t){const o=n[r];o&&o[e]!==void 0&&(i=o[e])}return i}function KJ(e,t){return $e(e).reduce((n,i)=>(n.field.push(Ae(i,t)),n.order.push(i.sort??"ascending"),n),{field:[],order:[]})}function JJ(e,t){const n=[...e];return t.forEach(i=>{for(const r of n)if(po(r,i))return;n.push(i)}),n}function QJ(e,t){return po(e,t)||!t?e:e?[...$e(e),...$e(t)].join(", "):t}function eQ(e,t){const n=e.value,i=t.value;if(n==null||i===null)return{explicit:e.explicit,value:null};if((ku(n)||Ve(n))&&(ku(i)||Ve(i)))return{explicit:e.explicit,value:QJ(n,i)};if(ku(n)||Ve(n))return{explicit:e.explicit,value:n};if(ku(i)||Ve(i))return{explicit:e.explicit,value:i};if(!ku(n)&&!Ve(n)&&!ku(i)&&!Ve(i))return{explicit:e.explicit,value:JJ(n,i)};throw new Error("It should never reach here")}function OI(e){return`Invalid specification ${an(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const YFe='Autosize "fit" only works for single views and layered views.';function y6(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function v6(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function x6(e){return e?`Dropping "fit-${e}" because spec has discrete ${eo(e)}.`:'Dropping "fit" because spec has discrete size.'}function II(e){return`Unknown field for ${e}. Cannot calculate view size.`}function _6(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function ZFe(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function XFe(e){return`The "nearest" transform is not supported for ${e} marks.`}function tQ(e){return`Selection not supported for ${e} yet.`}function KFe(e){return`Cannot find a selection named "${e}".`}const JFe="Scale bindings are currently only supported for scales with unbinned, continuous domains.",QFe="Legend bindings are only supported for selections over an individual field or encoding channel.";function ePe(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function tPe(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const nPe="The same selection must be used to override scale domains in a layered view.",iPe='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function rPe(e){return`Unknown repeated value "${e}".`}function b6(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const oPe="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function aPe(e){return`Unrecognized parse "${e}".`}function w6(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const sPe="Attempt to add the same child twice.";function lPe(e){return`Ignoring an invalid transform: ${an(e)}.`}const uPe='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function S6(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function cPe(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${an(t)} is overridden by a child projection ${an(n)}.`}const fPe="Arc marks uses theta channel rather than angle, replacing angle with theta.";function dPe(e){return`${e}Offset dropped because ${e} is continuous`}function hPe(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${an(n)}}.`}function nQ(e){return`Invalid field type "${e}".`}function pPe(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function mPe(e){return`Invalid aggregation operator "${e}".`}function iQ(e,t){const{fill:n,stroke:i}=t;return`Dropping color ${e} as the plot also has ${n&&i?"fill and stroke":n?"fill":"stroke"}.`}function gPe(e){return`Position range does not support relative band size for ${e}.`}function FM(e,t){return`Dropping ${an(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const yPe="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function rC(e,t,n){return`${e} dropped as it is incompatible with "${t}"${n?` when ${n}`:""}.`}function vPe(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function xPe(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function _Pe(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function bPe(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function nR(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function wPe(e){return`The ${e} for range marks cannot be an expression`}function SPe(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function CPe(e,t){return`Specified orient "${e}" overridden with "${t}".`}function EPe(e){return`Cannot use the scale property "${e}" with non-color channel.`}function kPe(e){return`Cannot use the relative band size with ${e} scale.`}function RPe(e){return`Using unaggregated domain with raw field has no effect (${an(e)}).`}function TPe(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function APe(e){return`Unaggregated domain is currently unsupported for log scale (${an(e)}).`}function MPe(e){return`Cannot apply size to non-oriented mark "${e}".`}function FPe(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function PPe(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function rQ(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function oQ(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function NPe(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${an(n)} and ${an(i)}). Using ${an(n)}.`}function $Pe(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${an(n)} and ${an(i)}). Using the union of the two domains.`}function OPe(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function IPe(e){return`Dropping sort property ${an(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const C6="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",DPe="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",LPe="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",jPe="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function zPe(e){return`Cannot stack "${e}" if there is already "${e}2".`}function BPe(e){return`Cannot stack non-linear scale (${e}).`}function HPe(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function Ow(e,t){return`Invalid ${e}: ${an(t)}.`}function UPe(e){return`Dropping day from datetime ${an(e)} as day cannot be combined with other units.`}function WPe(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function GPe(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function qPe(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function E6(e){return`1D error band does not support ${e}.`}function aQ(e){return`Channel ${e} is required for "binned" bin.`}function VPe(e){return`Channel ${e} should not be used with "binned" bin.`}function YPe(e){return`Domain for ${e} is required for threshold scale.`}const sQ=TP(RP);let rm=sQ;function ZPe(e){return rm=e,rm}function XPe(){return rm=sQ,rm}function xe(...e){rm.warn(...e)}function KPe(...e){rm.debug(...e)}function Vd(e){if(e&&Ie(e)){for(const t of LI)if(t in e)return!0}return!1}const lQ=["january","february","march","april","may","june","july","august","september","october","november","december"],JPe=lQ.map(e=>e.substr(0,3)),uQ=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],QPe=uQ.map(e=>e.substr(0,3));function eNe(e){if(ZS(e)&&(e=+e),zt(e))return e>4&&xe(Ow("quarter",e)),e-1;throw new Error(Ow("quarter",e))}function tNe(e){if(ZS(e)&&(e=+e),zt(e))return e-1;{const t=e.toLowerCase(),n=lQ.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=JPe.indexOf(i);if(r!==-1)return r;throw new Error(Ow("month",e))}}function nNe(e){if(ZS(e)&&(e=+e),zt(e))return e%7;{const t=e.toLowerCase(),n=uQ.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=QPe.indexOf(i);if(r!==-1)return r;throw new Error(Ow("day",e))}}function DI(e,t){const n=[];if(t&&e.day!==void 0&&pe(e).length>1&&(xe(UPe(e)),e=ht(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const i=t?tNe(e.month):e.month;n.push(i)}else if(e.quarter!==void 0){const i=t?eNe(e.quarter):e.quarter;n.push(zt(i)?i*3:`${i}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const i=t?nNe(e.day):e.day;n.push(zt(i)?i+1:`${i}+1`)}else n.push(1);for(const i of["hours","minutes","seconds","milliseconds"]){const r=e[i];n.push(typeof r>"u"?0:r)}return n}function wd(e){const n=DI(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function iNe(e){const n=DI(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function rNe(e){const t=DI(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const cQ={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},LI=pe(cQ);function oNe(e){return!!cQ[e]}function Yd(e){return Ie(e)?e.binned:fQ(e)}function fQ(e){return e&&e.startsWith("binned")}function jI(e){return e.startsWith("utc")}function aNe(e){return e.substring(3)}const sNe={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function oC(e){return LI.filter(t=>hQ(e,t))}function dQ(e){const t=oC(e);return t[t.length-1]}function hQ(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function lNe(e,t,{end:n}={end:!1}){const i=EI(t),r=jI(e)?"utc":"";function o(l){return l==="quarter"?`(${r}quarter(${i})-1)`:`${r}${l}(${i})`}let a;const s={};for(const l of LI)hQ(e,l)&&(s[l]=o(l),a=l);return n&&(s[a]+="+1"),iNe(s)}function pQ(e){if(!e)return;const t=oC(e);return`timeUnitSpecifier(${an(t)}, ${an(sNe)})`}function uNe(e,t,n){if(!e)return;const i=pQ(e);return`${n||jI(e)?"utc":"time"}Format(${t}, ${i})`}function xi(e){if(!e)return;let t;return Oe(e)?fQ(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:Ie(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),jI(t.unit)&&(t.utc=!0,t.unit=aNe(t.unit)),t}function cNe(e){const{utc:t,...n}=xi(e);return n.unit?(t?"utc":"")+pe(n).map(i=>Sn(`${i==="unit"?"":`_${i}_`}${n[i]}`)).join(""):(t?"utc":"")+"timeunit"+pe(n).map(i=>Sn(`_${i}_${n[i]}`)).join("")}function mQ(e,t=n=>n){const n=xi(e),i=dQ(n.unit);if(i&&i!=="day"){const r={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:o,part:a}=gQ(i,n.step),s={...r,[a]:+r[a]+o};return`${t(wd(s))} - ${t(wd(r))}`}}const fNe={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function dNe(e){return!!fNe[e]}function gQ(e,t=1){if(dNe(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function hNe(e){return e==null?void 0:e.param}function zI(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function BI(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function HI(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function UI(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function WI(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function GI(e){if(e!=null&&e.field){if(fe(e.range)&&e.range.length===2)return!0;if(Ve(e.range))return!0}return!1}function qI(e){return!!(e!=null&&e.field)&&(fe(e.oneOf)||fe(e.in))}function pNe(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function yQ(e){return qI(e)||zI(e)||GI(e)||BI(e)||UI(e)||HI(e)||WI(e)}function as(e,t){return mC(e,{timeUnit:t,wrapTime:!0})}function mNe(e,t){return e.map(n=>as(n,t))}function vQ(e,t=!0){const{field:n}=e,i=xi(e.timeUnit),{unit:r,binned:o}=i||{},a=Ae(e,{expr:"datum"}),s=r?`time(${o?a:lNe(r,n)})`:a;if(zI(e))return`${s}===${as(e.equal,r)}`;if(BI(e)){const l=e.lt;return`${s}<${as(l,r)}`}else if(UI(e)){const l=e.gt;return`${s}>${as(l,r)}`}else if(HI(e)){const l=e.lte;return`${s}<=${as(l,r)}`}else if(WI(e)){const l=e.gte;return`${s}>=${as(l,r)}`}else{if(qI(e))return`indexof([${mNe(e.oneOf,r).join(",")}], ${s}) !== -1`;if(pNe(e))return VI(s,e.valid);if(GI(e)){const{range:l}=e,u=Ve(l)?{signal:`${l.signal}[0]`}:l[0],c=Ve(l)?{signal:`${l.signal}[1]`}:l[1];if(u!==null&&c!==null&&t)return"inrange("+s+", ["+as(u,r)+", "+as(c,r)+"])";const d=[];return u!==null&&d.push(`${s} >= ${as(u,r)}`),c!==null&&d.push(`${s} <= ${as(c,r)}`),d.length>0?d.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${an(e)}`)}function VI(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function gNe(e){return yQ(e)&&e.timeUnit?{...e,timeUnit:xi(e.timeUnit)}:e}const Qv={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function yNe(e){return e==="quantitative"||e==="temporal"}function xQ(e){return e==="ordinal"||e==="nominal"}const Sd=Qv.quantitative,YI=Qv.ordinal,om=Qv.temporal,ZI=Qv.nominal,zm=Qv.geojson;function vNe(e){if(e)switch(e=e.toLowerCase(),e){case"q":case Sd:return"quantitative";case"t":case om:return"temporal";case"o":case YI:return"ordinal";case"n":case ZI:return"nominal";case zm:return"geojson"}}const Yr={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},PM={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function xNe(e,t){const n=PM[e],i=PM[t];return n===i||n==="ordinal-position"&&i==="time"||i==="ordinal-position"&&n==="time"}const _Ne={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function k6(e){return _Ne[e]}const _Q=new Set(["linear","log","pow","sqrt","symlog"]),bQ=new Set([..._Q,"time","utc"]);function wQ(e){return _Q.has(e)}const SQ=new Set(["quantile","quantize","threshold"]),bNe=new Set([...bQ,...SQ,"sequential","identity"]),wNe=new Set(["ordinal","bin-ordinal","point","band"]);function _i(e){return wNe.has(e)}function Co(e){return bNe.has(e)}function Aa(e){return bQ.has(e)}function am(e){return SQ.has(e)}const SNe={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function CNe(e){return!Oe(e)&&!!e.name}function CQ(e){return e==null?void 0:e.param}function ENe(e){return e==null?void 0:e.unionWith}function kNe(e){return Ie(e)&&"field"in e}const RNe={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:ABe,domain:MBe,range:FBe,rangeMax:PBe,rangeMin:NBe,scheme:$Be,...TNe}=RNe,ANe=pe(TNe);function NM(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Aa(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Aa(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Aa(e);case"nice":return Aa(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Co(e)&&!Ft(["log","time","utc","threshold","quantile"],e)}}function EQ(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return xp(e)?void 0:EPe(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function MNe(e,t){return Ft([YI,ZI],t)?e===void 0||_i(e):t===om?Ft([Yr.TIME,Yr.UTC,void 0],e):t===Sd?wQ(e)||am(e)||e===void 0:!0}function FNe(e,t,n=!1){if(!Ql(e))return!1;switch(e){case Cn:case wi:case zc:case jm:case ra:case qa:return Aa(t)||t==="band"?!0:t==="point"?!n:!1;case Kl:case Uc:case Jl:case Bc:case Hc:case Wd:return Aa(t)||am(t)||Ft(["band","point","ordinal"],t);case Jr:case Us:case Ws:return t!=="band";case Wc:case Qr:return t==="ordinal"||am(t)}}const Er={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},kQ=Er.arc,aC=Er.area,sC=Er.bar,PNe=Er.image,lC=Er.line,uC=Er.point,NNe=Er.rect,Iw=Er.rule,RQ=Er.text,XI=Er.tick,$Ne=Er.trail,KI=Er.circle,JI=Er.square,TQ=Er.geoshape;function Vc(e){return["line","area","trail"].includes(e)}function rv(e){return["rect","bar","image","arc"].includes(e)}const ONe=new Set(pe(Er));function Ns(e){return e.type}const INe=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],DNe=["fill","fillOpacity"],LNe=[...INe,...DNe],jNe={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},R6=pe(jNe),zNe={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},BNe={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},HNe={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},AQ=pe(HNe);function Cd(e){return e&&e.band!=null}const UNe={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},MQ=5,WNe={binSpacing:1,continuousBandSize:MQ,minBandSize:.25,timeUnitBandPosition:.5},GNe={binSpacing:0,continuousBandSize:MQ,minBandSize:.25,timeUnitBandPosition:.5},qNe={thickness:1};function VNe(e){return Ns(e)?e.type:e}function QI(e){const{channel:t,channelDef:n,markDef:i,scale:r,config:o}=e,a=tD(e);return ve(n)&&!GJ(n.aggregate)&&r&&Aa(r.get("type"))?YNe({fieldDef:n,channel:t,markDef:i,ref:a,config:o}):a}function YNe({fieldDef:e,channel:t,markDef:n,ref:i,config:r}){return Vc(n.type)?i:Jt("invalid",n,r)===null?[ZNe(e,t),i]:i}function ZNe(e,t){const n=eD(e,!0),r=Gd(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...r}}function eD(e,t=!0){return VI(Oe(e)?e:Ae(e,{expr:"datum"}),!t)}function XNe(e){const{datum:t}=e;return Vd(t)?wd(t):`${an(t)}`}function Zf(e,t,n,i){const r={};if(t&&(r.scale=t),Vs(e)){const{datum:o}=e;Vd(o)?r.signal=wd(o):Ve(o)?r.signal=o.signal:Jv(o)?r.signal=o.expr:r.value=o}else r.field=Ae(e,n);if(i){const{offset:o,band:a}=i;o&&(r.offset=o),a&&(r.band=a)}return r}function Dw({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:i,startSuffix:r,endSuffix:o="end",bandPosition:a=.5}){const s=!Ve(a)&&0<a&&a<1?"datum":void 0,l=Ae(t,{expr:s,suffix:r}),u=n!==void 0?Ae(n,{expr:s}):Ae(t,{suffix:o,expr:s}),c={};if(a===0||a===1){c.scale=e;const d=a===0?l:u;c.field=d}else{const d=Ve(a)?`(1-${a.signal}) * ${l} + ${a.signal} * ${u}`:`${1-a} * ${l} + ${a} * ${u}`;c.signal=`scale("${e}", ${d})`}return i&&(c.offset=i),c}function KNe({scaleName:e,fieldDef:t}){const n=Ae(t,{expr:"datum"}),i=Ae(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${i}) - scale("${e}", ${n}))`}function tD({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:o,scale:a,stack:s,offset:l,defaultRef:u,bandPosition:c}){if(t){if(mt(t)){const d=a==null?void 0:a.get("type");if(br(t)){c??(c=wc({fieldDef:t,fieldDef2:n,markDef:i,config:r}));const{bin:h,timeUnit:m,type:g}=t;if(fn(h)||c&&m&&g===om)return s!=null&&s.impute?Zf(t,o,{binSuffix:"mid"},{offset:l}):c&&!_i(d)?Dw({scaleName:o,fieldOrDatumDef:t,bandPosition:c,offset:l}):Zf(t,o,i1(t,e)?{binSuffix:"range"}:{},{offset:l});if(ki(h)){if(ve(n))return Dw({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:l});xe(aQ(e===Cn?Ga:Hs))}}return Zf(t,o,_i(d)?{binSuffix:"range"}:{},{offset:l,band:d==="band"?c??t.bandPosition??.5:void 0})}else if(za(t)){const d=t.value,h=l?{offset:l}:{};return{...iy(e,d),...h}}}return _t(u)&&(u=u()),u&&{...u,...l?{offset:l}:{}}}function iy(e,t){return Ft(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Ft(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:gn(t)}function Ed(e){return e&&e!=="number"&&e!=="time"}function FQ(e,t,n){return`${e}(${t}${n?`, ${an(n)}`:""})`}const JNe="  ";function nD({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:o}){var l,u;if(Ed(n))return Ma({fieldOrDatumDef:e,format:t,formatType:n,expr:i,config:o});const a=PQ(e,i,r),s=sm(e);if(t===void 0&&n===void 0&&o.customFormatTypes){if(s==="quantitative"){if(r&&o.normalizedNumberFormatType)return Ma({fieldOrDatumDef:e,format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,expr:i,config:o});if(o.numberFormatType)return Ma({fieldOrDatumDef:e,format:o.numberFormat,formatType:o.numberFormatType,expr:i,config:o})}if(s==="temporal"&&o.timeFormatType&&ve(e)&&e.timeUnit===void 0)return Ma({fieldOrDatumDef:e,format:o.timeFormat,formatType:o.timeFormatType,expr:i,config:o})}if(um(e)){const c=e$e({field:a,timeUnit:ve(e)?(l=xi(e.timeUnit))==null?void 0:l.unit:void 0,format:t,formatType:o.timeFormatType,rawTimeFormat:o.timeFormat,isUTCScale:Zd(e)&&((u=e.scale)==null?void 0:u.type)===Yr.UTC});return c?{signal:c}:void 0}if(t=$M({type:s,specifiedFormat:t,config:o,normalizeStack:r}),ve(e)&&fn(e.bin)){const c=Ae(e,{expr:i,binSuffix:"end"});return{signal:e1(a,c,t,n,o)}}else return t||sm(e)==="quantitative"?{signal:`${OQ(a,t)}`}:{signal:`isValid(${a}) ? ${a} : ""+${a}`}}function PQ(e,t,n){return ve(e)?n?`${Ae(e,{expr:t,suffix:"end"})}-${Ae(e,{expr:t,suffix:"start"})}`:Ae(e,{expr:t}):XNe(e)}function Ma({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:o,field:a}){if(a??(a=PQ(e,i,r)),a!=="datum.value"&&ve(e)&&fn(e.bin)){const s=Ae(e,{expr:i,binSuffix:"end"});return{signal:e1(a,s,t,n,o)}}return{signal:FQ(n,a,t)}}function NQ(e,t,n,i,r,o){var a;if(!(Oe(i)&&Ed(i))&&!(n===void 0&&i===void 0&&r.customFormatTypes&&sm(e)==="quantitative"&&(r.normalizedNumberFormatType&&lm(e)&&e.stack==="normalize"||r.numberFormatType))){if(lm(e)&&e.stack==="normalize"&&r.normalizedNumberFormat)return $M({type:"quantitative",config:r,normalizeStack:!0});if(um(e)){const s=ve(e)?(a=xi(e.timeUnit))==null?void 0:a.unit:void 0;return s===void 0&&r.customFormatTypes&&r.timeFormatType?void 0:QNe({specifiedFormat:n,timeUnit:s,config:r,omitTimeFormatConfig:o})}return $M({type:t,specifiedFormat:n,config:r})}}function $Q(e,t,n){var i;if(e&&(Ve(e)||e==="number"||e==="time"))return e;if(um(t)&&n!=="time"&&n!=="utc")return ve(t)&&((i=xi(t==null?void 0:t.timeUnit))!=null&&i.utc)?"utc":"time"}function $M({type:e,specifiedFormat:t,config:n,normalizeStack:i}){if(Oe(t))return t;if(e===Sd)return i?n.normalizedNumberFormat:n.numberFormat}function QNe({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:i}){return e||(t?{signal:pQ(t)}:i?void 0:n.timeFormat)}function OQ(e,t){return`format(${e}, "${t||""}")`}function T6(e,t,n,i){return Ed(n)?FQ(n,e,t):OQ(e,(Oe(t)?t:void 0)??i.numberFormat)}function e1(e,t,n,i,r){if(n===void 0&&i===void 0&&r.customFormatTypes&&r.numberFormatType)return e1(e,t,r.numberFormat,r.numberFormatType,r);const o=T6(e,n,i,r),a=T6(t,n,i,r);return`${VI(e,!1)} ? "null" : ${o} + "${JNe}" + ${a}`}function e$e({field:e,timeUnit:t,format:n,formatType:i,rawTimeFormat:r,isUTCScale:o}){return!t||n?!t&&i?`${i}(${e}, '${n}')`:(n=Oe(n)?n:r,`${o?"utc":"time"}Format(${e}, '${n}')`):uNe(t,e,o)}const cC="min",t$e={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function A6(e){return e in t$e}function IQ(e){return!!(e!=null&&e.encoding)}function Cs(e){return e&&(e.op==="count"||!!e.field)}function DQ(e){return e&&fe(e)}function t1(e){return"row"in e||"column"in e}function iD(e){return!!e&&"header"in e}function fC(e){return"facet"in e}function n$e(e){return e.param}function i$e(e){return e&&!Oe(e)&&"repeat"in e}function M6(e){const{field:t,timeUnit:n,bin:i,aggregate:r}=e;return{...n?{timeUnit:n}:{},...i?{bin:i}:{},...r?{aggregate:r}:{},field:t}}function rD(e){return"sort"in e}function wc({fieldDef:e,fieldDef2:t,markDef:n,config:i}){if(mt(e)&&e.bandPosition!==void 0)return e.bandPosition;if(ve(e)){const{timeUnit:r,bin:o}=e;if(r&&!t)return Wl("timeUnitBandPosition",n,i);if(fn(o))return .5}}function LQ({channel:e,fieldDef:t,fieldDef2:n,markDef:i,config:r,scaleType:o,useVlSizeChannel:a}){var u,c,d;const s=eo(e),l=Jt(a?"size":s,i,r,{vgChannel:s});if(l!==void 0)return l;if(ve(t)){const{timeUnit:h,bin:m}=t;if(h&&!n)return{band:Wl("timeUnitBandSize",i,r)};if(fn(m)&&!_i(o))return{band:1}}if(rv(i.type))return o?_i(o)?((u=r[i.type])==null?void 0:u.discreteBandSize)||{band:1}:(c=r[i.type])==null?void 0:c.continuousBandSize:(d=r[i.type])==null?void 0:d.discreteBandSize}function jQ(e,t,n,i){return fn(e.bin)||e.timeUnit&&br(e)&&e.type==="temporal"?wc({fieldDef:e,fieldDef2:t,markDef:n,config:i})!==void 0:!1}function zQ(e){return e&&!!e.sort&&!e.field}function dC(e){return e&&"condition"in e}function hC(e){const t=e==null?void 0:e.condition;return!!t&&!fe(t)&&ve(t)}function n1(e){const t=e==null?void 0:e.condition;return!!t&&!fe(t)&&mt(t)}function r$e(e){const t=e==null?void 0:e.condition;return!!t&&(fe(t)||za(t))}function ve(e){return e&&(!!e.field||e.aggregate==="count")}function sm(e){return e==null?void 0:e.type}function Vs(e){return e&&"datum"in e}function Uu(e){return br(e)&&!jw(e)||Lw(e)}function F6(e){return br(e)&&e.type==="quantitative"&&!e.bin||Lw(e)}function Lw(e){return Vs(e)&&zt(e.datum)}function mt(e){return ve(e)||Vs(e)}function br(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function za(e){return e&&"value"in e&&"value"in e}function Zd(e){return e&&("scale"in e||"sort"in e)}function lm(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function BQ(e){return e&&"legend"in e}function HQ(e){return e&&("format"in e||"formatType"in e)}function o$e(e){return Vr(e,["legend","axis","header","scale"])}function a$e(e){return"op"in e}function Ae(e,t={}){let n=e.field;const i=t.prefix;let r=t.suffix,o="";if(l$e(e))n=FJ("count");else{let a;if(!t.nofn)if(a$e(e))a=e.op;else{const{bin:s,aggregate:l,timeUnit:u}=e;fn(s)?(a=qJ(s),r=(t.binSuffix??"")+(t.suffix??"")):l?Gc(l)?(o=`["${n}"]`,n=`argmax_${l.argmax}`):Ul(l)?(o=`["${n}"]`,n=`argmin_${l.argmin}`):a=String(l):u&&!Yd(u)&&(a=cNe(u),r=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}a&&(n=n?`${a}_${n}`:a)}return r&&(n=`${n}_${r}`),i&&(n=`${i}_${n}`),t.forAs?kI(n):t.expr?TJ(n,t.expr)+o:ta(n)+o}function jw(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return ve(e)&&!!e.bin;case"temporal":return!1}throw new Error(nQ(e.type))}function s$e(e){var t;return Zd(e)&&am((t=e.scale)==null?void 0:t.type)}function l$e(e){return e.aggregate==="count"}function u$e(e,t){var a;const{field:n,bin:i,timeUnit:r,aggregate:o}=e;if(o==="count")return t.countTitle;if(fn(i))return`${n} (binned)`;if(r&&!Yd(r)){const s=(a=xi(r))==null?void 0:a.unit;if(s)return`${n} (${oC(s).join("-")})`}else if(o)return Gc(o)?`${n} for max ${o.argmax}`:Ul(o)?`${n} for min ${o.argmin}`:`${Yv(o)} of ${n}`;return n}function c$e(e){const{aggregate:t,bin:n,timeUnit:i,field:r}=e;if(Gc(t))return`${r} for argmax(${t.argmax})`;if(Ul(t))return`${r} for argmin(${t.argmin})`;const o=i&&!Yd(i)?xi(i):void 0,a=t||(o==null?void 0:o.unit)||(o==null?void 0:o.maxbins)&&"timeunit"||fn(n)&&"bin";return a?`${a.toUpperCase()}(${r})`:r}const UQ=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return c$e(e);default:return u$e(e,t)}};let WQ=UQ;function GQ(e){WQ=e}function f$e(){GQ(UQ)}function _p(e,t,{allowDisabling:n,includeDefault:i=!0}){var s;const r=(s=oD(e))==null?void 0:s.title;if(!ve(e))return r??e.title;const o=e,a=i?aD(o,t):void 0;return n?zn(r,o.title,a):r??o.title??a}function oD(e){if(lm(e)&&e.axis)return e.axis;if(BQ(e)&&e.legend)return e.legend;if(iD(e)&&e.header)return e.header}function aD(e,t){return WQ(e,t)}function zw(e){if(HQ(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=oD(e)??{},{format:n,formatType:i}=t;return{format:n,formatType:i}}}function d$e(e,t){var o;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(rD(e)&&fe(e.sort))return"ordinal";const{aggregate:n,bin:i,timeUnit:r}=e;if(r)return"temporal";if(i||n&&!Gc(n)&&!Ul(n))return"quantitative";if(Zd(e)&&((o=e.scale)!=null&&o.type))switch(PM[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function $s(e){if(ve(e))return e;if(hC(e))return e.condition}function ti(e){if(mt(e))return e;if(n1(e))return e.condition}function qQ(e,t,n,i={}){if(Oe(e)||zt(e)||Nc(e)){const r=Oe(e)?"string":zt(e)?"number":"boolean";return xe(hPe(t,r,e)),{value:e}}return mt(e)?Bw(e,t,n,i):n1(e)?{...e,condition:Bw(e.condition,t,n,i)}:e}function Bw(e,t,n,i){if(HQ(e)){const{format:r,formatType:o,...a}=e;if(Ed(o)&&!n.customFormatTypes)return xe(S6(t)),Bw(a,t,n,i)}else{const r=lm(e)?"axis":BQ(e)?"legend":iD(e)?"header":null;if(r&&e[r]){const{format:o,formatType:a,...s}=e[r];if(Ed(a)&&!n.customFormatTypes)return xe(S6(t)),Bw({...e,[r]:s},t,n,i)}}return ve(e)?sD(e,t,i):h$e(e)}function h$e(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=zt(n)?"quantitative":Oe(n)?"nominal":Vd(n)?"temporal":void 0,{...e,type:t}}function sD(e,t,{compositeMark:n=!1}={}){const{aggregate:i,timeUnit:r,bin:o,field:a}=e,s={...e};if(!n&&i&&!$I(i)&&!Gc(i)&&!Ul(i)&&(xe(mPe(i)),delete s.aggregate),r&&(s.timeUnit=xi(r)),a&&(s.field=`${a}`),fn(o)&&(s.bin=pC(o,t)),ki(o)&&!Bn(t)&&xe(VPe(t)),br(s)){const{type:l}=s,u=vNe(l);l!==u&&(s.type=u),l!=="quantitative"&&GJ(i)&&(xe(pPe(l,i)),s.type="quantitative")}else if(!jJ(t)){const l=d$e(s,t);s.type=l}if(br(s)){const{compatible:l,warning:u}=p$e(s,t)||{};l===!1&&xe(u)}if(rD(s)&&Oe(s.sort)){const{sort:l}=s;if(A6(l))return{...s,sort:{encoding:l}};const u=l.substr(1);if(l.charAt(0)==="-"&&A6(u))return{...s,sort:{encoding:u,order:"descending"}}}if(iD(s)){const{header:l}=s;if(l){const{orient:u,...c}=l;if(u)return{...s,header:{...c,labelOrient:l.labelOrient||u,titleOrient:l.titleOrient||u}}}}return s}function pC(e,t){return Nc(e)?{maxbins:p6(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:p6(t)}:e}const Mh={compatible:!0};function p$e(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Al:case Ml:case XS:return jw(e)?Mh:{compatible:!1,warning:xPe(t)};case Cn:case wi:case zc:case jm:case Jr:case Us:case Ws:case Zv:case Xv:case KS:case bd:case JS:case QS:case Wd:case ra:case qa:case eC:return Mh;case Ya:case na:case Va:case Za:return n!==Sd?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:Mh;case Jl:case Bc:case Hc:case Uc:case Kl:case Xl:case Zl:case Ga:case Hs:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:Mh;case Qr:case Wc:return!jw(e)&&!s$e(e)?{compatible:!1,warning:_Pe(t)}:Mh;case im:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:Mh}}function um(e){const{formatType:t}=zw(e);return t==="time"||!t&&m$e(e)}function m$e(e){return e&&(e.type==="temporal"||ve(e)&&!!e.timeUnit)}function mC(e,{timeUnit:t,type:n,wrapTime:i,undefinedIfExprNotRequired:r}){var l;const o=t&&((l=xi(t))==null?void 0:l.unit);let a=o||n==="temporal",s;return Jv(e)?s=e.expr:Ve(e)?s=e.signal:Vd(e)?(a=!0,s=wd(e)):(Oe(e)||zt(e))&&a&&(s=`datetime(${an(e)})`,oNe(o)&&(zt(e)&&e<1e4||Oe(e)&&isNaN(Date.parse(e)))&&(s=wd({[o]:e}))),s?i&&a?`time(${s})`:s:r?void 0:an(e)}function VQ(e,t){const{type:n}=e;return t.map(i=>{const r=ve(e)&&!Yd(e.timeUnit)?e.timeUnit:void 0,o=mC(i,{timeUnit:r,type:n,undefinedIfExprNotRequired:!0});return o!==void 0?{signal:o}:i})}function i1(e,t){return fn(e.bin)?Ql(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const P6={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function r1(e){return e==null?void 0:e.condition}const YQ=["domain","grid","labels","ticks","title"],g$e={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},ZQ={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},y$e={...ZQ,style:1,labelExpr:1,encoding:1};function N6(e){return!!y$e[e]}const v$e={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},XQ=pe(v$e);function eu(e){return"mark"in e}class gC{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return eu(t)?VNe(t.mark)===this.name:!1}}function Xf(e,t){const n=e&&e[t];return n?fe(n)?xd(n,i=>!!i.field):ve(n)||hC(n):!1}function KQ(e,t){const n=e&&e[t];return n?fe(n)?xd(n,i=>!!i.field):ve(n)||Vs(n)||n1(n):!1}function JQ(e,t){if(Bn(t)){const n=e[t];if((ve(n)||Vs(n))&&(xQ(n.type)||ve(n)&&n.timeUnit)){const i=MI(t);return KQ(e,i)}}return!1}function lD(e){return xd(_Fe,t=>{if(Xf(e,t)){const n=e[t];if(fe(n))return xd(n,i=>!!i.aggregate);{const i=$s(n);return i&&!!i.aggregate}}return!1})}function QQ(e,t){const n=[],i=[],r=[],o=[],a={};return uD(e,(s,l)=>{if(ve(s)){const{field:u,aggregate:c,bin:d,timeUnit:h,...m}=s;if(c||h||d){const g=oD(s),y=g==null?void 0:g.title;let x=Ae(s,{forAs:!0});const b={...y?[]:{title:_p(s,t,{allowDisabling:!0})},...m,field:x};if(c){let w;if(Gc(c)?(w="argmax",x=Ae({op:"argmax",field:c.argmax},{forAs:!0}),b.field=`${x}.${u}`):Ul(c)?(w="argmin",x=Ae({op:"argmin",field:c.argmin},{forAs:!0}),b.field=`${x}.${u}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(w=c),w){const S={op:w,as:x};u&&(S.field=u),o.push(S)}}else if(n.push(x),br(s)&&fn(d)){if(i.push({bin:d,field:u,as:x}),n.push(Ae(s,{binSuffix:"end"})),i1(s,l)&&n.push(Ae(s,{binSuffix:"range"})),Bn(l)){const w={field:`${x}_end`};a[`${l}2`]=w}b.bin="binned",jJ(l)||(b.type=Sd)}else if(h&&!Yd(h)){r.push({timeUnit:h,field:u,as:x});const w=br(s)&&s.type!==om&&"time";w&&(l===Zv||l===bd?b.formatType=w:MFe(l)?b.legend={formatType:w,...b.legend}:Bn(l)&&(b.axis={formatType:w,...b.axis}))}a[l]=b}else n.push(u),a[l]=e[l]}else a[l]=e[l]}),{bins:i,timeUnits:r,aggregate:o,groupby:n,encoding:a}}function x$e(e,t,n){const i=PFe(t,n);if(i){if(i==="binned"){const r=e[t===Ga?Cn:wi];return!!(ve(r)&&ve(e[t])&&ki(r.bin))}}else return!1;return!0}function _$e(e,t,n,i){const r={};for(const o of pe(e))LJ(o)||xe(vPe(o));for(let o of kFe){if(!e[o])continue;const a=e[o];if(Kv(o)){const s=EFe(o),l=r[s];if(ve(l)&&yNe(l.type)&&ve(a)&&!l.timeUnit){xe(dPe(s));continue}}if(o==="angle"&&t==="arc"&&!e.theta&&(xe(fPe),o=ra),!x$e(e,o,t)){xe(rC(o,t));continue}if(o===Kl&&t==="line"){const s=$s(e[o]);if(s!=null&&s.aggregate){xe(yPe);continue}}if(o===Jr&&(n?"fill"in e:"stroke"in e)){xe(iQ("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(o===Xv||o===im&&!fe(a)&&!za(a)||o===bd&&fe(a)){if(a){if(o===im){const s=e[o];if(zQ(s)){r[o]=s;continue}}r[o]=$e(a).reduce((s,l)=>(ve(l)?s.push(sD(l,o)):xe(FM(l,o)),s),[])}}else{if(o===bd&&a===null)r[o]=null;else if(!ve(a)&&!Vs(a)&&!za(a)&&!dC(a)&&!Ve(a)){xe(FM(a,o));continue}r[o]=qQ(a,o,i)}}return r}function yC(e,t){const n={};for(const i of pe(e)){const r=qQ(e[i],i,t,{compositeMark:!0});n[i]=r}return n}function b$e(e){const t=[];for(const n of pe(e))if(Xf(e,n)){const i=e[n],r=$e(i);for(const o of r)ve(o)?t.push(o):hC(o)&&t.push(o.condition)}return t}function uD(e,t,n){if(e)for(const i of pe(e)){const r=e[i];if(fe(r))for(const o of r)t.call(n,o,i);else t.call(n,r,i)}}function w$e(e,t,n,i){return e?pe(e).reduce((r,o)=>{const a=e[o];return fe(a)?a.reduce((s,l)=>t.call(i,s,l,o),r):t.call(i,r,a,o)},n):n}function eee(e,t){return pe(t).reduce((n,i)=>{switch(i){case Cn:case wi:case JS:case eC:case QS:case Ga:case Hs:case zc:case jm:case ra:case Xl:case qa:case Zl:case Va:case Ya:case Za:case na:case Zv:case Qr:case Wd:case bd:return n;case im:if(e==="line"||e==="trail")return n;case Xv:case KS:{const r=t[i];if(fe(r)||ve(r))for(const o of $e(r))o.aggregate||n.push(Ae(o,{}));return n}case Kl:if(e==="trail")return n;case Jr:case Us:case Ws:case Jl:case Bc:case Hc:case Wc:case Uc:{const r=$s(t[i]);return r&&!r.aggregate&&n.push(Ae(r,{})),n}}},[])}function S$e(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let i,r;if(fe(t)){for(const o of t)o.aggregate?(i||(i=[]),i.push(o)):(r||(r=[]),r.push(o));i&&(n.tooltip=i)}else t.aggregate?n.tooltip=t:r=t;return fe(r)&&r.length===1&&(r=r[0]),{customTooltipWithoutAggregatedField:r,filteredEncoding:n}}function OM(e,t,n,i=!0){if("tooltip"in n)return{tooltip:n.tooltip};const r=e.map(({fieldPrefix:a,titlePrefix:s})=>{const l=i?` of ${cD(t)}`:"";return{field:a+t.field,type:t.type,title:Ve(s)?{signal:`${s}"${escape(l)}"`}:s+l}}),o=b$e(n).map(o$e);return{tooltip:[...r,...gs(o,Mt)]}}function cD(e){const{title:t,field:n}=e;return zn(t,n)}function fD(e,t,n,i,r){const{scale:o,axis:a}=n;return({partName:s,mark:l,positionPrefix:u,endPositionPrefix:c=void 0,extraEncoding:d={}})=>{const h=cD(n);return tee(e,s,r,{mark:l,encoding:{[t]:{field:`${u}_${n.field}`,type:n.type,...h!==void 0?{title:h}:{},...o!==void 0?{scale:o}:{},...a!==void 0?{axis:a}:{}},...Oe(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...i,...d}})}}function tee(e,t,n,i){const{clip:r,color:o,opacity:a}=e,s=e.type;return e[t]||e[t]===void 0&&n[t]?[{...i,mark:{...n[t],...r?{clip:r}:{},...o?{color:o}:{},...a?{opacity:a}:{},...Ns(i.mark)?i.mark:{type:i.mark},style:`${s}-${String(t)}`,...Nc(e[t])?{}:e[t]}}]:[]}function nee(e,t,n){const{encoding:i}=e,r=t==="vertical"?"y":"x",o=i[r],a=i[`${r}2`],s=i[`${r}Error`],l=i[`${r}Error2`];return{continuousAxisChannelDef:zx(o,n),continuousAxisChannelDef2:zx(a,n),continuousAxisChannelDefError:zx(s,n),continuousAxisChannelDefError2:zx(l,n),continuousAxis:r}}function zx(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...i}=e;return n!==t&&xe(qPe(n,t)),i}else return e}function iee(e,t){const{mark:n,encoding:i}=e,{x:r,y:o}=i;if(Ns(n)&&n.orient)return n.orient;if(Uu(r)){if(Uu(o)){const a=ve(r)&&r.aggregate,s=ve(o)&&o.aggregate;if(!a&&s===t)return"vertical";if(!s&&a===t)return"horizontal";if(a===t&&s===t)throw new Error("Both x and y cannot have aggregate");return um(o)&&!um(r)?"horizontal":"vertical"}return"horizontal"}else{if(Uu(o))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const Hw="boxplot",C$e=["box","median","outliers","rule","ticks"],E$e=new gC(Hw,oee);function ree(e){return zt(e)?"tukey":e}function oee(e,{config:t}){e={...e,encoding:yC(e.encoding,t)};const{mark:n,encoding:i,params:r,projection:o,...a}=e,s=Ns(n)?n:{type:n};r&&xe(tQ("boxplot"));const l=s.extent??t.boxplot.extent,u=Jt("size",s,t),c=s.invalid,d=ree(l),{bins:h,timeUnits:m,transform:g,continuousAxisChannelDef:y,continuousAxis:x,groupby:b,aggregate:w,encodingWithoutContinuousAxis:S,ticksOrient:k,boxOrient:R,customTooltipWithoutAggregatedField:M}=k$e(e,l,t),{color:T,size:N,...D}=S,I=Yt=>fD(s,x,y,Yt,t.boxplot),z=I(D),X=I(S),W=I({...D,...N?{size:N}:{}}),U=OM([{fieldPrefix:d==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:d==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],y,S),B={type:"tick",color:"black",opacity:1,orient:k,invalid:c,aria:!1},V=d==="min-max"?U:OM([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],y,S),K=[...z({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:V}),...z({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:V}),...z({partName:"ticks",mark:B,positionPrefix:"lower_whisker",extraEncoding:V}),...z({partName:"ticks",mark:B,positionPrefix:"upper_whisker",extraEncoding:V})],H=[...d!=="tukey"?K:[],...X({partName:"box",mark:{type:"bar",...u?{size:u}:{},orient:R,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:U}),...W({partName:"median",mark:{type:"tick",invalid:c,...Ie(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...u?{size:u}:{},orient:k,aria:!1},positionPrefix:"mid_box",extraEncoding:U})];if(d==="min-max")return{...a,transform:(a.transform??[]).concat(g),layer:H};const J=`datum["lower_box_${y.field}"]`,Q=`datum["upper_box_${y.field}"]`,oe=`(${Q} - ${J})`,me=`${J} - ${l} * ${oe}`,ke=`${Q} + ${l} * ${oe}`,ge=`datum["${y.field}"]`,Se={joinaggregate:aee(y.field),groupby:b},Me={transform:[{filter:`(${me} <= ${ge}) && (${ge} <= ${ke})`},{aggregate:[{op:"min",field:y.field,as:`lower_whisker_${y.field}`},{op:"max",field:y.field,as:`upper_whisker_${y.field}`},{op:"min",field:`lower_box_${y.field}`,as:`lower_box_${y.field}`},{op:"max",field:`upper_box_${y.field}`,as:`upper_box_${y.field}`},...w],groupby:b}],layer:K},{tooltip:It,...Et}=D,{scale:Re,axis:Ye}=y,Be=cD(y),de=Vr(Ye,["title"]),Tt=tee(s,"outliers",t.boxplot,{transform:[{filter:`(${ge} < ${me}) || (${ge} > ${ke})`}],mark:"point",encoding:{[x]:{field:y.field,type:y.type,...Be!==void 0?{title:Be}:{},...Re!==void 0?{scale:Re}:{},...on(de)?{}:{axis:de}},...Et,...T?{color:T}:{},...M?{tooltip:M}:{}}})[0];let ft;const tt=[...h,...m,Se];return Tt?ft={transform:tt,layer:[Tt,Me]}:(ft=Me,ft.transform.unshift(...tt)),{...a,layer:[ft,{transform:g,layer:H}]}}function aee(e){return[{op:"q1",field:e,as:`lower_box_${e}`},{op:"q3",field:e,as:`upper_box_${e}`}]}function k$e(e,t,n){const i=iee(e,Hw),{continuousAxisChannelDef:r,continuousAxis:o}=nee(e,i,Hw),a=r.field,s=ree(t),l=[...aee(a),{op:"median",field:a,as:`mid_box_${a}`},{op:"min",field:a,as:(s==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:a,as:(s==="min-max"?"upper_whisker_":"max_")+a}],u=s==="min-max"||s==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[o]:c,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:m}=S$e(d),{bins:g,timeUnits:y,aggregate:x,groupby:b,encoding:w}=QQ(m,n),S=i==="vertical"?"horizontal":"vertical",k=i,R=[...g,...y,{aggregate:[...x,...l],groupby:b},...u];return{bins:g,timeUnits:y,transform:R,groupby:b,aggregate:x,continuousAxisChannelDef:r,continuousAxis:o,encodingWithoutContinuousAxis:w,ticksOrient:S,boxOrient:k,customTooltipWithoutAggregatedField:h}}const dD="errorbar",R$e=["ticks","rule"],T$e=new gC(dD,see);function see(e,{config:t}){e={...e,encoding:yC(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:o,ticksOrient:a,markDef:s,outerSpec:l,tooltipEncoding:u}=lee(e,dD,t);delete o.size;const c=fD(s,r,i,o,t.errorbar),d=s.thickness,h=s.size,m={type:"tick",orient:a,aria:!1,...d!==void 0?{thickness:d}:{},...h!==void 0?{size:h}:{}},g=[...c({partName:"ticks",mark:m,positionPrefix:"lower",extraEncoding:u}),...c({partName:"ticks",mark:m,positionPrefix:"upper",extraEncoding:u}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...d!==void 0?{size:d}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return{...l,transform:n,...g.length>1?{layer:g}:{...g[0]}}}function A$e(e,t){const{encoding:n}=e;if(M$e(n))return{orient:iee(e,t),inputType:"raw"};const i=F$e(n),r=P$e(n),o=n.x,a=n.y;if(i){if(r)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const s=n.x2,l=n.y2;if(mt(s)&&mt(l))throw new Error(`${t} cannot have both x2 and y2`);if(mt(s)){if(Uu(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(mt(l)){if(Uu(a))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const s=n.xError,l=n.xError2,u=n.yError,c=n.yError2;if(mt(l)&&!mt(s))throw new Error(`${t} cannot have xError2 without xError`);if(mt(c)&&!mt(u))throw new Error(`${t} cannot have yError2 without yError`);if(mt(s)&&mt(u))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(mt(s)){if(Uu(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(mt(u)){if(Uu(a))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function M$e(e){return(mt(e.x)||mt(e.y))&&!mt(e.x2)&&!mt(e.y2)&&!mt(e.xError)&&!mt(e.xError2)&&!mt(e.yError)&&!mt(e.yError2)}function F$e(e){return mt(e.x2)||mt(e.y2)}function P$e(e){return mt(e.xError)||mt(e.xError2)||mt(e.yError)||mt(e.yError2)}function lee(e,t,n){const{mark:i,encoding:r,params:o,projection:a,...s}=e,l=Ns(i)?i:{type:i};o&&xe(tQ(t));const{orient:u,inputType:c}=A$e(e,t),{continuousAxisChannelDef:d,continuousAxisChannelDef2:h,continuousAxisChannelDefError:m,continuousAxisChannelDefError2:g,continuousAxis:y}=nee(e,u,t),{errorBarSpecificAggregate:x,postAggregateCalculates:b,tooltipSummary:w,tooltipTitleWithFieldName:S}=N$e(l,d,h,m,g,c,t,n),{[y]:k,[y==="x"?"x2":"y2"]:R,[y==="x"?"xError":"yError"]:M,[y==="x"?"xError2":"yError2"]:T,...N}=r,{bins:D,timeUnits:I,aggregate:z,groupby:X,encoding:W}=QQ(N,n),U=[...z,...x],B=c!=="raw"?[]:X,V=OM(w,d,W,S);return{transform:[...s.transform??[],...D,...I,...U.length===0?[]:[{aggregate:U,groupby:B}],...b],groupby:B,continuousAxisChannelDef:d,continuousAxis:y,encodingWithoutContinuousAxis:W,ticksOrient:u==="vertical"?"horizontal":"vertical",markDef:l,outerSpec:s,tooltipEncoding:V}}function N$e(e,t,n,i,r,o,a,s){let l=[],u=[];const c=t.field;let d,h=!1;if(o==="raw"){const m=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":s.errorbar.center,g=e.extent?e.extent:m==="mean"?"stderr":"iqr";if(m==="median"!=(g==="iqr")&&xe(GPe(m,g,a)),g==="stderr"||g==="stdev")l=[{op:g,field:c,as:`extent_${c}`},{op:m,field:c,as:`center_${c}`}],u=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],d=[{fieldPrefix:"center_",titlePrefix:Yv(m)},{fieldPrefix:"upper_",titlePrefix:$6(m,g,"+")},{fieldPrefix:"lower_",titlePrefix:$6(m,g,"-")}],h=!0;else{let y,x,b;g==="ci"?(y="mean",x="ci0",b="ci1"):(y="median",x="q1",b="q3"),l=[{op:x,field:c,as:`lower_${c}`},{op:b,field:c,as:`upper_${c}`},{op:y,field:c,as:`center_${c}`}],d=[{fieldPrefix:"upper_",titlePrefix:_p({field:c,aggregate:b,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:_p({field:c,aggregate:x,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:_p({field:c,aggregate:y,type:"quantitative"},s,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&xe(WPe(e.center,e.extent)),o==="aggregated-upper-lower"?(d=[],u=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):o==="aggregated-error"&&(d=[{fieldPrefix:"",titlePrefix:c}],u=[{calculate:`datum["${c}"] + datum["${i.field}"]`,as:`upper_${c}`}],r?u.push({calculate:`datum["${c}"] + datum["${r.field}"]`,as:`lower_${c}`}):u.push({calculate:`datum["${c}"] - datum["${i.field}"]`,as:`lower_${c}`}));for(const m of u)d.push({fieldPrefix:m.as.substring(0,6),titlePrefix:_d(_d(m.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:u,errorBarSpecificAggregate:l,tooltipSummary:d,tooltipTitleWithFieldName:h}}function $6(e,t,n){return`${Yv(e)} ${n} ${t}`}const hD="errorband",$$e=["band","borders"],O$e=new gC(hD,uee);function uee(e,{config:t}){e={...e,encoding:yC(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:o,markDef:a,outerSpec:s,tooltipEncoding:l}=lee(e,hD,t),u=a,c=fD(u,r,i,o,t.errorband),d=e.encoding.x!==void 0&&e.encoding.y!==void 0;let h={type:d?"area":"rect"},m={type:d?"line":"rule"};const g={...u.interpolate?{interpolate:u.interpolate}:{},...u.tension&&u.interpolate?{tension:u.tension}:{}};return d?(h={...h,...g,ariaRoleDescription:"errorband"},m={...m,...g,aria:!1}):u.interpolate?xe(E6("interpolate")):u.tension&&xe(E6("tension")),{...s,transform:n,layer:[...c({partName:"band",mark:h,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...c({partName:"borders",mark:m,positionPrefix:"lower",extraEncoding:l}),...c({partName:"borders",mark:m,positionPrefix:"upper",extraEncoding:l})]}}const cee={};function pD(e,t,n){const i=new gC(e,t);cee[e]={normalizer:i,parts:n}}function I$e(){return pe(cee)}pD(Hw,oee,C$e);pD(dD,see,R$e);pD(hD,uee,$$e);const D$e=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],fee={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},dee={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},L$e=pe(fee),j$e=pe(dee),z$e={header:1,headerRow:1,headerColumn:1,headerFacet:1},hee=pe(z$e),pee=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],B$e={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},H$e={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Ba="_vgsid_",U$e={point:{on:"click",fields:[Ba],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function mD(e){return e==="legend"||!!(e!=null&&e.legend)}function iR(e){return mD(e)&&Ie(e)}function gD(e){return!!(e!=null&&e.select)}function mee(e){const t=[];for(const n of e||[]){if(gD(n))continue;const{expr:i,bind:r,...o}=n;if(r&&i){const a={...o,bind:r,init:i};t.push(a)}else{const a={...o,...i?{update:i}:{},...r?{bind:r}:{}};t.push(a)}}return t}function W$e(e){return vC(e)||vD(e)||yD(e)}function yD(e){return"concat"in e}function vC(e){return"vconcat"in e}function vD(e){return"hconcat"in e}function gee({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Os(e){return Ie(e)&&e.step!==void 0}function O6(e){return e.view||e.width||e.height}const I6=20,G$e={align:1,bounds:1,center:1,columns:1,spacing:1},q$e=pe(G$e);function V$e(e,t,n){const i=n[t],r={},{spacing:o,columns:a}=i;o!==void 0&&(r.spacing=o),a!==void 0&&(fC(e)&&!t1(e.facet)||yD(e))&&(r.columns=a),vC(e)&&(r.columns=1);for(const s of q$e)if(e[s]!==void 0)if(s==="spacing"){const l=e[s];r[s]=zt(l)?l:{row:l.row??o,column:l.column??o}}else r[s]=e[s];return r}function IM(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function Uw(e,t){const n=Ww(e,t);return Os(n)?n.step:yee}function Ww(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return zn(n,{step:e.step})}const yee=20,Y$e={continuousWidth:200,continuousHeight:200,step:yee},Z$e={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:Y$e,mark:BNe,arc:{},area:{},bar:WNe,circle:{},geoshape:{},image:{},line:{},point:{},rect:GNe,rule:{color:"black"},square:{},text:{color:"black"},tick:qNe,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:SNe,projection:{},legend:B$e,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:U$e,style:{},title:{},facet:{spacing:I6},concat:{spacing:I6},normalizedNumberFormat:".0%"},rl=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],D6={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},L6={blue:rl[0],orange:rl[1],red:rl[2],teal:rl[3],green:rl[4],yellow:rl[5],purple:rl[6],pink:rl[7],brown:rl[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function X$e(e={}){return{signals:[{name:"color",value:Ie(e)?{...L6,...e}:L6}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function K$e(e){return{signals:[{name:"fontSize",value:Ie(e)?{...D6,...e}:D6}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function J$e(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function vee(e){const t=pe(e||{}),n={};for(const i of t){const r=e[i];n[i]=r1(r)?YJ(r):uo(r)}return n}function Q$e(e){const t=pe(e),n={};for(const i of t)n[i]=vee(e[i]);return n}const eOe=[...AQ,...XQ,...hee,"background","padding","legend","lineBreak","scale","style","title","view"];function xee(e={}){const{color:t,font:n,fontSize:i,selection:r,...o}=e,a=Sm({},ht(Z$e),n?J$e(n):{},t?X$e(t):{},i?K$e(i):{},o||{});r&&Cm(a,"selection",r,!0);const s=Vr(a,eOe);for(const l of["background","lineBreak","padding"])a[l]&&(s[l]=uo(a[l]));for(const l of AQ)a[l]&&(s[l]=Lr(a[l]));for(const l of XQ)a[l]&&(s[l]=vee(a[l]));for(const l of hee)a[l]&&(s[l]=Lr(a[l]));return a.legend&&(s.legend=Lr(a.legend)),a.scale&&(s.scale=Lr(a.scale)),a.style&&(s.style=Q$e(a.style)),a.title&&(s.title=Lr(a.title)),a.view&&(s.view=Lr(a.view)),s}const tOe=new Set(["view",...ONe]),nOe=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],iOe={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...zNe};function rOe(e){e=ht(e);for(const t of nOe)delete e[t];if(e.axis)for(const t in e.axis)r1(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of D$e)delete e.legend[t];if(e.mark){for(const t of R6)delete e.mark[t];e.mark.tooltip&&Ie(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(mee(e.params)),delete e.params);for(const t of tOe){for(const i of R6)delete e[t][i];const n=iOe[t];if(n)for(const i of n)delete e[t][i];aOe(e,t)}for(const t of I$e())delete e[t];oOe(e);for(const t in e)Ie(e[t])&&on(e[t])&&delete e[t];return on(e)?void 0:e}function oOe(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:i}=VJ(e.title);on(t)||(e.style["group-title"]={...e.style["group-title"],...t}),on(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),on(i)?delete e.title:e.title=i}function aOe(e,t,n,i){const r=i?e[t][i]:e[t];t==="view"&&(n="cell");const o={...r,...e.style[n??t]};on(o)||(e.style[n??t]=o),i||delete e[t]}function xC(e){return"layer"in e}function sOe(e){return"repeat"in e}function lOe(e){return!fe(e.repeat)&&e.repeat.layer}class xD{map(t,n){return fC(t)?this.mapFacet(t,n):sOe(t)?this.mapRepeat(t,n):vD(t)?this.mapHConcat(t,n):vC(t)?this.mapVConcat(t,n):yD(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(xC(t))return this.mapLayer(t,n);if(eu(t))return this.mapUnit(t,n);throw new Error(OI(t))}mapLayer(t,n){return{...t,layer:t.layer.map(i=>this.mapLayerOrUnit(i,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(i=>this.map(i,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(i=>this.map(i,n))}}mapConcat(t,n){const{concat:i,...r}=t;return{...r,concat:i.map(o=>this.map(o,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const uOe={zero:1,center:1,normalize:1};function cOe(e){return e in uOe}const fOe=new Set([kQ,sC,aC,Iw,uC,KI,JI,lC,RQ,XI]),dOe=new Set([sC,aC,kQ]);function Fh(e){return ve(e)&&sm(e)==="quantitative"&&!e.bin}function j6(e,t,{orient:n,type:i}){const r=t==="x"?"y":"radius",o=t==="x"&&["bar","area"].includes(i),a=e[t],s=e[r];if(ve(a)&&ve(s))if(Fh(a)&&Fh(s)){if(a.stack)return t;if(s.stack)return r;const l=ve(a)&&!!a.aggregate,u=ve(s)&&!!s.aggregate;if(l!==u)return l?t:r;if(o){if(n==="vertical")return r;if(n==="horizontal")return t}}else{if(Fh(a))return t;if(Fh(s))return r}else{if(Fh(a))return o&&n==="vertical"?void 0:t;if(Fh(s))return o&&n==="horizontal"?void 0:r}}function hOe(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function _ee(e,t){var y,x;const n=Ns(e)?e:{type:e},i=n.type;if(!fOe.has(i))return null;const r=j6(t,"x",n)||j6(t,"theta",n);if(!r)return null;const o=t[r],a=ve(o)?Ae(o,{}):void 0,s=hOe(r),l=[],u=new Set;if(t[s]){const b=t[s],w=ve(b)?Ae(b,{}):void 0;w&&w!==a&&(l.push(s),u.add(w))}const c=s==="x"?"xOffset":"yOffset",d=t[c],h=ve(d)?Ae(d,{}):void 0;h&&h!==a&&(l.push(c),u.add(h));const m=RFe.reduce((b,w)=>{if(w!=="tooltip"&&Xf(t,w)){const S=t[w];for(const k of $e(S)){const R=$s(k);if(R.aggregate)continue;const M=Ae(R,{});(!M||!u.has(M))&&b.push({channel:w,fieldDef:R})}}return b},[]);let g;return o.stack!==void 0?Nc(o.stack)?g=o.stack?"zero":null:g=o.stack:dOe.has(i)&&(g="zero"),!g||!cOe(g)||lD(t)&&m.length===0?null:(y=o==null?void 0:o.scale)!=null&&y.type&&((x=o==null?void 0:o.scale)==null?void 0:x.type)!==Yr.LINEAR?(o!=null&&o.stack&&xe(BPe(o.scale.type)),null):mt(t[Gs(r)])?(o.stack!==void 0&&xe(zPe(r)),null):(ve(o)&&o.aggregate&&!jFe.has(o.aggregate)&&xe(HPe(o.aggregate)),{groupbyChannels:l,groupbyFields:u,fieldChannel:r,impute:o.impute===null?!1:Vc(i),stackBy:m,offset:g})}function bee(e,t,n){const i=Lr(e),r=Jt("orient",i,n);if(i.orient=yOe(i.type,t,r),r!==void 0&&r!==i.orient&&xe(CPe(i.orient,r)),i.type==="bar"&&i.orient){const s=Jt("cornerRadiusEnd",i,n);if(s!==void 0){const l=i.orient==="horizontal"&&t.x2||i.orient==="vertical"&&t.y2?["cornerRadius"]:UNe[i.orient];for(const u of l)i[u]=s;i.cornerRadiusEnd!==void 0&&delete i.cornerRadiusEnd}}return Jt("opacity",i,n)===void 0&&(i.opacity=mOe(i.type,t)),Jt("cursor",i,n)===void 0&&(i.cursor=pOe(i,t,n)),i}function pOe(e,t,n){return t.href||e.href||Jt("href",e,n)?"pointer":e.cursor}function mOe(e,t){if(Ft([uC,XI,KI,JI],e)&&!lD(t))return .7}function gOe(e,t,{graticule:n}){if(n)return!1;const i=Wl("filled",e,t),r=e.type;return zn(i,r!==uC&&r!==lC&&r!==Iw)}function yOe(e,t,n){switch(e){case uC:case KI:case JI:case RQ:case NNe:case PNe:return}const{x:i,y:r,x2:o,y2:a}=t;switch(e){case sC:if(ve(i)&&(ki(i.bin)||ve(r)&&r.aggregate&&!i.aggregate))return"vertical";if(ve(r)&&(ki(r.bin)||ve(i)&&i.aggregate&&!r.aggregate))return"horizontal";if(a||o){if(n)return n;if(!o)return(ve(i)&&i.type===Sd&&!fn(i.bin)||Lw(i))&&ve(r)&&ki(r.bin)?"horizontal":"vertical";if(!a)return(ve(r)&&r.type===Sd&&!fn(r.bin)||Lw(r))&&ve(i)&&ki(i.bin)?"vertical":"horizontal"}case Iw:if(o&&!(ve(i)&&ki(i.bin))&&a&&!(ve(r)&&ki(r.bin)))return;case aC:if(a)return ve(r)&&ki(r.bin)?"horizontal":"vertical";if(o)return ve(i)&&ki(i.bin)?"vertical":"horizontal";if(e===Iw){if(i&&!r)return"vertical";if(r&&!i)return"horizontal"}case lC:case XI:{const s=F6(i),l=F6(r);if(n)return n;if(s&&!l)return e!=="tick"?"horizontal":"vertical";if(!s&&l)return e!=="tick"?"vertical":"horizontal";if(s&&l)return"vertical";{const u=br(i)&&i.type===om,c=br(r)&&r.type===om;if(u&&!c)return"vertical";if(!u&&c)return"horizontal"}return}}return"vertical"}function vOe(e){const{point:t,line:n,...i}=e;return pe(i).length>1?i:i.type}function xOe(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:Vr(e[t],["point","line"])});return e}function rR(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?Ie(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?Ie(t.point)?t.point:{}:void 0}function z6(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class _Oe{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(eu(t)){const{mark:i,encoding:r}=t,o=Ns(i)?i:{type:i};switch(o.type){case"line":case"rule":case"trail":return!!rR(o,n[o.type],r);case"area":return!!rR(o,n[o.type],r)||!!z6(o,n[o.type])}}return!1}run(t,n,i){const{config:r}=n,{params:o,projection:a,mark:s,name:l,encoding:u,...c}=t,d=yC(u,r),h=Ns(s)?s:{type:s},m=rR(h,r[h.type],d),g=h.type==="area"&&z6(h,r[h.type]),y=[{name:l,...o?{params:o}:{},mark:vOe({...h.type==="area"&&h.opacity===void 0&&h.fillOpacity===void 0?{opacity:.7}:{},...h}),encoding:Vr(d,["shape"])}],x=_ee(bee(h,d,r),d);let b=d;if(x){const{fieldChannel:w,offset:S}=x;b={...d,[w]:{...d[w],...S?{stack:S}:{}}}}return b=Vr(b,["y2","x2"]),g&&y.push({...a?{projection:a}:{},mark:{type:"line",...tm(h,["clip","interpolate","tension","tooltip"]),...g},encoding:b}),m&&y.push({...a?{projection:a}:{},mark:{type:"point",opacity:1,filled:!0,...tm(h,["clip","tooltip"]),...m},encoding:b}),i({...c,layer:y},{...n,config:xOe(r)})}}function bOe(e,t){return t?t1(e)?See(e,t):wee(e,t):e}function oR(e,t){return t?See(e,t):e}function DM(e,t,n){const i=t[e];if(i$e(i)){if(i.repeat in n)return{...t,[e]:n[i.repeat]};xe(rPe(i.repeat));return}return t}function wee(e,t){if(e=DM("field",e,t),e!==void 0){if(e===null)return null;if(rD(e)&&Cs(e.sort)){const n=DM("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function B6(e,t){if(ve(e))return wee(e,t);{const n=DM("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function H6(e,t){if(mt(e)){const n=B6(e,t);if(n)return n;if(dC(e))return{condition:e.condition}}else{if(n1(e)){const n=B6(e.condition,t);if(n)return{...e,condition:n};{const{condition:i,...r}=e;return r}}return e}}function See(e,t){const n={};for(const i in e)if(et(e,i)){const r=e[i];if(fe(r))n[i]=r.map(o=>H6(o,t)).filter(o=>o);else{const o=H6(r,t);o!==void 0&&(n[i]=o)}}return n}class wOe{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(eu(t)){const{encoding:n,mark:i}=t;if(i==="line"||Ns(i)&&i.type==="line")for(const r of CFe){const o=Gd(r),a=n[o];if(n[r]&&(ve(a)&&!ki(a.bin)||Vs(a)))return!0}}return!1}run(t,n,i){const{encoding:r,mark:o}=t;return xe(SPe(!!r.x2,!!r.y2)),i({...t,mark:Ie(o)?{...o,type:"rule"}:"rule"},n)}}class SOe extends xD{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[E$e,T$e,O$e,new _Oe,new wOe]}map(t,n){if(eu(t)){const i=Xf(t.encoding,Al),r=Xf(t.encoding,Ml),o=Xf(t.encoding,XS);if(i||r||o)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:i,parentProjection:r}=n,o=oR(t.encoding,n.repeater),a={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(l=>l).join("_")}:{},...o?{encoding:o}:{}};if(i||r)return this.mapUnitWithParentEncodingOrProjection(a,n);const s=this.mapLayerOrUnit.bind(this);for(const l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(a,n.config))return l.run(a,n,s);return a}mapRepeat(t,n){return lOe(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:i,spec:r,...o}=t,{row:a,column:s,layer:l}=i,{repeater:u={},repeaterPrefix:c=""}=n;return a||s?this.mapRepeat({...t,repeat:{...a?{row:a}:{},...s?{column:s}:{}},spec:{repeat:{layer:l},spec:r}},n):{...o,layer:l.map(d=>{const h={...u,layer:d},m=`${(r.name?`${r.name}_`:"")+c}child__layer_${Sn(d)}`,g=this.mapLayerOrUnit(r,{...n,repeater:h,repeaterPrefix:m});return g.name=m,g})}}mapNonLayerRepeat(t,n){const{repeat:i,spec:r,data:o,...a}=t;!fe(i)&&t.columns&&(t=Vr(t,["columns"]),xe(b6("repeat")));const s=[],{repeater:l={},repeaterPrefix:u=""}=n,c=!fe(i)&&i.row||[l?l.row:null],d=!fe(i)&&i.column||[l?l.column:null],h=fe(i)&&i||[l?l.repeat:null];for(const g of h)for(const y of c)for(const x of d){const b={repeat:g,row:y,column:x,layer:l.layer},w=(r.name?`${r.name}_`:"")+u+"child__"+(fe(i)?`${Sn(g)}`:(i.row?`row_${Sn(y)}`:"")+(i.column?`column_${Sn(x)}`:"")),S=this.map(r,{...n,repeater:b,repeaterPrefix:w});S.name=w,s.push(Vr(S,["data"]))}const m=fe(i)?t.columns:i.column?i.column.length:1;return{data:r.data??o,align:"all",...a,columns:m,concat:s}}mapFacet(t,n){const{facet:i}=t;return t1(i)&&t.columns&&(t=Vr(t,["columns"]),xe(b6("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:i,projection:r}=t,{parentEncoding:o,parentProjection:a,config:s}=n,l=W6({parentProjection:a,projection:r}),u=U6({parentEncoding:o,encoding:oR(i,n.repeater)});return this.mapUnit({...t,...l?{projection:l}:{},...u?{encoding:u}:{}},{config:s})}mapFacetedUnit(t,n){const{row:i,column:r,facet:o,...a}=t.encoding,{mark:s,width:l,projection:u,height:c,view:d,params:h,encoding:m,...g}=t,{facetMapping:y,layout:x}=this.getFacetMappingAndLayout({row:i,column:r,facet:o},n),b=oR(a,n.repeater);return this.mapFacet({...g,...x,facet:y,spec:{...l?{width:l}:{},...c?{height:c}:{},...d?{view:d}:{},...u?{projection:u}:{},mark:s,encoding:b,...h?{params:h}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:i,column:r,facet:o}=t;if(i||r){o&&xe(bPe([...i?[Al]:[],...r?[Ml]:[]]));const a={},s={};for(const l of[Al,Ml]){const u=t[l];if(u){const{align:c,center:d,spacing:h,columns:m,...g}=u;a[l]=g;for(const y of["align","center","spacing"])u[y]!==void 0&&(s[y]??(s[y]={}),s[y][l]=u[y])}}return{facetMapping:a,layout:s}}else{const{align:a,center:s,spacing:l,columns:u,...c}=o;return{facetMapping:bOe(c,n.repeater),layout:{...a?{align:a}:{},...s?{center:s}:{},...l?{spacing:l}:{},...u?{columns:u}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:i,...r}){const{encoding:o,projection:a,...s}=t,l={...r,parentEncoding:U6({parentEncoding:n,encoding:o,layer:!0}),parentProjection:W6({parentProjection:i,projection:a})};return super.mapLayer({...s,...t.name?{name:[l.repeaterPrefix,t.name].filter(u=>u).join("_")}:{}},l)}}function U6({parentEncoding:e,encoding:t={},layer:n}){let i={};if(e){const r=new Set([...pe(e),...pe(t)]);for(const o of r){const a=t[o],s=e[o];if(mt(a)){const l={...s,...a};i[o]=l}else n1(a)?i[o]={...a,condition:{...s,...a.condition}}:a||a===null?i[o]=a:(n||za(s)||Ve(s)||mt(s)||fe(s))&&(i[o]=s)}}else i=t;return!i||on(i)?void 0:i}function W6(e){const{parentProjection:t,projection:n}=e;return t&&n&&xe(cPe({parentProjection:t,projection:n})),n??t}function _D(e){return"filter"in e}function COe(e){return(e==null?void 0:e.stop)!==void 0}function Cee(e){return"lookup"in e}function EOe(e){return"data"in e}function kOe(e){return"param"in e}function ROe(e){return"pivot"in e}function TOe(e){return"density"in e}function AOe(e){return"quantile"in e}function MOe(e){return"regression"in e}function FOe(e){return"loess"in e}function POe(e){return"sample"in e}function NOe(e){return"window"in e}function $Oe(e){return"joinaggregate"in e}function OOe(e){return"flatten"in e}function IOe(e){return"calculate"in e}function Eee(e){return"bin"in e}function DOe(e){return"impute"in e}function LOe(e){return"timeUnit"in e}function jOe(e){return"aggregate"in e}function zOe(e){return"stack"in e}function BOe(e){return"fold"in e}function HOe(e){return"extent"in e&&!("density"in e)}function UOe(e){return e.map(t=>_D(t)?{filter:vp(t.filter,gNe)}:t)}class WOe extends xD{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=G6(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=G6(t,n),t.encoding){const i={};for(const[r,o]of _c(t.encoding))i[r]=kee(o,n);t={...t,encoding:i}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:i,...r}=t;return i?{...r,params:_c(i).map(([o,a])=>{const{init:s,bind:l,empty:u,...c}=a;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[o]=u!=="none";for(const d of Pi(n.selectionPredicates[o]??{}))d.empty=u!=="none";return{name:o,value:s,select:c,bind:l}})}:t}}function G6(e,t){const{transform:n,...i}=e;if(n){const r=n.map(o=>{if(_D(o))return{filter:LM(o,t)};if(Eee(o)&&qd(o.bin))return{...o,bin:Ree(o.bin)};if(Cee(o)){const{selection:a,...s}=o.from;return a?{...o,from:{param:a,...s}}:o}return o});return{...i,transform:r}}return e}function kee(e,t){var i,r;const n=ht(e);if(ve(n)&&qd(n.bin)&&(n.bin=Ree(n.bin)),Zd(n)&&((r=(i=n.scale)==null?void 0:i.domain)!=null&&r.selection)){const{selection:o,...a}=n.scale.domain;n.scale.domain={...a,...o?{param:o}:{}}}if(dC(n))if(fe(n.condition))n.condition=n.condition.map(o=>{const{selection:a,param:s,test:l,...u}=o;return s?o:{...u,test:LM(o,t)}});else{const{selection:o,param:a,test:s,...l}=kee(n.condition,t);n.condition=a?n.condition:{...l,test:LM(n.condition,t)}}return n}function Ree(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...i}=t;return{...e,extent:{...i,param:n}}}return e}function LM(e,t){const n=i=>vp(i,r=>{var o;const a=t.emptySelections[r]??!0,s={param:r,empty:a};return(o=t.selectionPredicates)[r]??(o[r]=[]),t.selectionPredicates[r].push(s),s});return e.selection?n(e.selection):vp(e.test||e.filter,i=>i.selection?n(i.selection):i)}class jM extends xD{map(t,n){const i=n.selections??[];if(t.params&&!eu(t)){const r=[];for(const o of t.params)gD(o)?i.push(o):r.push(o);t.params=r}return n.selections=i,super.map(t,n)}mapUnit(t,n){const i=n.selections;if(!i||!i.length)return t;const r=(n.path??[]).concat(t.name),o=[];for(const a of i)if(!a.views||!a.views.length)o.push(a);else for(const s of a.views)(Oe(s)&&(s===t.name||r.includes(s))||fe(s)&&s.map(l=>r.indexOf(l)).every((l,u,c)=>l!==-1&&(u===0||l>c[u-1])))&&o.push(a);return o.length&&(t.params=o),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=jM.prototype[e];jM.prototype[e]=function(n,i){return t.call(this,n,GOe(n,i))}}function GOe(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function Tee(e,t){t===void 0&&(t=xee(e.config));const n=ZOe(e,t),{width:i,height:r}=e,o=XOe(n,{width:i,height:r,autosize:e.autosize},t);return{...n,...o?{autosize:o}:{}}}const qOe=new SOe,VOe=new WOe,YOe=new jM;function ZOe(e,t={}){const n={config:t};return YOe.map(qOe.map(VOe.map(e,n),n),n)}function q6(e){return Oe(e)?{type:e}:e??{}}function XOe(e,t,n){let{width:i,height:r}=t;const o=eu(e)||xC(e),a={};o?i=="container"&&r=="container"?(a.type="fit",a.contains="padding"):i=="container"?(a.type="fit-x",a.contains="padding"):r=="container"&&(a.type="fit-y",a.contains="padding"):(i=="container"&&(xe(y6("width")),i=void 0),r=="container"&&(xe(y6("height")),r=void 0));const s={type:"pad",...a,...n?q6(n.autosize):{},...q6(e.autosize)};if(s.type==="fit"&&!o&&(xe(YFe),s.type="pad"),i=="container"&&!(s.type=="fit"||s.type=="fit-x")&&xe(v6("width")),r=="container"&&!(s.type=="fit"||s.type=="fit-y")&&xe(v6("height")),!po(s,{type:"pad"}))return s}function KOe(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function JOe(e){return e?`fit-${tC(e)}`:"fit"}const QOe=["background","padding"];function V6(e,t){const n={};for(const i of QOe)e&&e[i]!==void 0&&(n[i]=uo(e[i]));return t&&(n.params=e.params),n}class tu{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new tu(ht(this.explicit),ht(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return zn(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:i}){n!==void 0&&this.set(t,n,i)}set(t,n,i){return delete this[i?"implicit":"explicit"][t],this[i?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:i}){n[t]!==void 0?this.set(t,n[t],!0):i[t]!==void 0&&this.set(t,i[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of pe(t.combine())){const i=t.getWithExplicit(n);this.setWithExplicit(n,i)}}}function cs(e){return{explicit:!0,value:e}}function ro(e){return{explicit:!1,value:e}}function Aee(e){return(t,n,i,r)=>{const o=e(t.value,n.value);return o>0?t:o<0?n:_C(t,n,i,r)}}function _C(e,t,n,i){return e.explicit&&t.explicit&&xe(NPe(n,i,e.value,t.value)),e}function Sc(e,t,n,i,r=_C){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:po(e.value,t.value)?e:r(e,t,n,i)}class eIe extends tu{constructor(t={},n={},i=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=i}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function cm(e){return"url"in e}function ov(e){return"values"in e}function Mee(e){return"name"in e&&!cm(e)&&!ov(e)&&!ic(e)}function ic(e){return e&&(Fee(e)||Pee(e)||bD(e))}function Fee(e){return"sequence"in e}function Pee(e){return"sphere"in e}function bD(e){return"graticule"in e}var un;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(un||(un={}));function Nee(e){const{signals:t,hasLegend:n,index:i,...r}=e;return r.field=ta(r.field),r}function kd(e,t=!0,n=tr){if(fe(e)){const i=e.map(r=>kd(r,t,n));return t?`[${i.join(", ")}]`:i}else if(Vd(e))return n(t?wd(e):rNe(e));return t?n(an(e)):e}function tIe(e,t){for(const n of Pi(e.component.selection??{})){const i=n.name;let r=`${i}${Ec}, ${n.resolve==="global"?"true":`{unit: ${Kf(e)}}`}`;for(const o of CC)o.defined(n)&&(o.signals&&(t=o.signals(e,n,t)),o.modifyExpr&&(r=o.modifyExpr(e,n,r)));t.push({name:i+NIe,on:[{events:{signal:n.name+Ec},update:`modify(${we(n.name+Rd)}, ${r})`}]})}return wD(t)}function nIe(e,t){if(e.component.selection&&pe(e.component.selection).length){const n=we(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:jc("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return wD(t)}function iIe(e,t){let n=!1;for(const i of Pi(e.component.selection??{})){const r=i.name,o=we(r+Rd);if(t.filter(s=>s.name===r).length===0){const s=i.resolve==="global"?"union":i.resolve,l=i.type==="point"?", true, true)":")";t.push({name:i.name,update:`${Kee}(${o}, ${we(s)}${l}`})}n=!0;for(const s of CC)s.defined(i)&&s.topLevelSignals&&(t=s.topLevelSignals(e,i,t))}return n&&t.filter(r=>r.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),wD(t)}function rIe(e,t){const n=[...t],i=Kf(e,{escape:!1});for(const r of Pi(e.component.selection??{})){const o={name:r.name+Rd};if(r.project.hasSelectionId&&(o.transform=[{type:"collect",sort:{field:Ba}}]),r.init){const s=r.project.items.map(Nee);o.values=r.project.hasSelectionId?r.init.map(l=>({unit:i,[Ba]:kd(l,!1)[0]})):r.init.map(l=>({unit:i,fields:s,values:kd(l,!1)}))}n.filter(s=>s.name===r.name+Rd).length||n.push(o)}return n}function $ee(e,t){for(const n of Pi(e.component.selection??{}))for(const i of CC)i.defined(n)&&i.marks&&(t=i.marks(e,n,t));return t}function oIe(e,t){for(const n of e.children)$n(n)&&(t=$ee(n,t));return t}function aIe(e,t,n,i){const r=nte(e,t.param,t);return{signal:Co(n.get("type"))&&fe(i)&&i[0]>i[1]?`isValid(${r}) && reverse(${r})`:r}}function wD(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class nn{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){xe(sPe);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const r of this._children)r.parent=t;this._children=[],t.removeChild(this);const i=t.parent.removeChild(t);this._parent=n,n.addChild(this,i),t.parent=this}}class vr extends nn{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,i,r){super(t,n),this.type=i,this.refCounts=r,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${MJ()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function aR(e){return e.as!==void 0}function Y6(e){return`${e}_end`}class Es extends nn{clone(){return new Es(null,ht(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,o,a)=>{const{field:s,timeUnit:l}=o;if(l){let u;if(Yd(l)){if($n(n)){const{mark:c,markDef:d,config:h}=n,m=wc({fieldDef:o,markDef:d,config:h});(rv(c)||m)&&(u={timeUnit:xi(l),field:s})}}else u={as:Ae(o,{forAs:!0}),field:s,timeUnit:l};if($n(n)){const{mark:c,markDef:d,config:h}=n,m=wc({fieldDef:o,markDef:d,config:h});rv(c)&&Bn(a)&&m!==.5&&(u.rectBandPosition=m)}u&&(r[Mt(u)]=u)}return r},{});return on(i)?null:new Es(t,i)}static makeFromTransform(t,n){const{timeUnit:i,...r}={...n},o=xi(i),a={...r,timeUnit:o};return new Es(t,{[Mt(a)]:a})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[i,r]of _c(this.timeUnits)){const o=aR(r)?r.as:`${r.field}_end`;t.has(o)||(n[i]=r)}this.timeUnits=n}producedFields(){return new Set(Pi(this.timeUnits).map(t=>aR(t)?t.as:Y6(t.field)))}dependentFields(){return new Set(Pi(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Mt(this.timeUnits)}`}assemble(){const t=[];for(const n of Pi(this.timeUnits)){const{rectBandPosition:i}=n,r=xi(n.timeUnit);if(aR(n)){const{field:o,as:a}=n,{unit:s,utc:l,...u}=r,c=[a,`${a}_end`];t.push({field:ta(o),type:"timeunit",...s?{units:oC(s)}:{},...l?{timezone:"utc"}:{},...u,as:c}),t.push(...Z6(c,i,r))}else if(n){const{field:o}=n,a=o.replaceAll("\\.","."),s=Oee({timeUnit:r,field:a}),l=Y6(a);t.push({type:"formula",expr:s,as:l}),t.push(...Z6([a,l],i,r))}}return t}}const bC="offsetted_rect_start",wC="offsetted_rect_end";function Oee({timeUnit:e,field:t,reverse:n}){const{unit:i,utc:r}=e,o=dQ(i),{part:a,step:s}=gQ(o,e.step);return`${r?"utcOffset":"timeOffset"}('${a}', datum['${t}'], ${n?-s:s})`}function Z6([e,t],n,i){if(n!==void 0&&n!==.5){const r=`datum['${e}']`,o=`datum['${t}']`;return[{type:"formula",expr:X6([Oee({timeUnit:i,field:e,reverse:!0}),r],n+.5),as:`${e}_${bC}`},{type:"formula",expr:X6([r,o],n+.5),as:`${e}_${wC}`}]}return[]}function X6([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const o1="_tuple_fields";class sIe{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const lIe={defined:()=>!0,parse:(e,t,n)=>{const i=t.name,r=t.project??(t.project=new sIe),o={},a={},s=new Set,l=(g,y)=>{const x=y==="visual"?g.channel:g.field;let b=Sn(`${i}_${x}`);for(let w=1;s.has(b);w++)b=Sn(`${i}_${x}_${w}`);return s.add(b),{[y]:b}},u=t.type,c=e.config.selection[u],d=n.value!==void 0?$e(n.value):null;let{fields:h,encodings:m}=Ie(n.select)?n.select:{};if(!h&&!m&&d){for(const g of d)if(Ie(g))for(const y of pe(g))SFe(y)?(m||(m=[])).push(y):u==="interval"?(xe(iPe),m=c.encodings):(h??(h=[])).push(y)}!h&&!m&&(m=c.encodings,"fields"in c&&(h=c.fields));for(const g of m??[]){const y=e.fieldDef(g);if(y){let x=y.field;if(y.aggregate){xe(ZFe(g,y.aggregate));continue}else if(!x){xe(_6(g));continue}if(y.timeUnit&&!Yd(y.timeUnit)){x=e.vgField(g);const b={timeUnit:y.timeUnit,as:x,field:y.field};a[Mt(b)]=b}if(!o[x]){const b=u==="interval"&&Ql(g)&&Co(e.getScaleComponent(g).get("type"))?"R":y.bin?"R-RE":"E",w={field:x,channel:g,type:b,index:r.items.length};w.signals={...l(w,"data"),...l(w,"visual")},r.items.push(o[x]=w),r.hasField[x]=o[x],r.hasSelectionId=r.hasSelectionId||x===Ba,IJ(g)?(w.geoChannel=g,w.channel=OJ(g),r.hasChannel[w.channel]=o[x]):r.hasChannel[g]=o[x]}}else xe(_6(g))}for(const g of h??[]){if(r.hasField[g])continue;const y={type:"E",field:g,index:r.items.length};y.signals={...l(y,"data")},r.items.push(y),r.hasField[g]=y,r.hasSelectionId=r.hasSelectionId||g===Ba}d&&(t.init=d.map(g=>r.items.map(y=>Ie(g)?g[y.geoChannel||y.channel]!==void 0?g[y.geoChannel||y.channel]:g[y.field]:g))),on(a)||(r.timeUnit=new Es(null,a))},signals:(e,t,n)=>{const i=t.name+o1;return n.filter(o=>o.name===i).length>0||t.project.hasSelectionId?n:n.concat({name:i,value:t.project.items.map(Nee)})}},Fl={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const i of t.project.items){const r=i.channel;if(!Ql(r))continue;const o=e.getScaleComponent(r),a=o?o.get("type"):void 0;if(!o||!Co(a)){xe(JFe);continue}o.set("selectionExtent",{param:t.name,field:i.field},!0),n.push(i)}},topLevelSignals:(e,t,n)=>{const i=t.scales.filter(a=>n.filter(s=>s.name===a.signals.data).length===0);if(!e.parent||K6(e)||i.length===0)return n;const r=n.filter(a=>a.name===t.name)[0];let o=r.update;if(o.indexOf(Kee)>=0)r.update=`{${i.map(a=>`${we(ta(a.field))}: ${a.signals.data}`).join(", ")}}`;else{for(const a of i){const s=`${we(ta(a.field))}: ${a.signals.data}`;o.includes(s)||(o=`${o.substring(0,o.length-1)}, ${s}}`)}r.update=o}return n.concat(i.map(a=>({name:a.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!K6(e))for(const i of t.scales){const r=n.filter(o=>o.name===i.signals.data)[0];r.push="outer",delete r.value,delete r.update}return n}};function zM(e,t){return`domain(${we(e.scaleName(t))})`}function K6(e){return e.parent&&Gm(e.parent)&&!e.parent.parent}const bp="_brush",Iee="_scale_trigger",Yg="geo_interval_init_tick",Dee="_init",uIe="_center",cIe={defined:e=>e.type==="interval",parse:(e,t,n)=>{var i;if(e.hasProjection){const r={...Ie(n.select)?n.select:{}};r.fields=[Ba],r.encodings||(r.encodings=n.value?pe(n.value):[Ya,Va]),n.select={type:"interval",...r}}if(t.translate&&!Fl.defined(t)){const r=`!event.item || event.item.mark.name !== ${we(t.name+bp)}`;for(const o of t.events){if(!o.between){xe(`${o} is not an ordered event stream for interval selections.`);continue}const a=$e((i=o.between[0]).filter??(i.filter=[]));a.indexOf(r)<0&&a.push(r)}}},signals:(e,t,n)=>{const i=t.name,r=i+Ec,o=Pi(t.project.hasChannel).filter(s=>s.channel===Cn||s.channel===wi),a=t.init?t.init[0]:null;if(n.push(...o.reduce((s,l)=>s.concat(fIe(e,t,l,a&&a[l.index])),[])),e.hasProjection){const s=we(e.projectionName()),l=e.projectionName()+uIe,{x:u,y:c}=t.project.hasChannel,d=u&&u.signals.visual,h=c&&c.signals.visual,m=u?a&&a[u.index]:`${l}[0]`,g=c?a&&a[c.index]:`${l}[1]`,y=R=>e.getSizeSignalRef(R).signal,x=`[[${d?d+"[0]":"0"}, ${h?h+"[0]":"0"}],[${d?d+"[1]":y("width")}, ${h?h+"[1]":y("height")}]]`;a&&(n.unshift({name:i+Dee,init:`[scale(${s}, [${u?m[0]:m}, ${c?g[0]:g}]), scale(${s}, [${u?m[1]:m}, ${c?g[1]:g}])]`}),(!u||!c)&&(n.find(M=>M.name===l)||n.unshift({name:l,update:`invert(${s}, [${y("width")}/2, ${y("height")}/2])`})));const b=`intersect(${x}, {markname: ${we(e.getName("marks"))}}, unit.mark)`,w=`{unit: ${Kf(e)}}`,S=`vlSelectionTuples(${b}, ${w})`,k=o.map(R=>R.signals.visual);return n.concat({name:r,on:[{events:[...k.length?[{signal:k.join(" || ")}]:[],...a?[{signal:Yg}]:[]],update:S}]})}else{if(!Fl.defined(t)){const u=i+Iee,c=o.map(d=>{const h=d.channel,{data:m,visual:g}=d.signals,y=we(e.scaleName(h)),x=e.getScaleComponent(h).get("type"),b=Co(x)?"+":"";return`(!isArray(${m}) || (${b}invert(${y}, ${g})[0] === ${b}${m}[0] && ${b}invert(${y}, ${g})[1] === ${b}${m}[1]))`});c.length&&n.push({name:u,value:{},on:[{events:o.map(d=>({scale:e.scaleName(d.channel)})),update:c.join(" && ")+` ? ${u} : {}`}]})}const s=o.map(u=>u.signals.data),l=`unit: ${Kf(e)}, fields: ${i+o1}, values`;return n.concat({name:r,...a?{init:`{${l}: ${kd(a)}}`}:{},...s.length?{on:[{events:[{signal:s.join(" || ")}],update:`${s.join(" && ")} ? {${l}: [${s}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>($n(e)&&e.hasProjection&&t.init&&(n.filter(r=>r.name===Yg).length||n.unshift({name:Yg,value:null,on:[{events:"timer{1}",update:`${Yg} === null ? {} : ${Yg}`}]})),n),marks:(e,t,n)=>{const i=t.name,{x:r,y:o}=t.project.hasChannel,a=r==null?void 0:r.signals.visual,s=o==null?void 0:o.signals.visual,l=`data(${we(t.name+Rd)})`;if(Fl.defined(t)||!r&&!o)return n;const u={x:r!==void 0?{signal:`${a}[0]`}:{value:0},y:o!==void 0?{signal:`${s}[0]`}:{value:0},x2:r!==void 0?{signal:`${a}[1]`}:{field:{group:"width"}},y2:o!==void 0?{signal:`${s}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const y of pe(u))u[y]=[{test:`${l}.length && ${l}[0].unit === ${Kf(e)}`,...u[y]},{value:0}];const{fill:c,fillOpacity:d,cursor:h,...m}=t.mark,g=pe(m).reduce((y,x)=>(y[x]=[{test:[r!==void 0&&`${a}[0] !== ${a}[1]`,o!==void 0&&`${s}[0] !== ${s}[1]`].filter(b=>b).join(" && "),value:m[x]},{value:null}],y),{});return[{name:`${i+bp}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:d}},update:u}},...n,{name:i+bp,type:"rect",clip:!0,encode:{enter:{...h?{cursor:{value:h}}:{},fill:{value:"transparent"}},update:{...u,...g}}}]}};function fIe(e,t,n,i){const r=!e.hasProjection,o=n.channel,a=n.signals.visual,s=we(r?e.scaleName(o):e.projectionName()),l=h=>`scale(${s}, ${h})`,u=e.getSizeSignalRef(o===Cn?"width":"height").signal,c=`${o}(unit)`,d=t.events.reduce((h,m)=>[...h,{events:m.between[0],update:`[${c}, ${c}]`},{events:m,update:`[${a}[0], clamp(${c}, 0, ${u})]`}],[]);if(r){const h=n.signals.data,m=Fl.defined(t),g=e.getScaleComponent(o),y=g?g.get("type"):void 0,x=i?{init:kd(i,!0,l)}:{value:[]};return d.push({events:{signal:t.name+Iee},update:Co(y)?`[${l(`${h}[0]`)}, ${l(`${h}[1]`)}]`:"[0, 0]"}),m?[{name:h,on:[]}]:[{name:a,...x,on:d},{name:h,...i?{init:kd(i)}:{},on:[{events:{signal:a},update:`${a}[0] === ${a}[1] ? null : invert(${s}, ${a})`}]}]}else{const h=o===Cn?0:1,m=t.name+Dee,g=i?{init:`[${m}[0][${h}], ${m}[1][${h}]]`}:{value:[]};return[{name:a,...g,on:d}]}}const dIe={defined:e=>e.type==="point",signals:(e,t,n)=>{const i=t.name,r=i+o1,o=t.project,a="(item().isVoronoi ? datum.datum : datum)",s=Pi(e.component.selection??{}).reduce((d,h)=>h.type==="interval"?d.concat(h.name+bp):d,[]).map(d=>`indexof(item().mark.name, '${d}') < 0`).join(" && "),l=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${s?` && ${s}`:""}`;let u=`unit: ${Kf(e)}, `;if(t.project.hasSelectionId)u+=`${Ba}: ${a}[${we(Ba)}]`;else{const d=o.items.map(h=>{const m=e.fieldDef(h.channel);return m!=null&&m.bin?`[${a}[${we(e.vgField(h.channel,{}))}], ${a}[${we(e.vgField(h.channel,{binSuffix:"end"}))}]]`:`${a}[${we(h.field)}]`}).join(", ");u+=`fields: ${r}, values: [${d}]`}const c=t.events;return n.concat([{name:i+Ec,on:c?[{events:c,update:`${l} ? {${u}} : null`,force:!0}]:[]}])}};function Bm(e,t,n,i){const r=dC(t)&&t.condition,o=i(t);if(r){const s=$e(r).map(l=>{const u=i(l);if(n$e(l)){const{param:c,empty:d}=l;return{test:tte(e,{param:c,empty:d}),...u}}else return{test:Vw(e,l.test),...u}});return{[n]:[...s,...o!==void 0?[o]:[]]}}else return o!==void 0?{[n]:o}:{}}function SD(e,t="text"){const n=e.encoding[t];return Bm(e,n,t,i=>SC(i,e.config))}function SC(e,t,n="datum"){if(e){if(za(e))return gn(e.value);if(mt(e)){const{format:i,formatType:r}=zw(e);return nD({fieldOrDatumDef:e,format:i,formatType:r,expr:n,config:t})}}}function Lee(e,t={}){const{encoding:n,markDef:i,config:r,stack:o}=e,a=n.tooltip;if(fe(a))return{tooltip:J6({tooltip:a},o,r,t)};{const s=t.reactiveGeom?"datum.datum":"datum";return Bm(e,a,"tooltip",l=>{const u=SC(l,r,s);if(u)return u;if(l===null)return;let c=Jt("tooltip",i,r);if(c===!0&&(c={content:"encoding"}),Oe(c))return{value:c};if(Ie(c))return Ve(c)?c:c.content==="encoding"?J6(n,o,r,t):{signal:s}})}}function jee(e,t,n,{reactiveGeom:i}={}){const r={...n,...n.tooltipFormat},o={},a=i?"datum.datum":"datum",s=[];function l(c,d){const h=Gd(d),m=br(c)?c:{...c,type:e[h].type},g=m.title||aD(m,r),y=$e(g).join(", ").replaceAll(/"/g,'\\"');let x;if(Bn(d)){const b=d==="x"?"x2":"y2",w=$s(e[b]);if(ki(m.bin)&&w){const S=Ae(m,{expr:a}),k=Ae(w,{expr:a}),{format:R,formatType:M}=zw(m);x=e1(S,k,R,M,r),o[b]=!0}}if((Bn(d)||d===ra||d===qa)&&t&&t.fieldChannel===d&&t.offset==="normalize"){const{format:b,formatType:w}=zw(m);x=nD({fieldOrDatumDef:m,format:b,formatType:w,expr:a,config:r,normalizeStack:!0}).signal}x??(x=SC(m,r,a).signal),s.push({channel:d,key:y,value:x})}uD(e,(c,d)=>{ve(c)?l(c,d):hC(c)&&l(c.condition,d)});const u={};for(const{channel:c,key:d,value:h}of s)!o[c]&&!u[d]&&(u[d]=h);return u}function J6(e,t,n,{reactiveGeom:i}={}){const r=jee(e,t,n,{reactiveGeom:i}),o=_c(r).map(([a,s])=>`"${a}": ${s}`);return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function hIe(e){const{markDef:t,config:n}=e,i=Jt("aria",t,n);return i===!1?{}:{...i?{aria:i}:{},...pIe(e),...mIe(e)}}function pIe(e){const{mark:t,markDef:n,config:i}=e;if(i.aria===!1)return{};const r=Jt("ariaRoleDescription",n,i);return r!=null?{ariaRoleDescription:{value:r}}:t in GFe?{}:{ariaRoleDescription:{value:t}}}function mIe(e){const{encoding:t,markDef:n,config:i,stack:r}=e,o=t.description;if(o)return Bm(e,o,"description",l=>SC(l,e.config));const a=Jt("description",n,i);if(a!=null)return{description:gn(a)};if(i.aria===!1)return{};const s=jee(t,r,i);if(!on(s))return{description:{signal:_c(s).map(([l,u],c)=>`"${c>0?"; ":""}${l}: " + (${u})`).join(" + ")}}}function di(e,t,n={}){const{markDef:i,encoding:r,config:o}=t,{vgChannel:a}=n;let{defaultRef:s,defaultValue:l}=n;s===void 0&&(l??(l=Jt(e,i,o,{vgChannel:a,ignoreVgConfig:!0})),l!==void 0&&(s=gn(l)));const u=r[e];return Bm(t,u,a??e,c=>tD({channel:e,channelDef:c,markDef:i,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:s}))}function zee(e,t={filled:void 0}){const{markDef:n,encoding:i,config:r}=e,{type:o}=n,a=t.filled??Jt("filled",n,r),s=Ft(["bar","point","circle","square","geoshape"],o)?"transparent":void 0,l=Jt(a===!0?"color":void 0,n,r,{vgChannel:"fill"})??r.mark[a===!0&&"color"]??s,u=Jt(a===!1?"color":void 0,n,r,{vgChannel:"stroke"})??r.mark[a===!1&&"color"],c=a?"fill":"stroke",d={...l?{fill:gn(l)}:{},...u?{stroke:gn(u)}:{}};return n.color&&(a?n.fill:n.stroke)&&xe(iQ("property",{fill:"fill"in n,stroke:"stroke"in n})),{...d,...di("color",e,{vgChannel:c,defaultValue:a?l:u}),...di("fill",e,{defaultValue:i.fill?l:void 0}),...di("stroke",e,{defaultValue:i.stroke?u:void 0})}}function gIe(e){const{encoding:t,mark:n}=e,i=t.order;return!Vc(n)&&za(i)?Bm(e,i,"zindex",r=>gn(r.value)):{}}function fm({channel:e,markDef:t,encoding:n={},model:i,bandPosition:r}){const o=`${e}Offset`,a=t[o],s=n[o];if((o==="xOffset"||o==="yOffset")&&s)return{offsetType:"encoding",offset:tD({channel:o,channelDef:s,markDef:t,config:i==null?void 0:i.config,scaleName:i.scaleName(o),scale:i.getScaleComponent(o),stack:null,defaultRef:gn(a),bandPosition:r})};const l=t[o];return l?{offsetType:"visual",offset:l}:{}}function Yi(e,t,{defaultPos:n,vgChannel:i}){const{encoding:r,markDef:o,config:a,stack:s}=t,l=r[e],u=r[Gs(e)],c=t.scaleName(e),d=t.getScaleComponent(e),{offset:h,offsetType:m}=fm({channel:e,markDef:o,encoding:r,model:t,bandPosition:.5}),g=CD({model:t,defaultPos:n,channel:e,scaleName:c,scale:d}),y=!l&&Bn(e)&&(r.latitude||r.longitude)?{field:t.getName(e)}:yIe({channel:e,channelDef:l,channel2Def:u,markDef:o,config:a,scaleName:c,scale:d,stack:s,offset:h,defaultRef:g,bandPosition:m==="encoding"?0:void 0});return y?{[i||e]:y}:void 0}function yIe(e){const{channel:t,channelDef:n,scaleName:i,stack:r,offset:o,markDef:a}=e;if(mt(n)&&r&&t===r.fieldChannel){if(ve(n)){let s=n.bandPosition;if(s===void 0&&a.type==="text"&&(t==="radius"||t==="theta")&&(s=.5),s!==void 0)return Dw({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",bandPosition:s,offset:o})}return Zf(n,i,{suffix:"end"},{offset:o})}return QI(e)}function CD({model:e,defaultPos:t,channel:n,scaleName:i,scale:r}){const{markDef:o,config:a}=e;return()=>{const s=Gd(n),l=bc(n),u=Jt(n,o,a,{vgChannel:l});if(u!==void 0)return iy(n,u);switch(t){case"zeroOrMin":case"zeroOrMax":if(i){const c=r.get("type");if(!Ft([Yr.LOG,Yr.TIME,Yr.UTC],c)){if(r.domainDefinitelyIncludesZero())return{scale:i,value:0}}}if(t==="zeroOrMin")return s==="y"?{field:{group:"height"}}:{value:0};switch(s){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[eo(n)],mult:.5}}}}const vIe={left:"x",center:"xc",right:"x2"},xIe={top:"y",middle:"yc",bottom:"y2"};function Bee(e,t,n,i="middle"){if(e==="radius"||e==="theta")return bc(e);const r=e==="x"?"align":"baseline",o=Jt(r,t,n);let a;return Ve(o)?(xe(wPe(r)),a=void 0):a=o,e==="x"?vIe[a||(i==="top"?"left":"center")]:xIe[a||i]}function Gw(e,t,{defaultPos:n,defaultPos2:i,range:r}){return r?Hee(e,t,{defaultPos:n,defaultPos2:i}):Yi(e,t,{defaultPos:n})}function Hee(e,t,{defaultPos:n,defaultPos2:i}){const{markDef:r,config:o}=t,a=Gs(e),s=eo(e),l=_Ie(t,i,a),u=l[s]?Bee(e,r,o):bc(e);return{...Yi(e,t,{defaultPos:n,vgChannel:u}),...l}}function _Ie(e,t,n){const{encoding:i,mark:r,markDef:o,stack:a,config:s}=e,l=Gd(n),u=eo(n),c=bc(n),d=i[l],h=e.scaleName(l),m=e.getScaleComponent(l),{offset:g}=n in i||n in o?fm({channel:n,markDef:o,encoding:i,model:e}):fm({channel:l,markDef:o,encoding:i,model:e});if(!d&&(n==="x2"||n==="y2")&&(i.latitude||i.longitude)){const x=eo(n),b=e.markDef[x];return b!=null?{[x]:{value:b}}:{[c]:{field:e.getName(n)}}}const y=bIe({channel:n,channelDef:d,channel2Def:i[n],markDef:o,config:s,scaleName:h,scale:m,stack:a,offset:g,defaultRef:void 0});return y!==void 0?{[c]:y}:Bx(n,o)||Bx(n,{[n]:$w(n,o,s.style),[u]:$w(u,o,s.style)})||Bx(n,s[r])||Bx(n,s.mark)||{[c]:CD({model:e,defaultPos:t,channel:n,scaleName:h,scale:m})()}}function bIe({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:o,scale:a,stack:s,offset:l,defaultRef:u}){return mt(t)&&s&&e.charAt(0)===s.fieldChannel.charAt(0)?Zf(t,o,{suffix:"start"},{offset:l}):QI({channel:e,channelDef:n,scaleName:o,scale:a,stack:s,markDef:i,config:r,offset:l,defaultRef:u})}function Bx(e,t){const n=eo(e),i=bc(e);if(t[i]!==void 0)return{[i]:iy(e,t[i])};if(t[e]!==void 0)return{[i]:iy(e,t[e])};if(t[n]){const r=t[n];if(Cd(r))xe(gPe(n));else return{[n]:iy(e,r)}}}function Cc(e,t){const{config:n,encoding:i,markDef:r}=e,o=r.type,a=Gs(t),s=eo(t),l=i[t],u=i[a],c=e.getScaleComponent(t),d=c?c.get("type"):void 0,h=r.orient,m=i[s]??i.size??Jt("size",r,n,{vgChannel:s}),g=zJ(t),y=o==="bar"&&(t==="x"?h==="vertical":h==="horizontal");return ve(l)&&(fn(l.bin)||ki(l.bin)||l.timeUnit&&!u)&&!(m&&!Cd(m))&&!i[g]&&!_i(d)?CIe({fieldDef:l,fieldDef2:u,channel:t,model:e}):(mt(l)&&_i(d)||y)&&!u?SIe(l,t,e):Hee(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function wIe(e,t,n,i,r,o,a){if(Cd(r))if(n){const l=n.get("type");if(l==="band"){let u=`bandwidth('${t}')`;r.band!==1&&(u=`${r.band} * ${u}`);const c=Wl("minBandSize",{type:a},i);return{signal:c?`max(${Ta(c)}, ${u})`:u}}else r.band!==1&&(xe(kPe(l)),r=void 0)}else return{mult:r.band,field:{group:e}};else{if(Ve(r))return r;if(r)return{value:r}}if(n){const l=n.get("range");if(qc(l)&&zt(l.step))return{value:l.step-2}}if(!o){const{bandPaddingInner:l,barBandPaddingInner:u,rectBandPaddingInner:c}=i.scale,d=zn(l,a==="bar"?u:c);if(Ve(d))return{signal:`(1 - (${d.signal})) * ${e}`};if(zt(d))return{signal:`${1-d} * ${e}`}}return{value:Uw(i.view,e)-2}}function SIe(e,t,n){var D,I;const{markDef:i,encoding:r,config:o,stack:a}=n,s=i.orient,l=n.scaleName(t),u=n.getScaleComponent(t),c=eo(t),d=Gs(t),h=zJ(t),m=n.scaleName(h),g=n.getScaleComponent(MI(t)),y=s==="horizontal"&&t==="y"||s==="vertical"&&t==="x";let x;(r.size||i.size)&&(y?x=di("size",n,{vgChannel:c,defaultRef:gn(i.size)}):xe(MPe(i.type)));const b=!!x,w=LQ({channel:t,fieldDef:e,markDef:i,config:o,scaleType:(D=u||g)==null?void 0:D.get("type"),useVlSizeChannel:y});x=x||{[c]:wIe(c,m||l,g||u,o,w,!!e,i.type)};const S=((I=u||g)==null?void 0:I.get("type"))==="band"&&Cd(w)&&!b?"top":"middle",k=Bee(t,i,o,S),R=k==="xc"||k==="yc",{offset:M,offsetType:T}=fm({channel:t,markDef:i,encoding:r,model:n,bandPosition:R?.5:0}),N=QI({channel:t,channelDef:e,markDef:i,config:o,scaleName:l,scale:u,stack:a,offset:M,defaultRef:CD({model:n,defaultPos:"mid",channel:t,scaleName:l,scale:u}),bandPosition:R?T==="encoding"?0:.5:Ve(w)?{signal:`(1-${w})/2`}:Cd(w)?(1-w.band)/2:0});if(c)return{[k]:N,...x};{const z=bc(d),X=x[c],W=M?{...X,offset:M}:X;return{[k]:N,[z]:fe(N)?[N[0],{...N[1],offset:W}]:{...N,offset:W}}}}function Q6(e,t,n,i,r,o,a){if($J(e))return 0;const s=e==="x"||e==="y2",l=s?-t/2:t/2;if(Ve(n)||Ve(r)||Ve(i)||o){const u=Ta(n),c=Ta(r),d=Ta(i),h=Ta(o),g=o?`(${a} < ${h} ? ${s?"":"-"}0.5 * (${h} - (${a})) : ${l})`:l,y=d?`${d} + `:"",x=u?`(${u} ? -1 : 1) * `:"",b=c?`(${c} + ${g})`:g;return{signal:y+x+b}}else return r=r||0,i+(n?-r-l:+r+l)}function CIe({fieldDef:e,fieldDef2:t,channel:n,model:i}){var I;const{config:r,markDef:o,encoding:a}=i,s=i.getScaleComponent(n),l=i.scaleName(n),u=s?s.get("type"):void 0,c=s.get("reverse"),d=LQ({channel:n,fieldDef:e,markDef:o,config:r,scaleType:u}),h=(I=i.component.axes[n])==null?void 0:I[0],m=(h==null?void 0:h.get("translate"))??.5,g=Bn(n)?Jt("binSpacing",o,r)??0:0,y=Gs(n),x=bc(n),b=bc(y),w=Wl("minBandSize",o,r),{offset:S}=fm({channel:n,markDef:o,encoding:a,model:i,bandPosition:0}),{offset:k}=fm({channel:y,markDef:o,encoding:a,model:i,bandPosition:0}),R=KNe({fieldDef:e,scaleName:l}),M=Q6(n,g,c,m,S,w,R),T=Q6(y,g,c,m,k??S,w,R),N=Ve(d)?{signal:`(1-${d.signal})/2`}:Cd(d)?(1-d.band)/2:.5,D=wc({fieldDef:e,fieldDef2:t,markDef:o,config:r});if(fn(e.bin)||e.timeUnit){const z=e.timeUnit&&D!==.5;return{[b]:eB({fieldDef:e,scaleName:l,bandPosition:N,offset:T,useRectOffsetField:z}),[x]:eB({fieldDef:e,scaleName:l,bandPosition:Ve(N)?{signal:`1-${N.signal}`}:1-N,offset:M,useRectOffsetField:z})}}else if(ki(e.bin)){const z=Zf(e,l,{},{offset:T});if(ve(t))return{[b]:z,[x]:Zf(t,l,{},{offset:M})};if(qd(e.bin)&&e.bin.step)return{[b]:z,[x]:{signal:`scale("${l}", ${Ae(e,{expr:"datum"})} + ${e.bin.step})`,offset:M}}}xe(aQ(y))}function eB({fieldDef:e,scaleName:t,bandPosition:n,offset:i,useRectOffsetField:r}){return Dw({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:i,...r?{startSuffix:bC,endSuffix:wC}:{}})}const EIe=new Set(["aria","width","height"]);function oa(e,t){const{fill:n=void 0,stroke:i=void 0}=t.color==="include"?zee(e):{};return{...kIe(e.markDef,t),...tB(e,"fill",n),...tB(e,"stroke",i),...di("opacity",e),...di("fillOpacity",e),...di("strokeOpacity",e),...di("strokeWidth",e),...di("strokeDash",e),...gIe(e),...Lee(e),...SD(e,"href"),...hIe(e)}}function tB(e,t,n){const{config:i,mark:r,markDef:o}=e;if(Jt("invalid",o,i)==="hide"&&n&&!Vc(r)){const s=RIe(e,{invalid:!0,channels:nC});if(s)return{[t]:[{test:s,value:null},...$e(n)]}}return n?{[t]:n}:{}}function kIe(e,t){return WFe.reduce((n,i)=>(!EIe.has(i)&&e[i]!==void 0&&t[i]!=="ignore"&&(n[i]=gn(e[i])),n),{})}function RIe(e,{invalid:t=!1,channels:n}){const i=n.reduce((o,a)=>{const s=e.getScaleComponent(a);if(s){const l=s.get("type"),u=e.vgField(a,{expr:"datum"});u&&Co(l)&&(o[u]=!0)}return o},{}),r=pe(i);if(r.length>0){const o=t?"||":"&&";return r.map(a=>eD(a,t)).join(` ${o} `)}}function ED(e){const{config:t,markDef:n}=e;if(Jt("invalid",n,t)){const r=TIe(e,{channels:qs});if(r)return{defined:{signal:r}}}return{}}function TIe(e,{invalid:t=!1,channels:n}){const i=n.reduce((o,a)=>{var l;const s=e.getScaleComponent(a);if(s){const u=s.get("type"),c=e.vgField(a,{expr:"datum",binSuffix:(l=e.stack)!=null&&l.impute?"mid":void 0});c&&Co(u)&&(o[c]=!0)}return o},{}),r=pe(i);if(r.length>0){const o=t?"||":"&&";return r.map(a=>eD(a,t)).join(` ${o} `)}}function nB(e,t){if(t!==void 0)return{[e]:gn(t)}}const sR="voronoi",Uee={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(sR)},marks:(e,t,n)=>{const{x:i,y:r}=t.project.hasChannel,o=e.mark;if(Vc(o))return xe(XFe(o)),n;const a={name:e.getName(sR),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...Lee(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:i||!r?"datum.datum.x || 0":"0"},y:{expr:r||!i?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let s=0,l=!1;return n.forEach((u,c)=>{const d=u.name??"";d===e.component.mark[0].name?s=c:d.indexOf(sR)>=0&&(l=!0)}),l||n.splice(s+1,0,a),n}},Wee={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!mD(e.bind),parse:(e,t,n)=>Jee(t,n),topLevelSignals:(e,t,n)=>{const i=t.name,r=t.project,o=t.bind,a=t.init&&t.init[0],s=Uee.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return r.items.forEach((l,u)=>{const c=Sn(`${i}_${l.field}`);n.filter(h=>h.name===c).length||n.unshift({name:c,...a?{init:kd(a[u])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${s}[${we(l.field)}] : null`}]:[],bind:o[l.field]??o[l.channel]??o})}),n},signals:(e,t,n)=>{const i=t.name,r=t.project,o=n.filter(u=>u.name===i+Ec)[0],a=i+o1,s=r.items.map(u=>Sn(`${i}_${u.field}`)),l=s.map(u=>`${u} !== null`).join(" && ");return s.length&&(o.update=`${l} ? {fields: ${a}, values: [${s.join(", ")}]} : null`),delete o.value,delete o.on,n}},qw="_toggle",Gee={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+qw,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+Ec,i=t.name+qw;return`${i} ? null : ${n}, `+(t.resolve==="global"?`${i} ? null : true, `:`${i} ? null : {unit: ${Kf(e)}}, `)+`${i} ? ${n} : null`}},AIe={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=Oe(t.clear)?jc(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(Wee.defined(t))for(const i of t.project.items){const r=n.findIndex(o=>o.name===Sn(`${t.name}_${i.field}`));r!==-1&&n[r].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function i(r,o){r!==-1&&n[r].on&&n[r].on.push({events:t.clear,update:o})}if(t.type==="interval")for(const r of t.project.items){const o=n.findIndex(a=>a.name===r.signals.visual);if(i(o,"[0, 0]"),o===-1){const a=n.findIndex(s=>s.name===r.signals.data);i(a,"null")}}else{let r=n.findIndex(o=>o.name===t.name+Ec);i(r,"null"),Gee.defined(t)&&(r=n.findIndex(o=>o.name===t.name+qw),i(r,"false"))}return n}},qee={defined:e=>{const t=e.resolve==="global"&&e.bind&&mD(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Ba;return t&&!n&&xe(QFe),t&&n},parse:(e,t,n)=>{const i=ht(n);if(i.select=Oe(i.select)?{type:i.select,toggle:t.toggle}:{...i.select,toggle:t.toggle},Jee(t,i),Ie(n.select)&&(n.select.on||n.select.clear)){const a='event.item && indexof(event.item.mark.role, "legend") < 0';for(const s of t.events)s.filter=$e(s.filter??[]),s.filter.includes(a)||s.filter.push(a)}const r=iR(t.bind)?t.bind.legend:"click",o=Oe(r)?jc(r,"view"):$e(r);t.bind={legend:{merge:o}}},topLevelSignals:(e,t,n)=>{const i=t.name,r=iR(t.bind)&&t.bind.legend,o=a=>s=>{const l=ht(s);return l.markname=a,l};for(const a of t.project.items){if(!a.hasLegend)continue;const s=`${Sn(a.field)}_legend`,l=`${i}_${s}`;if(n.filter(c=>c.name===l).length===0){const c=r.merge.map(o(`${s}_symbols`)).concat(r.merge.map(o(`${s}_labels`))).concat(r.merge.map(o(`${s}_entries`)));n.unshift({name:l,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:r.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]})}}return n},signals:(e,t,n)=>{const i=t.name,r=t.project,o=n.find(h=>h.name===i+Ec),a=i+o1,s=r.items.filter(h=>h.hasLegend).map(h=>Sn(`${i}_${Sn(h.field)}_legend`)),u=`${s.map(h=>`${h} !== null`).join(" && ")} ? {fields: ${a}, values: [${s.join(", ")}]} : null`;t.events&&s.length>0?o.on.push({events:s.map(h=>({signal:h})),update:u}):s.length>0&&(o.update=u,delete o.value,delete o.on);const c=n.find(h=>h.name===i+qw),d=iR(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:d}):c.on[0].events=d),n}};function MIe(e,t,n){var r;const i=(r=e.fieldDef(t))==null?void 0:r.field;for(const o of Pi(e.component.selection??{})){const a=o.project.hasField[i]??o.project.hasChannel[t];if(a&&qee.defined(o)){const s=n.get("selections")??[];s.push(o.name),n.set("selections",s,!1),a.hasLegend=!0}}}const Vee="_translate_anchor",Yee="_translate_delta",FIe={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const i=t.name,r=Fl.defined(t),o=i+Vee,{x:a,y:s}=t.project.hasChannel;let l=jc(t.translate,"scope");return r||(l=l.map(u=>(u.between[0].markname=i+bp,u))),n.push({name:o,value:{},on:[{events:l.map(u=>u.between[0]),update:"{x: x(unit), y: y(unit)"+(a!==void 0?`, extent_x: ${r?zM(e,Cn):`slice(${a.signals.visual})`}`:"")+(s!==void 0?`, extent_y: ${r?zM(e,wi):`slice(${s.signals.visual})`}`:"")+"}"}]},{name:i+Yee,value:{},on:[{events:l,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),a!==void 0&&iB(e,t,a,"width",n),s!==void 0&&iB(e,t,s,"height",n),n}};function iB(e,t,n,i,r){const o=t.name,a=o+Vee,s=o+Yee,l=n.channel,u=Fl.defined(t),c=r.filter(R=>R.name===n.signals[u?"data":"visual"])[0],d=e.getSizeSignalRef(i).signal,h=e.getScaleComponent(l),m=h&&h.get("type"),g=h&&h.get("reverse"),y=u?l===Cn?g?"":"-":g?"-":"":"",x=`${a}.extent_${l}`,b=`${y}${s}.${l} / ${u?`${d}`:`span(${x})`}`,w=!u||!h?"panLinear":m==="log"?"panLog":m==="symlog"?"panSymlog":m==="pow"?"panPow":"panLinear",S=u?m==="pow"?`, ${h.get("exponent")??1}`:m==="symlog"?`, ${h.get("constant")??1}`:"":"",k=`${w}(${x}, ${b}${S})`;c.on.push({events:{signal:s},update:u?k:`clampRange(${k}, 0, ${d})`})}const Zee="_zoom_anchor",Xee="_zoom_delta",PIe={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const i=t.name,r=Fl.defined(t),o=i+Xee,{x:a,y:s}=t.project.hasChannel,l=we(e.scaleName(Cn)),u=we(e.scaleName(wi));let c=jc(t.zoom,"scope");return r||(c=c.map(d=>(d.markname=i+bp,d))),n.push({name:i+Zee,on:[{events:c,update:r?"{"+[l?`x: invert(${l}, x(unit))`:"",u?`y: invert(${u}, y(unit))`:""].filter(d=>d).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),a!==void 0&&rB(e,t,a,"width",n),s!==void 0&&rB(e,t,s,"height",n),n}};function rB(e,t,n,i,r){const o=t.name,a=n.channel,s=Fl.defined(t),l=r.filter(w=>w.name===n.signals[s?"data":"visual"])[0],u=e.getSizeSignalRef(i).signal,c=e.getScaleComponent(a),d=c&&c.get("type"),h=s?zM(e,a):l.name,m=o+Xee,g=`${o}${Zee}.${a}`,y=!s||!c?"zoomLinear":d==="log"?"zoomLog":d==="symlog"?"zoomSymlog":d==="pow"?"zoomPow":"zoomLinear",x=s?d==="pow"?`, ${c.get("exponent")??1}`:d==="symlog"?`, ${c.get("constant")??1}`:"":"",b=`${y}(${h}, ${g}, ${m}${x})`;l.on.push({events:{signal:m},update:s?b:`clampRange(${b}, 0, ${u})`})}const Rd="_store",Ec="_tuple",NIe="_modify",Kee="vlSelectionResolve",CC=[dIe,cIe,lIe,Gee,Wee,Fl,qee,AIe,FIe,PIe,Uee];function $Ie(e){let t=e.parent;for(;t&&!Oa(t);)t=t.parent;return t}function Kf(e,{escape:t}={escape:!0}){let n=t?we(e.name):e.name;const i=$Ie(e);if(i){const{facet:r}=i;for(const o of Ho)r[o]&&(n+=` + '__facet_${o}_' + (facet[${we(i.vgField(o))}])`)}return n}function kD(e){return Pi(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function Jee(e,t){(Oe(t.select)||!t.select.on)&&delete e.events,(Oe(t.select)||!t.select.clear)&&delete e.clear,(Oe(t.select)||!t.select.toggle)&&delete e.toggle}function BM(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...BM(e.object)),t.push(...BM(e.property))),t)}function Qee(e){return e.object.type==="MemberExpression"?Qee(e.object):e.object.name==="datum"}function ete(e){const t=GO(e),n=new Set;return t.visit(i=>{i.type==="MemberExpression"&&Qee(i)&&n.add(BM(i).slice(1).join("."))}),n}class Hm extends nn{clone(){return new Hm(null,this.model,ht(this.filter))}constructor(t,n,i){super(t),this.model=n,this.filter=i,this.expr=Vw(this.model,this.filter,this),this._dependentFields=ete(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function OIe(e,t){const n={},i=e.config.selection;if(!t||!t.length)return n;for(const r of t){const o=Sn(r.name),a=r.select,s=Oe(a)?a:a.type,l=Ie(a)?ht(a):{type:s},u=i[s];for(const h in u)h==="fields"||h==="encodings"||(h==="mark"&&(l[h]={...u[h],...l[h]}),(l[h]===void 0||l[h]===!0)&&(l[h]=ht(u[h]??l[h])));const c=n[o]={...l,name:o,type:s,init:r.value,bind:r.bind,events:Oe(l.on)?jc(l.on,"scope"):$e(ht(l.on))},d=ht(r);for(const h of CC)h.defined(c)&&h.parse&&h.parse(e,c,d)}return n}function tte(e,t,n,i="datum"){const r=Oe(t)?t:t.param,o=Sn(r),a=we(o+Rd);let s;try{s=e.getSelectionComponent(o,r)}catch{return`!!${o}`}if(s.project.timeUnit){const h=n??e.component.data.raw,m=s.project.timeUnit.clone();h.parent?m.insertAsParentOf(h):h.parent=m}const l=s.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",u=s.resolve==="global"?")":`, ${we(s.resolve)})`,c=`${l}${a}, ${i}${u}`,d=`length(data(${a}))`;return t.empty===!1?`${d} && ${c}`:`!${d} || ${c}`}function nte(e,t,n){const i=Sn(t),r=n.encoding;let o=n.field,a;try{a=e.getSelectionComponent(i,t)}catch{return i}if(!r&&!o)o=a.project.items[0].field,a.project.items.length>1&&xe(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${we(o)}.`);else if(r&&!o){const s=a.project.items.filter(l=>l.channel===r);!s.length||s.length>1?(o=a.project.items[0].field,xe((s.length?"Multiple ":"No ")+`matching ${we(r)} encoding found for selection ${we(n.param)}. Using "field": ${we(o)}.`)):o=s[0].field}return`${a.name}[${we(ta(o))}]`}function IIe(e,t){for(const[n,i]of _c(e.component.selection??{})){const r=e.getName(`lookup_${n}`);e.component.data.outputNodes[r]=i.materialized=new vr(new Hm(t,e,{param:n}),r,un.Lookup,e.component.data.outputNodeRefCounts)}}function Vw(e,t,n){return ny(t,i=>Oe(i)?i:hNe(i)?tte(e,i,n):vQ(i))}function DIe(e,t){if(e)return fe(e)&&!ku(e)?e.map(n=>aD(n,t)).join(", "):e}function lR(e,t,n,i){var r,o;e.encode??(e.encode={}),(r=e.encode)[t]??(r[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=i}function A0(e,t,n,i={header:!1}){var d,h;const{disable:r,orient:o,scale:a,labelExpr:s,title:l,zindex:u,...c}=e.combine();if(!r){for(const m in c){const g=g$e[m],y=c[m];if(g&&g!==t&&g!=="both")delete c[m];else if(r1(y)){const{condition:x,...b}=y,w=$e(x),S=P6[m];if(S){const{vgProp:k,part:R}=S,M=[...w.map(T=>{const{test:N,...D}=T;return{test:Vw(null,N),...D}}),b];lR(c,R,k,M),delete c[m]}else if(S===null){const k={signal:w.map(R=>{const{test:M,...T}=R;return`${Vw(null,M)} ? ${g6(T)} : `}).join("")+g6(b)};c[m]=k}}else if(Ve(y)){const x=P6[m];if(x){const{vgProp:b,part:w}=x;lR(c,w,b,y),delete c[m]}}Ft(["labelAlign","labelBaseline"],m)&&c[m]===null&&delete c[m]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:m}=c.encode;c.encode={...m?{grid:m}:{}},on(c.encode)&&delete c.encode}return{scale:a,orient:o,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:zn(u,0)}}else{if(!i.header&&e.mainExtracted)return;if(s!==void 0){let g=s;(h=(d=c.encode)==null?void 0:d.labels)!=null&&h.update&&Ve(c.encode.labels.update.text)&&(g=_d(s,"datum.label",c.encode.labels.update.text.signal)),lR(c,"labels","text",{signal:g})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const g of YQ)e.hasAxisPart(g)||delete c.encode[g];on(c.encode)&&delete c.encode}const m=DIe(l,n);return{scale:a,orient:o,grid:!1,...m?{title:m}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:zn(u,0)}}}}function ite(e){const{axes:t}=e.component,n=[];for(const i of qs)if(t[i]){for(const r of t[i])if(!r.get("disable")&&!r.get("gridScale")){const o=i==="x"?"height":"width",a=e.getSizeSignalRef(o).signal;o!==a&&n.push({name:o,update:a})}}return n}function LIe(e,t){const{x:n=[],y:i=[]}=e;return[...n.map(r=>A0(r,"grid",t)),...i.map(r=>A0(r,"grid",t)),...n.map(r=>A0(r,"main",t)),...i.map(r=>A0(r,"main",t))].filter(r=>r)}function oB(e,t,n,i){return Object.assign.apply(null,[{},...e.map(r=>{if(r==="axisOrient"){const o=n==="x"?"bottom":"left",a=t[n==="x"?"axisBottom":"axisLeft"]||{},s=t[n==="x"?"axisTop":"axisRight"]||{},l=new Set([...pe(a),...pe(s)]),u={};for(const c of l.values())u[c]={signal:`${i.signal} === "${o}" ? ${Ta(a[c])} : ${Ta(s[c])}`};return u}return t[r]})])}function jIe(e,t,n,i){const r=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:wQ(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],o=e==="x"?"axisX":"axisY",a=Ve(n)?"axisOrient":`axis${Yv(n)}`,s=[...r,...r.map(u=>o+u.substr(4))],l=["axis",a,o];return{vlOnlyAxisConfig:oB(s,i,e,n),vgAxisConfig:oB(l,i,e,n),axisConfigStyle:zIe([...l,...s],i)}}function zIe(e,t){var i;const n=[{}];for(const r of e){let o=(i=t[r])==null?void 0:i.style;if(o){o=$e(o);for(const a of o)n.push(t.style[a])}}return Object.assign.apply(null,n)}function HM(e,t,n,i={}){var o;const r=XJ(e,n,t);if(r!==void 0)return{configFrom:"style",configValue:r};for(const a of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((o=i[a])==null?void 0:o[e])!==void 0)return{configFrom:a,configValue:i[a][e]};return{}}const aB={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??BIe(n,e),gridScale:({model:e,channel:t})=>HIe(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelAlign||ote(t,n,i),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelBaseline||rte(t,n,i),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??WIe(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??GIe(t.type,n,ve(t)&&!!t.timeUnit,ve(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:i,scaleType:r})=>{const o=e==="x"?"width":e==="y"?"height":void 0,a=o?t.getSizeSignalRef(o):void 0;return n.tickCount??VIe({fieldOrDatumDef:i,scaleType:r,size:a,values:n.values})},tickMinStep:YIe,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const i=ate(t,n);if(i!==void 0)return i;const r=t.typedFieldDef(n),o=n==="x"?"x2":"y2",a=t.fieldDef(o);return JJ(r?[M6(r)]:[],ve(a)?[M6(a)]:[])},values:({axis:e,fieldOrDatumDef:t})=>ZIe(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??XIe(n,t)};function BIe(e,t){return!_i(e)&&ve(t)&&!fn(t==null?void 0:t.bin)&&!ki(t==null?void 0:t.bin)}function HIe(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function UIe(e,t,n,i,r){const o=t==null?void 0:t.labelAngle;if(o!==void 0)return Ve(o)?o:iv(o);{const{configValue:a}=HM("labelAngle",i,t==null?void 0:t.style,r);return a!==void 0?iv(a):n===Cn&&Ft([ZI,YI],e.type)&&!(ve(e)&&e.timeUnit)?270:void 0}}function UM(e){return`(((${e.signal} % 360) + 360) % 360)`}function rte(e,t,n,i){if(e!==void 0)if(n==="x"){if(Ve(e)){const r=UM(e),o=Ve(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${r} && ${r} < 135) || (225 < ${r} && ${r} < 315) ? "middle" :(${r} <= 45 || 315 <= ${r}) === ${o} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Ve(t)){const r=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${r} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Ve(e)){const r=UM(e),o=Ve(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${r} <= 45 || 315 <= ${r} || (135 <= ${r} && ${r} <= 225) ? ${i?'"middle"':"null"} : (45 <= ${r} && ${r} <= 135) === ${o} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return i?"middle":null;if(Ve(t)){const r=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${r} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function ote(e,t,n){if(e===void 0)return;const i=n==="x",r=i?0:90,o=i?"bottom":"left";if(Ve(e)){const a=UM(e),s=Ve(t)?`(${t.signal} === "${o}")`:t===o;return{signal:`(${r?`(${a} + 90)`:a} % 180 === 0) ? ${i?null:'"center"'} :(${r} < ${a} && ${a} < ${180+r}) === ${s} ? "left" : "right"`}}if((e+r)%180===0)return i?null:"center";if(Ve(t)){const a=r<e&&e<180+r?"===":"!==";return{signal:`${`${t.signal} ${a} "${o}"`} ? "left" : "right"`}}return(r<e&&e<180+r)==(t===o)?"left":"right"}function WIe(e,t){if(t==="x"&&Ft(["quantitative","temporal"],e))return!0}function GIe(e,t,n,i){if(n&&!Ie(i)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function qIe(e){return e==="x"?"bottom":"left"}function VIe({fieldOrDatumDef:e,scaleType:t,size:n,values:i}){var r;if(!i&&!_i(t)&&t!=="log"){if(ve(e)){if(fn(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Ft(["month","hours","day","quarter"],(r=xi(e.timeUnit))==null?void 0:r.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function YIe({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(ve(t)){const{timeUnit:n}=t;if(n){const i=mQ(n);if(i)return{signal:i}}}}function ate(e,t){const n=t==="x"?"x2":"y2",i=e.fieldDef(t),r=e.fieldDef(n),o=i?i.title:void 0,a=r?r.title:void 0;if(o&&a)return QJ(o,a);if(o)return o;if(a)return a;if(o!==void 0)return o;if(a!==void 0)return a}function ZIe(e,t){const n=e.values;if(fe(n))return VQ(t,n);if(Ve(n))return n}function XIe(e,t){return e==="rect"&&jw(t)?1:0}class dm extends nn{clone(){return new dm(null,ht(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=ete(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((i,r)=>{if(Zd(i)&&DQ(i.sort)){const{field:o,timeUnit:a}=i,s=i.sort,l=s.map((u,c)=>`${vQ({field:o,timeUnit:a,equal:u})} ? ${c} : `).join("")+s.length;t=new dm(t,{calculate:l,as:hm(i,r,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Mt(this.transform)}`}}function hm(e,t,n){return Ae(e,{prefix:t,suffix:"sort_index",...n??{}})}function EC(e,t){return Ft(["top","bottom"],t)?"column":Ft(["left","right"],t)||e==="row"?"row":"column"}function pm(e,t,n,i){const r=i==="row"?n.headerRow:i==="column"?n.headerColumn:n.headerFacet;return zn((t||{})[e],r[e],n.header[e])}function kC(e,t,n,i){const r={};for(const o of e){const a=pm(o,t||{},n,i);a!==void 0&&(r[o]=a)}return r}const RD=["row","column"],TD=["header","footer"];function KIe(e,t){const n=e.component.layoutHeaders[t].title,i=e.config?e.config:void 0,r=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:a,titleOrient:s}=kC(["titleAnchor","titleAngle","titleOrient"],r.header,i,t),l=EC(t,s),u=iv(a);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...lte(u,l),...ste(l,u,o),...ute(i,r,t,L$e,fee)}}}function ste(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const i=ote(t,e==="row"?"left":"top",e==="row"?"y":"x");return i?{align:i}:{}}function lte(e,t){const n=rte(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function JIe(e,t){const n=e.component.layoutHeaders[t],i=[];for(const r of TD)if(n[r])for(const o of n[r]){const a=eDe(e,t,r,n,o);a!=null&&i.push(a)}return i}function QIe(e,t){const{sort:n}=e;return Cs(n)?{field:Ae(n,{expr:"datum"}),order:n.order??"ascending"}:fe(n)?{field:hm(e,t,{expr:"datum"}),order:"ascending"}:{field:Ae(e,{expr:"datum"}),order:n??"ascending"}}function WM(e,t,n){const{format:i,formatType:r,labelAngle:o,labelAnchor:a,labelOrient:s,labelExpr:l}=kC(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),u=nD({fieldOrDatumDef:e,format:i,formatType:r,expr:"parent",config:n}).signal,c=EC(t,s);return{text:{signal:l?_d(_d(l,"datum.label",u),"datum.value",Ae(e,{expr:"parent"})):u},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...lte(o,c),...ste(c,o,a),...ute(n,e,t,j$e,dee)}}function eDe(e,t,n,i,r){if(r){let o=null;const{facetFieldDef:a}=i,s=e.config?e.config:void 0;if(a&&r.labels){const{labelOrient:d}=kC(["labelOrient"],a.header,s,t);(t==="row"&&!Ft(["top","bottom"],d)||t==="column"&&!Ft(["left","right"],d))&&(o=WM(a,t,s))}const l=Oa(e)&&!t1(e.facet),u=r.axes,c=(u==null?void 0:u.length)>0;if(o||c){const d=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...i.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:QIe(a,t)}:{},...c&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...o?{title:o}:{},...r.sizeSignal?{encode:{update:{[d]:r.sizeSignal}}}:{},...c?{axes:u}:{}}}}return null}const tDe={column:{start:0,end:1},row:{start:1,end:0}};function nDe(e,t){return tDe[t][e]}function iDe(e,t){const n={};for(const i of Ho){const r=e[i];if(r!=null&&r.facetFieldDef){const{titleAnchor:o,titleOrient:a}=kC(["titleAnchor","titleOrient"],r.facetFieldDef.header,t,i),s=EC(i,a),l=nDe(o,s);l!==void 0&&(n[s]=l)}}return on(n)?void 0:n}function ute(e,t,n,i,r){const o={};for(const a of i){if(!r[a])continue;const s=pm(a,t==null?void 0:t.header,e,n);s!==void 0&&(o[r[a]]=s)}return o}function AD(e){return[...Hx(e,"width"),...Hx(e,"height"),...Hx(e,"childWidth"),...Hx(e,"childHeight")]}function Hx(e,t){const n=t==="width"?"x":"y",i=e.component.layoutSize.get(t);if(!i||i==="merged")return[];const r=e.getSizeSignalRef(t).signal;if(i==="step"){const o=e.getScaleComponent(n);if(o){const a=o.get("type"),s=o.get("range");if(_i(a)&&qc(s)){const l=e.scaleName(n);return Oa(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[sB(l,s)]:[sB(l,s),{name:r,update:cte(l,o,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(i=="container"){const o=r.endsWith("width"),a=o?"containerSize()[0]":"containerSize()[1]",s=IM(e.config.view,o?"width":"height"),l=`isFinite(${a}) ? ${a} : ${s}`;return[{name:r,init:l,on:[{update:l,events:"window:resize"}]}]}else return[{name:r,value:i}]}function sB(e,t){const n=`${e}_step`;return Ve(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function cte(e,t,n){const i=t.get("type"),r=t.get("padding"),o=zn(t.get("paddingOuter"),r);let a=t.get("paddingInner");return a=i==="band"?a!==void 0?a:r:1,`bandspace(${n}, ${Ta(a)}, ${Ta(o)}) * ${e}_step`}function fte(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function dte(e,t){return pe(e).reduce((n,i)=>{const r=e[i];return{...n,...Bm(t,r,i,o=>gn(o.value))}},{})}function hte(e,t){if(Oa(t))return e==="theta"?"independent":"shared";if(Gm(t))return"shared";if(ID(t))return Bn(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function MD(e,t){const n=e.scale[t],i=Bn(t)?"axis":"legend";return n==="independent"?(e[i][t]==="shared"&&xe(OPe(t)),"independent"):e[i][t]||"shared"}const rDe={...H$e,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},pte=pe(rDe);class oDe extends tu{}const lB={symbols:aDe,gradient:sDe,labels:lDe,entries:uDe};function aDe(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r,legendType:o}){if(o!=="symbol")return;const{markDef:a,encoding:s,config:l,mark:u}=n,c=a.filled&&u!=="trail";let d={...VFe({},n,LNe),...zee(n,{filled:c})};const h=r.get("symbolOpacity")??l.legend.symbolOpacity,m=r.get("symbolFillColor")??l.legend.symbolFillColor,g=r.get("symbolStrokeColor")??l.legend.symbolStrokeColor,y=h===void 0?mte(s.opacity)??a.opacity:void 0;if(d.fill){if(i==="fill"||c&&i===Jr)delete d.fill;else if(d.fill.field)m?delete d.fill:(d.fill=gn(l.legend.symbolBaseFillColor??"black"),d.fillOpacity=gn(y??1));else if(fe(d.fill)){const x=GM(s.fill??s.color)??a.fill??(c&&a.color);x&&(d.fill=gn(x))}}if(d.stroke){if(i==="stroke"||!c&&i===Jr)delete d.stroke;else if(d.stroke.field||g)delete d.stroke;else if(fe(d.stroke)){const x=zn(GM(s.stroke||s.color),a.stroke,c?a.color:void 0);x&&(d.stroke={value:x})}}if(i!==Jl){const x=ve(t)&&yte(n,r,t);x?d.opacity=[{test:x,...gn(y??1)},gn(l.legend.unselectedOpacity)]:y&&(d.opacity=gn(y))}return d={...d,...e},on(d)?void 0:d}function sDe(e,{model:t,legendType:n,legendCmpt:i}){if(n!=="gradient")return;const{config:r,markDef:o,encoding:a}=t;let s={};const u=(i.get("gradientOpacity")??r.legend.gradientOpacity)===void 0?mte(a.opacity)||o.opacity:void 0;return u&&(s.opacity=gn(u)),s={...s,...e},on(s)?void 0:s}function lDe(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r}){const o=n.legend(i)||{},a=n.config,s=ve(t)?yte(n,r,t):void 0,l=s?[{test:s,value:1},{value:a.legend.unselectedOpacity}]:void 0,{format:u,formatType:c}=o;let d;Ed(c)?d=Ma({fieldOrDatumDef:t,field:"datum.value",format:u,formatType:c,config:a}):u===void 0&&c===void 0&&a.customFormatTypes&&(t.type==="quantitative"&&a.numberFormatType?d=Ma({fieldOrDatumDef:t,field:"datum.value",format:a.numberFormat,formatType:a.numberFormatType,config:a}):t.type==="temporal"&&a.timeFormatType&&ve(t)&&t.timeUnit===void 0&&(d=Ma({fieldOrDatumDef:t,field:"datum.value",format:a.timeFormat,formatType:a.timeFormatType,config:a})));const h={...l?{opacity:l}:{},...d?{text:d}:{},...e};return on(h)?void 0:h}function uDe(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function mte(e){return gte(e,(t,n)=>Math.max(t,n.value))}function GM(e){return gte(e,(t,n)=>zn(t,n.value))}function gte(e,t){if(r$e(e))return $e(e.condition).reduce(t,e.value);if(za(e))return e.value}function yte(e,t,n){const i=t.get("selections");if(!(i!=null&&i.length))return;const r=we(n.field);return i.map(o=>`(!length(data(${we(Sn(o)+Rd)})) || (${o}[${r}] && indexof(${o}[${r}], datum.value) >= 0))`).join(" || ")}const uB={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:i,formatType:r}=t;return NQ(e,e.type,i,r,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:i}=e;return $Q(i,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??gDe(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??yDe(n),symbolType:({legend:e,markDef:t,channel:n,encoding:i})=>e.symbolType??fDe(t.type,n,i.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>_p(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(xp(n)&&Aa(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>cDe(t,e)};function cDe(e,t){const n=e.values;if(fe(n))return VQ(t,n);if(Ve(n))return n}function fDe(e,t,n,i){if(t!=="shape"){const r=GM(n)??i;if(r)return r}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function dDe(e){const{legend:t}=e;return zn(t.type,hDe(e))}function hDe({channel:e,timeUnit:t,scaleType:n}){if(xp(e)){if(Ft(["quarter","month","day"],t))return"symbol";if(Aa(n))return"gradient"}return"symbol"}function pDe({legendConfig:e,legendType:t,orient:n,legend:i}){return i.direction??e[t?"gradientDirection":"symbolDirection"]??mDe(n,t)}function mDe(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function gDe({legendConfig:e,model:t,direction:n,orient:i,scaleType:r}){const{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:a,gradientVerticalMaxLength:s,gradientVerticalMinLength:l}=e;if(Aa(r))return n==="horizontal"?i==="top"||i==="bottom"?cB(t,"width",a,o):a:cB(t,"height",l,s)}function cB(e,t,n,i){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${i})`}}function yDe(e){if(Ft(["quantile","threshold","log","symlog"],e))return"greedy"}function vte(e){const t=$n(e)?vDe(e):wDe(e);return e.component.legends=t,t}function vDe(e){const{encoding:t}=e,n={};for(const i of[Jr,...pee]){const r=ti(t[i]);!r||!e.getScaleComponent(i)||i===Qr&&ve(r)&&r.type===zm||(n[i]=bDe(e,i))}return n}function xDe(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function _De(e,t,n,i){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(i==null?void 0:i.title))return!0}return e===(n||{})[t]}function bDe(e,t){var k;let n=e.legend(t);const{markDef:i,encoding:r,config:o}=e,a=o.legend,s=new oDe({},xDe(e,t));MIe(e,t,s);const l=n!==void 0?!n:a.disable;if(s.set("disable",l,n!==void 0),l)return s;n=n||{};const u=e.getScaleComponent(t).get("type"),c=ti(r[t]),d=ve(c)?(k=xi(c.timeUnit))==null?void 0:k.unit:void 0,h=n.orient||o.legend.orient||"right",m=dDe({legend:n,channel:t,timeUnit:d,scaleType:u}),g=pDe({legend:n,legendType:m,orient:h,legendConfig:a}),y={legend:n,channel:t,model:e,markDef:i,encoding:r,fieldOrDatumDef:c,legendConfig:a,config:o,scaleType:u,orient:h,legendType:m,direction:g};for(const R of pte){if(m==="gradient"&&R.startsWith("symbol")||m==="symbol"&&R.startsWith("gradient"))continue;const M=R in uB?uB[R](y):n[R];if(M!==void 0){const T=_De(M,R,n,e.fieldDef(t));(T||o.legend[R]===void 0)&&s.set(R,M,T)}}const x=(n==null?void 0:n.encoding)??{},b=s.get("selections"),w={},S={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:s,legendType:m};for(const R of["labels","legend","title","symbols","gradient","entries"]){const M=dte(x[R]??{},e),T=R in lB?lB[R](M,S):M;T!==void 0&&!on(T)&&(w[R]={...b!=null&&b.length&&ve(c)?{name:`${Sn(c.field)}_legend_${R}`}:{},...b!=null&&b.length?{interactive:!!b}:{},update:T})}return on(w)||s.set("encode",w,!!(n!=null&&n.encoding)),s}function wDe(e){const{legends:t,resolve:n}=e.component;for(const i of e.children){vte(i);for(const r of pe(i.component.legends))n.legend[r]=MD(e.component.resolve,r),n.legend[r]==="shared"&&(t[r]=xte(t[r],i.component.legends[r]),t[r]||(n.legend[r]="independent",delete t[r]))}for(const i of pe(t))for(const r of e.children)r.component.legends[i]&&n.legend[i]==="shared"&&delete r.component.legends[i];return t}function xte(e,t){var o,a,s,l;if(!e)return t.clone();const n=e.getWithExplicit("orient"),i=t.getWithExplicit("orient");if(n.explicit&&i.explicit&&n.value!==i.value)return;let r=!1;for(const u of pte){const c=Sc(e.getWithExplicit(u),t.getWithExplicit(u),u,"legend",(d,h)=>{switch(u){case"symbolType":return SDe(d,h);case"title":return eQ(d,h);case"type":return r=!0,ro("symbol")}return _C(d,h,u,"legend")});e.setWithExplicit(u,c)}return r&&((a=(o=e.implicit)==null?void 0:o.encode)!=null&&a.gradient&&Nw(e.implicit,["encode","gradient"]),(l=(s=e.explicit)==null?void 0:s.encode)!=null&&l.gradient&&Nw(e.explicit,["encode","gradient"])),e}function SDe(e,t){return t.value==="circle"?t:e}function CDe(e,t,n,i){var r,o;e.encode??(e.encode={}),(r=e.encode)[t]??(r[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=i}function _te(e){const t=e.component.legends,n={};for(const r of pe(t)){const o=e.getScaleComponent(r),a=an(o.get("domains"));if(n[a])for(const s of n[a])xte(s,t[r])||n[a].push(t[r]);else n[a]=[t[r].clone()]}return Pi(n).flat().map(r=>EDe(r,e.config)).filter(r=>r!==void 0)}function EDe(e,t){var a,s,l;const{disable:n,labelExpr:i,selections:r,...o}=e.combine();if(!n){if(t.aria===!1&&o.aria==null&&(o.aria=!1),(a=o.encode)!=null&&a.symbols){const u=o.encode.symbols.update;u.fill&&u.fill.value!=="transparent"&&!u.stroke&&!o.stroke&&(u.stroke={value:"transparent"});for(const c of pee)o[c]&&delete u[c]}if(o.title||delete o.title,i!==void 0){let u=i;(l=(s=o.encode)==null?void 0:s.labels)!=null&&l.update&&Ve(o.encode.labels.update.text)&&(u=_d(i,"datum.label",o.encode.labels.update.text.signal)),CDe(o,"labels","text",{signal:u})}return o}}function kDe(e){return Gm(e)||ID(e)?RDe(e):bte(e)}function RDe(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),bte(e))}function bte(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:i}=n;if(t.data){const r={signal:`[${t.size.map(a=>a.signal).join(", ")}]`},o=t.data.reduce((a,s)=>{const l=Ve(s)?s.signal:`data('${e.lookupDataSource(s)}')`;return Ft(a,l)||a.push(l),a},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:i,size:r,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]},...n}]}else return[{name:i,translate:{signal:"[width / 2, height / 2]"},...n}]}const TDe=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class wte extends tu{constructor(t,n,i,r){super({...n},{name:t}),this.specifiedProjection=n,this.size=i,this.data=r,this.merged=!1}get isFit(){return!!this.data}}function Ste(e){e.component.projection=$n(e)?ADe(e):PDe(e)}function ADe(e){if(e.hasProjection){const t=Lr(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),i=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,r=n?MDe(e):void 0,o=new wte(e.projectionName(!0),{...Lr(e.config.projection)??{},...t??{}},i,r);return o.get("type")||o.set("type","equalEarth",!1),o}}function MDe(e){const t=[],{encoding:n}=e;for(const i of[[Ya,Va],[na,Za]])(ti(n[i[0]])||ti(n[i[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Qr)&&e.typedFieldDef(Qr).type===zm&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(un.Main)),t}function FDe(e,t){const n=wI(TDe,r=>!!(!et(e.explicit,r)&&!et(t.explicit,r)||et(e.explicit,r)&&et(t.explicit,r)&&po(e.get(r),t.get(r))));if(po(e.size,t.size)){if(n)return e;if(po(e.explicit,{}))return t;if(po(t.explicit,{}))return e}return null}function PDe(e){if(e.children.length===0)return;let t;for(const i of e.children)Ste(i);const n=wI(e.children,i=>{const r=i.component.projection;if(r)if(t){const o=FDe(t,r);return o&&(t=o),!!o}else return t=r,!0;else return!0});if(t&&n){const i=e.projectionName(!0),r=new wte(i,t.specifiedProjection,t.size,ht(t.data));for(const o of e.children){const a=o.component.projection;a&&(a.isFit&&r.data.push(...o.component.projection.data),o.renameProjection(a.get("name"),i),a.merged=!0)}return r}}function NDe(e,t,n,i){if(i1(t,n)){const r=$n(e)?e.axis(n)??e.legend(n)??{}:{},o=Ae(t,{expr:"datum"}),a=Ae(t,{expr:"datum",binSuffix:"end"});return{formulaAs:Ae(t,{binSuffix:"range",forAs:!0}),formula:e1(o,a,r.format,r.formatType,i)}}return{}}function Cte(e,t){return`${qJ(e)}_${t}`}function $De(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function FD(e,t,n){const i=pC(n,void 0)??{},r=Cte(i,t);return e.getName(`${r}_bins`)}function ODe(e){return"as"in e}function fB(e,t,n){let i,r;ODe(e)?i=Oe(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:i=[Ae(e,{forAs:!0}),Ae(e,{binSuffix:"end",forAs:!0})];const o={...pC(t,void 0)},a=Cte(o,e.field),{signal:s,extentSignal:l}=$De(n,a);if(iC(o.extent)){const c=o.extent;r=nte(n,c.param,c),delete o.extent}const u={bin:o,field:e.field,as:[i],...s?{signal:s}:{},...l?{extentSignal:l}:{},...r?{span:r}:{}};return{key:a,binComponent:u}}class ks extends nn{clone(){return new ks(null,ht(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,o,a)=>{if(br(o)&&fn(o.bin)){const{key:s,binComponent:l}=fB(o,o.bin,n);r[s]={...l,...r[s],...NDe(n,o,a,n.config)}}return r},{});return on(i)?null:new ks(t,i)}static makeFromTransform(t,n,i){const{key:r,binComponent:o}=fB(n,n.bin,i);return new ks(t,{[r]:o})}merge(t,n){for(const i of pe(t.bins))i in this.bins?(n(t.bins[i].signal,this.bins[i].signal),this.bins[i].as=gs([...this.bins[i].as,...t.bins[i].as],Mt)):this.bins[i]=t.bins[i];for(const i of t.children)t.removeChild(i),i.parent=this;t.remove()}producedFields(){return new Set(Pi(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Pi(this.bins).map(t=>t.field))}hash(){return`Bin ${Mt(this.bins)}`}assemble(){return Pi(this.bins).flatMap(t=>{const n=[],[i,...r]=t.as,{extent:o,...a}=t.bin,s={type:"bin",field:ta(t.field),as:i,signal:t.signal,...iC(o)?{extent:null}:{extent:o},...t.span?{span:{signal:`span(${t.span})`}}:{},...a};!o&&t.extentSignal&&(n.push({type:"extent",field:ta(t.field),signal:t.extentSignal}),s.extent={signal:t.extentSignal}),n.push(s);for(const l of r)for(let u=0;u<2;u++)n.push({type:"formula",expr:Ae({field:i[u]},{expr:"datum"}),as:l[u]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function IDe(e,t,n,i){var o;const r=$n(i)?i.encoding[Gs(t)]:void 0;if(br(n)&&$n(i)&&jQ(n,r,i.markDef,i.config)){e.add(Ae(n,{})),e.add(Ae(n,{suffix:"end"}));const{mark:a,markDef:s,config:l}=i,u=wc({fieldDef:n,markDef:s,config:l});rv(a)&&u!==.5&&Bn(t)&&(e.add(Ae(n,{suffix:bC})),e.add(Ae(n,{suffix:wC}))),n.bin&&i1(n,t)&&e.add(Ae(n,{binSuffix:"range"}))}else if(IJ(t)){const a=OJ(t);e.add(i.getName(a))}else e.add(Ae(n));return Zd(n)&&kNe((o=n.scale)==null?void 0:o.range)&&e.add(n.scale.range.field),e}function DDe(e,t){for(const n of pe(t)){const i=t[n];for(const r of pe(i))n in e?e[n][r]=new Set([...e[n][r]??[],...i[r]]):e[n]={[r]:i[r]}}}class $a extends nn{clone(){return new $a(null,new Set(this.dimensions),ht(this.measures))}constructor(t,n,i){super(t),this.dimensions=n,this.measures=i}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let i=!1;n.forEachFieldDef(a=>{a.aggregate&&(i=!0)});const r={},o=new Set;return!i||(n.forEachFieldDef((a,s)=>{const{aggregate:l,field:u}=a;if(l)if(l==="count")r["*"]??(r["*"]={}),r["*"].count=new Set([Ae(a,{forAs:!0})]);else{if(Ul(l)||Gc(l)){const c=Ul(l)?"argmin":"argmax",d=l[c];r[d]??(r[d]={}),r[d][c]=new Set([Ae({op:c,field:d},{forAs:!0})])}else r[u]??(r[u]={}),r[u][l]=new Set([Ae(a,{forAs:!0})]);Ql(s)&&n.scaleDomain(s)==="unaggregated"&&(r[u]??(r[u]={}),r[u].min=new Set([Ae({field:u,aggregate:"min"},{forAs:!0})]),r[u].max=new Set([Ae({field:u,aggregate:"max"},{forAs:!0})]))}else IDe(o,s,a,n)}),o.size+pe(r).length===0)?null:new $a(t,o,r)}static makeFromTransform(t,n){const i=new Set,r={};for(const o of n.aggregate){const{op:a,field:s,as:l}=o;a&&(a==="count"?(r["*"]??(r["*"]={}),r["*"].count=new Set([l||Ae(o,{forAs:!0})])):(r[s]??(r[s]={}),r[s][a]=new Set([l||Ae(o,{forAs:!0})])))}for(const o of n.groupby??[])i.add(o);return i.size+pe(r).length===0?null:new $a(t,i,r)}merge(t){return RJ(this.dimensions,t.dimensions)?(DDe(this.measures,t.measures),!0):(KPe("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...pe(this.measures)])}producedFields(){const t=new Set;for(const n of pe(this.measures))for(const i of pe(this.measures[n])){const r=this.measures[n][i];r.size===0?t.add(`${i}_${n}`):r.forEach(t.add,t)}return t}hash(){return`Aggregate ${Mt({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],i=[];for(const o of pe(this.measures))for(const a of pe(this.measures[o]))for(const s of this.measures[o][a])i.push(s),t.push(a),n.push(o==="*"?null:ta(o));return{type:"aggregate",groupby:[...this.dimensions].map(ta),ops:t,fields:n,as:i}}}class Um extends nn{constructor(t,n,i,r){super(t),this.model=n,this.name=i,this.data=r;for(const o of Ho){const a=n.facet[o];if(a){const{bin:s,sort:l}=a;this[o]={name:n.getName(`${o}_domain`),fields:[Ae(a),...fn(s)?[Ae(a,{binSuffix:"end"})]:[]],...Cs(l)?{sortField:l}:fe(l)?{sortIndexField:hm(a,o)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Ho)this[n]&&(t+=` ${n.charAt(0)}:${Mt(this[n])}`);return t}get fields(){var n;const t=[];for(const i of Ho)(n=this[i])!=null&&n.fields&&t.push(...this[i].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Ho)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of qs){const i=this.childModel.component.scales[n];if(i&&!i.merged){const r=i.get("type"),o=i.get("range");if(_i(r)&&qc(o)){const a=RC(this.childModel,n),s=OD(a);s?t[n]=s:xe(II(n))}}}return t}assembleRowColumnHeaderData(t,n,i){const r={row:"y",column:"x",facet:void 0}[t],o=[],a=[],s=[];r&&i&&i[r]&&(n?(o.push(`distinct_${i[r]}`),a.push("max")):(o.push(i[r]),a.push("distinct")),s.push(`distinct_${i[r]}`));const{sortField:l,sortIndexField:u}=this[t];if(l){const{op:c=cC,field:d}=l;o.push(d),a.push(c),s.push(Ae(l,{forAs:!0}))}else u&&(o.push(u),a.push("max"),s.push(u));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...o.length?{fields:o,ops:a,as:s}:{}}]}}assembleFacetHeaderData(t){var l;const{columns:n}=this.model.layout,{layoutHeaders:i}=this.model.component,r=[],o={};for(const u of RD){for(const c of TD){const d=(i[u]&&i[u][c])??[];for(const h of d)if(((l=h.axes)==null?void 0:l.length)>0){o[u]=!0;break}}if(o[u]){const c=`length(data("${this.facet.name}"))`,d=u==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};r.push({name:`${this.facet.name}_${u}`,transform:[{type:"sequence",start:0,stop:d}]})}}const{row:a,column:s}=o;return(a||s)&&r.unshift(this.assembleRowColumnHeaderData("facet",null,t)),r}assemble(){const t=[];let n=null;const i=this.getChildIndependentFieldsWithStep(),{column:r,row:o,facet:a}=this;if(r&&o&&(i.x||i.y)){n=`cross_${this.column.name}_${this.row.name}`;const s=[].concat(i.x??[],i.y??[]),l=s.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:s,ops:l}]})}for(const s of[Ml,Al])this[s]&&t.push(this.assembleRowColumnHeaderData(s,n,i));if(a){const s=this.assembleFacetHeaderData(i);s&&t.push(...s)}return t}}function dB(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function LDe(e,t){const n=EI(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const i=dB(t.slice(5,t.length));return`timeParse(${n},'${i}')`}else if(t.startsWith("utc:")){const i=dB(t.slice(4,t.length));return`utcParse(${n},'${i}')`}else return xe(aPe(t)),null}function jDe(e){const t={};return I_(e.filter,n=>{if(yQ(n)){let i=null;zI(n)?i=uo(n.equal):HI(n)?i=uo(n.lte):BI(n)?i=uo(n.lt):UI(n)?i=uo(n.gt):WI(n)?i=uo(n.gte):GI(n)?i=n.range[0]:qI(n)&&(i=(n.oneOf??n.in)[0]),i&&(Vd(i)?t[n.field]="date":zt(i)?t[n.field]="number":Oe(i)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function zDe(e){const t={};function n(i){um(i)?t[i.field]="date":i.type==="quantitative"&&LFe(i.aggregate)?t[i.field]="number":nm(i.field)>1?i.field in t||(t[i.field]="flatten"):Zd(i)&&Cs(i.sort)&&nm(i.sort.field)>1&&(i.sort.field in t||(t[i.sort.field]="flatten"))}if(($n(e)||Oa(e))&&e.forEachFieldDef((i,r)=>{if(br(i))n(i);else{const o=Gd(r),a=e.fieldDef(o);n({...i,type:a.type})}}),$n(e)){const{mark:i,markDef:r,encoding:o}=e;if(Vc(i)&&!e.encoding.order){const a=r.orient==="horizontal"?"y":"x",s=o[a];ve(s)&&s.type==="quantitative"&&!(s.field in t)&&(t[s.field]="number")}}return t}function BDe(e){const t={};if($n(e)&&e.component.selection)for(const n of pe(e.component.selection)){const i=e.component.selection[n];for(const r of i.project.items)!r.channel&&nm(r.field)>1&&(t[r.field]="flatten")}return t}class Zi extends nn{clone(){return new Zi(null,ht(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Mt(this._parse)}`}static makeExplicit(t,n,i){var a;let r={};const o=n.data;return!ic(o)&&((a=o==null?void 0:o.format)!=null&&a.parse)&&(r=o.format.parse),this.makeWithAncestors(t,r,{},i)}static makeWithAncestors(t,n,i,r){for(const s of pe(i)){const l=r.getWithExplicit(s);l.value!==void 0&&(l.explicit||l.value===i[s]||l.value==="derived"||i[s]==="flatten"?delete i[s]:xe(w6(s,i[s],l.value)))}for(const s of pe(n)){const l=r.get(s);l!==void 0&&(l===n[s]?delete n[s]:xe(w6(s,n[s],l)))}const o=new tu(n,i);r.copyAll(o);const a={};for(const s of pe(o.combine())){const l=o.get(s);l!==null&&(a[s]=l)}return pe(a).length===0||r.parseNothing?null:new Zi(t,a)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of pe(this._parse)){const i=this._parse[n];nm(n)===1&&(t[n]=i)}return t}producedFields(){return new Set(pe(this._parse))}dependentFields(){return new Set(pe(this._parse))}assembleTransforms(t=!1){return pe(this._parse).filter(n=>t?nm(n)>1:!0).map(n=>{const i=LDe(n,this._parse[n]);return i?{type:"formula",expr:i,as:kI(n)}:null}).filter(n=>n!==null)}}class kc extends nn{clone(){return new kc(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Ba])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Ba}}}class a1 extends nn{clone(){return new a1(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Mt(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class s1 extends nn{clone(){return new s1(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Mt(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class Td extends nn{constructor(t){super(null),t??(t={name:"source"});let n;if(ic(t)||(n=t.format?{...Vr(t.format,["parse"])}:{}),ov(t))this._data={values:t.values};else if(cm(t)){if(this._data={url:t.url},!n.type){let i=/(?:\.([^.]+))?$/.exec(t.url)[1];Ft(["json","csv","tsv","dsv","topojson"],i)||(i="json"),n.type=i}}else Pee(t)?this._data={values:[{type:"Sphere"}]}:(Mee(t)||ic(t))&&(this._data={});this._generator=ic(t),t.name&&(this._name=t.name),n&&!on(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var hB=function(e,t,n,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(e,n):r?r.value=n:t.set(e,n),n},HDe=function(e,t,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(e):i?i.value:t.get(e)},M0;function PD(e){return e instanceof Td||e instanceof a1||e instanceof s1}class ND{constructor(){M0.set(this,void 0),hB(this,M0,!1,"f")}setModified(){hB(this,M0,!0,"f")}get modifiedFlag(){return HDe(this,M0,"f")}}M0=new WeakMap;class Xd extends ND{getNodeDepths(t,n,i){i.set(t,n);for(const r of t.children)this.getNodeDepths(r,n+1,i);return i}optimize(t){const i=[...this.getNodeDepths(t,0,new Map).entries()].sort((r,o)=>o[1]-r[1]);for(const r of i)this.run(r[0]);return this.modifiedFlag}}class $D extends ND{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class UDe extends $D{mergeNodes(t,n){const i=n.shift();for(const r of n)t.removeChild(r),r.parent=i,r.remove()}run(t){const n=t.children.map(r=>r.hash()),i={};for(let r=0;r<n.length;r++)i[n[r]]===void 0?i[n[r]]=[t.children[r]]:i[n[r]].push(t.children[r]);for(const r of pe(i))i[r].length>1&&(this.setModified(),this.mergeNodes(t,i[r]))}}class WDe extends $D{constructor(t){super(),this.requiresSelectionId=t&&kD(t)}run(t){t instanceof kc&&(this.requiresSelectionId&&(PD(t.parent)||t.parent instanceof $a||t.parent instanceof Zi)||(this.setModified(),t.remove()))}}class GDe extends ND{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let i=new Set;t instanceof Es&&(i=t.producedFields(),SI(i,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const r of t.children)this.run(r,new Set([...n,...i]))}}class qDe extends $D{constructor(){super()}run(t){t instanceof vr&&!t.isRequired()&&(this.setModified(),t.remove())}}class VDe extends Xd{run(t){if(!PD(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Zi)if(t instanceof Zi)this.setModified(),t.merge(n);else{if(CI(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class YDe extends Xd{run(t){const n=[...t.children],i=t.children.filter(r=>r instanceof Zi);if(t.numChildren()>1&&i.length>=1){const r={},o=new Set;for(const a of i){const s=a.parse;for(const l of pe(s))l in r?r[l]!==s[l]&&o.add(l):r[l]=s[l]}for(const a of o)delete r[a];if(!on(r)){this.setModified();const a=new Zi(t,r);for(const s of n){if(s instanceof Zi)for(const l of pe(r))delete s.parse[l];t.removeChild(s),s.parent=a,s instanceof Zi&&pe(s.parse).length===0&&s.remove()}}}}}class ZDe extends Xd{run(t){t instanceof vr||t.numChildren()>0||t instanceof Um||t instanceof Td||(this.setModified(),t.remove())}}class XDe extends Xd{run(t){const n=t.children.filter(r=>r instanceof Es),i=n.pop();for(const r of n)this.setModified(),i.merge(r)}}class KDe extends Xd{run(t){const n=t.children.filter(r=>r instanceof $a),i={};for(const r of n){const o=Mt(r.groupBy);o in i||(i[o]=[]),i[o].push(r)}for(const r of pe(i)){const o=i[r];if(o.length>1){const a=o.pop();for(const s of o)a.merge(s)&&(t.removeChild(s),s.parent=a,s.remove(),this.setModified())}}}}class JDe extends Xd{constructor(t){super(),this.model=t}run(t){const n=!(PD(t)||t instanceof Hm||t instanceof Zi||t instanceof kc),i=[],r=[];for(const o of t.children)o instanceof ks&&(n&&!CI(t.producedFields(),o.dependentFields())?i.push(o):r.push(o));if(i.length>0){const o=i.pop();for(const a of i)o.merge(a,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof ks?t.merge(o,this.model.renameSignal.bind(this.model)):o.swapWithParent()}if(r.length>1){const o=r.pop();for(const a of r)o.merge(a,this.model.renameSignal.bind(this.model));this.setModified()}}}class QDe extends Xd{run(t){const n=[...t.children];if(!xd(n,a=>a instanceof vr)||t.numChildren()<=1)return;const r=[];let o;for(const a of n)if(a instanceof vr){let s=a;for(;s.numChildren()===1;){const[l]=s.children;if(l instanceof vr)s=l;else break}r.push(...s.children),o?(t.removeChild(a),a.parent=o.parent,o.parent.removeChild(o),o.parent=s,this.setModified()):o=s}else r.push(a);if(r.length){this.setModified();for(const a of r)a.parent.removeChild(a),a.parent=o}}}class Kd extends nn{clone(){return new Kd(null,ht(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=gs(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??Ae(t)}hash(){return`JoinAggregateTransform ${Mt(this.transform)}`}assemble(){const t=[],n=[],i=[];for(const o of this.transform.joinaggregate)n.push(o.op),i.push(this.getDefaultName(o)),t.push(o.field===void 0?null:o.field);const r=this.transform.groupby;return{type:"joinaggregate",as:i,ops:n,fields:t,...r!==void 0?{groupby:r}:{}}}}function eLe(e){return e.stack.stackBy.reduce((t,n)=>{const i=n.fieldDef,r=Ae(i);return r&&t.push(r),t},[])}function tLe(e){return fe(e)&&e.every(t=>Oe(t))&&e.length>1}class Pl extends nn{clone(){return new Pl(null,ht(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:i,groupby:r,as:o,offset:a="zero"}=n,s=[],l=[];if(n.sort!==void 0)for(const d of n.sort)s.push(d.field),l.push(zn(d.order,"ascending"));const u={field:s,order:l};let c;return tLe(o)?c=o:Oe(o)?c=[o,`${o}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new Pl(t,{dimensionFieldDefs:[],stackField:i,groupby:r,offset:a,sort:u,facetby:[],as:c})}static makeFromEncoding(t,n){const i=n.stack,{encoding:r}=n;if(!i)return null;const{groupbyChannels:o,fieldChannel:a,offset:s,impute:l}=i,u=o.map(m=>{const g=r[m];return $s(g)}).filter(m=>!!m),c=eLe(n),d=n.encoding.order;let h;if(fe(d)||ve(d))h=KJ(d);else{const m=zQ(d)?d.sort:a==="y"?"descending":"ascending";h=c.reduce((g,y)=>(g.field.push(y),g.order.push(m),g),{field:[],order:[]})}return new Pl(t,{dimensionFieldDefs:u,stackField:n.vgField(a),facetby:[],stackby:c,sort:h,offset:s,impute:l,as:[n.vgField(a,{suffix:"start",forAs:!0}),n.vgField(a,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Mt(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:i}=this._stack;return t.length>0?t.map(r=>r.bin?n?[Ae(r,{binSuffix:"mid"})]:[Ae(r,{}),Ae(r,{binSuffix:"end"})]:[Ae(r)]).flat():i??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:i,stackField:r,stackby:o,sort:a,offset:s,impute:l,as:u}=this._stack;if(l)for(const c of i){const{bandPosition:d=.5,bin:h}=c;if(h){const m=Ae(c,{expr:"datum"}),g=Ae(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${d}*${m}+${1-d}*${g}`,as:Ae(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:r,groupby:[...o,...n],key:Ae(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:r,sort:a,as:u,offset:s}),t}}class Wm extends nn{clone(){return new Wm(null,ht(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=gs(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??Ae(t)}hash(){return`WindowTransform ${Mt(this.transform)}`}assemble(){const t=[],n=[],i=[],r=[];for(const d of this.transform.window)n.push(d.op),i.push(this.getDefaultName(d)),r.push(d.param===void 0?null:d.param),t.push(d.field===void 0?null:d.field);const o=this.transform.frame,a=this.transform.groupby;if(o&&o[0]===null&&o[1]===null&&n.every(d=>$I(d)))return{type:"joinaggregate",as:i,ops:n,fields:t,...a!==void 0?{groupby:a}:{}};const s=[],l=[];if(this.transform.sort!==void 0)for(const d of this.transform.sort)s.push(d.field),l.push(d.order??"ascending");const u={field:s,order:l},c=this.transform.ignorePeers;return{type:"window",params:r,as:i,ops:n,fields:t,sort:u,...c!==void 0?{ignorePeers:c}:{},...a!==void 0?{groupby:a}:{},...o!==void 0?{frame:o}:{}}}}function nLe(e){function t(n){if(!(n instanceof Um)){const i=n.clone();if(i instanceof vr){const r=VM+i.getSource();i.setSource(r),e.model.component.data.outputNodes[r]=i}else(i instanceof $a||i instanceof Pl||i instanceof Wm||i instanceof Kd)&&i.addDimensions(e.fields);for(const r of n.children.flatMap(t))r.parent=i;return[i]}return n.children.flatMap(t)}return t}function qM(e){if(e instanceof Um)if(e.numChildren()===1&&!(e.children[0]instanceof vr)){const t=e.children[0];(t instanceof $a||t instanceof Pl||t instanceof Wm||t instanceof Kd)&&t.addDimensions(e.fields),t.swapWithParent(),qM(e)}else{const t=e.model.component.data.main;Ete(t);const n=nLe(e),i=e.children.map(n).flat();for(const r of i)r.parent=t}else e.children.map(qM)}function Ete(e){if(e instanceof vr&&e.type===un.Main&&e.numChildren()===1){const t=e.children[0];t instanceof Um||(t.swapWithParent(),Ete(e))}}const VM="scale_",Ux=5;function YM(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!YM(t.children))return!1}return!0}function fa(e,t){let n=!1;for(const i of t)n=e.optimize(i)||n;return n}function pB(e,t,n){let i=e.sources,r=!1;return r=fa(new qDe,i)||r,r=fa(new WDe(t),i)||r,i=i.filter(o=>o.numChildren()>0),r=fa(new ZDe,i)||r,i=i.filter(o=>o.numChildren()>0),n||(r=fa(new VDe,i)||r,r=fa(new JDe(t),i)||r,r=fa(new GDe,i)||r,r=fa(new YDe,i)||r,r=fa(new KDe,i)||r,r=fa(new XDe,i)||r,r=fa(new UDe,i)||r,r=fa(new QDe,i)||r),e.sources=i,r}function iLe(e,t){YM(e.sources);let n=0,i=0;for(let r=0;r<Ux&&pB(e,t,!0);r++)n++;e.sources.map(qM);for(let r=0;r<Ux&&pB(e,t,!1);r++)i++;YM(e.sources),Math.max(n,i)===Ux&&xe(`Maximum optimization runs(${Ux}) reached.`)}class fi{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new fi(()=>t(n))}}function kte(e){$n(e)?rLe(e):oLe(e)}function rLe(e){const t=e.component.scales;for(const n of pe(t)){const i=sLe(e,n);if(t[n].setWithExplicit("domains",i),uLe(e,n),e.component.data.isFaceted){let o=e;for(;!Oa(o)&&o.parent;)o=o.parent;if(o.component.resolve.scale[n]==="shared")for(const s of i.value)Sl(s)&&(s.data=VM+s.data.replace(VM,""))}}}function oLe(e){for(const n of e.children)kte(n);const t=e.component.scales;for(const n of pe(t)){let i,r=null;for(const o of e.children){const a=o.component.scales[n];if(a){i===void 0?i=a.getWithExplicit("domains"):i=Sc(i,a.getWithExplicit("domains"),"domains","scale",ZM);const s=a.get("selectionExtent");r&&s&&r.param!==s.param&&xe(nPe),r=s}}t[n].setWithExplicit("domains",i),r&&t[n].set("selectionExtent",r,!0)}}function aLe(e,t,n,i){if(e==="unaggregated"){const{valid:r,reason:o}=mB(t,n);if(!r){xe(o);return}}else if(e===void 0&&i.useUnaggregatedDomain){const{valid:r}=mB(t,n);if(r)return"unaggregated"}return e}function sLe(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:i}=e,r=aLe(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return r!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:r}),t==="x"&&ti(i.x2)?ti(i.x)?Sc(yu(n,r,e,"x"),yu(n,r,e,"x2"),"domain","scale",ZM):yu(n,r,e,"x2"):t==="y"&&ti(i.y2)?ti(i.y)?Sc(yu(n,r,e,"y"),yu(n,r,e,"y2"),"domain","scale",ZM):yu(n,r,e,"y2"):yu(n,r,e,t)}function lLe(e,t,n){return e.map(i=>({signal:`{data: ${mC(i,{timeUnit:n,type:t})}}`}))}function uR(e,t,n){var r;const i=(r=xi(n))==null?void 0:r.unit;return t==="temporal"||i?lLe(e,t,i):[e]}function yu(e,t,n,i){const{encoding:r,markDef:o,mark:a,config:s,stack:l}=n,u=ti(r[i]),{type:c}=u,d=u.timeUnit;if(ENe(t)){const g=yu(e,void 0,n,i),y=uR(t.unionWith,c,d);return cs([...y,...g.value])}else{if(Ve(t))return cs([t]);if(t&&t!=="unaggregated"&&!CQ(t))return cs(uR(t,c,d))}if(l&&i===l.fieldChannel){if(l.offset==="normalize")return ro([[0,1]]);const g=n.requestDataName(un.Main);return ro([{data:g,field:n.vgField(i,{suffix:"start"})},{data:g,field:n.vgField(i,{suffix:"end"})}])}const h=Ql(i)&&ve(u)?cLe(n,i,e):void 0;if(Vs(u)){const g=uR([u.datum],c,d);return ro(g)}const m=u;if(t==="unaggregated"){const g=n.requestDataName(un.Main),{field:y}=u;return ro([{data:g,field:Ae({field:y,aggregate:"min"})},{data:g,field:Ae({field:y,aggregate:"max"})}])}else if(fn(m.bin)){if(_i(e))return ro(e==="bin-ordinal"?[]:[{data:nv(h)?n.requestDataName(un.Main):n.requestDataName(un.Raw),field:n.vgField(i,i1(m,i)?{binSuffix:"range"}:{}),sort:h===!0||!Ie(h)?{field:n.vgField(i,{}),op:"min"}:h}]);{const{bin:g}=m;if(fn(g)){const y=FD(n,m.field,g);return ro([new fi(()=>{const x=n.getSignalName(y);return`[${x}.start, ${x}.stop]`})])}else return ro([{data:n.requestDataName(un.Main),field:n.vgField(i,{})}])}}else if(m.timeUnit&&Ft(["time","utc"],e)){const g=r[Gs(i)];if(jQ(m,g,o,s)){const y=n.requestDataName(un.Main),x=wc({fieldDef:m,fieldDef2:g,markDef:o,config:s}),b=rv(a)&&x!==.5&&Bn(i);return ro([{data:y,field:n.vgField(i,b?{suffix:bC}:{})},{data:y,field:n.vgField(i,{suffix:b?wC:"end"})}])}}return ro(h?[{data:nv(h)?n.requestDataName(un.Main):n.requestDataName(un.Raw),field:n.vgField(i),sort:h}]:[{data:n.requestDataName(un.Main),field:n.vgField(i)}])}function cR(e,t){const{op:n,field:i,order:r}=e;return{op:n??(t?"sum":cC),...i?{field:ta(i)}:{},...r?{order:r}:{}}}function uLe(e,t){var s;const n=e.component.scales[t],i=e.specifiedScales[t].domain,r=(s=e.fieldDef(t))==null?void 0:s.bin,o=CQ(i)&&i,a=qd(r)&&iC(r.extent)&&r.extent;(o||a)&&n.set("selectionExtent",o??a,!0)}function cLe(e,t,n){if(!_i(n))return;const i=e.fieldDef(t),r=i.sort;if(DQ(r))return{op:"min",field:hm(i,t),order:"ascending"};const{stack:o}=e,a=o?new Set([...o.groupbyFields,...o.stackBy.map(s=>s.fieldDef.field)]):void 0;if(Cs(r)){const s=o&&!a.has(r.field);return cR(r,s)}else if(IQ(r)){const{encoding:s,order:l}=r,u=e.fieldDef(s),{aggregate:c,field:d}=u,h=o&&!a.has(d);if(Ul(c)||Gc(c))return cR({field:Ae(u),order:l},h);if($I(c)||!c)return cR({op:c,field:d,order:l},h)}else{if(r==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Ft(["ascending",void 0],r))return!0}}function mB(e,t){const{aggregate:n,type:i}=e;return n?Oe(n)&&!zFe.has(n)?{valid:!1,reason:TPe(n)}:i==="quantitative"&&t==="log"?{valid:!1,reason:APe(e)}:{valid:!0}:{valid:!1,reason:RPe(e)}}function ZM(e,t,n,i){return e.explicit&&t.explicit&&xe($Pe(n,i,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function fLe(e){const t=gs(e.map(a=>{if(Sl(a)){const{sort:s,...l}=a;return l}return a}),Mt),n=gs(e.map(a=>{if(Sl(a)){const s=a.sort;return s!==void 0&&!nv(s)&&("op"in s&&s.op==="count"&&delete s.field,s.order==="ascending"&&delete s.order),s}}).filter(a=>a!==void 0),Mt);if(t.length===0)return;if(t.length===1){const a=e[0];if(Sl(a)&&n.length>0){let s=n[0];if(n.length>1){xe(C6);const l=n.filter(u=>Ie(u)&&"op"in u&&u.op!=="min");n.every(u=>Ie(u)&&"op"in u)&&l.length===1?s=l[0]:s=!0}else if(Ie(s)&&"field"in s){const l=s.field;a.field===l&&(s=s.order?{order:s.order}:!0)}return{...a,sort:s}}return a}const i=gs(n.map(a=>nv(a)||!("op"in a)||Oe(a.op)&&a.op in IFe?a:(xe(IPe(a)),!0)),Mt);let r;i.length===1?r=i[0]:i.length>1&&(xe(C6),r=!0);const o=gs(e.map(a=>Sl(a)?a.data:null),a=>a);return o.length===1&&o[0]!==null?{data:o[0],fields:t.map(s=>s.field),...r?{sort:r}:{}}:{fields:t,...r?{sort:r}:{}}}function OD(e){if(Sl(e)&&Oe(e.field))return e.field;if(BFe(e)){let t;for(const n of e.fields)if(Sl(n)&&Oe(n.field)){if(!t)t=n.field;else if(t!==n.field)return xe(DPe),t}return xe(LPe),t}else if(HFe(e)){xe(jPe);const t=e.fields[0];return Oe(t)?t:void 0}}function RC(e,t){const i=e.component.scales[t].get("domains").map(r=>(Sl(r)&&(r.data=e.lookupDataSource(r.data)),r));return fLe(i)}function Rte(e){return Gm(e)||ID(e)?e.children.reduce((t,n)=>t.concat(Rte(n)),gB(e)):gB(e)}function gB(e){return pe(e.component.scales).reduce((t,n)=>{const i=e.component.scales[n];if(i.merged)return t;const r=i.combine(),{name:o,type:a,selectionExtent:s,domains:l,range:u,reverse:c,...d}=r,h=dLe(r.range,o,n,e),m=RC(e,n),g=s?aIe(e,s,i,m):null;return t.push({name:o,type:a,...m?{domain:m}:{},...g?{domainRaw:g}:{},range:h,...c!==void 0?{reverse:c}:{},...d}),t},[])}function dLe(e,t,n,i){if(Bn(n)){if(qc(e))return{step:{signal:`${t}_step`}}}else if(Ie(e)&&Sl(e))return{...e,data:i.lookupDataSource(e.data)};return e}class Tte extends tu{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:xd(this.get("domains"),t=>fe(t)&&t.length===2&&zt(t[0])&&t[0]<=0&&zt(t[1])&&t[1]>=0)}}const hLe=["range","scheme"];function pLe(e){const t=e.component.scales;for(const n of nC){const i=t[n];if(!i)continue;const r=mLe(n,e);i.setWithExplicit("range",r)}}function yB(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:i,field:r}=n,o=eo(t),a=e.getName(o);if(Ie(i)&&i.binned&&i.step!==void 0)return new fi(()=>{const s=e.scaleName(t),l=`(domain("${s}")[1] - domain("${s}")[0]) / ${i.step}`;return`${e.getSignalName(a)} / (${l})`});if(fn(i)){const s=FD(e,r,i);return new fi(()=>{const l=e.getSignalName(s),u=`(${l}.stop - ${l}.start) / ${l}.step`;return`${e.getSignalName(a)} / (${u})`})}}}function mLe(e,t){const n=t.specifiedScales[e],{size:i}=t,o=t.getScaleComponent(e).get("type");for(const d of hLe)if(n[d]!==void 0){const h=NM(o,d),m=EQ(e,d);if(!h)xe(rQ(o,d,e));else if(m)xe(m);else switch(d){case"range":{const g=n.range;if(fe(g)){if(Bn(e))return cs(g.map(y=>{if(y==="width"||y==="height"){const x=t.getName(y),b=t.getSignalName.bind(t);return fi.fromName(b,x)}return y}))}else if(Ie(g))return cs({data:t.requestDataName(un.Main),field:g.field,sort:{op:"min",field:t.vgField(e)}});return cs(g)}case"scheme":return cs(gLe(n[d]))}}const a=e===Cn||e==="xOffset"?"width":"height",s=i[a];if(Os(s)){if(Bn(e))if(_i(o)){const d=Mte(s,t,e);if(d)return cs({step:d})}else xe(oQ(a));else if(Kv(e)){const d=e===zc?"x":"y";if(t.getScaleComponent(d).get("type")==="band"){const g=Fte(s,o);if(g)return cs(g)}}}const{rangeMin:l,rangeMax:u}=n,c=yLe(e,t);return(l!==void 0||u!==void 0)&&NM(o,"rangeMin")&&fe(c)&&c.length===2?cs([l??c[0],u??c[1]]):ro(c)}function gLe(e){return CNe(e)?{scheme:e.name,...Vr(e,["name"])}:{scheme:e}}function Ate(e,t,n,{center:i}={}){const r=eo(e),o=t.getName(r),a=t.getSignalName.bind(t);return e===wi&&Co(n)?i?[fi.fromName(s=>`${a(s)}/2`,o),fi.fromName(s=>`-${a(s)}/2`,o)]:[fi.fromName(a,o),0]:i?[fi.fromName(s=>`-${a(s)}/2`,o),fi.fromName(s=>`${a(s)}/2`,o)]:[0,fi.fromName(a,o)]}function yLe(e,t){const{size:n,config:i,mark:r,encoding:o}=t,{type:a}=ti(o[e]),l=t.getScaleComponent(e).get("type"),{domain:u,domainMid:c}=t.specifiedScales[e];switch(e){case Cn:case wi:{if(Ft(["point","band"],l)){const d=Pte(e,n,i.view);if(Os(d))return{step:Mte(d,t,e)}}return Ate(e,t,l)}case zc:case jm:return vLe(e,t,l);case Kl:{const d=t.component.scales[e].get("zero"),h=Nte(r,d,i),m=bLe(r,n,t,i);return am(l)?_Le(h,m,xLe(l,i,u,e)):[h,m]}case ra:return[0,Math.PI*2];case Wd:return[0,360];case qa:return[0,new fi(()=>{const d=t.getSignalName("width"),h=t.getSignalName("height");return`min(${d},${h})/2`})];case Uc:return[i.scale.minStrokeWidth,i.scale.maxStrokeWidth];case Wc:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Qr:return"symbol";case Jr:case Us:case Ws:return l==="ordinal"?a==="nominal"?"category":"ordinal":c!==void 0?"diverging":r==="rect"||r==="geoshape"?"heatmap":"ramp";case Jl:case Bc:case Hc:return[i.scale.minOpacity,i.scale.maxOpacity]}}function Mte(e,t,n){const{encoding:i}=t,r=t.getScaleComponent(n),o=MI(n),a=i[o];if(gee({step:e,offsetIsDiscrete:mt(a)&&xQ(a.type)})==="offset"&&KQ(i,o)){const l=t.getScaleComponent(o);let c=`domain('${t.scaleName(o)}').length`;if(l.get("type")==="band"){const h=l.get("paddingInner")??l.get("padding")??0,m=l.get("paddingOuter")??l.get("padding")??0;c=`bandspace(${c}, ${h}, ${m})`}const d=r.get("paddingInner")??r.get("padding");return{signal:`${e.step} * ${c} / (1-${qFe(d)})`}}else return e.step}function Fte(e,t){if(gee({step:e,offsetIsDiscrete:_i(t)})==="offset")return{step:e.step}}function vLe(e,t,n){const i=e===zc?"x":"y",r=t.getScaleComponent(i);if(!r)return Ate(i,t,n,{center:!0});const o=r.get("type"),a=t.scaleName(i),{markDef:s,config:l}=t;if(o==="band"){const u=Pte(i,t.size,t.config.view);if(Os(u)){const c=Fte(u,n);if(c)return c}return[0,{signal:`bandwidth('${a}')`}]}else{const u=t.encoding[i];if(ve(u)&&u.timeUnit){const c=mQ(u.timeUnit,g=>`scale('${a}', ${g})`),d=t.config.scale.bandWithNestedOffsetPaddingInner,h=wc({fieldDef:u,markDef:s,config:l})-.5,m=h!==0?` + ${h}`:"";if(d){const g=Ve(d)?`${d.signal}/2`+m:`${d/2+h}`,y=Ve(d)?`(1 - ${d.signal}/2)`+m:`${1-d/2+h}`;return[{signal:`${g} * (${c})`},{signal:`${y} * (${c})`}]}return[0,{signal:c}]}return EJ(`Cannot use ${e} scale if ${i} scale is not discrete.`)}}function Pte(e,t,n){const i=e===Cn?"width":"height",r=t[i];return r||Ww(n,i)}function xLe(e,t,n,i){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&fe(n)?n.length+1:(xe(YPe(i)),3)}}function _Le(e,t,n){const i=()=>{const r=Ta(t),o=Ta(e),a=`(${r} - ${o}) / (${n} - 1)`;return`sequence(${o}, ${r} + ${a}, ${a})`};return Ve(t)?new fi(i):{signal:i()}}function Nte(e,t,n){if(t)return Ve(t)?{signal:`${t.signal} ? 0 : ${Nte(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(rC("size",e))}const vB=.95;function bLe(e,t,n,i){const r={x:yB(n,"x"),y:yB(n,"y")};switch(e){case"bar":case"tick":{if(i.scale.maxBandSize!==void 0)return i.scale.maxBandSize;const o=xB(t,r,i.view);return zt(o)?o-1:new fi(()=>`${o.signal} - 1`)}case"line":case"trail":case"rule":return i.scale.maxStrokeWidth;case"text":return i.scale.maxFontSize;case"point":case"square":case"circle":{if(i.scale.maxSize)return i.scale.maxSize;const o=xB(t,r,i.view);return zt(o)?Math.pow(vB*o,2):new fi(()=>`pow(${vB} * ${o.signal}, 2)`)}}throw new Error(rC("size",e))}function xB(e,t,n){const i=Os(e.width)?e.width.step:Uw(n,"width"),r=Os(e.height)?e.height.step:Uw(n,"height");return t.x||t.y?new fi(()=>`min(${[t.x?t.x.signal:i,t.y?t.y.signal:r].join(", ")})`):Math.min(i,r)}function $te(e,t){$n(e)?wLe(e,t):Ite(e,t)}function wLe(e,t){const n=e.component.scales,{config:i,encoding:r,markDef:o,specifiedScales:a}=e;for(const s of pe(n)){const l=a[s],u=n[s],c=e.getScaleComponent(s),d=ti(r[s]),h=l[t],m=c.get("type"),g=c.get("padding"),y=c.get("paddingInner"),x=NM(m,t),b=EQ(s,t);if(h!==void 0&&(x?b&&xe(b):xe(rQ(m,t,s))),x&&b===void 0)if(h!==void 0){const w=d.timeUnit,S=d.type;switch(t){case"domainMax":case"domainMin":Vd(l[t])||S==="temporal"||w?u.set(t,{signal:mC(l[t],{type:S,timeUnit:w})},!0):u.set(t,l[t],!0);break;default:u.copyKeyFromObject(t,l)}}else{const w=t in _B?_B[t]({model:e,channel:s,fieldOrDatumDef:d,scaleType:m,scalePadding:g,scalePaddingInner:y,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:o,config:i,hasNestedOffsetScale:JQ(r,s),hasSecondaryRangeChannel:!!r[Gs(s)]}):i.scale[t];w!==void 0&&u.set(t,w,!1)}}}const _B={bins:({model:e,fieldOrDatumDef:t})=>ve(t)?SLe(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>CLe(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:i,domainMax:r,fieldOrDatumDef:o})=>ELe(e,t,n,i,r,o),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:i,config:r})=>kLe(e,t,r.scale,n,i,r.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:i,config:r,hasNestedOffsetScale:o})=>RLe(e,t,n.type,i,r.scale,o),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:i,config:r,hasNestedOffsetScale:o})=>TLe(e,t,n,i,r.scale,o),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:i})=>{const r=ve(e)?e.sort:void 0;return ALe(t,r,n,i.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:i,scaleType:r,config:o,hasSecondaryRangeChannel:a})=>MLe(e,t,n,i,r,o.scale,a)};function Ote(e){$n(e)?pLe(e):Ite(e,"range")}function Ite(e,t){const n=e.component.scales;for(const i of e.children)t==="range"?Ote(i):$te(i,t);for(const i of pe(n)){let r;for(const o of e.children){const a=o.component.scales[i];if(a){const s=a.getWithExplicit(t);r=Sc(r,s,t,"scale",Aee((l,u)=>{switch(t){case"range":return l.step&&u.step?l.step-u.step:0}return 0}))}}n[i].setWithExplicit(t,r)}}function SLe(e,t){const n=t.bin;if(fn(n)){const i=FD(e,t.field,n);return new fi(()=>e.getSignalName(i))}else if(ki(n)&&qd(n)&&n.step!==void 0)return{step:n.step}}function CLe(e,t){if(Ft([Jr,Us,Ws],e)&&t!=="nominal")return"hcl"}function ELe(e,t,n,i,r,o){var a;if(!((a=$s(o))!=null&&a.bin||fe(n)||r!=null||i!=null||Ft([Yr.TIME,Yr.UTC],e)))return Bn(t)?!0:void 0}function kLe(e,t,n,i,r,o){if(Bn(e)){if(Aa(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:a,orient:s}=r;if(a==="bar"&&!(ve(i)&&(i.bin||i.timeUnit))&&(s==="vertical"&&e==="x"||s==="horizontal"&&e==="y"))return o.continuousBandSize}if(t===Yr.POINT)return n.pointPadding}}function RLe(e,t,n,i,r,o=!1){if(e===void 0){if(Bn(t)){const{bandPaddingInner:a,barBandPaddingInner:s,rectBandPaddingInner:l,bandWithNestedOffsetPaddingInner:u}=r;return o?u:zn(a,n==="bar"?s:l)}else if(Kv(t)&&i===Yr.BAND)return r.offsetBandPaddingInner}}function TLe(e,t,n,i,r,o=!1){if(e===void 0){if(Bn(t)){const{bandPaddingOuter:a,bandWithNestedOffsetPaddingOuter:s}=r;if(o)return s;if(n===Yr.BAND)return zn(a,Ve(i)?{signal:`${i.signal}/2`}:i/2)}else if(Kv(t)){if(n===Yr.POINT)return .5;if(n===Yr.BAND)return r.offsetBandPaddingOuter}}}function ALe(e,t,n,i){if(n==="x"&&i.xReverse!==void 0)return Co(e)&&t==="descending"?Ve(i.xReverse)?{signal:`!${i.xReverse.signal}`}:!i.xReverse:i.xReverse;if(Co(e)&&t==="descending")return!0}function MLe(e,t,n,i,r,o,a){if(!!n&&n!=="unaggregated"&&Co(r)){if(fe(n)){const l=n[0],u=n[n.length-1];if(zt(l)&&l<=0&&zt(u)&&u>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!am(r))return!0;if(!(ve(t)&&t.bin)&&Ft([...qs,...TFe],e)){const{orient:l,type:u}=i;return Ft(["bar","area","line","trail"],u)&&(l==="horizontal"&&e==="y"||l==="vertical"&&e==="x")?!1:Ft(["bar","area"],u)&&!a?!0:o==null?void 0:o.zero}return!1}function FLe(e,t,n,i,r=!1){const o=PLe(t,n,i,r),{type:a}=e;return Ql(t)?a!==void 0?FNe(t,a)?ve(n)&&!MNe(a,n.type)?(xe(PPe(a,o)),o):a:(xe(FPe(t,a,o)),o):o:null}function PLe(e,t,n,i){var r;switch(t.type){case"nominal":case"ordinal":{if(xp(e)||tR(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&xe(nR(e,"ordinal")),"ordinal";if(Bn(e)||Kv(e)){if(Ft(["rect","bar","image","rule"],n.type)||i)return"band"}else if(n.type==="arc"&&e in NI)return"band";const o=n[eo(e)];return Cd(o)||lm(t)&&((r=t.axis)!=null&&r.tickBand)?"band":"point"}case"temporal":return xp(e)?"time":tR(e)==="discrete"?(xe(nR(e,"temporal")),"ordinal"):ve(t)&&t.timeUnit&&xi(t.timeUnit).utc?"utc":"time";case"quantitative":return xp(e)?ve(t)&&fn(t.bin)?"bin-ordinal":"linear":tR(e)==="discrete"?(xe(nR(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(nQ(t.type))}function NLe(e,{ignoreRange:t}={}){Dte(e),kte(e);for(const n of ANe)$te(e,n);t||Ote(e)}function Dte(e){$n(e)?e.component.scales=$Le(e):e.component.scales=ILe(e)}function $Le(e){const{encoding:t,mark:n,markDef:i}=e,r={};for(const o of nC){const a=ti(t[o]);if(a&&n===TQ&&o===Qr&&a.type===zm)continue;let s=a&&a.scale;if(a&&s!==null&&s!==!1){s??(s={});const l=JQ(t,o),u=FLe(s,o,a,i,l);r[o]=new Tte(e.scaleName(`${o}`,!0),{value:u,explicit:s.type===u})}}return r}const OLe=Aee((e,t)=>k6(e)-k6(t));function ILe(e){var t;const n=e.component.scales={},i={},r=e.component.resolve;for(const o of e.children){Dte(o);for(const a of pe(o.component.scales))if((t=r.scale)[a]??(t[a]=hte(a,e)),r.scale[a]==="shared"){const s=i[a],l=o.component.scales[a].getWithExplicit("type");s?xNe(s.value,l.value)?i[a]=Sc(s,l,"type","scale",OLe):(r.scale[a]="independent",delete i[a]):i[a]=l}}for(const o of pe(i)){const a=e.scaleName(o,!0),s=i[o];n[o]=new Tte(a,s);for(const l of e.children){const u=l.component.scales[o];u&&(l.renameScale(u.get("name"),a),u.merged=!0)}}return n}class fR{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function $n(e){return(e==null?void 0:e.type)==="unit"}function Oa(e){return(e==null?void 0:e.type)==="facet"}function ID(e){return(e==null?void 0:e.type)==="concat"}function Gm(e){return(e==null?void 0:e.type)==="layer"}class DD{constructor(t,n,i,r,o,a,s){this.type=n,this.parent=i,this.config=o,this.correctDataNames=l=>{var u,c,d;return(u=l.from)!=null&&u.data&&(l.from.data=this.lookupDataSource(l.from.data)),(d=(c=l.from)==null?void 0:c.facet)!=null&&d.data&&(l.from.facet.data=this.lookupDataSource(l.from.facet.data)),l},this.parent=i,this.config=o,this.view=Lr(s),this.name=t.name??r,this.title=ku(t.title)?{text:t.title}:t.title?Lr(t.title):void 0,this.scaleNameMap=i?i.scaleNameMap:new fR,this.projectionNameMap=i?i.projectionNameMap:new fR,this.signalNameMap=i?i.signalNameMap:new fR,this.data=t.data,this.description=t.description,this.transforms=UOe(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:V$e(t,n,o),this.component={data:{sources:i?i.component.data.sources:[],outputNodes:i?i.component.data.outputNodes:{},outputNodeRefCounts:i?i.component.data.outputNodeRefCounts:{},isFaceted:fC(t)||(i==null?void 0:i.component.data.isFaceted)&&t.data===void 0},layoutSize:new tu,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...a?ht(a):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){NLe(this)}parseProjection(){Ste(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){vte(this)}assembleEncodeFromView(t){const{style:n,...i}=t,r={};for(const o of pe(i)){const a=i[o];a!==void 0&&(r[o]=gn(a))}return r}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=gn(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n??{}}:on(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:i,config:r}=this,o=iDe(i.layoutHeaders,r);return{padding:t,...this.assembleDefaultLayout(),...n,...o?{titleBand:o}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const i of Ho)t[i].title&&n.push(KIe(this,i));for(const i of RD)n=n.concat(JIe(this,i));return n}assembleAxes(){return LIe(this.component.axes,this.config)}assembleLegends(){return _te(this)}assembleProjections(){return kDe(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},i={...VJ(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(i.text)return Ft(["unit","layer"],this.type)?Ft(["middle",void 0],i.anchor)&&(i.frame??(i.frame="group")):i.anchor??(i.anchor="start"),on(i)?void 0:i}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const i=this.assembleLayout();i&&(n.layout=i),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||Oa(this.parent)?Rte(this):[];r.length>0&&(n.scales=r);const o=this.assembleAxes();o.length>0&&(n.axes=o);const a=this.assembleLegends();return a.length>0&&(n.legends=a),n}getName(t){return Sn((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(un[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),i=this.component.data.outputNodeRefCounts;return i[n]=(i[n]||0)+1,n}getSizeSignalRef(t){if(Oa(this.parent)){const n=fte(t),i=tC(n),r=this.component.scales[i];if(r&&!r.merged){const o=r.get("type"),a=r.get("range");if(_i(o)&&qc(a)){const s=r.get("name"),l=RC(this,i),u=OD(l);if(u){const c=Ae({aggregate:"distinct",field:u},{expr:"datum"});return{signal:cte(s,r,c)}}else return xe(II(i)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(LJ(t)&&Ql(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let i=this.component.selection[t];if(!i&&this.parent&&(i=this.parent.getSelectionComponent(t,n)),!i)throw new Error(KFe(n));return i}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(i=>i.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(i=>i.hasOrientSignalRef()))}}class Lte extends DD{vgField(t,n={}){const i=this.fieldDef(t);if(i)return Ae(i,n)}reduceFieldDef(t,n){return w$e(this.getMapping(),(i,r,o)=>{const a=$s(r);return a?t(i,a,o):i},n)}forEachFieldDef(t,n){uD(this.getMapping(),(i,r)=>{const o=$s(i);o&&t(o,r)},n)}}class TC extends nn{clone(){return new TC(null,ht(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ht(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"value",i[1]??"density"]}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Mt(this.transform)}`}assemble(){const{density:t,...n}=this.transform,i={type:"kde",field:t,...n};return this.transform.groupby&&(i.resolve="shared"),i}}class AC extends nn{clone(){return new AC(null,ht(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ht(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Mt(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class av extends nn{clone(){return new av(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:i,mark:r,markDef:o}=n;if(Jt("invalid",o,i)!=="filter")return null;const s=n.reduceFieldDef((l,u,c)=>{const d=Ql(c)&&n.getScaleComponent(c);if(d){const h=d.get("type");Co(h)&&u.aggregate!=="count"&&!Vc(r)&&(l[u.field]=u)}return l},{});return pe(s).length?new av(t,s):null}dependentFields(){return new Set(pe(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Mt(this.filter)}`}assemble(){const t=pe(this.filter).reduce((n,i)=>{const r=this.filter[i],o=Ae(r,{expr:"datum"});return r!==null&&(r.type==="temporal"?n.push(`(isDate(${o}) || (isValid(${o}) && isFinite(+${o})))`):r.type==="quantitative"&&(n.push(`isValid(${o})`),n.push(`isFinite(+${o})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class MC extends nn{clone(){return new MC(this.parent,ht(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ht(n);const{flatten:i,as:r=[]}=this.transform;this.transform.as=i.map((o,a)=>r[a]??o)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Mt(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class FC extends nn{clone(){return new FC(null,ht(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ht(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"key",i[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Mt(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class wp extends nn{clone(){return new wp(null,ht(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let i=0;for(const r of[[Ya,Va],[na,Za]]){const o=r.map(a=>{const s=ti(n.encoding[a]);return ve(s)?s.field:Vs(s)?{expr:`${s.datum}`}:za(s)?{expr:`${s.value}`}:void 0});(o[0]||o[1])&&(t=new wp(t,o,null,n.getName(`geojson_${i++}`)))}if(n.channelHasField(Qr)){const r=n.typedFieldDef(Qr);r.type===zm&&(t=new wp(t,null,r.field,n.getName(`geojson_${i++}`)))}return t}constructor(t,n,i,r){super(t),this.fields=n,this.geojson=i,this.signal=r}dependentFields(){const t=(this.fields??[]).filter(Oe);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Mt(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class sv extends nn{clone(){return new sv(null,this.projection,ht(this.fields),ht(this.as))}constructor(t,n,i,r){super(t),this.projection=n,this.fields=i,this.as=r}static parseAll(t,n){if(!n.projectionName())return t;for(const i of[[Ya,Va],[na,Za]]){const r=i.map(a=>{const s=ti(n.encoding[a]);return ve(s)?s.field:Vs(s)?{expr:`${s.datum}`}:za(s)?{expr:`${s.value}`}:void 0}),o=i[0]===na?"2":"";(r[0]||r[1])&&(t=new sv(t,n.projectionName(),r,[n.getName(`x${o}`),n.getName(`y${o}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Oe))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Mt(this.fields)} ${Mt(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Jf extends nn{clone(){return new Jf(null,ht(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:i,step:r}=t;return{signal:`sequence(${[n,i,...r?[r]:[]].join(",")})`}}static makeFromTransform(t,n){return new Jf(t,n)}static makeFromEncoding(t,n){const i=n.encoding,r=i.x,o=i.y;if(ve(r)&&ve(o)){const a=r.impute?r:o.impute?o:void 0;if(a===void 0)return;const s=r.impute?o:o.impute?r:void 0,{method:l,value:u,frame:c,keyvals:d}=a.impute,h=eee(n.mark,i);return new Jf(t,{impute:a.field,key:s.field,...l?{method:l}:{},...u!==void 0?{value:u}:{},...c?{frame:c}:{},...d!==void 0?{keyvals:d}:{},...h.length?{groupby:h}:{}})}return null}hash(){return`Impute ${Mt(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:i,method:r,groupby:o,value:a,frame:s=[null,null]}=this.transform,l={type:"impute",field:t,key:n,...i?{keyvals:COe(i)?this.processSequence(i):i}:{},method:"value",...o?{groupby:o}:{},value:!r||r==="value"?a:null};if(r&&r!=="value"){const u={type:"window",as:[`imputed_${t}_value`],ops:[r],fields:[t],frame:s,ignorePeers:!1,...o?{groupby:o}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[l,u,c]}else return[l]}}class PC extends nn{clone(){return new PC(null,ht(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ht(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Mt(this.transform)}`}assemble(){const{loess:t,on:n,...i}=this.transform;return{type:"loess",x:n,y:t,...i}}}class lv extends nn{clone(){return new lv(null,ht(this.transform),this.secondary)}constructor(t,n,i){super(t),this.transform=n,this.secondary=i}static make(t,n,i,r){const o=n.component.data.sources,{from:a}=i;let s=null;if(EOe(a)){let l=Bte(a.data,o);l||(l=new Td(a.data),o.push(l));const u=n.getName(`lookup_${r}`);s=new vr(l,u,un.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[u]=s}else if(kOe(a)){const l=a.param;i={as:l,...i};let u;try{u=n.getSelectionComponent(Sn(l),l)}catch{throw new Error(ePe(l))}if(s=u.materialized,!s)throw new Error(tPe(l))}return new lv(t,i,s.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?$e(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Mt({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:$e(this.transform.as)}:{}};else{let n=this.transform.as;Oe(n)||(xe(uPe),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class NC extends nn{clone(){return new NC(null,ht(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ht(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"prob",i[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Mt(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class $C extends nn{clone(){return new $C(null,ht(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ht(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Mt(this.transform)}`}assemble(){const{regression:t,on:n,...i}=this.transform;return{type:"regression",x:n,y:t,...i}}}class OC extends nn{clone(){return new OC(null,ht(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=gs((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Mt(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:i,limit:r,op:o}=this.transform;return{type:"pivot",field:t,value:n,...r!==void 0?{limit:r}:{},...o!==void 0?{op:o}:{},...i!==void 0?{groupby:i}:{}}}}class IC extends nn{clone(){return new IC(null,ht(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Mt(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function jte(e){let t=0;function n(i,r){if(i instanceof Td&&!i.isGenerator&&!cm(i.data)&&(e.push(r),r={name:null,source:r.name,transform:[]}),i instanceof Zi&&(i.parent instanceof Td&&!r.source?(r.format={...r.format??{},parse:i.assembleFormatParse()},r.transform.push(...i.assembleTransforms(!0))):r.transform.push(...i.assembleTransforms())),i instanceof Um){r.name||(r.name=`data_${t++}`),!r.source||r.transform.length>0?(e.push(r),i.data=r.name):i.data=r.source,e.push(...i.assemble());return}switch((i instanceof a1||i instanceof s1||i instanceof av||i instanceof Hm||i instanceof dm||i instanceof sv||i instanceof $a||i instanceof lv||i instanceof Wm||i instanceof Kd||i instanceof FC||i instanceof MC||i instanceof TC||i instanceof PC||i instanceof NC||i instanceof $C||i instanceof kc||i instanceof IC||i instanceof OC||i instanceof AC)&&r.transform.push(i.assemble()),(i instanceof ks||i instanceof Es||i instanceof Jf||i instanceof Pl||i instanceof wp)&&r.transform.push(...i.assemble()),i instanceof vr&&(r.source&&r.transform.length===0?i.setSource(r.source):i.parent instanceof vr?i.setSource(r.name):(r.name||(r.name=`data_${t++}`),i.setSource(r.name),i.numChildren()===1&&(e.push(r),r={name:null,source:r.name,transform:[]}))),i.numChildren()){case 0:i instanceof vr&&(!r.source||r.transform.length>0)&&e.push(r);break;case 1:n(i.children[0],r);break;default:{r.name||(r.name=`data_${t++}`);let o=r.name;!r.source||r.transform.length>0?e.push(r):o=r.source;for(const a of i.children)n(a,{name:null,source:o,transform:[]});break}}}return n}function DLe(e){const t=[],n=jte(t);for(const i of e.children)n(i,{source:e.name,name:null,transform:[]});return t}function LLe(e,t){const n=[],i=jte(n);let r=0;for(const a of e.sources){a.hasName()||(a.dataName=`source_${r++}`);const s=a.assemble();i(a,s)}for(const a of n)a.transform.length===0&&delete a.transform;let o=0;for(const[a,s]of n.entries())(s.transform??[]).length===0&&!s.source&&n.splice(o++,0,n.splice(a,1)[0]);for(const a of n)for(const s of a.transform??[])s.type==="lookup"&&(s.from=e.outputNodes[s.from].getSource());for(const a of n)a.name in t&&(a.values=t[a.name]);return n}function jLe(e){return e==="top"||e==="left"||Ve(e)?"header":"footer"}function zLe(e){for(const t of Ho)BLe(e,t);bB(e,"x"),bB(e,"y")}function BLe(e,t){var a;const{facet:n,config:i,child:r,component:o}=e;if(e.channelHasField(t)){const s=n[t],l=pm("title",null,i,t);let u=_p(s,i,{allowDisabling:!0,includeDefault:l===void 0||!!l});r.component.layoutHeaders[t].title&&(u=fe(u)?u.join(", "):u,u+=` / ${r.component.layoutHeaders[t].title}`,r.component.layoutHeaders[t].title=null);const c=pm("labelOrient",s.header,i,t),d=s.header!==null?zn((a=s.header)==null?void 0:a.labels,i.header.labels,!0):!1,h=Ft(["bottom","right"],c)?"footer":"header";o.layoutHeaders[t]={title:s.header!==null?u:null,facetFieldDef:s,[h]:t==="facet"?[]:[zte(e,t,d)]}}}function zte(e,t,n){const i=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(i)?e.child.getSizeSignalRef(i):void 0,axes:[]}}function bB(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:i,resolve:r}=e.component;if(r.axis[t]=MD(r,t),r.axis[t]==="shared"){const o=t==="x"?"column":"row",a=i[o];for(const s of n.component.axes[t]){const l=jLe(s.get("orient"));a[l]??(a[l]=[zte(e,o,!1)]);const u=A0(s,"main",e.config,{header:!0});u&&a[l][0].axes.push(u),s.mainExtracted=!0}}}}function HLe(e){LD(e),Yw(e,"width"),Yw(e,"height")}function ULe(e){LD(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";Yw(e,t),Yw(e,n)}function LD(e){for(const t of e.children)t.parseLayoutSize()}function Yw(e,t){const n=fte(t),i=tC(n),r=e.component.resolve,o=e.component.layoutSize;let a;for(const s of e.children){const l=s.component.layoutSize.getWithExplicit(n),u=r.scale[i]??hte(i,e);if(u==="independent"&&l.value==="step"){a=void 0;break}if(a){if(u==="independent"&&a.value!==l.value){a=void 0;break}a=Sc(a,l,n,"")}else a=l}if(a){for(const s of e.children)e.renameSignal(s.getName(n),e.getName(t)),s.component.layoutSize.set(n,"merged",!1);o.setWithExplicit(t,a)}else o.setWithExplicit(t,{explicit:!1,value:void 0})}function WLe(e){const{size:t,component:n}=e;for(const i of qs){const r=eo(i);if(t[r]){const o=t[r];n.layoutSize.set(r,Os(o)?"step":o,!0)}else{const o=GLe(e,r);n.layoutSize.set(r,o,!1)}}}function GLe(e,t){const n=t==="width"?"x":"y",i=e.config,r=e.getScaleComponent(n);if(r){const o=r.get("type"),a=r.get("range");if(_i(o)){const s=Ww(i.view,t);return qc(a)||Os(s)?"step":s}else return IM(i.view,t)}else{if(e.hasProjection||e.mark==="arc")return IM(i.view,t);{const o=Ww(i.view,t);return Os(o)?o.step:o}}}function XM(e,t,n){return Ae(t,{suffix:`by_${Ae(e)}`,...n??{}})}class ry extends Lte{constructor(t,n,i,r){super(t,"facet",n,i,r,t.resolve),this.child=UD(t.spec,this,this.getName("child"),void 0,r),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!t1(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=pe(t),i={};for(const r of n){if(![Al,Ml].includes(r)){xe(rC(r,"facet"));break}const o=t[r];if(o.field===void 0){xe(FM(o,r));break}i[r]=this.initFacetFieldDef(o,r)}return i}initFacetFieldDef(t,n){const i=sD(t,n);return i.header?i.header=Lr(i.header):i.header===null&&(i.header=null),i}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=DC(this),this.child.parseData()}parseLayoutSize(){LD(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),zLe(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Ho)for(const i of TD){const r=this.component.layoutHeaders[n],o=r[i],{facetFieldDef:a}=r;if(a){const s=pm("titleOrient",a.header,this.config,n);if(["right","bottom"].includes(s)){const l=EC(n,s);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[l]="end"}}if(o!=null&&o[0]){const s=n==="row"?"height":"width",l=i==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(s)&&(t[l]??(t[l]={}),t[l][n]=.5),r.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,i=t?this.columnDistinctSignal():n?1:void 0;let r="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(r="none"),{...this.getHeaderLayoutMixins(),...i?{columns:i}:{},bounds:"full",align:r}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof ry))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof ry?{...this.channelHasField("column")?{encode:{update:{columns:{field:Ae(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],i=[];if(this.child instanceof ry){if(this.child.channelHasField("column")){const r=Ae(this.child.facet.column);t.push(r),n.push("distinct"),i.push(`distinct_${r}`)}}else for(const r of qs){const o=this.child.component.scales[r];if(o&&!o.merged){const a=o.get("type"),s=o.get("range");if(_i(a)&&qc(s)){const l=RC(this.child,r),u=OD(l);u?(t.push(u),n.push("distinct"),i.push(`distinct_${u}`)):xe(II(r))}}}return{fields:t,ops:n,as:i}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:i,column:r}=this.facet,{fields:o,ops:a,as:s}=this.getCardinalityAggregateForChild(),l=[];for(const c of Ho){const d=this.facet[c];if(d){l.push(Ae(d));const{bin:h,sort:m}=d;if(fn(h)&&l.push(Ae(d,{binSuffix:"end"})),Cs(m)){const{field:g,op:y=cC}=m,x=XM(d,m);i&&r?(o.push(x),a.push("max"),s.push(x)):(o.push(g),a.push(y),s.push(x))}else if(fe(m)){const g=hm(d,c);o.push(g),a.push("max"),s.push(g)}}}const u=!!i&&!!r;return{name:t,data:n,groupby:l,...u||o.length>0?{aggregate:{...u?{cross:u}:{},...o.length?{fields:o,ops:a,as:s}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,i=n[t];return i?Cs(i.sort)?[XM(i,i.sort,{expr:"datum"})]:fe(i.sort)?[hm(i,t,{expr:"datum"})]:[Ae(i,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,i=n[t];if(i){const{sort:r}=i;return[(Cs(r)?r.order:!fe(r)&&r)||"ascending"]}return[]}assembleLabelTitle(){var r;const{facet:t,config:n}=this;if(t.facet)return WM(t.facet,"facet",n);const i={row:["top","bottom"],column:["left","right"]};for(const o of RD)if(t[o]){const a=pm("labelOrient",(r=t[o])==null?void 0:r.header,n,o);if(i[o].includes(a))return WM(t[o],o,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,i=DLe(n),r=t.assembleGroupEncodeEntry(!1),o=this.assembleLabelTitle()||t.assembleTitle(),a=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...o?{title:o}:{},...a?{style:a}:{},from:{facet:this.assembleFacet()},sort:{field:Ho.map(l=>this.facetSortFields(l)).flat(),order:Ho.map(l=>this.facetSortOrder(l)).flat()},...i.length>0?{data:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup(nIe(this,[]))}]}getMapping(){return this.facet}}function qLe(e,t){const{row:n,column:i}=t;if(n&&i){let r=null;for(const o of[n,i])if(Cs(o.sort)){const{field:a,op:s=cC}=o.sort;e=r=new Kd(e,{joinaggregate:[{op:s,field:a,as:XM(o,o.sort,{forAs:!0})}],groupby:[Ae(o)]})}return r}return null}function Bte(e,t){var n,i,r,o;for(const a of t){const s=a.data;if(e.name&&a.hasName()&&e.name!==a.dataName)continue;const l=(n=e.format)==null?void 0:n.mesh,u=(i=s.format)==null?void 0:i.feature;if(l&&u)continue;const c=(r=e.format)==null?void 0:r.feature;if((c||u)&&c!==u)continue;const d=(o=s.format)==null?void 0:o.mesh;if(!((l||d)&&l!==d)){if(ov(e)&&ov(s)){if(po(e.values,s.values))return a}else if(cm(e)&&cm(s)){if(e.url===s.url)return a}else if(Mee(e)&&e.name===a.dataName)return a}}return null}function VLe(e,t){if(e.data||!e.parent){if(e.data===null){const i=new Td({values:[]});return t.push(i),i}const n=Bte(e.data,t);if(n)return ic(e.data)||(n.data.format=kJ({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const i=new Td(e.data);return t.push(i),i}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function YLe(e,t,n){let i=0;for(const r of t.transforms){let o,a;if(IOe(r))a=e=new dm(e,r),o="derived";else if(_D(r)){const s=jDe(r);a=e=Zi.makeWithAncestors(e,{},s,n)??e,e=new Hm(e,t,r.filter)}else if(Eee(r))a=e=ks.makeFromTransform(e,r,t),o="number";else if(LOe(r))o="date",n.getWithExplicit(r.field).value===void 0&&(e=new Zi(e,{[r.field]:o}),n.set(r.field,o,!1)),a=e=Es.makeFromTransform(e,r);else if(jOe(r))a=e=$a.makeFromTransform(e,r),o="number",kD(t)&&(e=new kc(e));else if(Cee(r))a=e=lv.make(e,t,r,i++),o="derived";else if(NOe(r))a=e=new Wm(e,r),o="number";else if($Oe(r))a=e=new Kd(e,r),o="number";else if(zOe(r))a=e=Pl.makeFromTransform(e,r),o="derived";else if(BOe(r))a=e=new FC(e,r),o="derived";else if(HOe(r))a=e=new AC(e,r),o="derived";else if(OOe(r))a=e=new MC(e,r),o="derived";else if(ROe(r))a=e=new OC(e,r),o="derived";else if(POe(r))e=new IC(e,r);else if(DOe(r))a=e=Jf.makeFromTransform(e,r),o="derived";else if(TOe(r))a=e=new TC(e,r),o="derived";else if(AOe(r))a=e=new NC(e,r),o="derived";else if(MOe(r))a=e=new $C(e,r),o="derived";else if(FOe(r))a=e=new PC(e,r),o="derived";else{xe(lPe(r));continue}if(a&&o!==void 0)for(const s of a.producedFields()??[])n.set(s,o,!1)}return e}function DC(e){var y;let t=VLe(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:i}=e.component.data,r=e.data,a=!(r&&(ic(r)||cm(r)||ov(r)))&&e.parent?e.parent.component.data.ancestorParse.clone():new eIe;ic(r)?(Fee(r)?t=new s1(t,r.sequence):bD(r)&&(t=new a1(t,r.graticule)),a.parseNothing=!0):((y=r==null?void 0:r.format)==null?void 0:y.parse)===null&&(a.parseNothing=!0),t=Zi.makeExplicit(t,e,a)??t,t=new kc(t);const s=e.parent&&Gm(e.parent);($n(e)||Oa(e))&&s&&(t=ks.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=YLe(t,e,a));const l=BDe(e),u=zDe(e);t=Zi.makeWithAncestors(t,{},{...l,...u},a)??t,$n(e)&&(t=wp.parseAll(t,e),t=sv.parseAll(t,e)),($n(e)||Oa(e))&&(s||(t=ks.makeFromEncoding(t,e)??t),t=Es.makeFromEncoding(t,e)??t,t=dm.parseAllForSortIndex(t,e));const c=e.getDataName(un.Raw),d=new vr(t,c,un.Raw,i);if(n[c]=d,t=d,$n(e)){const x=$a.makeFromEncoding(t,e);x&&(t=x,kD(e)&&(t=new kc(t))),t=Jf.makeFromEncoding(t,e)??t,t=Pl.makeFromEncoding(t,e)??t}$n(e)&&(t=av.make(t,e)??t);const h=e.getDataName(un.Main),m=new vr(t,h,un.Main,i);n[h]=m,t=m,$n(e)&&IIe(e,m);let g=null;if(Oa(e)){const x=e.getName("facet");t=qLe(t,e.facet)??t,g=new Um(t,e,x,m.getSource()),n[x]=g}return{...e.component.data,outputNodes:n,outputNodeRefCounts:i,raw:d,main:m,facetRoot:g,ancestorParse:a}}class ZLe extends DD{constructor(t,n,i,r){var o,a,s,l;super(t,"concat",n,i,r,t.resolve),(((a=(o=t.resolve)==null?void 0:o.axis)==null?void 0:a.x)==="shared"||((l=(s=t.resolve)==null?void 0:s.axis)==null?void 0:l.y)==="shared")&&xe(oPe),this.children=this.getChildren(t).map((u,c)=>UD(u,this,this.getName(`concat_${c}`),void 0,r))}parseData(){this.component.data=DC(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of pe(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return vC(t)?t.vconcat:vD(t)?t.hconcat:t.concat}parseLayoutSize(){ULe(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=AD(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),i=t.assembleGroupStyle(),r=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...i?{style:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function XLe(e){return e===!1||e===null}const KLe={disable:1,gridScale:1,scale:1,...ZQ,labelExpr:1,encode:1},Hte=pe(KLe);class jD extends tu{constructor(t={},n={},i=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=i}clone(){return new jD(ht(this.explicit),ht(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!XLe(this.get(t))}hasOrientSignalRef(){return Ve(this.explicit.orient)}}function JLe(e,t,n){const{encoding:i,config:r}=e,o=ti(i[t])??ti(i[Gs(t)]),a=e.axis(t)||{},{format:s,formatType:l}=a;if(Ed(l))return{text:Ma({fieldOrDatumDef:o,field:"datum.value",format:s,formatType:l,config:r}),...n};if(s===void 0&&l===void 0&&r.customFormatTypes){if(sm(o)==="quantitative"){if(lm(o)&&o.stack==="normalize"&&r.normalizedNumberFormatType)return{text:Ma({fieldOrDatumDef:o,field:"datum.value",format:r.normalizedNumberFormat,formatType:r.normalizedNumberFormatType,config:r}),...n};if(r.numberFormatType)return{text:Ma({fieldOrDatumDef:o,field:"datum.value",format:r.numberFormat,formatType:r.numberFormatType,config:r}),...n}}if(sm(o)==="temporal"&&r.timeFormatType&&ve(o)&&!o.timeUnit)return{text:Ma({fieldOrDatumDef:o,field:"datum.value",format:r.timeFormat,formatType:r.timeFormatType,config:r}),...n}}return n}function QLe(e){return qs.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[a5e(n,e)]),t),{})}const e5e={bottom:"top",top:"bottom",left:"right",right:"left"};function t5e(e){const{axes:t,resolve:n}=e.component,i={top:0,bottom:0,right:0,left:0};for(const r of e.children){r.parseAxesAndHeaders();for(const o of pe(r.component.axes))n.axis[o]=MD(e.component.resolve,o),n.axis[o]==="shared"&&(t[o]=n5e(t[o],r.component.axes[o]),t[o]||(n.axis[o]="independent",delete t[o]))}for(const r of qs){for(const o of e.children)if(o.component.axes[r]){if(n.axis[r]==="independent"){t[r]=(t[r]??[]).concat(o.component.axes[r]);for(const a of o.component.axes[r]){const{value:s,explicit:l}=a.getWithExplicit("orient");if(!Ve(s)){if(i[s]>0&&!l){const u=e5e[s];i[s]>i[u]&&a.set("orient",u,!1)}i[s]++}}}delete o.component.axes[r]}if(n.axis[r]==="independent"&&t[r]&&t[r].length>1)for(const[o,a]of(t[r]||[]).entries())o>0&&a.get("grid")&&!a.explicit.grid&&(a.implicit.grid=!1)}}function n5e(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let i=0;i<n;i++){const r=e[i],o=t[i];if(!!r!=!!o)return;if(r&&o){const a=r.getWithExplicit("orient"),s=o.getWithExplicit("orient");if(a.explicit&&s.explicit&&a.value!==s.value)return;e[i]=i5e(r,o)}}}else return t.map(n=>n.clone());return e}function i5e(e,t){for(const n of Hte){const i=Sc(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(r,o)=>{switch(n){case"title":return eQ(r,o);case"gridScale":return{explicit:r.explicit,value:zn(r.value,o.value)}}return _C(r,o,n,"axis")});e.setWithExplicit(n,i)}return e}function r5e(e,t,n,i,r){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Ve(n.labelAngle)?n.labelAngle:iv(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===ate(i,r))return!0}return e===n[t]}const o5e=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function a5e(e,t){var b,w;let n=t.axis(e);const i=new jD,r=ti(t.encoding[e]),{mark:o,config:a}=t,s=(n==null?void 0:n.orient)||((b=a[e==="x"?"axisX":"axisY"])==null?void 0:b.orient)||((w=a.axis)==null?void 0:w.orient)||qIe(e),l=t.getScaleComponent(e).get("type"),u=jIe(e,l,s,t.config),c=n!==void 0?!n:HM("disable",a.style,n==null?void 0:n.style,u).configValue;if(i.set("disable",c,n!==void 0),c)return i;n=n||{};const d=UIe(r,n,e,a.style,u),h=$Q(n.formatType,r,l),m=NQ(r,r.type,n.format,n.formatType,a,!0),g={fieldOrDatumDef:r,axis:n,channel:e,model:t,scaleType:l,orient:s,labelAngle:d,format:m,formatType:h,mark:o,config:a};for(const S of Hte){const k=S in aB?aB[S](g):N6(S)?n[S]:void 0,R=k!==void 0,M=r5e(k,S,n,t,e);if(R&&M)i.set(S,k,M);else{const{configValue:T=void 0,configFrom:N=void 0}=N6(S)&&S!=="values"?HM(S,a.style,n.style,u):{},D=T!==void 0;R&&!D?i.set(S,k,M):(N!=="vgAxisConfig"||o5e.has(S)&&D||r1(T)||Ve(T))&&i.set(S,T,!1)}}const y=n.encoding??{},x=YQ.reduce((S,k)=>{if(!i.hasAxisPart(k))return S;const R=dte(y[k]??{},t),M=k==="labels"?JLe(t,e,R):R;return M!==void 0&&!on(M)&&(S[k]={update:M}),S},{});return on(x)||i.set("encode",x,!!n.encoding||n.labelAngle!==void 0),i}function s5e({encoding:e,size:t}){for(const n of qs){const i=eo(n);Os(t[i])&&Uu(e[n])&&(delete t[i],xe(oQ(i)))}return t}const l5e={vgMark:"arc",encodeEntry:e=>({...oa(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Yi("x",e,{defaultPos:"mid"}),...Yi("y",e,{defaultPos:"mid"}),...Cc(e,"radius"),...Cc(e,"theta")})},u5e={vgMark:"area",encodeEntry:e=>({...oa(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...Gw("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...Gw("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...ED(e)})},c5e={vgMark:"rect",encodeEntry:e=>({...oa(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Cc(e,"x"),...Cc(e,"y")})},f5e={vgMark:"shape",encodeEntry:e=>({...oa(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&ve(n)&&n.type===zm?{field:Ae(n,{expr:"datum"})}:{}}]}},d5e={vgMark:"image",encodeEntry:e=>({...oa(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Cc(e,"x"),...Cc(e,"y"),...SD(e,"url")})},h5e={vgMark:"line",encodeEntry:e=>({...oa(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Yi("x",e,{defaultPos:"mid"}),...Yi("y",e,{defaultPos:"mid"}),...di("size",e,{vgChannel:"strokeWidth"}),...ED(e)})},p5e={vgMark:"trail",encodeEntry:e=>({...oa(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Yi("x",e,{defaultPos:"mid"}),...Yi("y",e,{defaultPos:"mid"}),...di("size",e),...ED(e)})};function zD(e,t){const{config:n}=e;return{...oa(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Yi("x",e,{defaultPos:"mid"}),...Yi("y",e,{defaultPos:"mid"}),...di("size",e),...di("angle",e),...m5e(e,n,t)}}function m5e(e,t,n){return n?{shape:{value:n}}:di("shape",e)}const g5e={vgMark:"symbol",encodeEntry:e=>zD(e)},y5e={vgMark:"symbol",encodeEntry:e=>zD(e,"circle")},v5e={vgMark:"symbol",encodeEntry:e=>zD(e,"square")},x5e={vgMark:"rect",encodeEntry:e=>({...oa(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Cc(e,"x"),...Cc(e,"y")})},_5e={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...oa(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Gw("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...Gw("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...di("size",e,{vgChannel:"strokeWidth"})}}},b5e={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...oa(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...Yi("x",e,{defaultPos:"mid"}),...Yi("y",e,{defaultPos:"mid"}),...SD(e),...di("size",e,{vgChannel:"fontSize"}),...di("angle",e),...nB("align",w5e(e.markDef,n,t)),...nB("baseline",S5e(e.markDef,n,t)),...Yi("radius",e,{defaultPos:null}),...Yi("theta",e,{defaultPos:null})}}};function w5e(e,t,n){if(Jt("align",e,n)===void 0)return"center"}function S5e(e,t,n){if(Jt("baseline",e,n)===void 0)return"middle"}const C5e={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,i=n.orient,r=i==="horizontal"?"width":"height",o=i==="horizontal"?"height":"width";return{...oa(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Yi("x",e,{defaultPos:"mid",vgChannel:"xc"}),...Yi("y",e,{defaultPos:"mid",vgChannel:"yc"}),...di("size",e,{defaultValue:E5e(e),vgChannel:r}),[o]:gn(Jt("thickness",n,t))}}};function E5e(e){const{config:t,markDef:n}=e,{orient:i}=n,r=i==="horizontal"?"width":"height",o=e.getScaleComponent(i==="horizontal"?"x":"y"),a=Jt("size",n,t,{vgChannel:r})??t.tick.bandSize;if(a!==void 0)return a;{const s=o?o.get("range"):void 0;return s&&qc(s)&&zt(s.step)?s.step*3/4:Uw(t.view,r)*3/4}}const Wx={arc:l5e,area:u5e,bar:c5e,circle:y5e,geoshape:f5e,image:d5e,line:h5e,point:g5e,rect:x5e,rule:_5e,square:v5e,text:b5e,tick:C5e,trail:p5e};function k5e(e){if(Ft([lC,aC,$Ne],e.mark)){const t=eee(e.mark,e.encoding);if(t.length>0)return R5e(e,t)}else if(e.mark===sC){const t=MM.some(n=>Jt(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return T5e(e)}return BD(e)}const wB="faceted_path_";function R5e(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:wB+e.requestDataName(un.Main),data:e.requestDataName(un.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:BD(e,{fromPrefix:wB})}]}const SB="stack_group_";function T5e(e){var u;const[t]=BD(e,{fromPrefix:SB}),n=e.scaleName(e.stack.fieldChannel),i=(c={})=>e.vgField(e.stack.fieldChannel,c),r=(c,d)=>{const h=[i({prefix:"min",suffix:"start",expr:d}),i({prefix:"max",suffix:"start",expr:d}),i({prefix:"min",suffix:"end",expr:d}),i({prefix:"max",suffix:"end",expr:d})];return`${c}(${h.map(m=>`scale('${n}',${m})`).join(",")})`};let o,a;e.stack.fieldChannel==="x"?(o={...tm(t.encode.update,["y","yc","y2","height",...MM]),x:{signal:r("min","datum")},x2:{signal:r("max","datum")},clip:{value:!0}},a={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...Vr(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(o={...tm(t.encode.update,["x","xc","x2","width"]),y:{signal:r("min","datum")},y2:{signal:r("max","datum")},clip:{value:!0}},a={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...Vr(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of MM){const d=Wl(c,e.markDef,e.config);t.encode.update[c]?(o[c]=t.encode.update[c],delete t.encode.update[c]):d&&(o[c]=gn(d)),d&&(t.encode.update[c]={value:0})}const s=[];if(((u=e.stack.groupbyChannels)==null?void 0:u.length)>0)for(const c of e.stack.groupbyChannels){const d=e.fieldDef(c),h=Ae(d);h&&s.push(h),(d!=null&&d.bin||d!=null&&d.timeUnit)&&s.push(Ae(d,{binSuffix:"end"}))}return o=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,d)=>{if(t.encode.update[d])return{...c,[d]:t.encode.update[d]};{const h=Wl(d,e.markDef,e.config);return h!==void 0?{...c,[d]:gn(h)}:c}},o),o.stroke&&(o.strokeForeground={value:!0},o.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(un.Main),name:SB+e.requestDataName(un.Main),groupby:s,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:o},marks:[{type:"group",encode:{update:a},marks:[t]}]}]}function A5e(e){var s;const{encoding:t,stack:n,mark:i,markDef:r,config:o}=e,a=t.order;if(!(!fe(a)&&za(a)&&TM(a.value)||!a&&TM(Jt("order",r,o)))){if((fe(a)||ve(a))&&!n)return KJ(a,{expr:"datum"});if(Vc(i)){const l=r.orient==="horizontal"?"y":"x",u=t[l];if(ve(u)){const c=u.sort;if(fe(c))return{field:Ae(u,{prefix:l,suffix:"sort_index",expr:"datum"})};if(Cs(c))return{field:Ae({aggregate:lD(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(IQ(c)){const d=e.fieldDef(c.encoding);return{field:Ae(d,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:Ae(u,{binSuffix:(s=e.stack)!=null&&s.impute?"mid":void 0,expr:"datum"})}}return}}}function BD(e,t={fromPrefix:""}){const{mark:n,markDef:i,encoding:r,config:o}=e,a=zn(i.clip,M5e(e),F5e(e)),s=ZJ(i),l=r.key,u=A5e(e),c=P5e(e),d=Jt("aria",i,o),h=Wx[n].postEncodingTransform?Wx[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:Wx[n].vgMark,...a?{clip:!0}:{},...s?{style:s}:{},...l?{key:l.field}:{},...u?{sort:u}:{},...c||{},...d===!1?{aria:d}:{},from:{data:t.fromPrefix+e.requestDataName(un.Main)},encode:{update:Wx[n].encodeEntry(e)},...h?{transform:h}:{}}]}function M5e(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function F5e(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function P5e(e){if(!e.component.selection)return null;const t=pe(e.component.selection).length;let n=t,i=e.parent;for(;i&&n===0;)n=pe(i.component.selection).length,i=i.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip}:null}class Ute extends Lte{constructor(t,n,i,r={},o){super(t,"unit",n,i,o,void 0,O6(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const a=Ns(t.mark)?{...t.mark}:{type:t.mark},s=a.type;a.filled===void 0&&(a.filled=gOe(a,o,{graticule:t.data&&bD(t.data)}));const l=this.encoding=_$e(t.encoding||{},s,a.filled,o);this.markDef=bee(a,l,o),this.size=s5e({encoding:l,size:O6(t)?{...r,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:r}),this.stack=_ee(this.markDef,l),this.specifiedScales=this.initScales(s,l),this.specifiedAxes=this.initAxes(l),this.specifiedLegends=this.initLegends(l),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(u=>gD(u))}get hasProjection(){const{encoding:t}=this,n=this.mark===TQ,i=t&&xFe.some(r=>mt(t[r]));return n||i}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return nC.reduce((i,r)=>{const o=ti(n[r]);return o&&(i[r]=this.initScale(o.scale??{})),i},{})}initScale(t){const{domain:n,range:i}=t,r=Lr(t);return fe(n)&&(r.domain=n.map(uo)),fe(i)&&(r.range=i.map(uo)),r}initAxes(t){return qs.reduce((n,i)=>{const r=t[i];if(mt(r)||i===Cn&&mt(t.x2)||i===wi&&mt(t.y2)){const o=mt(r)?r.axis:void 0;n[i]=o&&this.initAxis({...o})}return n},{})}initAxis(t){const n=pe(t),i={};for(const r of n){const o=t[r];i[r]=r1(o)?YJ(o):uo(o)}return i}initLegends(t){return AFe.reduce((n,i)=>{const r=ti(t[i]);if(r&&FFe(i)){const o=r.legend;n[i]=o&&Lr(o)}return n},{})}parseData(){this.component.data=DC(this)}parseLayoutSize(){WLe(this)}parseSelections(){this.component.selection=OIe(this,this.selection)}parseMarkGroup(){this.component.mark=k5e(this)}parseAxesAndHeaders(){this.component.axes=QLe(this)}assembleSelectionTopLevelSignals(t){return iIe(this,t)}assembleSignals(){return[...ite(this),...tIe(this,[])]}assembleSelectionData(t){return rIe(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return AD(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!Gm(this.parent))&&(t=$ee(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Xf(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return $s(n)}typedFieldDef(t){const n=this.fieldDef(t);return br(n)?n:null}}class HD extends DD{constructor(t,n,i,r,o){super(t,"layer",n,i,o,t.resolve,t.view);const a={...r,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((s,l)=>{if(xC(s))return new HD(s,this,this.getName(`layer_${l}`),a,o);if(eu(s))return new Ute(s,this,this.getName(`layer_${l}`),a,o);throw new Error(OI(s))})}parseData(){this.component.data=DC(this);for(const t of this.children)t.parseData()}parseLayoutSize(){HLe(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of pe(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){t5e(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),ite(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),AD(this))}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const i of this.children)for(const r of $e(i.assembleGroupStyle()))t.add(r);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return oIe(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),_te(this))}}function UD(e,t,n,i,r){if(fC(e))return new ry(e,t,n,r);if(xC(e))return new HD(e,t,n,i,r);if(eu(e))return new Ute(e,t,n,i,r);if(W$e(e))return new ZLe(e,t,n,r);throw new Error(OI(e))}function N5e(e,t={}){t.logger&&ZPe(t.logger),t.fieldTitle&&GQ(t.fieldTitle);try{const n=xee(Sm(t.config,e.config)),i=Tee(e,n),r=UD(i,null,"",void 0,n);return r.parse(),iLe(r.component.data,r),{spec:O5e(r,$5e(e,i.autosize,n,r),e.datasets,e.usermeta),normalized:i}}finally{t.logger&&XPe(),t.fieldTitle&&f$e()}}function $5e(e,t,n,i){const r=i.component.layoutSize.get("width"),o=i.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},i.hasAxisOrientSignalRef()&&(t.resize=!0)):Oe(t)&&(t={type:t}),r&&o&&KOe(t.type)){if(r==="step"&&o==="step")xe(x6()),t.type="pad";else if(r==="step"||o==="step"){const a=r==="step"?"width":"height";xe(x6(tC(a)));const s=a==="width"?"height":"width";t.type=JOe(s)}}return{...pe(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...V6(n,!1),...V6(e,!0)}}function O5e(e,t,n={},i){const r=e.config?rOe(e.config):void 0,o=[].concat(e.assembleSelectionData([]),LLe(e.component.data,n)),a=e.assembleProjections(),s=e.assembleTitle(),l=e.assembleGroupStyle(),u=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(m=>(m.name==="width"||m.name==="height")&&m.value!==void 0?(t[m.name]=+m.value,!1):!0);const{params:d,...h}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...h,...s?{title:s}:{},...l?{style:l}:{},...u?{encode:{update:u}}:{},data:o,...a.length>0?{projections:a}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...mee(d)]),...r?{config:r}:{},...i?{usermeta:i}:{}}}const I5e=hFe.version,D5e=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:nm,accessPathWithDatum:EI,compile:N5e,contains:Ft,deepEqual:po,deleteNestedProperty:Nw,duplicate:ht,entries:_c,every:wI,fieldIntersection:CI,flatAccessWithDatum:TJ,getFirstDefined:zn,hasIntersection:SI,hash:Mt,internalField:FJ,isBoolean:nv,isEmpty:on,isEqual:mFe,isInternalField:PJ,isNullOrFalse:TM,isNumeric:ZS,keys:pe,logicalExpr:ny,mergeDeep:kJ,never:EJ,normalize:Tee,normalizeAngle:iv,omit:Vr,pick:tm,prefixGenerator:AM,removePathFromField:kI,replaceAll:_d,replacePathInField:ta,resetIdCounter:yFe,setEqual:RJ,some:xd,stringify:an,titleCase:Yv,unique:gs,uniqueId:MJ,vals:Pi,varName:Sn,version:I5e},Symbol.toStringTag,{value:"Module"}));function Wte(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var L5e="vega-themes",j5e="2.14.0",z5e="Themes for stylized Vega and Vega-Lite visualizations.",B5e=["vega","vega-lite","themes","style"],H5e="BSD-3-Clause",U5e={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},W5e=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],G5e="build/vega-themes.js",q5e="build/vega-themes.module.js",V5e="build/vega-themes.min.js",Y5e="build/vega-themes.min.js",Z5e="build/vega-themes.module.d.ts",X5e={type:"git",url:"https://github.com/vega/vega-themes.git"},K5e=["src","build"],J5e={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},Q5e={"@babel/core":"^7.22.9","@babel/plugin-proposal-async-generator-functions":"^7.20.7","@babel/plugin-proposal-json-strings":"^7.18.6","@babel/plugin-proposal-object-rest-spread":"^7.20.7","@babel/plugin-proposal-optional-catch-binding":"^7.18.6","@babel/plugin-transform-runtime":"^7.22.9","@babel/preset-env":"^7.22.9","@babel/preset-typescript":"^7.22.5","@release-it/conventional-changelog":"^7.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.1.0","@rollup/plugin-terser":"^0.4.3","@typescript-eslint/eslint-plugin":"^6.0.0","@typescript-eslint/parser":"^6.0.0","browser-sync":"^2.29.3",concurrently:"^8.2.0",eslint:"^8.45.0","eslint-config-prettier":"^8.8.0","eslint-plugin-prettier":"^5.0.0","gh-pages":"^5.0.0",prettier:"^3.0.0","release-it":"^16.1.0",rollup:"^3.26.2","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.2.0",typescript:"^5.1.6",vega:"^5.25.0","vega-lite":"^5.9.3"},e3e={vega:"*","vega-lite":"*"},t3e={},n3e={name:L5e,version:j5e,description:z5e,keywords:B5e,license:H5e,author:U5e,contributors:W5e,main:G5e,module:q5e,unpkg:V5e,jsdelivr:Y5e,types:Z5e,repository:X5e,files:K5e,scripts:J5e,devDependencies:Q5e,peerDependencies:e3e,dependencies:t3e};const Ph="#fff",CB="#888",i3e={background:"#333",view:{stroke:CB},title:{color:Ph,subtitleColor:Ph},style:{"guide-label":{fill:Ph},"guide-title":{fill:Ph}},axis:{domainColor:Ph,gridColor:CB,tickColor:Ph}},uf="#4572a7",r3e={background:"#fff",arc:{fill:uf},area:{fill:uf},line:{stroke:uf,strokeWidth:2},path:{stroke:uf},rect:{fill:uf},shape:{stroke:uf},symbol:{fill:uf,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},cf="#30a2da",dR="#cbcbcb",o3e="#999",a3e="#333",EB="#f0f0f0",kB="#333",s3e={arc:{fill:cf},area:{fill:cf},axis:{domainColor:dR,grid:!0,gridColor:dR,gridWidth:1,labelColor:o3e,labelFontSize:10,titleColor:a3e,tickColor:dR,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:EB,group:{fill:EB},legend:{labelColor:kB,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:kB,titleFontSize:14,titlePadding:10},line:{stroke:cf,strokeWidth:2},path:{stroke:cf,strokeWidth:.5},rect:{fill:cf},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:cf},bar:{binSpacing:2,fill:cf,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},ff="#000",l3e={group:{fill:"#e5e5e5"},arc:{fill:ff},area:{fill:ff},line:{stroke:ff},path:{stroke:ff},rect:{fill:ff},shape:{stroke:ff},symbol:{fill:ff,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},u3e=22,c3e="normal",RB="Benton Gothic, sans-serif",TB=11.5,f3e="normal",df="#82c6df",hR="Benton Gothic Bold, sans-serif",AB="normal",MB=13,Zg={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},d3e={background:"#ffffff",title:{anchor:"start",color:"#000000",font:hR,fontSize:u3e,fontWeight:c3e},arc:{fill:df},area:{fill:df},line:{stroke:df,strokeWidth:2},path:{stroke:df},rect:{fill:df},shape:{stroke:df},symbol:{fill:df,size:30},axis:{labelFont:RB,labelFontSize:TB,labelFontWeight:f3e,titleFont:hR,titleFontSize:MB,titleFontWeight:AB},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:RB,labelFontSize:TB,symbolType:"square",titleFont:hR,titleFontSize:MB,titleFontWeight:AB},range:{category:Zg["category-6"],diverging:Zg["fireandice-6"],heatmap:Zg["fire-7"],ordinal:Zg["fire-7"],ramp:Zg["fire-7"]}},hf="#ab5787",Gx="#979797",h3e={background:"#f9f9f9",arc:{fill:hf},area:{fill:hf},line:{stroke:hf},path:{stroke:hf},rect:{fill:hf},shape:{stroke:hf},symbol:{fill:hf,size:30},axis:{domainColor:Gx,domainWidth:.5,gridWidth:.2,labelColor:Gx,tickColor:Gx,tickWidth:.2,titleColor:Gx},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},pf="#3e5c69",p3e={background:"#fff",arc:{fill:pf},area:{fill:pf},line:{stroke:pf},path:{stroke:pf},rect:{fill:pf},shape:{stroke:pf},symbol:{fill:pf},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Po="#1696d2",FB="#000000",m3e="#FFFFFF",qx="Lato",pR="Lato",g3e="Lato",y3e="#DEDDDD",v3e=18,Xg={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},x3e={background:m3e,title:{anchor:"start",fontSize:v3e,font:qx},axisX:{domain:!0,domainColor:FB,domainWidth:1,grid:!1,labelFontSize:12,labelFont:pR,labelAngle:0,tickColor:FB,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:qx},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:y3e,gridWidth:1,labelFontSize:12,labelFont:pR,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:qx,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:pR,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:qx,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Xg["six-groups-cat-1"],diverging:Xg["diverging-colors"],heatmap:Xg["diverging-colors"],ordinal:Xg["six-groups-seq"],ramp:Xg["shades-blue"]},area:{fill:Po},rect:{fill:Po},line:{color:Po,stroke:Po,strokeWidth:5},trail:{color:Po,stroke:Po,strokeWidth:0,size:1},path:{stroke:Po,strokeWidth:.5},point:{filled:!0},text:{font:g3e,color:Po,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Po,stroke:null}},arc:{fill:Po},shape:{stroke:Po},symbol:{fill:Po,size:30}},mf="#3366CC",PB="#ccc",Vx="Arial, sans-serif",_3e={arc:{fill:mf},area:{fill:mf},path:{stroke:mf},rect:{fill:mf},shape:{stroke:mf},symbol:{stroke:mf},circle:{fill:mf},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:Vx,fontSize:12},"guide-title":{font:Vx,fontSize:12},"group-title":{font:Vx,fontSize:12}},title:{font:Vx,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:PB,tickColor:PB,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},WD=e=>e*(1/3+1),NB=WD(9),$B=WD(10),OB=WD(12),Kg="Segoe UI",IB="wf_standard-font, helvetica, arial, sans-serif",DB="#252423",Jg="#605E5C",LB="transparent",b3e="#C8C6C4",ha="#118DFF",w3e="#12239E",S3e="#E66C37",C3e="#6B007B",E3e="#E044A7",k3e="#744EC2",R3e="#D9B300",T3e="#D64550",Gte=ha,qte="#DEEFFF",jB=[qte,Gte],A3e=[qte,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",Gte],M3e={view:{stroke:LB},background:LB,font:Kg,header:{titleFont:IB,titleFontSize:OB,titleColor:DB,labelFont:Kg,labelFontSize:$B,labelColor:Jg},axis:{ticks:!1,grid:!1,domain:!1,labelColor:Jg,labelFontSize:NB,titleFont:IB,titleColor:DB,titleFontSize:OB,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:b3e,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:ha},line:{stroke:ha,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:Kg,fontSize:NB,fill:Jg},arc:{fill:ha},area:{fill:ha,line:!0,opacity:.6},path:{stroke:ha},rect:{fill:ha},point:{fill:ha,filled:!0,size:75},shape:{stroke:ha},symbol:{fill:ha,strokeWidth:1.5,size:50},legend:{titleFont:Kg,titleFontWeight:"bold",titleColor:Jg,labelFont:Kg,labelFontSize:$B,labelColor:Jg,symbolType:"circle",symbolSize:75},range:{category:[ha,w3e,S3e,C3e,E3e,k3e,R3e,T3e],diverging:jB,heatmap:jB,ordinal:A3e}},mR='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',zB=400,F3e=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],P3e=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function LC({type:e,background:t}){const n=e==="dark"?"#161616":"#ffffff",i=e==="dark"?"#f4f4f4":"#161616",r=e==="dark"?F3e:P3e,o=e==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:o},area:{fill:o},path:{stroke:o},rect:{fill:o},shape:{stroke:o},symbol:{stroke:o},circle:{fill:o},view:{fill:n,stroke:n},group:{fill:n},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:mR,fontWeight:600},axis:{labelColor:i,labelFontSize:12,grid:!0,gridColor:"#525252",titleColor:i,labelAngle:0},style:{"guide-label":{font:mR,fill:i,fontWeight:zB},"guide-title":{font:mR,fill:i,fontWeight:zB}},range:{category:r,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const N3e=LC({type:"light",background:"#ffffff"}),$3e=LC({type:"light",background:"#f4f4f4"}),O3e=LC({type:"dark",background:"#262626"}),I3e=LC({type:"dark",background:"#161616"}),D3e=n3e.version,L3e=Object.freeze(Object.defineProperty({__proto__:null,carbong10:$3e,carbong100:I3e,carbong90:O3e,carbonwhite:N3e,dark:i3e,excel:r3e,fivethirtyeight:s3e,ggplot2:l3e,googlecharts:_3e,latimes:d3e,powerbi:M3e,quartz:h3e,urbaninstitute:x3e,version:D3e,vox:p3e},Symbol.toStringTag,{value:"Module"}));function j3e(e,t,n,i){if(fe(e))return`[${e.map(r=>t(Oe(r)?r:BB(r,n))).join(", ")}]`;if(Ie(e)){let r="";const{title:o,image:a,...s}=e;o&&(r+=`<h2>${t(o)}</h2>`),a&&(r+=`<img src="${new URL(t(a),i||location.href).href}">`);const l=Object.keys(s);if(l.length>0){r+="<table>";for(const u of l){let c=s[u];c!==void 0&&(Ie(c)&&(c=BB(c,n)),r+=`<tr><td class="key">${t(u)}</td><td class="value">${t(c)}</td></tr>`)}r+="</table>"}return r||"{}"}return t(e)}function z3e(e){const t=[];return function(n,i){if(typeof i!="object"||i===null)return i;const r=t.indexOf(this)+1;return t.length=r,t.length>e?"[Object]":t.indexOf(i)>=0?"[Circular]":(t.push(i),i)}}function BB(e,t){return JSON.stringify(e,z3e(t))}var B3e=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const Vte="vg-tooltip-element",H3e={offsetX:10,offsetY:10,id:Vte,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:U3e,maxDepth:2,formatTooltip:j3e,baseURL:""};function U3e(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function W3e(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return B3e.toString().replace(Vte,e)}function G3e(e,t,n,i){let r=e.clientX+n;r+t.width>window.innerWidth&&(r=+e.clientX-n-t.width);let o=e.clientY+i;return o+t.height>window.innerHeight&&(o=+e.clientY-i-t.height),{x:r,y:o}}class q3e{constructor(t){this.options={...H3e,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const i=document.createElement("style");i.setAttribute("id",this.options.styleId),i.innerHTML=W3e(n);const r=document.head;r.childNodes.length>0?r.insertBefore(i,r.childNodes[0]):r.appendChild(i)}}tooltipHandler(t,n,i,r){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),r==null||r===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(r,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:o,y:a}=G3e(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${a}px`,this.el.style.left=`${o}px`}}var gR={};function V3e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var yR,HB;function Y3e(){return HB||(HB=1,yR=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),yR}var Z3e=Wt;Wt.Node=Ad;Wt.create=Wt;function Wt(e){var t=this;if(t instanceof Wt||(t=new Wt),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(r){t.push(r)});else if(arguments.length>0)for(var n=0,i=arguments.length;n<i;n++)t.push(arguments[n]);return t}Wt.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};Wt.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};Wt.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};Wt.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)K3e(this,arguments[e]);return this.length};Wt.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)J3e(this,arguments[e]);return this.length};Wt.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};Wt.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};Wt.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,i=0;n!==null;i++)e.call(t,n.value,i,this),n=n.next};Wt.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,i=this.length-1;n!==null;i--)e.call(t,n.value,i,this),n=n.prev};Wt.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};Wt.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};Wt.prototype.map=function(e,t){t=t||this;for(var n=new Wt,i=this.head;i!==null;)n.push(e.call(t,i.value,this)),i=i.next;return n};Wt.prototype.mapReverse=function(e,t){t=t||this;for(var n=new Wt,i=this.tail;i!==null;)n.push(e.call(t,i.value,this)),i=i.prev;return n};Wt.prototype.reduce=function(e,t){var n,i=this.head;if(arguments.length>1)n=t;else if(this.head)i=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var r=0;i!==null;r++)n=e(n,i.value,r),i=i.next;return n};Wt.prototype.reduceReverse=function(e,t){var n,i=this.tail;if(arguments.length>1)n=t;else if(this.tail)i=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var r=this.length-1;i!==null;r--)n=e(n,i.value,r),i=i.prev;return n};Wt.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};Wt.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};Wt.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new Wt;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=0,r=this.head;r!==null&&i<e;i++)r=r.next;for(;r!==null&&i<t;i++,r=r.next)n.push(r.value);return n};Wt.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new Wt;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=this.length,r=this.tail;r!==null&&i>t;i--)r=r.prev;for(;r!==null&&i>e;i--,r=r.prev)n.push(r.value);return n};Wt.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var i=0,r=this.head;r!==null&&i<e;i++)r=r.next;for(var o=[],i=0;r&&i<t;i++)o.push(r.value),r=this.removeNode(r);r===null&&(r=this.tail),r!==this.head&&r!==this.tail&&(r=r.prev);for(var i=0;i<n.length;i++)r=X3e(this,r,n[i]);return o};Wt.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var i=n.prev;n.prev=n.next,n.next=i}return this.head=t,this.tail=e,this};function X3e(e,t,n){var i=t===e.head?new Ad(n,null,t,e):new Ad(n,t,t.next,e);return i.next===null&&(e.tail=i),i.prev===null&&(e.head=i),e.length++,i}function K3e(e,t){e.tail=new Ad(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function J3e(e,t){e.head=new Ad(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Ad(e,t,n,i){if(!(this instanceof Ad))return new Ad(e,t,n,i);this.list=i,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{Y3e()(Wt)}catch{}const Q3e=Z3e,Rf=Symbol("max"),fl=Symbol("length"),Nh=Symbol("lengthCalculator"),oy=Symbol("allowStale"),If=Symbol("maxAge"),sl=Symbol("dispose"),UB=Symbol("noDisposeOnSet"),ui=Symbol("lruList"),pa=Symbol("cache"),Yte=Symbol("updateAgeOnGet"),vR=()=>1;class e4e{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[Rf]=t.max||1/0;const n=t.length||vR;if(this[Nh]=typeof n!="function"?vR:n,this[oy]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[If]=t.maxAge||0,this[sl]=t.dispose,this[UB]=t.noDisposeOnSet||!1,this[Yte]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[Rf]=t||1/0,Qg(this)}get max(){return this[Rf]}set allowStale(t){this[oy]=!!t}get allowStale(){return this[oy]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[If]=t,Qg(this)}get maxAge(){return this[If]}set lengthCalculator(t){typeof t!="function"&&(t=vR),t!==this[Nh]&&(this[Nh]=t,this[fl]=0,this[ui].forEach(n=>{n.length=this[Nh](n.value,n.key),this[fl]+=n.length})),Qg(this)}get lengthCalculator(){return this[Nh]}get length(){return this[fl]}get itemCount(){return this[ui].length}rforEach(t,n){n=n||this;for(let i=this[ui].tail;i!==null;){const r=i.prev;WB(this,t,i,n),i=r}}forEach(t,n){n=n||this;for(let i=this[ui].head;i!==null;){const r=i.next;WB(this,t,i,n),i=r}}keys(){return this[ui].toArray().map(t=>t.key)}values(){return this[ui].toArray().map(t=>t.value)}reset(){this[sl]&&this[ui]&&this[ui].length&&this[ui].forEach(t=>this[sl](t.key,t.value)),this[pa]=new Map,this[ui]=new Q3e,this[fl]=0}dump(){return this[ui].map(t=>Zw(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[ui]}set(t,n,i){if(i=i||this[If],i&&typeof i!="number")throw new TypeError("maxAge must be a number");const r=i?Date.now():0,o=this[Nh](n,t);if(this[pa].has(t)){if(o>this[Rf])return Sp(this,this[pa].get(t)),!1;const l=this[pa].get(t).value;return this[sl]&&(this[UB]||this[sl](t,l.value)),l.now=r,l.maxAge=i,l.value=n,this[fl]+=o-l.length,l.length=o,this.get(t),Qg(this),!0}const a=new t4e(t,n,o,r,i);return a.length>this[Rf]?(this[sl]&&this[sl](t,n),!1):(this[fl]+=a.length,this[ui].unshift(a),this[pa].set(t,this[ui].head),Qg(this),!0)}has(t){if(!this[pa].has(t))return!1;const n=this[pa].get(t).value;return!Zw(this,n)}get(t){return xR(this,t,!0)}peek(t){return xR(this,t,!1)}pop(){const t=this[ui].tail;return t?(Sp(this,t),t.value):null}del(t){Sp(this,this[pa].get(t))}load(t){this.reset();const n=Date.now();for(let i=t.length-1;i>=0;i--){const r=t[i],o=r.e||0;if(o===0)this.set(r.k,r.v);else{const a=o-n;a>0&&this.set(r.k,r.v,a)}}}prune(){this[pa].forEach((t,n)=>xR(this,n,!1))}}const xR=(e,t,n)=>{const i=e[pa].get(t);if(i){const r=i.value;if(Zw(e,r)){if(Sp(e,i),!e[oy])return}else n&&(e[Yte]&&(i.value.now=Date.now()),e[ui].unshiftNode(i));return r.value}},Zw=(e,t)=>{if(!t||!t.maxAge&&!e[If])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[If]&&n>e[If]},Qg=e=>{if(e[fl]>e[Rf])for(let t=e[ui].tail;e[fl]>e[Rf]&&t!==null;){const n=t.prev;Sp(e,t),t=n}},Sp=(e,t)=>{if(t){const n=t.value;e[sl]&&e[sl](n.key,n.value),e[fl]-=n.length,e[pa].delete(n.key),e[ui].removeNode(t)}};class t4e{constructor(t,n,i,r,o){this.key=t,this.value=n,this.length=i,this.now=r,this.maxAge=o||0}}const WB=(e,t,n,i)=>{let r=n.value;Zw(e,r)&&(Sp(e,n),e[oy]||(r=void 0)),r&&t.call(i,r.value,r.key,e)};var n4e=e4e;const i4e=Object.freeze({loose:!0}),r4e=Object.freeze({}),o4e=e=>e?typeof e!="object"?i4e:e:r4e;var GD=o4e,KM={exports:{}};const a4e="2.0.0",Zte=256,s4e=Number.MAX_SAFE_INTEGER||9007199254740991,l4e=16,u4e=Zte-6,c4e=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var qD={MAX_LENGTH:Zte,MAX_SAFE_COMPONENT_LENGTH:l4e,MAX_SAFE_BUILD_LENGTH:u4e,MAX_SAFE_INTEGER:s4e,RELEASE_TYPES:c4e,SEMVER_SPEC_VERSION:a4e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const f4e=typeof process=="object"&&gR&&gR.NODE_DEBUG&&/\bsemver\b/i.test(gR.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var jC=f4e;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:r}=qD,o=jC;t=e.exports={};const a=t.re=[],s=t.safeRe=[],l=t.src=[],u=t.t={};let c=0;const d="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",r],[d,i]],m=y=>{for(const[x,b]of h)y=y.split(`${x}*`).join(`${x}{0,${b}}`).split(`${x}+`).join(`${x}{1,${b}}`);return y},g=(y,x,b)=>{const w=m(x),S=c++;o(y,S,x),u[y]=S,l[S]=x,a[S]=new RegExp(x,b?"g":void 0),s[S]=new RegExp(w,b?"g":void 0)};g("NUMERICIDENTIFIER","0|[1-9]\\d*"),g("NUMERICIDENTIFIERLOOSE","\\d+"),g("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),g("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),g("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASEIDENTIFIER",`(?:${l[u.NUMERICIDENTIFIER]}|${l[u.NONNUMERICIDENTIFIER]})`),g("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NUMERICIDENTIFIERLOOSE]}|${l[u.NONNUMERICIDENTIFIER]})`),g("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),g("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),g("BUILDIDENTIFIER",`${d}+`),g("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),g("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),g("FULL",`^${l[u.FULLPLAIN]}$`),g("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),g("LOOSE",`^${l[u.LOOSEPLAIN]}$`),g("GTLT","((?:<|>)?=?)"),g("XRANGEIDENTIFIERLOOSE",`${l[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),g("XRANGEIDENTIFIER",`${l[u.NUMERICIDENTIFIER]}|x|X|\\*`),g("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),g("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),g("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),g("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),g("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),g("COERCERTL",l[u.COERCE],!0),g("LONETILDE","(?:~>?)"),g("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",g("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),g("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),g("LONECARET","(?:\\^)"),g("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",g("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),g("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),g("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),g("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),g("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",g("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),g("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),g("STAR","(<|>)?=?\\s*\\*"),g("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),g("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(KM,KM.exports);var VD=KM.exports;const GB=/^[0-9]+$/,Xte=(e,t)=>{const n=GB.test(e),i=GB.test(t);return n&&i&&(e=+e,t=+t),e===t?0:n&&!i?-1:i&&!n?1:e<t?-1:1},d4e=(e,t)=>Xte(t,e);var h4e={compareIdentifiers:Xte,rcompareIdentifiers:d4e};const Yx=jC,{MAX_LENGTH:qB,MAX_SAFE_INTEGER:Zx}=qD,{safeRe:VB,t:YB}=VD,p4e=GD,{compareIdentifiers:$h}=h4e;let m4e=class ss{constructor(t,n){if(n=p4e(n),t instanceof ss){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>qB)throw new TypeError(`version is longer than ${qB} characters`);Yx("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const i=t.trim().match(n.loose?VB[YB.LOOSE]:VB[YB.FULL]);if(!i)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>Zx||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Zx||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Zx||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map(r=>{if(/^[0-9]+$/.test(r)){const o=+r;if(o>=0&&o<Zx)return o}return r}):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(Yx("SemVer.compare",this.version,this.options,t),!(t instanceof ss)){if(typeof t=="string"&&t===this.version)return 0;t=new ss(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof ss||(t=new ss(t,this.options)),$h(this.major,t.major)||$h(this.minor,t.minor)||$h(this.patch,t.patch)}comparePre(t){if(t instanceof ss||(t=new ss(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const i=this.prerelease[n],r=t.prerelease[n];if(Yx("prerelease compare",n,i,r),i===void 0&&r===void 0)return 0;if(r===void 0)return 1;if(i===void 0)return-1;if(i===r)continue;return $h(i,r)}while(++n)}compareBuild(t){t instanceof ss||(t=new ss(t,this.options));let n=0;do{const i=this.build[n],r=t.build[n];if(Yx("prerelease compare",n,i,r),i===void 0&&r===void 0)return 0;if(r===void 0)return 1;if(i===void 0)return-1;if(i===r)continue;return $h(i,r)}while(++n)}inc(t,n,i){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,i);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,i);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,i),this.inc("pre",n,i);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,i),this.inc("pre",n,i);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const r=Number(i)?1:0;if(!n&&i===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[r];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(n===this.prerelease.join(".")&&i===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(r)}}if(n){let o=[n,r];i===!1&&(o=[n]),$h(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var YD=m4e;const ZB=YD,g4e=(e,t,n)=>new ZB(e,n).compare(new ZB(t,n));var qm=g4e;const y4e=qm,v4e=(e,t,n)=>y4e(e,t,n)===0;var x4e=v4e;const _4e=qm,b4e=(e,t,n)=>_4e(e,t,n)!==0;var w4e=b4e;const S4e=qm,C4e=(e,t,n)=>S4e(e,t,n)>0;var E4e=C4e;const k4e=qm,R4e=(e,t,n)=>k4e(e,t,n)>=0;var T4e=R4e;const A4e=qm,M4e=(e,t,n)=>A4e(e,t,n)<0;var F4e=M4e;const P4e=qm,N4e=(e,t,n)=>P4e(e,t,n)<=0;var $4e=N4e;const O4e=x4e,I4e=w4e,D4e=E4e,L4e=T4e,j4e=F4e,z4e=$4e,B4e=(e,t,n,i)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return O4e(e,n,i);case"!=":return I4e(e,n,i);case">":return D4e(e,n,i);case">=":return L4e(e,n,i);case"<":return j4e(e,n,i);case"<=":return z4e(e,n,i);default:throw new TypeError(`Invalid operator: ${t}`)}};var H4e=B4e,_R,XB;function U4e(){if(XB)return _R;XB=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,d){if(d=n(d),c instanceof t){if(c.loose===!!d.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),a("comparator",c,d),this.options=d,this.loose=!!d.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(c){const d=this.options.loose?i[r.COMPARATORLOOSE]:i[r.COMPARATOR],h=c.match(d);if(!h)throw new TypeError(`Invalid comparator: ${c}`);this.operator=h[1]!==void 0?h[1]:"",this.operator==="="&&(this.operator=""),h[2]?this.semver=new s(h[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(a("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new s(c,this.options)}catch{return!1}return o(c,this.operator,this.semver,this.options)}intersects(c,d){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(c.value,d).test(this.value):c.operator===""?c.value===""?!0:new l(this.value,d).test(c.semver):(d=n(d),d.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!d.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||o(this.semver,"<",c.semver,d)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||o(this.semver,">",c.semver,d)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}_R=t;const n=GD,{safeRe:i,t:r}=VD,o=H4e,a=jC,s=YD,l=Kte();return _R}var bR,KB;function Kte(){if(KB)return bR;KB=1;class e{constructor(U,B){if(B=i(B),U instanceof e)return U.loose===!!B.loose&&U.includePrerelease===!!B.includePrerelease?U:new e(U.raw,B);if(U instanceof r)return this.raw=U.value,this.set=[[U]],this.format(),this;if(this.options=B,this.loose=!!B.loose,this.includePrerelease=!!B.includePrerelease,this.raw=U.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(V=>this.parseRange(V.trim())).filter(V=>V.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const V=this.set[0];if(this.set=this.set.filter(K=>!g(K[0])),this.set.length===0)this.set=[V];else if(this.set.length>1){for(const K of this.set)if(K.length===1&&y(K[0])){this.set=[K];break}}}this.format()}format(){return this.range=this.set.map(U=>U.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(U){const V=((this.options.includePrerelease&&h)|(this.options.loose&&m))+":"+U,K=n.get(V);if(K)return K;const H=this.options.loose,J=H?s[l.HYPHENRANGELOOSE]:s[l.HYPHENRANGE];U=U.replace(J,z(this.options.includePrerelease)),o("hyphen replace",U),U=U.replace(s[l.COMPARATORTRIM],u),o("comparator trim",U),U=U.replace(s[l.TILDETRIM],c),o("tilde trim",U),U=U.replace(s[l.CARETTRIM],d),o("caret trim",U);let Q=U.split(" ").map(ge=>b(ge,this.options)).join(" ").split(/\s+/).map(ge=>I(ge,this.options));H&&(Q=Q.filter(ge=>(o("loose invalid filter",ge,this.options),!!ge.match(s[l.COMPARATORLOOSE])))),o("range list",Q);const oe=new Map,me=Q.map(ge=>new r(ge,this.options));for(const ge of me){if(g(ge))return[ge];oe.set(ge.value,ge)}oe.size>1&&oe.has("")&&oe.delete("");const ke=[...oe.values()];return n.set(V,ke),ke}intersects(U,B){if(!(U instanceof e))throw new TypeError("a Range is required");return this.set.some(V=>x(V,B)&&U.set.some(K=>x(K,B)&&V.every(H=>K.every(J=>H.intersects(J,B)))))}test(U){if(!U)return!1;if(typeof U=="string")try{U=new a(U,this.options)}catch{return!1}for(let B=0;B<this.set.length;B++)if(X(this.set[B],U,this.options))return!0;return!1}}bR=e;const t=n4e,n=new t({max:1e3}),i=GD,r=U4e(),o=jC,a=YD,{safeRe:s,t:l,comparatorTrimReplace:u,tildeTrimReplace:c,caretTrimReplace:d}=VD,{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:m}=qD,g=W=>W.value==="<0.0.0-0",y=W=>W.value==="",x=(W,U)=>{let B=!0;const V=W.slice();let K=V.pop();for(;B&&V.length;)B=V.every(H=>K.intersects(H,U)),K=V.pop();return B},b=(W,U)=>(o("comp",W,U),W=R(W,U),o("caret",W),W=S(W,U),o("tildes",W),W=T(W,U),o("xrange",W),W=D(W,U),o("stars",W),W),w=W=>!W||W.toLowerCase()==="x"||W==="*",S=(W,U)=>W.trim().split(/\s+/).map(B=>k(B,U)).join(" "),k=(W,U)=>{const B=U.loose?s[l.TILDELOOSE]:s[l.TILDE];return W.replace(B,(V,K,H,J,Q)=>{o("tilde",W,V,K,H,J,Q);let oe;return w(K)?oe="":w(H)?oe=`>=${K}.0.0 <${+K+1}.0.0-0`:w(J)?oe=`>=${K}.${H}.0 <${K}.${+H+1}.0-0`:Q?(o("replaceTilde pr",Q),oe=`>=${K}.${H}.${J}-${Q} <${K}.${+H+1}.0-0`):oe=`>=${K}.${H}.${J} <${K}.${+H+1}.0-0`,o("tilde return",oe),oe})},R=(W,U)=>W.trim().split(/\s+/).map(B=>M(B,U)).join(" "),M=(W,U)=>{o("caret",W,U);const B=U.loose?s[l.CARETLOOSE]:s[l.CARET],V=U.includePrerelease?"-0":"";return W.replace(B,(K,H,J,Q,oe)=>{o("caret",W,K,H,J,Q,oe);let me;return w(H)?me="":w(J)?me=`>=${H}.0.0${V} <${+H+1}.0.0-0`:w(Q)?H==="0"?me=`>=${H}.${J}.0${V} <${H}.${+J+1}.0-0`:me=`>=${H}.${J}.0${V} <${+H+1}.0.0-0`:oe?(o("replaceCaret pr",oe),H==="0"?J==="0"?me=`>=${H}.${J}.${Q}-${oe} <${H}.${J}.${+Q+1}-0`:me=`>=${H}.${J}.${Q}-${oe} <${H}.${+J+1}.0-0`:me=`>=${H}.${J}.${Q}-${oe} <${+H+1}.0.0-0`):(o("no pr"),H==="0"?J==="0"?me=`>=${H}.${J}.${Q}${V} <${H}.${J}.${+Q+1}-0`:me=`>=${H}.${J}.${Q}${V} <${H}.${+J+1}.0-0`:me=`>=${H}.${J}.${Q} <${+H+1}.0.0-0`),o("caret return",me),me})},T=(W,U)=>(o("replaceXRanges",W,U),W.split(/\s+/).map(B=>N(B,U)).join(" ")),N=(W,U)=>{W=W.trim();const B=U.loose?s[l.XRANGELOOSE]:s[l.XRANGE];return W.replace(B,(V,K,H,J,Q,oe)=>{o("xRange",W,V,K,H,J,Q,oe);const me=w(H),ke=me||w(J),ge=ke||w(Q),Se=ge;return K==="="&&Se&&(K=""),oe=U.includePrerelease?"-0":"",me?K===">"||K==="<"?V="<0.0.0-0":V="*":K&&Se?(ke&&(J=0),Q=0,K===">"?(K=">=",ke?(H=+H+1,J=0,Q=0):(J=+J+1,Q=0)):K==="<="&&(K="<",ke?H=+H+1:J=+J+1),K==="<"&&(oe="-0"),V=`${K+H}.${J}.${Q}${oe}`):ke?V=`>=${H}.0.0${oe} <${+H+1}.0.0-0`:ge&&(V=`>=${H}.${J}.0${oe} <${H}.${+J+1}.0-0`),o("xRange return",V),V})},D=(W,U)=>(o("replaceStars",W,U),W.trim().replace(s[l.STAR],"")),I=(W,U)=>(o("replaceGTE0",W,U),W.trim().replace(s[U.includePrerelease?l.GTE0PRE:l.GTE0],"")),z=W=>(U,B,V,K,H,J,Q,oe,me,ke,ge,Se,Me)=>(w(V)?B="":w(K)?B=`>=${V}.0.0${W?"-0":""}`:w(H)?B=`>=${V}.${K}.0${W?"-0":""}`:J?B=`>=${B}`:B=`>=${B}${W?"-0":""}`,w(me)?oe="":w(ke)?oe=`<${+me+1}.0.0-0`:w(ge)?oe=`<${me}.${+ke+1}.0-0`:Se?oe=`<=${me}.${ke}.${ge}-${Se}`:W?oe=`<${me}.${ke}.${+ge+1}-0`:oe=`<=${oe}`,`${B} ${oe}`.trim()),X=(W,U,B)=>{for(let V=0;V<W.length;V++)if(!W[V].test(U))return!1;if(U.prerelease.length&&!B.includePrerelease){for(let V=0;V<W.length;V++)if(o(W[V].semver),W[V].semver!==r.ANY&&W[V].semver.prerelease.length>0){const K=W[V].semver;if(K.major===U.major&&K.minor===U.minor&&K.patch===U.patch)return!0}return!1}return!0};return bR}const W4e=Kte(),G4e=(e,t,n)=>{try{t=new W4e(t,n)}catch{return!1}return t.test(e)};var q4e=G4e,Jte=V3e(q4e);function V4e(e,t,n){const i=e.open(t),r=1e4,o=250,{origin:a}=new URL(t);let s=~~(r/o);function l(c){c.source===i&&(s=0,e.removeEventListener("message",l,!1))}e.addEventListener("message",l,!1);function u(){s<=0||(i.postMessage(n,a),setTimeout(u,o),s-=1)}setTimeout(u,o)}var Y4e=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function Qte(e,...t){for(const n of t)Z4e(e,n);return e}function Z4e(e,t){for(const n of Object.keys(t))Cm(e,n,t[n],!0)}const ga=$Me;let uv=D5e;const Xx=typeof window<"u"?window:void 0;var _8;uv===void 0&&((_8=Xx==null?void 0:Xx.vl)!=null&&_8.compile)&&(uv=Xx.vl);const X4e={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},K4e={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},F0={vega:"Vega","vega-lite":"Vega-Lite"},Xw={vega:ga.version,"vega-lite":uv?uv.version:"not available"},J4e={vega:e=>e,"vega-lite":(e,t)=>uv.compile(e,{config:t}).spec},Q4e=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,eje="chart-wrapper";function tje(e){return typeof e=="function"}function JB(e,t,n,i){const r=`<html><head>${t}</head><body><pre><code class="json">`,o=`</code></pre>${n}</body></html>`,a=window.open("");a.document.write(r+e+o),a.document.title=`${F0[i]} JSON Source`}function nje(e,t){if(e.$schema){const n=Wte(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${F0[n.library]}, but mode argument sets ${F0[t]??t}.`);const i=n.library;return Jte(Xw[i],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${F0[i]} ${n.version}, but the current version of ${F0[i]} is v${Xw[i]}.`),i}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function ene(e){return!!(e&&"load"in e)}function QB(e){return ene(e)?e:ga.loader(e)}function ije(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return Oe(t.defaultStyle)&&(t.defaultStyle=!1),t}async function rje(e,t,n={}){let i,r;Oe(t)?(r=QB(n.loader),i=JSON.parse(await r.load(t))):i=t;const o=ije(i),a=o.loader;(!r||a)&&(r=QB(n.loader??a));const s=await e8(o,r),l=await e8(n,r),u={...Qte(l,s),config:Sm(l.config??{},s.config??{})};return await aje(e,i,u,r)}async function e8(e,t){const n=Oe(e.config)?JSON.parse(await t.load(e.config)):e.config??{},i=Oe(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...i?{patch:i}:{},...n?{config:n}:{}}}function oje(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function aje(e,t,n={},i){const r=n.theme?Sm(L3e[n.theme],n.config??{}):n.config,o=Nc(n.actions)?n.actions:Qte({},X4e,n.actions??{}),a={...K4e,...n.i18n},s=n.renderer??"canvas",l=n.logLevel??ga.Warn,u=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const R="vega-embed-style",{root:M,rootContainer:T}=oje(c);if(!M.getElementById(R)){const N=document.createElement("style");N.id=R,N.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?Y4e.toString():n.defaultStyle,T.appendChild(N)}}const d=nje(t,n.mode);let h=J4e[d](t,r);if(d==="vega-lite"&&h.$schema){const R=Wte(h.$schema);Jte(Xw.vega,`^${R.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${R.version}, but current version is v${Xw.vega}.`)}c.classList.add("vega-embed"),o&&c.classList.add("has-actions"),c.innerHTML="";let m=c;if(o){const R=document.createElement("div");R.classList.add(eje),c.appendChild(R),m=R}const g=n.patch;if(g&&(h=g instanceof Function?g(h):N2(h,g,!0,!1).newDocument),n.formatLocale&&ga.formatLocale(n.formatLocale),n.timeFormatLocale&&ga.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const R in n.expressionFunctions){const M=n.expressionFunctions[R];"fn"in M?ga.expressionFunction(R,M.fn,M.visitor):M instanceof Function&&ga.expressionFunction(R,M)}const{ast:y}=n,x=ga.parse(h,d==="vega-lite"?{}:r,{ast:y}),b=new(n.viewClass||ga.View)(x,{loader:i,logLevel:l,renderer:s,...y?{expr:ga.expressionInterpreter??n.expr??WMe}:{}});if(b.addSignalListener("autosize",(R,M)=>{const{type:T}=M;T=="fit-x"?(m.classList.add("fit-x"),m.classList.remove("fit-y")):T=="fit-y"?(m.classList.remove("fit-x"),m.classList.add("fit-y")):T=="fit"?m.classList.add("fit-x","fit-y"):m.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:R,tooltip:M}=n,T=R&&!ene(R)?R==null?void 0:R.baseURL:void 0,N=tje(M)?M:new q3e({baseURL:T,...M===!0?{}:M}).call;b.tooltip(N)}let{hover:w}=n;if(w===void 0&&(w=d==="vega"),w){const{hoverSet:R,updateSet:M}=typeof w=="boolean"?{}:w;b.hover(R,M)}n&&(n.width!=null&&b.width(n.width),n.height!=null&&b.height(n.height),n.padding!=null&&b.padding(n.padding)),await b.initialize(m,n.bind).runAsync();let S;if(o!==!1){let R=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const T=document.createElement("details");T.title=a.CLICK_TO_VIEW_ACTIONS,c.append(T),R=T;const N=document.createElement("summary");N.innerHTML=Q4e,T.append(N),S=D=>{T.contains(D.target)||T.removeAttribute("open")},document.addEventListener("click",S)}const M=document.createElement("div");if(R.append(M),M.classList.add("vega-actions"),o===!0||o.export!==!1){for(const T of["svg","png"])if(o===!0||o.export===!0||o.export[T]){const N=a[`${T.toUpperCase()}_ACTION`],D=document.createElement("a"),I=Ie(n.scaleFactor)?n.scaleFactor[T]:n.scaleFactor;D.text=N,D.href="#",D.target="_blank",D.download=`${u}.${T}`,D.addEventListener("mousedown",async function(z){z.preventDefault();const X=await b.toImageURL(T,I);this.href=X}),M.append(D)}}if(o===!0||o.source!==!1){const T=document.createElement("a");T.text=a.SOURCE_ACTION,T.href="#",T.addEventListener("click",function(N){JB(ZE(t),n.sourceHeader??"",n.sourceFooter??"",d),N.preventDefault()}),M.append(T)}if(d==="vega-lite"&&(o===!0||o.compiled!==!1)){const T=document.createElement("a");T.text=a.COMPILED_ACTION,T.href="#",T.addEventListener("click",function(N){JB(ZE(h),n.sourceHeader??"",n.sourceFooter??"","vega"),N.preventDefault()}),M.append(T)}if(o===!0||o.editor!==!1){const T=n.editorUrl??"https://vega.github.io/editor/",N=document.createElement("a");N.text=a.EDITOR_ACTION,N.href="#",N.addEventListener("click",function(D){V4e(window,T,{config:r,mode:d,renderer:s,spec:ZE(t)}),D.preventDefault()}),M.append(N)}}function k(){S&&document.removeEventListener("click",S),b.finalize()}return{view:b,spec:t,vgSpec:h,finalize:k,embedOptions:n}}function sje(e){return!!e&&{}.toString.call(e)==="[object Function]"}function lje(e,t,n){n&&(sje(n)?n(e.data(t)):e.change(t,ga.changeset().remove(()=>!0).insert(n)))}function uje(e,t){Object.keys(t).forEach(n=>{lje(e,n,t[n])})}function tne(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(i=>{t.add(i)})}),t}const nne=()=>{};function wR(e,t){const n=Object.keys(t);return n.forEach(i=>{try{e.addSignalListener(i,t[i])}catch(r){console.warn("Cannot add invalid signal listener.",r)}}),n.length>0}var cje=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var i,r,o;if(Array.isArray(t)){if(i=t.length,i!=n.length)return!1;for(r=i;r--!==0;)if(!e(t[r],n[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(o=Object.keys(t),i=o.length,i!==Object.keys(n).length)return!1;for(r=i;r--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[r]))return!1;for(r=i;r--!==0;){var a=o[r];if(!e(t[a],n[a]))return!1}return!0}return t!==t&&n!==n};const fje=Md(cje);function dje(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},i=tne([e,t]);return i.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),i.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),i.delete("width"),i.delete("height"),[...i].some(r=>!(r in e)||!(r in t)||!fje(e[r],t[r]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function t8(e,t){const n=Object.keys(t);return n.forEach(i=>{try{e.removeSignalListener(i,t[i])}catch(r){console.warn("Cannot remove invalid signal listener.",r)}}),n.length>0}function SR(e){const{spec:t,width:n,height:i}=e;return typeof n<"u"&&typeof i<"u"?{...t,width:n,height:i}:typeof n<"u"?{...t,width:n}:typeof i<"u"?{...t,height:i}:t}function P0(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ine extends Nt.PureComponent{constructor(){super(...arguments),P0(this,"containerRef",Nt.createRef()),P0(this,"resultPromise",void 0),P0(this,"handleError",t=>{const{onError:n=nne}=this.props;n(t,this.containerRef.current),console.warn(t)}),P0(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=tne([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(i=>this.props[i]!==t[i]))this.clearView(),this.createView();else{const i=dje(SR(this.props),SR(t)),{signalListeners:r}=this.props,{signalListeners:o}=t;if(i)if(i.isExpensive)this.clearView(),this.createView();else{const a=!jT(r,o);this.modifyView(s=>{i.width!==!1&&s.width(i.width),i.height!==!1&&s.height(i.height),a&&(o&&t8(s,o),r&&wR(s,r)),s.run()})}else jT(r,o)||this.modifyView(a=>{o&&t8(a,o),r&&wR(a,r),a.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:i={},width:r,height:o,...a}=this.props;if(this.containerRef.current){const s=SR(this.props);this.resultPromise=rje(this.containerRef.current,s,a).then(l=>{if(l){const{view:u}=l;wR(u,i)&&u.run()}return l}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return Nt.createElement("div",{ref:this.containerRef,className:t,style:n})}}P0(ine,"propTypes",{className:bn.string,onError:bn.func});function JM(){return JM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},JM.apply(this,arguments)}function QM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const hje={};class ZD extends Nt.PureComponent{constructor(){super(...arguments),QM(this,"vegaEmbed",Nt.createRef()),QM(this,"handleNewView",t=>{this.update();const{onNewView:n=nne}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){jT(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{uje(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return Nt.createElement(ine,JM({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}QM(ZD,"defaultProps",{data:hje});var rne={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},n8=Nt.createContext&&Nt.createContext(rne),pje=["attr","size","title"];function mje(e,t){if(e==null)return{};var n=gje(e,t),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)i=o[r],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function gje(e,t){if(e==null)return{};var n={},i=Object.keys(e),r,o;for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function Kw(){return Kw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Kw.apply(this,arguments)}function i8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function Jw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?i8(Object(n),!0).forEach(function(i){yje(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i8(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function yje(e,t,n){return t=vje(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vje(e){var t=xje(e,"string");return typeof t=="symbol"?t:String(t)}function xje(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function one(e){return e&&e.map((t,n)=>Nt.createElement(t.tag,Jw({key:n},t.attr),one(t.child)))}function nu(e){return t=>Nt.createElement(_je,Kw({attr:Jw({},e.attr)},t),one(e.child))}function _je(e){var t=n=>{var{attr:i,size:r,title:o}=e,a=mje(e,pje),s=r||n.size||"1em",l;return n.className&&(l=n.className),e.className&&(l=(l?l+" ":"")+e.className),Nt.createElement("svg",Kw({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,a,{className:l,style:Jw(Jw({color:e.color||n.color},n.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),o&&Nt.createElement("title",null,o),e.children)};return n8!==void 0?Nt.createElement(n8.Consumer,null,n=>t(n)):t(rne)}function bje(e){return nu({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(e)}function wje(e){return nu({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"},child:[]}]})(e)}function Sje(e){return nu({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12zM288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12zm148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12zM160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12z"},child:[]}]})(e)}function ane(e){return nu({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm76.45 211.36l-96.42 95.7c-6.65 6.61-17.39 6.61-24.04 0l-96.42-95.7C73.42 337.29 80.54 320 94.82 320H160v-80c0-8.84 7.16-16 16-16h32c8.84 0 16 7.16 16 16v80h65.18c14.28 0 21.4 17.29 11.27 27.36zM377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9z"},child:[]}]})(e)}function Cje(e){return nu({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(e)}function Eje(e){return nu({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zM124 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H124z"},child:[]}]})(e)}function kje(e){return nu({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"},child:[]}]})(e)}const Rje={0:"#E90051",1:"#ED2641",2:"#F24C31",3:"#F67120",4:"#FB9710",5:"#FFBD00",6:"#F5C029",7:"#ECC352",8:"#E2C67A",9:"#D9C9A3",10:"#CFCCCC",11:"#AAC2C6",12:"#86B9BF",13:"#61AFB9",14:"#3DA6B2",15:"#189CAC",16:"#2B8BAC",17:"#3E7AAC",18:"#5068AD",19:"#6357AD"},Tje={0:"#73B2FF",1:"#738FE5",2:"#746DCB",3:"#754BB1",4:"#5D5CAC",5:"#3F77AC",6:"#2192AC",7:"#48B0AF",8:"#91D0B5",9:"#DAEFBB",10:"#FFF4A0",11:"#FFDF64",12:"#FFCA28",13:"#FCA908",14:"#F56D22",15:"#EE313B",16:"#EA0956",17:"#F14178",18:"#F87A99",19:"#FFB3BB"},Aje={0:"#FFB3BB",1:"#F87A99",2:"#F14178",3:"#EA0956",4:"#EE313B",5:"#F56D22",6:"#FCA908",7:"#FFCA28",8:"#FFDF64",9:"#FFF4A0",10:"#DAEFBB",11:"#91D0B5",12:"#48B0AF",13:"#2192AC",14:"#3F77AC",15:"#5D5CAC",16:"#754BB1",17:"#746DCB",18:"#738FE5",19:"#73B2FF"},Mje={ciff_divergent:Rje,CIFF20:Tje,CIFF20_r:Aje};function Fje(e){return[].map.call(e,(t,n)=>[t,n]).reduce((t,n)=>n[0]>t[0]?n:t)[1]}function sne(e){return[].map.call(e,(t,n)=>[t,n]).reduce((t,n)=>n[0]<t[0]?n:t)[1]}function jh(e,t=3){return e?parseFloat(e).toFixed(t):"-"}function lne(e,t,n){if(e===null||e<-90)return"#D3D3D3";{e=(e-t[0])/(t[1]-t[0]);const i=Mje[n],r=Math.min(Math.max(0,parseInt(19*e)),19),o=String(r);return i[o]}}function Pje({name:e,items:t,defaultOpt:n,value:i,pass:r,noDefault:o,extras:a}){i===void 0&&(i=n);function s(l){r(l.target.value),a&&a()}return v.jsx("div",{children:v.jsxs(qt.Select,{id:"select"+e,value:i,onChange:s,children:[o?"":v.jsx("option",{value:""}),t.map((l,u)=>{const c=l.replaceAll(" ","");return v.jsx("option",{value:c,children:l},u)})]},"select"+e)})}function Nje({param:e}){const[t,n]=F.useState(!1),[i,r]=F.useState("Vector"),[o,a]=F.useState("R2");function s(){n(!0)}function l(){n(!1)}const u={Country:e.config.Name,Indicator:e.config.indicators[e.indicator].Indicator},c=e.config.NoR1.includes(e.indicator),d=e.config.NoR2.includes(e.indicator),h=e.config.DistrictOnly.includes(e.indicator),m=F.useMemo(()=>v.jsx(lP,{title:"click to download",role:"link",href:"https://sdi.worldpop.org",target:"_blank",children:"Download"}),[o,i]);return v.jsxs("div",{className:"text-center m-0 p-0 mb-2",children:[v.jsx("span",{className:"m-0 fs-4 text-danger",title:"Download Data",onClick:s,children:v.jsx(ane,{})}),v.jsxs(Ri,{show:t,onHide:l,size:"lg",children:[v.jsx(Ri.Header,{closeButton:!0,children:v.jsx("h4",{children:"Download Data"})}),v.jsxs(Ri.Body,{children:[v.jsx("p",{children:"You are going to download the following dataset:"}),v.jsxs(qt,{children:[Object.keys(u).map((g,y)=>v.jsxs(qt.Group,{as:Hf,className:"mb-1",children:[v.jsx(qt.Label,{column:!0,sm:2,children:g}),v.jsx(zf,{sm:10,children:v.jsx(qt.Control,{type:"text",disabled:!0,placeholder:u[g],id:"country"})})]},y)),v.jsxs(qt.Group,{as:Hf,className:"mb-1",children:[v.jsx(qt.Label,{column:!0,sm:2,children:"Round"}),v.jsx(zf,{sm:10,children:v.jsxs(qt.Select,{defaultValue:o,id:"round",onChange:g=>a(g.target.value),children:[v.jsx("option",{value:"R1",disabled:c,children:"Round 1"}),v.jsx("option",{value:"R2",disabled:d,children:"Round 2"}),v.jsx("option",{value:"CH",disabled:c||d,children:"Change"})]})})]}),v.jsxs(qt.Group,{as:Hf,className:"mb-1",children:[v.jsx(qt.Label,{column:!0,sm:2,children:"Data Type"}),v.jsx(zf,{sm:10,children:v.jsxs(qt.Select,{defaultValue:i,id:"type",onChange:g=>r(g.target.value),children:[v.jsx("option",{value:"Vector",children:"Vector (unit level)"}),v.jsx("option",{value:"Raster",disabled:h,children:"Raster (grid level)"})]})})]})]}),v.jsx("br",{}),v.jsxs("div",{children:[v.jsx("p",{children:"DOI: "}),v.jsxs("p",{children:["Release note: ",v.jsx("a",{href:"#",children:"Version 1.1"})]})]})]}),v.jsx(Ri.Footer,{children:m})]})]})}function $je({param:e}){const[t,n]=F.useState(!1),[i,r]=F.useState("CSV");function o(){n(!0)}function a(){n(!1)}const s={Country:e.config.Name,Indicator:e.config.indicators[e.indicator].Indicator},l=F.useMemo(()=>v.jsx(lP,{title:"click to download",role:"link",href:"https://sdi.worldpop.org",target:"_blank",children:"Download"}),[i]);return v.jsxs("div",{className:"text-center m-0 p-0 mb-2",children:[v.jsx("span",{className:"m-0 fs-4 text-danger",title:"Download Data",onClick:o,children:v.jsx(ane,{})}),v.jsxs(Ri,{show:t,onHide:a,size:"lg",children:[v.jsx(Ri.Header,{closeButton:!0,children:v.jsx("h4",{children:"Download Data"})}),v.jsxs(Ri.Body,{children:[v.jsx("p",{children:"You are going to download the following dataset:"}),v.jsxs(qt,{children:[Object.keys(s).map((u,c)=>v.jsxs(qt.Group,{as:Hf,className:"mb-1",children:[v.jsx(qt.Label,{column:!0,sm:2,children:u}),v.jsx(zf,{sm:10,children:v.jsx(qt.Control,{type:"text",disabled:!0,placeholder:s[u],id:"country"})})]},c)),v.jsxs(qt.Group,{as:Hf,className:"mb-1",children:[v.jsx(qt.Label,{column:!0,sm:2,children:"Data Type"}),v.jsx(zf,{sm:10,children:v.jsxs(qt.Select,{defaultValue:i,id:"type",onChange:u=>r(u.target.value),children:[v.jsx("option",{value:"CSV",children:"CSV (no geometry)"}),v.jsx("option",{value:"JSON",children:"JSON (no geometry)"}),v.jsx("option",{value:"GeoJSON",children:"GeoJSON (geometry included)"})]})})]})]}),v.jsx("br",{}),v.jsxs("div",{children:[v.jsx("p",{children:"DOI: "}),v.jsxs("p",{children:["Release note: ",v.jsx("a",{href:"#",children:"Version 1.1"})]})]})]}),v.jsx(Ri.Footer,{children:l})]})]})}function Oje({element:e,title:t}){const[n,i]=F.useState(!1);function r(){i(!0)}function o(){i(!1)}return v.jsxs("div",{className:"text-center m-0 p-0 mb-2",children:[v.jsx("span",{className:"m-0 fs-4 text-danger",title:"Fullscreen",onClick:r,children:v.jsx(Sje,{})}),v.jsxs(Ri,{show:n,onHide:o,fullscreen:!0,children:[v.jsx(Ri.Header,{closeButton:!0,children:t}),v.jsx(Ri.Body,{children:e})]})]})}function r8({element:e,elemID:t,param:n,title:i}){return v.jsx("div",{className:"row m-0 p-0",children:v.jsx("div",{className:"col-sm",children:v.jsxs("div",{className:"row float-end",children:[v.jsx("div",{className:"m-0 p-0 px-1 col",children:v.jsx(v.Fragment,{})}),v.jsxs("div",{className:"m-0 p-0 px-1 col",children:[n[0]==="map"?v.jsx(Nje,{param:n[1]}):v.jsx($je,{param:n[1]}),v.jsx(v.Fragment,{})]}),v.jsx("div",{className:"m-0 p-0 px-1 col",children:v.jsx(Oje,{element:e,title:i})})]})})})}function Ije(e){return nu({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"},child:[]}]})(e)}function Dje(e){return nu({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.496 6.033h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286a.237.237 0 0 0 .241.247zm2.325 6.443c.61 0 1.029-.394 1.029-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94 0 .533.425.927 1.01.927z"},child:[]}]})(e)}const Lje="/temporary/assets/exceedance-5diRcl3D.png",jje=v.jsxs("div",{children:[v.jsx("b",{children:"For indicators where an increase in the value means improvement over time"}),v.jsxs("p",{children:["An area presenting the smallest increase (or a decrease in value) over time of the selected indicator is classified as being ",v.jsx("i",{children:"the least performing"}),". An area presenting the highest increase over time of the selected indicator is classified as being ",v.jsx("i",{children:"the highest performing"}),"."]}),v.jsx("b",{children:"For indicators where a decrease in the value means improvement over time"}),v.jsxs("p",{children:["An area presenting the highest decrease over time of the selected indicator is classified as being ",v.jsx("i",{children:"the highest performing"}),". An area presenting the smallest decrease over time of the selected indicator (or an increase in value) is classified as being ",v.jsx("i",{children:"the least performing"}),"."]})]}),zje=v.jsx("div",{children:v.jsxs("blockquote",{children:["Irrespective of the direction of each indicator, the legend displays a better condition (improvement over time when looking at time change) in blue, and a worse condition (worsening over time when looking at time change) in red. For example,",v.jsxs("ul",{children:[v.jsx("li",{children:" increasing value meaning better condition like % of contraceptive prevalence "}),v.jsx("li",{children:" increasing value meaning worse condition like % of low birth weight "})]})]})}),Bje=v.jsxs("div",{children:[v.jsx("p",{children:'The values shown on the map are our "best guess" given the data and modelling but as with any statistics there are a range of plausible values.'}),v.jsx("p",{children:"The user can choose the probability that there is meaningful improvement or worsening. The map filters out units where it is unlikely that there have been meaningful improvements."}),v.jsx(une,{}),v.jsx("b",{children:"Technical:"}),v.jsxs("p",{children:["The ",v.jsx("i",{children:"exceedance probability"})," is the probability, given the observed data, that the true change in a district is negative for improvement or positive for worsening."]}),v.jsx("p",{children:"We use that to filter which districts to show on the map. Districts where the exceedance probability is less than the selected limit will be filtered out."}),v.jsx("hr",{}),"Find out more on the ",v.jsx("a",{href:"#technote-2",target:"_blank",children:"Technical Note 2"})," page."]}),Hje=v.jsxs("div",{children:[v.jsx("p",{children:'The values shown on the map are our "best guess" given the data and modelling but as with any statistics there are a range of plausible values.'}),v.jsx("p",{children:"The user can choose the probability that there is meaningful improvement or worsening. The map filters out units where it is unlikely that there have been meaningful improvements."}),v.jsx(une,{}),v.jsx("b",{children:"Technical:"}),v.jsxs("p",{children:["The ",v.jsx("i",{children:"exceedance probability"})," is the probability, given the observed data, that the true change in a district is positive for improvement or negative for worsening."]}),v.jsx("p",{children:"We use that to filter which districts to show on the map. Districts where the exceedance probability is less than the selected limit will be filtered out."}),v.jsx("hr",{}),"Find out more on the ",v.jsx("a",{href:"#tech-note-2",target:"_blank",children:"Technical Note 2"})," page."]}),Uje=v.jsxs("div",{children:[v.jsx("p",{children:"While the surveys were designed to be representative at the district level, caution is advised in interpreting and utilizing the findings due to the inherent limitations posed by small sample sizes for the mentioned indicators. Furthermore, it is important to note that the indicators discussed herein are rare events, further emphasizing the need for careful consideration and caution in their interpretation, given the limited sample sizes at the district level."}),v.jsxs("p",{children:["See ",v.jsx("a",{href:"#tech-note-1",target:"_blank",children:"Technical Note 1"})," from round 1 (NFHS-4) to round 2 (NFHS-5) and national official boundaries to enable over time comparisons."]})]}),Wje=v.jsxs("div",{children:["Since census boundaries aligned with NFHS-4 boundaries, the same two-step approached as described in the ",v.jsx("a",{href:"#tech-note-1",children:"Technical Note 1"})," was applied."]});function une(){const[e,t]=F.useState(!1);function n(){t(!0)}function i(){t(!1)}return v.jsxs("div",{className:"text-center m-0 p-0 mb-2",children:[v.jsx(lP,{variant:"danger",size:"sm",onClick:n,children:"Illustration"}),v.jsxs(Ri,{show:e,onHide:i,size:"lg",children:[v.jsx(Ri.Header,{closeButton:!0,children:v.jsx("h4",{children:"Illustration"})}),v.jsx(Ri.Body,{children:v.jsx("img",{alt:"exceedance",src:Lje,width:"100%"})})]})]})}function Gje({content:e}){const t=v.jsx(dp,{children:v.jsx(dp.Body,{children:v.jsx("div",{dangerouslySetInnerHTML:{__html:e}})})});return v.jsx(nW,{trigger:"click",placement:"bottom-start",overlay:t,children:v.jsx("span",{className:"mx-1",title:"Click for more",children:v.jsx(Ije,{})})})}function XD({about:e,positive:t=!0,placement:n="auto-start"}){const i={"How to read table":jje,"About this color bar":zje,"NNote on the change certainty":Bje,"Note on the change certainty":Hje,"Note on changing boundaries":Uje,"Note on census boundaries":Wje},r=t?i[e]:i["N"+e],o=v.jsxs(dp,{children:[v.jsx(dp.Header,{children:e}),v.jsx(dp.Body,{children:r})]});return v.jsx(nW,{trigger:"click",placement:n,overlay:o,children:v.jsx("span",{className:"mx-1",title:e,children:v.jsx(Dje,{})})})}const Qw={burkinafaso:{Name:"Burkina Faso",TLC:"BFA",Prefix:"BFA",Adm1:"Region",Adm2:"Province",Center:[12.7,-1.8],Zoom:[6],DistrictOnly:[],StateOnly:[""],NoR1:[],NoR2:[],indicators:{LBW:{Indicator:"Low birth weight",Theme:"Child Health",Remark:"",Min:0,Max:42.5,Delta:2.5,CHMin:-25,CHMax:25,CHDelta:2.5,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},Min_diet:{Indicator:"Minimum acceptable diet",Theme:"Nutrition",Remark:"",Min:0,Max:48,Delta:3,CHMin:-32,CHMax:24,CHDelta:4,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},Sever_wast:{Indicator:"Prevalence of severe wasting",Theme:"Nutrition",Remark:"",Min:0,Max:42.5,Delta:2.5,CHMin:-22.5,CHMax:25,CHDelta:2.5,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},Teen_Pregn:{Indicator:"Teenage pregnancies",Theme:"Reproductive Health",Remark:"",Min:0,Max:40,Delta:2.5,CHMin:-27.5,CHMax:17.5,CHDelta:2.5,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},U_Pregn:{Indicator:"Unwanted births",Theme:"Reproductive Health",Remark:"",Min:0,Max:40,Delta:2.5,CHMin:-27.5,CHMax:17.5,CHDelta:2.5,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},Anaemia:{Indicator:"Prevalence of anaemia ",Theme:"Reproductive Health",Remark:"",Min:15,Max:100,Delta:5,CHMin:-35,CHMax:45,CHDelta:5,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},ANC_4plus:{Indicator:"Antenatal care (4+ visits)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},ANC_blood:{Indicator:"Antenatal care (blood screening)",Theme:"Reproductive Health",Remark:"",Min:30,Max:100,Delta:5,CHMin:-15,CHMax:55,CHDelta:5,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},ANC_suppl:{Indicator:"Antenatal care (supplements)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},ANC_timing:{Indicator:"Antenatal care (timing)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-30,CHMax:70,CHDelta:5,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},ANC_urine:{Indicator:"Antenatal care (urine screening)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},Breastfeed:{Indicator:"Exclusive breastfeeding",Theme:"Nutrition",Remark:"",Min:20,Max:90,Delta:5,CHMin:-25,CHMax:75,CHDelta:5,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},C_Prev:{Indicator:"Modern contraceptive use",Theme:"Reproductive Health",Remark:"",Min:4,Max:72,Delta:4,CHMin:-20,CHMax:52,CHDelta:4,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},Child_m:{Indicator:"Child marriage",Theme:"Child Protection",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},Labour_fem:{Indicator:"Female labour force participation",Theme:"Livelihoods",Remark:"",Min:4,Max:84,Delta:4,CHMin:-24,CHMax:44,CHDelta:4,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},NAR_prim:{Indicator:"Net primary school attendance rate",Theme:"Education",Remark:"",Min:62,Max:98,Delta:2,CHMin:-80,CHMax:32,CHDelta:4,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},NAR_sec:{Indicator:"Net secondary school attendance rate",Theme:"Education",Remark:"",Min:28,Max:96,Delta:4,CHMin:-20,CHMax:32,CHDelta:4,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},Stunting:{Indicator:"Prevalence of stunting",Theme:"Nutrition",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},Wash_sanit:{Indicator:"WASH coverage (sanitation)",Theme:"WASH",Remark:"",Min:0,Max:100,Delta:5,CHMin:-60,CHMax:90,CHDelta:10,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},Wash_water:{Indicator:"WASH coverage (water)",Theme:"WASH",Remark:"",Min:0,Max:100,Delta:5,CHMin:-80,CHMax:80,CHDelta:10,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},NMR:{Indicator:"Neonatal mortality rate",Theme:"Child Health",Remark:"For this indicator, district estimates only were produced. The indicators shown here are rare events, highlighting the necessity for cautious interpretation and utilization of findings, given the limited district-level sample sizes.",Min:0,Max:50,Delta:2.5,CHMin:-25,CHMax:25,CHDelta:2.5,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},Unsafe_Ab:{Indicator:"Unsafe abortions ",Theme:"Reproductive Health",Remark:"For this indicator, district estimates only were produced. The indicators shown here are rare events, highlighting the necessity for cautious interpretation and utilization of findings, given the limited district-level sample sizes.",Min:0,Max:60,Delta:3,CHMin:-30,CHMax:30,CHDelta:3,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},CHMR:{Indicator:"Child mortality rate",Theme:"Child Health",Remark:"For this indicator, district estimates only were produced. The indicators shown here are rare events, highlighting the necessity for cautious interpretation and utilization of findings, given the limited district-level sample sizes.",Min:0,Max:20,Delta:1,CHMin:-10,CHMax:10,CHDelta:1,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"},Lab_child:{Indicator:"Prevalence of child workers",Theme:"Child Protection",Remark:"For child worker, census estimates were used to calculate the indicator, and only had one point in time was available.",Min:0,Max:10,Delta:.05,CHMin:-5,CHMax:5,CHDelta:-.05,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"Census",R2:"No data",Y1:"2011",Y2:null},Stillbirth:{Indicator:"Still birth rate",Theme:"Child Health",Remark:"For this indicator, district estimates only were produced. The indicators shown here are rare events, highlighting the necessity for cautious interpretation and utilization of findings, given the limited district-level sample sizes.",Min:2,Max:40,Delta:2,CHMin:-20,CHMax:20,CHDelta:2,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2019-21"}}},india:{Name:"India",TLC:"IND",Prefix:"",N1:36,N2:742,Adm1:"State",Adm2:"District",Center:[22.9,79.6],Zoom:[4],DistrictOnly:["NMR","Unsafe_Ab","CHMR","Lab_child","Stillbirth"],StateOnly:[""],NoR1:[],NoR2:["Lab_child"],indicators:{LBW:{Indicator:"Low birth weight",Theme:"Child Health",Remark:"",Min:0,Max:42.5,Delta:2.5,CHMin:-25,CHMax:25,CHDelta:2.5,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},Min_diet:{Indicator:"Minimum acceptable diet",Theme:"Nutrition",Remark:"",Min:0,Max:48,Delta:3,CHMin:-32,CHMax:24,CHDelta:4,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},Sever_wast:{Indicator:"Prevalence of severe wasting",Theme:"Nutrition",Remark:"",Min:0,Max:42.5,Delta:2.5,CHMin:-22.5,CHMax:25,CHDelta:2.5,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},Teen_Pregn:{Indicator:"Teenage pregnancies",Theme:"Reproductive Health",Remark:"",Min:0,Max:40,Delta:2.5,CHMin:-27.5,CHMax:17.5,CHDelta:2.5,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},U_Pregn:{Indicator:"Unwanted births",Theme:"Reproductive Health",Remark:"",Min:0,Max:40,Delta:2.5,CHMin:-27.5,CHMax:17.5,CHDelta:2.5,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},Anaemia:{Indicator:"Prevalence of anaemia ",Theme:"Reproductive Health",Remark:"",Min:15,Max:100,Delta:5,CHMin:-35,CHMax:45,CHDelta:5,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},ANC_4plus:{Indicator:"Antenatal care (4+ visits)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},ANC_blood:{Indicator:"Antenatal care (blood screening)",Theme:"Reproductive Health",Remark:"",Min:30,Max:100,Delta:5,CHMin:-15,CHMax:55,CHDelta:5,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},ANC_suppl:{Indicator:"Antenatal care (supplements)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},ANC_timing:{Indicator:"Antenatal care (timing)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-30,CHMax:70,CHDelta:5,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},ANC_urine:{Indicator:"Antenatal care (urine screening)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},Breastfeed:{Indicator:"Exclusive breastfeeding",Theme:"Nutrition",Remark:"",Min:20,Max:90,Delta:5,CHMin:-25,CHMax:75,CHDelta:5,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},C_Prev:{Indicator:"Modern contraceptive use",Theme:"Reproductive Health",Remark:"",Min:4,Max:72,Delta:4,CHMin:-20,CHMax:52,CHDelta:4,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},Child_m:{Indicator:"Child marriage",Theme:"Child Protection",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},Labour_fem:{Indicator:"Female labour force participation",Theme:"Livelihoods",Remark:"",Min:4,Max:84,Delta:4,CHMin:-24,CHMax:44,CHDelta:4,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},NAR_prim:{Indicator:"Net primary school attendance rate",Theme:"Education",Remark:"",Min:62,Max:98,Delta:2,CHMin:-80,CHMax:32,CHDelta:4,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},NAR_sec:{Indicator:"Net secondary school attendance rate",Theme:"Education",Remark:"",Min:28,Max:96,Delta:4,CHMin:-20,CHMax:32,CHDelta:4,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},Stunting:{Indicator:"Prevalence of stunting",Theme:"Nutrition",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},Wash_sanit:{Indicator:"WASH coverage (sanitation)",Theme:"WASH",Remark:"",Min:0,Max:100,Delta:5,CHMin:-60,CHMax:90,CHDelta:10,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},Wash_water:{Indicator:"WASH coverage (water)",Theme:"WASH",Remark:"",Min:0,Max:100,Delta:5,CHMin:-80,CHMax:80,CHDelta:10,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},NMR:{Indicator:"Neonatal mortality rate",Theme:"Child Health",Remark:"For this indicator, district estimates only were produced. The indicators shown here are rare events, highlighting the necessity for cautious interpretation and utilization of findings, given the limited district-level sample sizes.",Min:0,Max:50,Delta:2.5,CHMin:-25,CHMax:25,CHDelta:2.5,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},Unsafe_Ab:{Indicator:"Unsafe abortions ",Theme:"Reproductive Health",Remark:"For this indicator, district estimates only were produced. The indicators shown here are rare events, highlighting the necessity for cautious interpretation and utilization of findings, given the limited district-level sample sizes.",Min:0,Max:60,Delta:3,CHMin:-30,CHMax:30,CHDelta:3,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},CHMR:{Indicator:"Child mortality rate",Theme:"Child Health",Remark:"For this indicator, district estimates only were produced. The indicators shown here are rare events, highlighting the necessity for cautious interpretation and utilization of findings, given the limited district-level sample sizes.",Min:0,Max:20,Delta:1,CHMin:-10,CHMax:10,CHDelta:1,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"},Lab_child:{Indicator:"Prevalence of child workers",Theme:"Child Protection",Remark:"Child age in India is between 5-14. For child worker, census estimates were used to calculate the indicator, and only had one point in time.",Min:0,Max:10,Delta:.05,CHMin:-5,CHMax:5,CHDelta:-.05,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"Census",R2:"No data",Y1:"2011",Y2:null},Stillbirth:{Indicator:"Still birth rate",Theme:"Child Health",Remark:"For this indicator, district estimates only were produced. The indicators shown here are rare events, highlighting the necessity for cautious interpretation and utilization of findings, given the limited district-level sample sizes.",Min:2,Max:40,Delta:2,CHMin:-20,CHMax:20,CHDelta:2,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"NFHS-4",R2:"NFHS-5",Y1:"2015-16",Y2:"2019-21"}}},kenya:{Name:"Kenya",TLC:"KEN",Prefix:"KEN_",N1:47,N2:335,Adm1:"County",Adm2:"Sub-county",Center:[.6,37.5],Zoom:[6],DistrictOnly:["LBW","Stillbirth","Lab_child"],StateOnly:["LBW","Stillbirth","Lab_child"],NoR1:["Lab_child","NTDs_helm","NTDs_schi"],NoR2:[],indicators:{Teen_Pregn:{Indicator:"Teenage pregnancies",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-20,CHMax:56,CHDelta:4,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},U_Pregn:{Indicator:"Unwanted births",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-30,CHMax:84,CHDelta:6,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},ANC_4plus:{Indicator:"Antenatal care (4+ visits)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:90,CHDelta:10,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},ANC_blood:{Indicator:"Antenatal care (blood screening)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:90,CHDelta:10,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},ANC_suppl:{Indicator:"Antenatal care (supplements)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:90,CHDelta:10,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},ANC_timing:{Indicator:"Antenatal care (timing)",Theme:"Reproductive Health",Remark:"",Min:0,Max:51,Delta:3,CHMin:-6,CHMax:30,CHDelta:2,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},ANC_urine:{Indicator:"Antenatal care (urine screening)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:90,CHDelta:10,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},C_Prev:{Indicator:"Modern contraceptive use",Theme:"Reproductive Health",Remark:"",Min:15,Max:90,Delta:5,CHMin:-35,CHMax:60,CHDelta:5,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},Wash_sanit:{Indicator:"WASH coverage (sanitation)",Theme:"WASH",Remark:"",Min:0,Max:100,Delta:5,CHMin:-90,CHMax:90,CHDelta:10,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},Wash_water:{Indicator:"WASH coverage (water)",Theme:"WASH",Remark:"",Min:0,Max:100,Delta:5,CHMin:-90,CHMax:90,CHDelta:10,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},NTDs_fil:{Indicator:"NTDs: Lymphatic filariasis",Theme:"Neglected Tropical Diseases",Remark:"Data for this indicator were sourced from the Institute for Health Metrics and Evaluation (IHME). Confidence intervals for this indicator were not available. Please see <a href='#/technote-3'>Technical Note 3</a> for more information.",Min:0,Max:5,Delta:.2,CHMin:-1,CHMax:2,CHDelta:.2,Precision:2,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"IHME",R2:"IHME",Y1:"2014",Y2:"2018"},NTDs_oncho:{Indicator:"NTDs: Onchocerciasis",Theme:"Neglected Tropical Diseases",Remark:"Data for this indicator were sourced from the Institute for Health Metrics and Evaluation (IHME). Confidence intervals for this indicator were not available. Please see <a href='#/technote-3'>Technical Note 3</a> for more information.",Min:0,Max:3,Delta:.2,CHMin:-.5,CHMax:.01,CHDelta:.1,Precision:2,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"IHME",R2:"IHME",Y1:"2014",Y2:"2018"},NTDs_helm:{Indicator:"NTDs: Soil-transmitted helminth infections",Theme:"Neglected Tropical Diseases",Remark:"Data for this indicator were sourced from the WHO-ESPEN programme. Please see <a href='#/technote-4'>Technical Note 4</a> for more information.",Min:0,Max:50,Delta:.02,CHMin:-20,CHMax:20,CHDelta:.02,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"",R2:"WHO-ESPEN",Y1:"",Y2:"2010-2014"},NTDs_schi:{Indicator:"NTDs: Schistosomiasis",Theme:"Neglected Tropical Diseases",Remark:"Data for this indicator were sourced from the WHO-ESPEN programme. Please see <a href='#/technote-4'>Technical Note 4</a> for more information.",Min:0,Max:20,Delta:.01,CHMin:-10,CHMax:10,CHDelta:.002,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"",R2:"WHO-ESPEN",Y1:"",Y2:"2010-2018"},Breastfeed:{Indicator:"Exclusive breastfeeding",Theme:"Nutrition",Remark:"",Min:15,Max:80,Delta:5,CHMin:-60,CHMax:30,CHDelta:5,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},Min_diet:{Indicator:"Minimum acceptable diet",Theme:"Nutrition",Remark:"",Min:0,Max:72,Delta:4,CHMin:-45,CHMax:45,CHDelta:5,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},Stunting:{Indicator:"Prevalence of stunting",Theme:"Nutrition",Remark:"",Min:0,Max:76,Delta:4,CHMin:-27,CHMax:18,CHDelta:3,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},Wasting:{Indicator:"Prevalence of wasting",Theme:"Nutrition",Remark:"",Min:0,Max:64,Delta:4,CHMin:-16,CHMax:20,CHDelta:2,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},NAR_prim:{Indicator:"Net primary school attendance rate",Theme:"Education",Remark:"",Min:0,Max:76,Delta:4,CHMin:-60,CHMax:40,CHDelta:5,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},NAR_sec:{Indicator:"Net secondary school attendance rate",Theme:"Education",Remark:"",Min:0,Max:76,Delta:4,CHMin:-60,CHMax:40,CHDelta:5,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},Labour_fem:{Indicator:"Female labour force participation",Theme:"Livelihoods",Remark:"",Min:0,Max:100,Delta:5,CHMin:-64,CHMax:64,CHDelta:8,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},Child_m:{Indicator:"Child marriage",Theme:"Child Protection",Remark:"",Min:0,Max:76,Delta:4,CHMin:-25,CHMax:50,CHDelta:5,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},Lab_child:{Indicator:"Prevalence of child workers",Theme:"Child Protection",Remark:"Child age in Kenya is between 5-17. For child worker, census estimates were used to calculate the indicator, and one point in time only was available.",Min:0,Max:40,Delta:.05,CHMin:-20,CHMax:20,CHDelta:-.05,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"",R2:"Census",Y1:null,Y2:"2019"},Stillbirth:{Indicator:"Still birth rate",Theme:"Child Health",Remark:"For this indicator, estimates were produced only at the county level. All sub-counties within each county were assigned the same value as their respective county.",Min:0,Max:80,Delta:2,CHMin:-60,CHMax:60,CHDelta:2,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"County",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"},NMR:{Indicator:"Neonatal mortality rate",Theme:"Child Health",Remark:"Data for this indicator were sourced from the Institute for Health Metrics and Evaluation (IHME). Confidence intervals for this indicator were not available. Please see Technical Note 3 for more information.",Min:10,Max:40,Delta:2.5,CHMin:-3,CHMax:0,CHDelta:2.5,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"IHME",R2:"IHME",Y1:"2014",Y2:"2017"},U5:{Indicator:"Under five mortality rate",Theme:"Child Health",Remark:"Data for this indicator were sourced from the Institute for Health Metrics and Evaluation (IHME). Confidence intervals for this indicator were not available. Please see Technical Note 3 for more information.",Min:20,Max:100,Delta:1,CHMin:-10,CHMax:-2,CHDelta:1,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"IHME",R2:"IHME",Y1:"2014",Y2:"2017"},LBW:{Indicator:"Low birth weight",Theme:"Child Health",Remark:"For this indicator, estimates were produced only at the county level. All sub-counties within each county were assigned the same value as their respective county.",Min:0,Max:30,Delta:2.5,CHMin:-15,CHMax:15,CHDelta:2.5,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"DHS-7",R2:"DHS-8",Y1:"2014",Y2:"2022"}}},nigeria:{Name:"Nigeria",TLC:"NGA",Prefix:"NGA",Adm1:"State",Adm2:"Local Government Area",Center:[9.5,8],Zoom:[6],DistrictOnly:[],StateOnly:[""],NoR1:[],NoR2:[],indicators:{LBW:{Indicator:"Low birth weight",Theme:"Child Health",Remark:"",Min:0,Max:42.5,Delta:2.5,CHMin:-25,CHMax:25,CHDelta:2.5,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},Min_diet:{Indicator:"Minimum acceptable diet",Theme:"Nutrition",Remark:"",Min:0,Max:48,Delta:3,CHMin:-32,CHMax:24,CHDelta:4,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},Sever_wast:{Indicator:"Prevalence of severe wasting",Theme:"Nutrition",Remark:"",Min:0,Max:42.5,Delta:2.5,CHMin:-22.5,CHMax:25,CHDelta:2.5,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},Teen_Pregn:{Indicator:"Teenage pregnancies",Theme:"Reproductive Health",Remark:"",Min:0,Max:40,Delta:2.5,CHMin:-27.5,CHMax:17.5,CHDelta:2.5,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},U_Pregn:{Indicator:"Unwanted births",Theme:"Reproductive Health",Remark:"",Min:0,Max:40,Delta:2.5,CHMin:-27.5,CHMax:17.5,CHDelta:2.5,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},Anaemia:{Indicator:"Prevalence of anaemia ",Theme:"Reproductive Health",Remark:"",Min:15,Max:100,Delta:5,CHMin:-35,CHMax:45,CHDelta:5,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},ANC_4plus:{Indicator:"Antenatal care (4+ visits)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},ANC_blood:{Indicator:"Antenatal care (blood screening)",Theme:"Reproductive Health",Remark:"",Min:30,Max:100,Delta:5,CHMin:-15,CHMax:55,CHDelta:5,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},ANC_suppl:{Indicator:"Antenatal care (supplements)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},ANC_timing:{Indicator:"Antenatal care (timing)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-30,CHMax:70,CHDelta:5,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},ANC_urine:{Indicator:"Antenatal care (urine screening)",Theme:"Reproductive Health",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},Breastfeed:{Indicator:"Exclusive breastfeeding",Theme:"Nutrition",Remark:"",Min:20,Max:90,Delta:5,CHMin:-25,CHMax:75,CHDelta:5,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},C_Prev:{Indicator:"Modern contraceptive use",Theme:"Reproductive Health",Remark:"",Min:4,Max:72,Delta:4,CHMin:-20,CHMax:52,CHDelta:4,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},Child_m:{Indicator:"Child marriage",Theme:"Child Protection",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},Labour_fem:{Indicator:"Female labour force participation",Theme:"Livelihoods",Remark:"",Min:4,Max:84,Delta:4,CHMin:-24,CHMax:44,CHDelta:4,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},NAR_prim:{Indicator:"Net primary school attendace",Theme:"Education",Remark:"",Min:62,Max:98,Delta:2,CHMin:-80,CHMax:32,CHDelta:4,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},NAR_sec:{Indicator:"Net secondary school attendance rate",Theme:"Education",Remark:"",Min:28,Max:96,Delta:4,CHMin:-20,CHMax:32,CHDelta:4,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},Stunting:{Indicator:"Prevalence of stunting",Theme:"Nutrition",Remark:"",Min:0,Max:100,Delta:5,CHMin:-70,CHMax:70,CHDelta:10,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},Wash_sanit:{Indicator:"WASH coverage (sanitation)",Theme:"WASH",Remark:"",Min:0,Max:100,Delta:5,CHMin:-60,CHMax:90,CHDelta:10,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},Wash_water:{Indicator:"WASH coverage (water)",Theme:"WASH",Remark:"",Min:0,Max:100,Delta:5,CHMin:-80,CHMax:80,CHDelta:10,Precision:1,Palette1:"CIFF20_r",Palette2:"CIFF20_r",Resolution:"5 km",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},NMR:{Indicator:"Neonatal mortality rate",Theme:"Child Health",Remark:"For this indicator, district estimates only were produced. The indicators shown here are rare events, highlighting the necessity for cautious interpretation and utilization of findings, given the limited district-level sample sizes.",Min:0,Max:50,Delta:2.5,CHMin:-25,CHMax:25,CHDelta:2.5,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},Unsafe_Ab:{Indicator:"Unsafe abortions ",Theme:"Reproductive Health",Remark:"For this indicator, district estimates only were produced. The indicators shown here are rare events, highlighting the necessity for cautious interpretation and utilization of findings, given the limited district-level sample sizes.",Min:0,Max:60,Delta:3,CHMin:-30,CHMax:30,CHDelta:3,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},CHMR:{Indicator:"Child mortality rate",Theme:"Child Health",Remark:"For this indicator, district estimates only were produced. The indicators shown here are rare events, highlighting the necessity for cautious interpretation and utilization of findings, given the limited district-level sample sizes.",Min:0,Max:20,Delta:1,CHMin:-10,CHMax:10,CHDelta:1,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"},Lab_child:{Indicator:"Prevalence of child workers",Theme:"Child Protection",Remark:"For child worker, census estimates were used to calculate the indicator, and only had one point in time was available.",Min:0,Max:10,Delta:.05,CHMin:-5,CHMax:5,CHDelta:-.05,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"Census",R2:"No data",Y1:"2011",Y2:null},Stillbirth:{Indicator:"Still birth rate",Theme:"Child Health",Remark:"For this indicator, district estimates only were produced. The indicators shown here are rare events, highlighting the necessity for cautious interpretation and utilization of findings, given the limited district-level sample sizes.",Min:2,Max:40,Delta:2,CHMin:-20,CHMax:20,CHDelta:2,Precision:1,Palette1:"CIFF20",Palette2:"CIFF20",Resolution:"District",R1:"NFHS-4",R2:"NFHS-5",Y1:"2014",Y2:"2022"}}}},rc={LBW:{Indicator:"Low birth weight",Theme:"Child health",Definition:"Percentage (%) of live births in the 5 years preceding the survey weighed at birth reported as less than 2.5 kg",Unit:"per cent",Denominator:"live births in the five (or three) years preceding the survey with a reported birth weight",Statement:"of live births weighed less than 2.5 kg at birth",Proportional:!1},Min_diet:{Indicator:"Minimum acceptable diet",Theme:"Nutrition",Definition:"Percentage (%) of children aged 6 to 23 months who had at least minimum meal frequency and minimum diversified diet during the previous day",Unit:"per cent",Denominator:"children aged 6 to 23 months",Statement:"of children aged 6 to 23 months had at least minimum meal frequency and minimum diversified diet during the previous day",Proportional:!0},Sever_wast:{Indicator:"Prevalence of severe wasting",Theme:"Nutrition",Definition:"Percentage (%) of children wasted (below -3 SD of weight for height according to the WHOs standard)",Unit:"per cent",Denominator:"children under age five",Statement:"of children under age five were wasted",Proportional:!1},Teen_Pregn:{Indicator:"Teenage pregnancies",Theme:"Reproductive Health",Definition:"Percentage (%) of women 15 to 19 years old who had given birth or were pregnant with their first child over the full sample of women aged 15 to 49",Unit:"per cent",Denominator:"women aged 15 to 49",Statement:"of women aged 15 to 19 years old (over the full sample of women aged 15 to 49) had given birth or were pregnant with their first child",Proportional:!1},U_Pregn:{Indicator:"Unwanted births",Theme:"Reproductive Health",Definition:"Percentage (%) of births that were either wanted earlier or later than occurred (mistimed) or not wanted at all",Unit:"per cent",Denominator:"",Statement:"of births were either wanted earlier or later than occurred (mistimed) or not wanted at all",Proportional:!1},Anaemia:{Indicator:"Prevalence of anaemia ",Theme:"Reproductive Health",Definition:"Percentage of women age 15 to 49 with mild, moderate or severe anaemia or with any anaemia",Unit:"per cent",Denominator:"women interviewed (check with DHS if it's all women 15 ot 49 or a subsample of women who were asked about anaemia",Statement:"of women age 15 to 49 had mild, moderate or severe anaemia",Proportional:!1},ANC_4plus:{Indicator:"Antenatal care (4+ visits)",Theme:"Reproductive Health",Definition:"Percentage (%) of women with a birth in the last 5 years, who had at least 4 antenatal care visits for most recent birth",Unit:"per cent",Denominator:"women who had a live birth in the five (or three) years preceding the survey",Statement:"of women with a birth in the last 5 years had at least 4 antenatal care visits for most recent birth",Proportional:!0},ANC_blood:{Indicator:"Antenatal care (blood screening)",Theme:"Reproductive Health",Definition:"Percentage (%) of women with a live birth in the five years preceding the survey who received antenatal care (ANC) for the most recent birth with blood sample taken.",Unit:"per cent",Denominator:"women who had a live birth in the five (or three) years preceding the survey and received ANC",Statement:"of women with a live birth in the last five years received antenatal care (ANC) for the most recent birth with blood sample taken",Proportional:!0},ANC_suppl:{Indicator:"Antenatal care (supplements)",Theme:"Reproductive Health",Definition:"Among women who received antenatal care for their most recent live birth in the past 5 years, the percentage (%) that received supplements (IFA, MMS).",Unit:"per cent",Denominator:"women who had a live birth in the five (or three) years preceding the survey",Statement:"of women received antenatal care and supplements (IFA, MMS) for their most recent live birth in the past 5 years",Proportional:!0},ANC_timing:{Indicator:"Antenatal care (timing)",Theme:"Reproductive Health",Definition:"Percentage (%) of women who had a live birth in the five years preceding the survey whose first antenatal care visit was at less than 4 months ",Unit:"per cent",Denominator:"",Statement:"of women had the first antenatal care visit at less than 4 months during their pregnancies",Proportional:!0},ANC_urine:{Indicator:"Antenatal care (urine screening)",Theme:"Reproductive Health",Definition:"Percentage (%) of women with a live birth in the five years preceding the survey who received antenatal care (ANC) for the most recent birth with urine sample taken.",Unit:"per cent",Denominator:"women who had a live birth in the five (or three) years preceding the survey and received ANC",Statement:"of women with a live birth in the last five years received antenatal care (ANC) for the most recent birth with urine sample taken",Proportional:!0},Breastfeed:{Indicator:"Exclusive breastfeeding",Theme:"Nutrition",Definition:"Percentage (%) of youngest children under 6 months who were living with their mother who were exclusively breastfed under 6 months of age",Unit:"per cent",Denominator:"children under age 6 months",Statement:"of youngest children under 6 months who were living with their mother who were exclusively breastfed under 6 months of age",Proportional:!0},C_Prev:{Indicator:"Modern contraceptive use",Theme:"Reproductive Health",Definition:"Percentage (%) of currently married or in union women currently using any modern method of contraception",Unit:"per cent",Denominator:"all women",Statement:"of married or in union women currently use any modern method of contraception",Proportional:!0},Child_m:{Indicator:"Child marriage",Theme:"Child Protection",Definition:"Percentage (%) of women aged 20 to 24 years who were married or in a union before age 18. ",Unit:"per cent",Denominator:"women aged 15 to 49",Statement:"of women aged 20 to 24 years were married or in union before age 18",Proportional:!1},Labour_fem:{Indicator:"Female labour force participation",Theme:"Livelihoods",Definition:"Percentage (%) of currently married or in union women employed in the 12 months preceding the survey. The indicator includes those who worked in the past year, those who were currently working and those who have a job but were on leave over the last 7 days.",Unit:"per cent",Denominator:"women currently in a union",Statement:"of currently married or in union women were employed",Proportional:!0},NAR_prim:{Indicator:"Net primary school attendance rate",Theme:"Education",Definition:"Percentage (%) of children of official primary school-age who were enrolled in primary education",Unit:"per cent",Denominator:"de facto household population of primary school age (this varies by Country)",Statement:"of children of official primary school age were enrolled in primary education",Proportional:!0},NAR_sec:{Indicator:"Net secondary school attendance rate",Theme:"Education",Definition:"Percentage (%) of children of official secondary school-age who were enrolled in secondary education",Unit:"per cent",Denominator:"de facto household population of secondary school age (this varies by Country)",Statement:"Percentage (%) of children of official secondary school-age who were enrolled in secondary education",Proportional:!0},Stunting:{Indicator:"Prevalence of stunting",Theme:"Nutrition",Definition:"Percentage (%) of children under age five years stunted (below  to 2SD of height-for-age according to the World Health Organisations (WHO) standard).",Unit:"per cent",Denominator:"children under age five",Statement:"of children under age five years were stunted",Proportional:!1},Wasting:{Indicator:"Prevalence of wasting",Theme:"Nutrition",Definition:"Percentage (%) of children wasted (below  to 2SD of weight-for-height according to the World Health Organisations (WHO) standard).",Unit:"per cent",Denominator:"children",Statement:"of children were wasted",Proportional:!1},Wash_sanit:{Indicator:"WASH coverage (sanitation)",Theme:"WASH",Definition:"Percentage (%) of the population with access to improved toilet facilities (Improved sanitation facilities include flush toilet, pit latrine (with at least a slab) or a composting toilet)",Unit:"per cent",Denominator:"household level",Statement:"of the population had access to improved toilet facilities",Proportional:!0},Wash_water:{Indicator:"WASH coverage (water)",Theme:"WASH",Definition:"Percentage (%) of the population with access to improved drinking water (Improved sources of drinking water include water piped into dwelling or yard/plot, to a neighbour, access to a public tap/standpipe, tube well or borehole, protected well, protected spring, rainwater, tanker truck, cart with small tank and bottled water)",Unit:"per cent",Denominator:"household level",Statement:"of the population had access to improved drinking water",Proportional:!0},NMR:{Indicator:"Neonatal mortality rate",Theme:"Child Health",Definition:"Probability (expressed per 1,000 live births) of a child dying before reaching the age of 1 month over a 5-year reference period",Unit:"per 1,000 live births",Denominator:"admin unit level",Statement:"were dying before reaching the age of 1 month over a 5-year reference period",Proportional:!1},Unsafe_Ab:{Indicator:"Unsafe abortions ",Theme:"Reproductive Health",Definition:"Percentage (%) of pregnancies terminated either by persons lacking the necessary skills or in an environment that does not conform to minimal medical standards or both ",Unit:"per cent",Denominator:"",Statement:"of pregnancies  were terminated either by persons lacking the necessary skills or in an environment that does not conform to minimal medical standards",Proportional:!1},U5:{Indicator:"Under five mortality rate",Theme:"Child Health",Definition:"Probability of death amongst children aged under 5 years",Unit:"per 1,000 live briths",Denominator:"admin unit level",Statement:"were dead before reaching the age of five years",Proportional:!1},CHMR:{Indicator:"Child mortality rate",Theme:"Child Health",Definition:"Probability (expressedper 1,000 children surviving their first birthday) of a child dying on or after their first birthday but before reaching the age of five years over a 5-year reference period.",Unit:"per 1,000 children surviving to their first birthday",Denominator:"admin unit level",Statement:"were dying on or after their first birthday but before reaching the age of five years",Proportional:!1},Lab_child:{Indicator:"Prevalence of child workers",Theme:"Child Protection",Definition:"Percentage (%) of children engaged in any form of work (both marginal and full-time) that may compromise their physical, mental, social or educational development. The official definition of child age may vary between countries.",Unit:"per cent",Denominator:"",Statement:"of children engaged in any form of work that may compromise their physical, mental, social or educational development",Proportional:!1},Stillbirth:{Indicator:"Still birth rate",Theme:"Child Health",Definition:"Number of pregnancies that lasted seven or more months and terminated in a foetal death in the five years preceding the survey per 1,000 births (stillbirths plus the number of live births in the five years preceding the survey)",Unit:"per 1,000 births",Denominator:"admin unit level",Statement:"were associated with pregnancies that lasted seven or more months and terminated in a foetal death",Proportional:!1},NTDs_helm:{Indicator:"NTDs: Soil-transmitted helminth infections",Theme:"Neglected Tropical Diseases",Definition:"Prevalence (%) of soil-transmitted helminth infection in the population",Unit:"per cent",Denominator:"admin unit level",Statement:"of the population got soil-transmitted helminth infection",Proportional:!1},NTDs_schi:{Indicator:"NTDs: Schistosomiasis",Theme:"Neglected Tropical Diseases",Definition:"Prevalence (%) of schistosomiasis infection in the population",Unit:"per cent",Denominator:"admin unit level",Statement:"of the population got schistosomiasis infection",Proportional:!1},NTDs_fil:{Indicator:"NTDs: Lymphatic filariasis infections",Theme:"Neglected Tropical Diseases",Definition:"Prevalence (%) of lymphatic filariasis infection in the population",Unit:"per cent",Denominator:"admin unit level",Statement:"of the population got lymphatic filariasis infection",Proportional:!1},NTDs_oncho:{Indicator:"NTDs: Onchocerciasis infections",Theme:"Neglected Tropical Diseases",Definition:"Prevalence (%) of onchocerciasis infection in the population",Unit:"per cent",Denominator:"admin unit level",Statement:"of the population got onchocerciasis infection",Proportional:!1}},o8=()=>({weight:1,opacity:.5,color:"black",fillOpacity:0}),qje=()=>({weight:3,opacity:1,color:"black",fillOpacity:0}),Vje=()=>({weight:.8,opacity:1,color:"#000000",fillOpacity:0}),a8={ciff_divergent:{0:"#E90051",1:"#ED2641",2:"#F24C31",3:"#F67120",4:"#FB9710",5:"#FFBD00",6:"#F5C029",7:"#ECC352",8:"#E2C67A",9:"#D9C9A3",10:"#CFCCCC",11:"#AAC2C6",12:"#86B9BF",13:"#61AFB9",14:"#3DA6B2",15:"#189CAC",16:"#2B8BAC",17:"#3E7AAC",18:"#5068AD",19:"#6357AD"},CIFF20:{0:"#73B2FF",1:"#738FE5",2:"#746DCB",3:"#754BB1",4:"#5D5CAC",5:"#3F77AC",6:"#2192AC",7:"#48B0AF",8:"#91D0B5",9:"#DAEFBB",10:"#FFF4A0",11:"#FFDF64",12:"#FFCA28",13:"#FCA908",14:"#F56D22",15:"#EE313B",16:"#EA0956",17:"#F14178",18:"#F87A99",19:"#FFB3BB"},CIFF20_r:{0:"#FFB3BB",1:"#F87A99",2:"#F14178",3:"#EA0956",4:"#EE313B",5:"#F56D22",6:"#FCA908",7:"#FFCA28",8:"#FFDF64",9:"#FFF4A0",10:"#DAEFBB",11:"#91D0B5",12:"#48B0AF",13:"#2192AC",14:"#3F77AC",15:"#5D5CAC",16:"#754BB1",17:"#746DCB",18:"#738FE5",19:"#73B2FF"}};let cne=[];Object.keys(rc).forEach(e=>{rc[e].Proportional&&cne.push(e)});const eF=cne,e0={"Show Improvement":{posA:{label:"any (>0%)",limit:0},posB:{label:"likely (>95%)",limit:95},posC:{label:"highly likely (>99%)",limit:99}},"Show Worsening":{negA:{label:"any (>0%)",limit:0},negB:{label:"likely (>95%)",limit:95},negC:{label:"highly likely (>99%)",limit:99}}},Yje={$schema:"https://vega.github.io/schema/vega/v5.json",background:"white",padding:5,title:{text:"An increase in the indicator below means improvement",anchor:"start"},data:[{name:"input_data",values:[]},{name:"data_0",source:"input_data",transform:[{type:"filter",expr:"(datum.Proportional === true)"},{type:"filter",expr:'isValid(datum["Mean"]) && isFinite(+datum["Mean"])'}]},{name:"row_domain",source:"data_0",transform:[{type:"aggregate",groupby:["Indicator"]}]}],signals:[{name:"child_width",value:200},{name:"child_height",value:15}],layout:{padding:{row:2,column:20},columns:1,bounds:"full",align:"all"},marks:[{name:"row_header",type:"group",role:"row-header",from:{data:"row_domain"},sort:{field:'datum["Indicator"]',order:"ascending"},title:{text:{signal:'isValid(parent["Indicator"]) ? parent["Indicator"] : ""+parent["Indicator"]'},orient:"left",style:"guide-label",frame:"group",baseline:"middle",align:"left",anchor:"middle",angle:0,offset:10},encode:{update:{height:{signal:"child_height"}}},axes:[{scale:"y",orient:"left",grid:!1,labels:!1,zindex:0}]},{name:"column_footer",type:"group",role:"column-footer",encode:{update:{width:{signal:"child_width"}}},axes:[{scale:"x",orient:"bottom",grid:!1,labelFlush:!0,labelOverlap:!0,tickCount:{signal:"ceil(child_width/40)"},zindex:0}]},{name:"cell",type:"group",style:"cell",from:{facet:{name:"facet",data:"data_0",groupby:["Indicator"]}},sort:{field:['datum["Indicator"]'],order:["ascending"]},encode:{update:{width:{signal:"child_width"},height:{signal:"child_height"}}},marks:[{name:"child_marks",type:"rect",style:["bar"],from:{data:"facet"},encode:{update:{fill:{scale:"color",field:"Round"},tooltip:{signal:'{"Round": isValid(datum["Round"]) ? datum["Round"] : ""+datum["Round"], "Mean": format(datum["Mean"], ".1f"), "Std": format(datum["Std"], ".1f")}'},ariaRoleDescription:{value:"bar"},description:{signal:'"Round: " + (isValid(datum["Round"]) ? datum["Round"] : ""+datum["Round"]) + "; Mean: " + (format(datum["Mean"], ".1f")) + "; Std: " + (format(datum["Std"], ".1f"))'},x:[{test:'!isValid(datum["Mean"]) || !isFinite(+datum["Mean"])',value:0},{scale:"x",field:"Mean"}],x2:{value:0},y:{scale:"y",field:"Round"},height:{scale:"y",band:1}}}}],axes:[{scale:"x",orient:"bottom",gridScale:"y",grid:!0,tickCount:{signal:"ceil(child_width/40)"},domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:0}]}],scales:[{name:"x",type:"linear",domain:{data:"data_0",field:"Mean"},range:[0,{signal:"child_width"}],zero:!1,nice:!0},{name:"y",type:"band",domain:{data:"data_0",field:"Round",sort:!0},range:[0,{signal:"child_height"}],paddingInner:.1,paddingOuter:.05},{name:"color",type:"ordinal",domain:{data:"data_0",field:"Round",sort:!0},range:["#2b2b2b","#e90051"]}],legends:[{orient:"top",columns:2,fill:"color",symbolType:"square",title:""}]},Zje={$schema:"https://vega.github.io/schema/vega/v5.json",background:"white",padding:5,width:200,height:275,data:[{name:"input_data",values:[]},{name:"data_0",source:"input_data",transform:[{type:"formula",expr:"datum.ANC_4plus_R1L",as:"R1L"},{type:"formula",expr:"datum.ANC_4plus_R1",as:"R1"},{type:"formula",expr:"datum.ANC_4plus_R1U",as:"R1U"},{type:"formula",expr:"datum.ANC_4plus_R2L",as:"R2L"},{type:"formula",expr:"datum.ANC_4plus_R2",as:"R2"},{type:"formula",expr:"datum.ANC_4plus_R2U",as:"R2U"},{type:"formula",expr:"datum.R1",as:"sorter"},{type:"fold",fields:["R1","R2"],as:["Round","Avg"]}]},{name:"data_2",source:"data_0",transform:[{type:"filter",expr:'isValid(datum["Avg"]) && isFinite(+datum["Avg"])'}]},{name:"data_3",source:"data_0",transform:[{type:"filter",expr:'isValid(datum["R1"]) && isFinite(+datum["R1"])'}]},{name:"data_4",source:"data_0",transform:[{type:"filter",expr:'isValid(datum["R2"]) && isFinite(+datum["R2"])'}]},{name:"data_5",source:"data_0",transform:[{type:"filter",expr:'isValid(datum["Avg"]) && isFinite(+datum["Avg"])'}]}],marks:[{name:"layer_0_marks",type:"rect",style:["tick"],from:{data:"data_2"},encode:{update:{opacity:{value:.7},fill:{value:"#ffffff"},ariaRoleDescription:{value:"tick"},description:{signal:'"Avg: " + (format(datum["Avg"], "")) + "; district: " + (isValid(datum["district"]) ? datum["district"] : ""+datum["district"])'},xc:{scale:"x",field:"Avg"},yc:{scale:"y",field:"district",band:.5},height:{value:4},width:{value:1}}}},{name:"layer_1_marks",type:"rect",style:["rect"],from:{data:"data_3"},encode:{update:{fill:{value:{gradient:"linear",stops:[{color:"#8d8d8d",offset:0},{color:"#ffffff",offset:1}],x1:1,x2:0}},tooltip:{signal:'{"district": isValid(datum["district"]) ? datum["district"] : ""+datum["district"], "R1": format(datum["R1"], ".1f"), "R2": format(datum["R2"], ".1f")}'},description:{signal:'"R1: " + (format(datum["R1"], "")) + "; district: " + (isValid(datum["district"]) ? datum["district"] : ""+datum["district"]) + "; R1L: " + (format(datum["R1L"], "")) + "; R2: " + (format(datum["R2"], ".1f"))'},x:{scale:"x",field:"R1"},x2:{scale:"x",field:"R1L"},yc:{scale:"y",field:"district",offset:-5,band:.5},height:{value:6}}}},{name:"layer_2_marks",type:"rect",style:["rect"],from:{data:"data_3"},encode:{update:{fill:{value:{gradient:"linear",stops:[{color:"#8d8d8d",offset:0},{color:"#ffffff",offset:1}],x1:0,x2:1}},tooltip:{signal:'{"district": isValid(datum["district"]) ? datum["district"] : ""+datum["district"], "R1": format(datum["R1"], ".1f"), "R2": format(datum["R2"], ".1f")}'},description:{signal:'"R1: " + (format(datum["R1"], "")) + "; district: " + (isValid(datum["district"]) ? datum["district"] : ""+datum["district"]) + "; R1U: " + (format(datum["R1U"], "")) + "; R2: " + (format(datum["R2"], ".1f"))'},x:{scale:"x",field:"R1"},x2:{scale:"x",field:"R1U"},yc:{scale:"y",field:"district",offset:-5,band:.5},height:{value:6}}}},{name:"layer_3_marks",type:"rect",style:["rect"],from:{data:"data_4"},encode:{update:{fill:{value:{gradient:"linear",stops:[{color:"#e9546e",offset:0},{color:"#ffffff",offset:1}],x1:1,x2:0}},tooltip:{signal:'{"district": isValid(datum["district"]) ? datum["district"] : ""+datum["district"], "R1": format(datum["R1"], ".1f"), "R2": format(datum["R2"], ".1f")}'},description:{signal:'"R2: " + (format(datum["R2"], "")) + "; district: " + (isValid(datum["district"]) ? datum["district"] : ""+datum["district"]) + "; R2L: " + (format(datum["R2L"], "")) + "; R1: " + (format(datum["R1"], ".1f"))'},x:{scale:"x",field:"R2"},x2:{scale:"x",field:"R2L"},yc:{scale:"y",field:"district",offset:5,band:.5},height:{value:6}}}},{name:"layer_4_marks",type:"rect",style:["rect"],from:{data:"data_4"},encode:{update:{fill:{value:{gradient:"linear",stops:[{color:"#e9546e",offset:0},{color:"#ffffff",offset:1}],x1:0,x2:1}},tooltip:{signal:'{"district": isValid(datum["district"]) ? datum["district"] : ""+datum["district"], "R1": format(datum["R1"], ".1f"), "R2": format(datum["R2"], ".1f")}'},description:{signal:'"R2: " + (format(datum["R2"], "")) + "; district: " + (isValid(datum["district"]) ? datum["district"] : ""+datum["district"]) + "; R2U: " + (format(datum["R2U"], "")) + "; R1: " + (format(datum["R1"], ".1f"))'},x:{scale:"x",field:"R2"},x2:{scale:"x",field:"R2U"},yc:{scale:"y",field:"district",offset:5,band:.5},height:{value:6}}}},{name:"layer_5_marks",type:"rect",style:["tick"],from:{data:"data_5"},encode:{update:{opacity:{value:.7},fill:{scale:"color",field:"Round"},ariaRoleDescription:{value:"tick"},description:{signal:'"Avg: " + (format(datum["Avg"], "")) + "; district: " + (isValid(datum["district"]) ? datum["district"] : ""+datum["district"]) + "; Round: " + (isValid(datum["Round"]) ? datum["Round"] : ""+datum["Round"])'},xc:{scale:"x",field:"Avg"},yc:{scale:"y",field:"district",offset:{scale:"yOffset",field:"Round"}},height:{value:8},width:{value:3}}}}],scales:[{name:"x",type:"linear",domain:{fields:[{data:"data_2",field:"Avg"},{data:"data_3",field:"R1"},{data:"data_3",field:"R1L"},{data:"data_3",field:"R1U"},{data:"data_4",field:"R2"},{data:"data_4",field:"R2L"},{data:"data_4",field:"R2U"},{data:"data_5",field:"Avg"}]},range:[0,{signal:"width"}],zero:!1,nice:!0},{name:"y",type:"band",domain:{data:"data_0",field:"district",sort:{op:"min",field:"sorter",order:"descending"}},range:[0,{signal:"height"}],paddingInner:0,paddingOuter:0},{name:"yOffset",type:"point",domain:{data:"data_5",field:"Round",sort:!0},range:[0,{signal:"bandwidth('y')"}],paddingOuter:.5},{name:"color",type:"ordinal",domain:{data:"data_5",field:"Round",sort:!0},range:["black","red"]}],axes:[{scale:"x",orient:"bottom",gridScale:"y",grid:!0,tickCount:{signal:"ceil(width/40)"},domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:0},{scale:"x",orient:"bottom",grid:!1,labelFlush:!0,labelOverlap:!0,tickCount:{signal:"ceil(width/40)"},zindex:0},{scale:"y",orient:"left",grid:!0,zindex:0}],legends:[{columns:2,orient:"top",fill:"color",direction:"horizontal",symbolType:"square",encode:{symbols:{update:{opacity:{value:.7}}}}}]},Xje={$schema:"https://vega.github.io/schema/vega/v5.json",background:"white",padding:5,width:250,title:{text:"A decrease in the indicator below means improvement",fontSize:12,subtitle:" ",frame:"group"},data:[{name:"data-input",values:[]},{name:"data_0",source:"data-input",transform:[{type:"fold",fields:["R1","R2"],as:["key","value"]},{type:"filter",expr:"(datum.Proportional === true)"}]},{name:"data_2",source:"data_0",transform:[{type:"filter",expr:'isValid(datum["value"]) && isFinite(+datum["value"])'}]},{name:"data_3",source:"data_0",transform:[{type:"filter",expr:'isValid(datum["R1"]) && isFinite(+datum["R1"])'}]},{name:"data_4",source:"data_0",transform:[{type:"filter",expr:'isValid(datum["R1"]) && isFinite(+datum["R1"])'}]},{name:"data_5",source:"data_0",transform:[{type:"filter",expr:'isValid(datum["R2"]) && isFinite(+datum["R2"])'}]},{name:"data_6",source:"data_0",transform:[{type:"filter",expr:'isValid(datum["R2"]) && isFinite(+datum["R2"])'}]}],signals:[{name:"y_step",value:20},{name:"height",update:"bandspace(domain('y').length, 0, 0) * y_step"}],marks:[{name:"layer_0_marks",type:"symbol",style:["square"],from:{data:"data_2"},encode:{update:{opacity:{value:.7},size:{value:1},fill:{scale:"color",field:"key"},x:[{test:'!isValid(datum["value"]) || !isFinite(+datum["value"])',value:0},{scale:"x",field:"value"}],y:{scale:"y",field:"Indicator",band:.5},shape:{value:"square"}}}},{name:"layer_1_marks",type:"rect",style:["rect"],from:{data:"data_3"},encode:{update:{height:{value:6},fill:{value:{gradient:"linear",stops:[{color:"#8d8d8d",offset:0},{color:"#ffffff",offset:1}],x1:1,x2:0}},tooltip:{signal:`{"Indicator": ''+datum["Indicator"], "R1": format(datum["R1"], ".2f")}`},x:[{test:'!isValid(datum["R1"]) || !isFinite(+datum["R1"])',value:0},{scale:"x",field:"R1"}],x2:[{test:'!isValid(datum["R1L"]) || !isFinite(+datum["R1L"])',value:0},{scale:"x",field:"R1L"}],yc:{scale:"y",field:"Indicator",offset:-3,band:.5}}}},{name:"layer_2_marks",type:"rect",style:["rect"],from:{data:"data_3"},encode:{update:{height:{value:6},fill:{value:{gradient:"linear",stops:[{color:"#8d8d8d",offset:0},{color:"#ffffff",offset:1}],x1:0,x2:1}},tooltip:{signal:`{"Indicator": ''+datum["Indicator"], "R1": format(datum["R1"], ".2f")}`},x:[{test:'!isValid(datum["R1"]) || !isFinite(+datum["R1"])',value:0},{scale:"x",field:"R1"}],x2:[{test:'!isValid(datum["R1U"]) || !isFinite(+datum["R1U"])',value:0},{scale:"x",field:"R1U"}],yc:{scale:"y",field:"Indicator",offset:-3,band:.5}}}},{name:"layer_3_marks",type:"rect",style:["tick"],from:{data:"data_4"},encode:{update:{opacity:{value:.7},height:{value:6},fill:{value:"#000000"},xc:[{test:'!isValid(datum["R1"]) || !isFinite(+datum["R1"])',value:0},{scale:"x",field:"R1"}],yc:{scale:"y",field:"Indicator",offset:-3,band:.5},width:{value:3}}}},{name:"layer_4_marks",type:"rect",style:["rect"],from:{data:"data_5"},encode:{update:{height:{value:6},fill:{value:{gradient:"linear",stops:[{color:"#e9546e",offset:0},{color:"#ffffff",offset:1}],x1:1,x2:0}},tooltip:{signal:`{"Indicator": ''+datum["Indicator"], "R2": format(datum["R2"], ".2f")}`},x:[{test:'!isValid(datum["R2"]) || !isFinite(+datum["R2"])',value:0},{scale:"x",field:"R2"}],x2:[{test:'!isValid(datum["R2L"]) || !isFinite(+datum["R2L"])',value:0},{scale:"x",field:"R2L"}],yc:{scale:"y",field:"Indicator",offset:3,band:.5}}}},{name:"layer_5_marks",type:"rect",style:["rect"],from:{data:"data_5"},encode:{update:{height:{value:6},fill:{value:{gradient:"linear",stops:[{color:"#e9546e",offset:0},{color:"#ffffff",offset:1}],x1:0,x2:1}},tooltip:{signal:`{"Indicator": ''+datum["Indicator"], "R2": format(datum["R2"], ".2f")}`},x:[{test:'!isValid(datum["R2"]) || !isFinite(+datum["R2"])',value:0},{scale:"x",field:"R2"}],x2:[{test:'!isValid(datum["R2U"]) || !isFinite(+datum["R2U"])',value:0},{scale:"x",field:"R2U"}],yc:{scale:"y",field:"Indicator",offset:3,band:.5}}}},{name:"layer_6_marks",type:"rect",style:["tick"],from:{data:"data_6"},encode:{update:{opacity:{value:.7},height:{value:6},fill:{value:"#ff0000"},xc:[{test:'!isValid(datum["R2"]) || !isFinite(+datum["R2"])',value:0},{scale:"x",field:"R2"}],yc:{scale:"y",field:"Indicator",offset:3,band:.5},width:{value:3}}}}],scales:[{name:"x",type:"linear",domain:{fields:[{data:"data_2",field:"value"},{data:"data_3",field:"R1"},{data:"data_3",field:"R1L"},{data:"data_3",field:"R1U"},{data:"data_4",field:"R1"},{data:"data_5",field:"R2"},{data:"data_5",field:"R2L"},{data:"data_5",field:"R2U"},{data:"data_6",field:"R2"}]},range:[0,{signal:"width"}],zero:!1,nice:!0},{name:"y",type:"band",domain:{fields:[{data:"data_0",field:"Indicator"},{data:"data_4",field:"Indicator"},{data:"data_6",field:"Indicator"}],sort:!0},range:{step:{signal:"y_step"}},paddingInner:0,paddingOuter:0},{name:"color",type:"ordinal",domain:{data:"data_2",field:"key",sort:!0},range:["black","red"]}],axes:[{scale:"x",orient:"bottom",gridScale:"y",grid:!0,tickCount:{signal:"ceil(width/40)"},domain:!1,labels:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:0},{scale:"y",orient:"left",gridScale:"x",grid:!0,domain:!1,labels:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:0},{scale:"x",orient:"bottom",grid:!1,labelFlush:!0,labelOverlap:!0,tickCount:{signal:"ceil(width/40)"},zindex:0},{scale:"y",orient:"left",grid:!1,zindex:0}],legends:[{columns:2,orient:"top",fill:"color",direction:"horizontal",symbolType:"square",encode:{symbols:{update:{opacity:{value:.7}}}}}],config:{axis:{grid:!0}}},fne={StateAggregate:Yje,DistrictRanges:Zje,AllInRanges:Xje};function Kje(e){return e.reduce((t,n)=>t+n)/e.length}function s8({input:e,proportional:t}){let n=JSON.parse(JSON.stringify(fne.AllInRanges));return n.data[0].values=e,n.width=Math.max(200,100*Math.floor(window.innerWidth/500)),t?(n.title.text="Higher value means improvement",n.data[1].transform[1].expr="(datum.Proportional === true)"):(n.title.text="Lower value means improvement",n.data[1].transform[1].expr="(datum.Proportional === false)"),v.jsx(ZD,{spec:n,actions:!1})}function Jje(e,t){let n=[];return t.forEach(i=>{n.push({State:e.state,District:e.district,R1L:e[i+"_R1L"],R1U:e[i+"_R1U"],R1:e[i+"_R1"],R2L:e[i+"_R2L"],R2U:e[i+"_R2U"],R2:e[i+"_R2"],Indicator:rc[i].Indicator,Abbreviation:i,Proportional:rc[i].Proportional})}),n}function Qje({obj:e,indicators:t}){const[n,i]=F.useState(!1);function r(){i(!0)}function o(){i(!1)}const a=Jje(e.original,t);return v.jsxs("div",{className:"text-center m-0 p-0 mb-2",children:[v.jsx("i",{className:"mx-1 pi pi-arrow-circle-right",title:"Show all indicator comparison",onClick:r}),v.jsxs(Ri,{show:n,onHide:o,size:"lg",children:[v.jsx(Ri.Header,{closeButton:!0,children:v.jsx("h4",{children:"All Indicator Comparison"})}),v.jsx(Ri.Body,{children:v.jsxs("div",{children:[v.jsxs("div",{className:"p-0 m-0 mb-2",children:["The charts below summarise the average values of all indicators in ",v.jsxs("b",{children:[e.original.district,", ",e.original.state]}),"."]}),v.jsx("hr",{}),v.jsxs("div",{className:"row",children:[v.jsx("div",{className:"d-flex justify-content-center",children:v.jsx(s8,{input:a,proportional:!0})}),v.jsx("div",{className:"d-flex justify-content-center",children:v.jsx(s8,{input:a,proportional:!1})})]})]})})]})]})}function l8({columns:e,data:t,palette:n,indicators:i}){if(t.length===0)return v.jsx("kbd",{children:"No data displayed. Modify the filter."});{const{getTableProps:r,getTableBodyProps:o,headerGroups:a,rows:s,prepareRow:l}=E3.useTable({columns:e,data:t},E3.useSortBy);return v.jsx("div",{style:{fontSize:"small"},children:v.jsxs($u,{bordered:!0,hover:!0,size:"sm",children:[v.jsx("thead",{children:a.map((u,c)=>v.jsxs("tr",{children:[v.jsx("td",{}),u.headers.map((d,h)=>v.jsxs("th",{...d.getHeaderProps(d.getSortByToggleProps()),children:[d.render("Header"),d.disableSortBy?v.jsx(v.Fragment,{}):v.jsx("span",{children:d.isSorted?d.isSortedDesc?" ":" ":" "})]},h))]},c))}),v.jsx("tbody",{children:s.map((u,c)=>(l(u),v.jsxs("tr",{children:[v.jsx("td",{children:v.jsx(Qje,{obj:u,indicators:i})}),u.cells.map((d,h)=>{let m={};if(n[d.column.Header]){const g=lne(d.value,n[d.column.Header].Minmax,n[d.column.Header].Palette);m.backgroundColor=g,m.fontWeight="bold",m.textAlign=d.column.align}else m.textAlign=d.column.align;return v.jsx("td",{style:m,children:d.render("Cell")},h)})]},c)))})]})})}}function u8({input:e,field:t}){if(e.length===0)return v.jsx("div",{children:v.jsx("kbd",{children:"No data displayed. Modify the filter."})});{const[n,i]=F.useState("SortbyName"),[r,o]=F.useState("ascending"),a=[t+"_R1",t+"_R2",t+"_CH"],s={SortbyName:"district",SortbyR1:a[0],SortbyR2:a[1],SortbyChange:a[2]};let l=JSON.parse(JSON.stringify(fne.DistrictRanges));return l.height=25*e.length,l.width=Math.max(300,100*Math.floor(window.innerWidth/500)),l.data[0].values=e,l.data[1].transform[0].expr="datum."+t+"_R1L",l.data[1].transform[1].expr="datum."+t+"_R1",l.data[1].transform[2].expr="datum."+t+"_R1U",l.data[1].transform[3].expr="datum."+t+"_R2L",l.data[1].transform[4].expr="datum."+t+"_R2",l.data[1].transform[5].expr="datum."+t+"_R2U",l.data[1].transform[6].expr="datum."+s[n],l.scales[1].domain.sort.order=r,v.jsxs("div",{className:"row",children:[v.jsxs("div",{className:"p-0 mb-2",children:[v.jsx("div",{className:"float-start",style:{width:"180px"},children:v.jsx(Pje,{items:["Sort by Name","Sort by R1","Sort by R2","Sort by Change"],defaultOpt:"SortbyName",noDefault:!0,name:"sortChart",value:n,pass:i})}),v.jsx("div",{className:"float-start m-2",children:v.jsx("button",{className:"map-btn",title:"reverse sort",onClick:()=>{o(r==="ascending"?"descending":"ascending")},children:r==="ascending"?" ":" "})})]}),v.jsx("div",{style:{maxHeight:"560px",overflowY:"auto"},children:v.jsx(ZD,{spec:l,actions:!1})})]})}}function eze({param:e,data:t,filterFunc:n}){const r=t.length===0?"":t[0].state,o=String(e.config.Adm1).toLowerCase(),a=String(e.config.Adm2).toLowerCase(),s=a.slice(-1)==="y"?a.slice(0,-1)+"ies":a+"s",l=e.config.indicators[e.indicator],u=Object.keys(e.config.indicators),c=rc[e.indicator],d=["R1","R2","CH"];let h={};d.forEach(z=>{h[z]={};const X=[l.Min,l.Max];z==="CH"?(h[z].Palette=l.Palette2,h[z].Minmax=[.5*(X[0]-X[1]),.5*(X[1]-X[0])]):(h[z].Palette=l.Palette1,h[z].Minmax=X)});function m({value:z}){return z?parseFloat(z).toFixed(l.Precision):"-"}const g=[{Header:`${e.config.Adm2} Name`,accessor:"district",align:"left"},{Header:"R1",accessor:`${e.indicator}_R1`,Cell:m,sortType:"basic",align:"center"},{Header:"CI_R1",accessor:`${e.indicator}_R1CI`,disableSortBy:!0,align:"center"},{Header:"R2",accessor:`${e.indicator}_R2`,Cell:m,sortType:"basic",align:"center"},{Header:"CI_R2",accessor:`${e.indicator}_R2CI`,disableSortBy:!0,align:"center"},{Header:"CH",accessor:`${e.indicator}_CH`,Cell:m,sortType:"basic",align:"center"},{Header:"CI_CH",accessor:`${e.indicator}_CHCI`,disableSortBy:!0,align:"center"}],y=t.filter(n),x=F.useMemo(()=>v.jsx(u8,{input:y,field:e.indicator}),[y]),b=F.useMemo(()=>["_R1","_R2","_CH"].map(z=>{let X={};function W(K){return K[e.indicator+z]!=null}const U=t.filter(W),B=U.map(K=>K[e.indicator+z]),V=U.map(K=>K.district);if(B.length>0){const K=Fje(B),H=sne(B);X.avg=jh(Kje(B),l.Precision),eF.includes(e.indicator)?(X.best=V[K],X.worst=V[H],X.bestVal=jh(B[K],l.Precision),X.worstVal=jh(B[H],l.Precision)):(X.best=V[H],X.worst=V[K],X.bestVal=jh(B[H],l.Precision),X.worstVal=jh(B[K],l.Precision))}else X.avg="-",X.best="-",X.worst="-",X.bestVal="-",X.worstVal="-";return X}),[t,e]),w=b[0].avg==="-"&&b[1].avg==="-";let S="";l.R1!==""?(S+=`approximately ${b[0].avg} ${c.Unit} ${c.Statement} in round 1 (${l.R1}, ${l.Y1}).`,l.R2!==""&&(S+=` In round 2 (${l.R2}, ${l.Y2}), the figure was ${b[1].avg} ${c.Unit}.`)):S+=`approximately ${b[1].avg} ${c.Unit} ${c.Statement} in round 2 (${l.R2}, ${l.Y2}).`;const k=v.jsxs(v.Fragment,{children:["The ",a," of ",v.jsx("b",{children:b[2].best})," experienced the highest ",eF.includes(e.indicator)?"increase":"decrease (lowest increase)"," of ",l.Indicator," with a ",b[2].bestVal," ",l.Unit," change from round 1 (",l.R1,", ",l.Y1,") to round 2 (",l.R2,", ",l.Y2,"), showing an improvement in conditions."]}),R=v.jsxs("div",{children:[v.jsx("div",{className:"row p-2",children:v.jsxs($u,{striped:!0,bordered:!0,size:"sm",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("td",{children:v.jsx(XD,{about:"How to read table"})}),v.jsx("td",{children:"Round 1"}),v.jsx("td",{children:"Round 2"}),v.jsx("td",{children:"Change"})]})}),v.jsxs("tbody",{children:[v.jsxs("tr",{children:[v.jsxs("td",{children:[e.config.Adm1," Level Average"]}),v.jsx("td",{children:b[0].avg}),v.jsx("td",{children:b[1].avg}),v.jsx("td",{children:b[2].avg})]}),v.jsxs("tr",{children:[v.jsx("td",{children:"Highest Performing"}),v.jsx("td",{children:b[0].best}),v.jsx("td",{children:b[1].best}),v.jsx("td",{children:b[2].best})]}),v.jsxs("tr",{children:[v.jsx("td",{children:"Least Performing"}),v.jsx("td",{children:b[0].worst}),v.jsx("td",{children:b[1].worst}),v.jsx("td",{children:b[2].worst})]})]})]})}),v.jsxs("p",{children:["In the ",o," of ",v.jsx("b",{children:r}),", ",S]}),v.jsx("p",{children:b[2].best==="-"?"":k})]}),M=v.jsxs("div",{className:"row p-0",children:[v.jsxs("p",{children:["The chart below summarises the indicator values aggregated at ",a," level. If available, the credible intervals ",v.jsx("b",{children:"(CIs)"})," with 95% significance for round 1 ",v.jsx("b",{children:"(R1)"})," and round 2 ",v.jsx("b",{children:"(R2)"})," are represented as washout rectangles around the mean values."]}),v.jsxs("p",{style:{fontSize:"80%"},children:["The data can be sorted by name, round 1 ",v.jsx("b",{children:"(R1)"})," values, round 2 ",v.jsx("b",{children:"(R2)"})," values and change ",v.jsx("b",{children:"(CH)"})," values by clicking on each heading."]}),v.jsx("hr",{}),x]}),T=v.jsxs("div",{className:"p-0 m-0",children:[v.jsxs("p",{children:["The table below summarises the indicator values aggregated at ",a," level. If available, the credible intervals ",v.jsx("b",{children:"(CIs)"})," with 95% significance for round 1 ",v.jsx("b",{children:"(R1)"})," and round 2 ",v.jsx("b",{children:"(R2)"})," can be found in brackets."]}),v.jsxs("p",{style:{fontSize:"80%"},children:["The data can be sorted by name, round 1 ",v.jsx("b",{children:"(R1)"})," values, round 2 ",v.jsx("b",{children:"(R2)"})," values and change ",v.jsx("b",{children:"(CH)"})," values by clicking on each heading."]}),v.jsx("hr",{}),v.jsx("div",{style:{maxHeight:"610px",overflowY:"auto"},children:v.jsx(l8,{columns:g,data:y,palette:h,indicators:u})})]});let N=[structuredClone(y[0])];N[0]&&(N[0].district=N[0].state);const D=v.jsxs("div",{className:"p-0 m-0",children:[v.jsxs("p",{children:["The table below summarises the indicator values aggregated at ",v.jsxs("b",{children:[o," level"]}),". If available, the credible intervals ",v.jsx("b",{children:"(CIs)"})," with 95% significance for round 1 ",v.jsx("b",{children:"(R1)"})," and round 2 ",v.jsx("b",{children:"(R2)"})," can be found in brackets."]}),v.jsx("hr",{}),v.jsx("div",{style:{maxHeight:"610px",overflowY:"auto"},children:v.jsx(l8,{columns:g,data:N,palette:h,indicators:u})})]}),I=v.jsxs("div",{className:"row p-0",children:[v.jsxs("p",{children:["The chart below summarises the indicator values aggregated at ",v.jsxs("b",{children:[o," level"]}),". If available, the credible intervals ",v.jsx("b",{children:"(CIs)"})," with 95% significance for round 1 ",v.jsx("b",{children:"(R1)"})," and round 2 ",v.jsx("b",{children:"(R2)"})," are represented as washout rectangles around the mean values."]}),v.jsx("hr",{}),v.jsx("div",{style:{maxHeight:"610px",overflowY:"auto"},children:v.jsx(u8,{input:N,field:e.indicator})})]});return v.jsxs("div",{className:"row m-0 p-0",children:[v.jsxs("div",{className:"row m-0 p-2 pt-2 rounded-3 bg-secondary-subtle",children:[v.jsx("div",{className:"p-0",children:v.jsxs("h5",{children:[v.jsx(fb,{bg:"danger",style:{marginRight:"8px"},children:l.Indicator}),v.jsxs(fb,{bg:"danger",children:[r," (",t.length," ",s,")"]})]})}),v.jsx("div",{className:"p-0",children:v.jsxs("p",{children:[e.config.Adm2," and ",o," level summary estimates are presented for the selected indicators and for each survey round and for the change between the two rounds."]})})]}),w?v.jsx("div",{className:"m-0 p-0 mt-2",children:v.jsxs("kbd",{children:["No data for this ",e.config.Adm1.toLowerCase()]})}):e.config.StateOnly.includes(e.indicator)?v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"m-0 p-0 mt-2",children:v.jsxs("kbd",{children:["For this indicator, only ",o," level data is available"]})}),v.jsxs(DT,{defaultActiveKey:"table",id:"data-tabs",className:"mt-2",children:[v.jsx(Ih,{eventKey:"table",title:"Table",children:D}),v.jsx(Ih,{eventKey:"chart",title:"Chart",children:I})]})]}):v.jsx(v.Fragment,{children:v.jsxs(DT,{defaultActiveKey:"summary",id:"data-tabs",className:"mt-2",children:[v.jsx(Ih,{eventKey:"summary",title:"Summary",children:R}),v.jsx(Ih,{eventKey:"table",title:"Table",children:T}),v.jsx(Ih,{eventKey:"chart",title:"Chart",children:M})]})})]})}function KD(e,t){const n=F.useRef(t);F.useEffect(function(){t!==n.current&&e.attributionControl!=null&&(n.current!=null&&e.attributionControl.removeAttribution(n.current),t!=null&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}function tze(e,t,n){t.center!==n.center&&e.setLatLng(t.center),t.radius!=null&&t.radius!==n.radius&&e.setRadius(t.radius)}const dne=1;function hne(e){return Object.freeze({__version:dne,map:e})}function pne(e,t){return Object.freeze({...e,...t})}const JD=F.createContext(null),zC=JD.Provider;function Jd(){const e=F.useContext(JD);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function QD(e){function t(n,i){const{instance:r,context:o}=e(n).current;return F.useImperativeHandle(i,()=>r),n.children==null?null:Nt.createElement(zC,{value:o},n.children)}return F.forwardRef(t)}function mne(e){function t(n,i){const[r,o]=F.useState(!1),{instance:a}=e(n,o).current;F.useImperativeHandle(i,()=>a),F.useEffect(function(){r&&a.update()},[a,r,n.children]);const s=a._contentNode;return s?_2.createPortal(n.children,s):null}return F.forwardRef(t)}function eL(e){function t(n,i){const{instance:r}=e(n).current;return F.useImperativeHandle(i,()=>r),null}return F.forwardRef(t)}function gne(e){return function(n){const i=Jd(),r=e(n,i),{instance:o}=r.current,a=F.useRef(n.position),{position:s}=n;return F.useEffect(function(){return o.addTo(i.map),function(){o.remove()}},[i.map,o]),F.useEffect(function(){s!=null&&s!==a.current&&(o.setPosition(s),a.current=s)},[o,s]),r}}function BC(e,t){const n=F.useRef();F.useEffect(function(){return t!=null&&e.instance.on(t),n.current=t,function(){n.current!=null&&e.instance.off(n.current),n.current=null}},[e,t])}function l1(e,t){const n=e.pane??t.pane;return n?{...e,pane:n}:e}function yne(e,t){return function(i,r){const o=Jd(),a=e(l1(i,o),o);return KD(o.map,i.attribution),BC(a.current,i.eventHandlers),t(a.current,o,i,r),a}}var tF={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,i){i(t)})(b8,function(n){var i="1.9.4";function r(f){var p,_,E,A;for(_=1,E=arguments.length;_<E;_++){A=arguments[_];for(p in A)f[p]=A[p]}return f}var o=Object.create||function(){function f(){}return function(p){return f.prototype=p,new f}}();function a(f,p){var _=Array.prototype.slice;if(f.bind)return f.bind.apply(f,_.call(arguments,1));var E=_.call(arguments,2);return function(){return f.apply(p,E.length?E.concat(_.call(arguments)):arguments)}}var s=0;function l(f){return"_leaflet_id"in f||(f._leaflet_id=++s),f._leaflet_id}function u(f,p,_){var E,A,O,Y;return Y=function(){E=!1,A&&(O.apply(_,A),A=!1)},O=function(){E?A=arguments:(f.apply(_,arguments),setTimeout(Y,p),E=!0)},O}function c(f,p,_){var E=p[1],A=p[0],O=E-A;return f===E&&_?f:((f-A)%O+O)%O+A}function d(){return!1}function h(f,p){if(p===!1)return f;var _=Math.pow(10,p===void 0?6:p);return Math.round(f*_)/_}function m(f){return f.trim?f.trim():f.replace(/^\s+|\s+$/g,"")}function g(f){return m(f).split(/\s+/)}function y(f,p){Object.prototype.hasOwnProperty.call(f,"options")||(f.options=f.options?o(f.options):{});for(var _ in p)f.options[_]=p[_];return f.options}function x(f,p,_){var E=[];for(var A in f)E.push(encodeURIComponent(_?A.toUpperCase():A)+"="+encodeURIComponent(f[A]));return(!p||p.indexOf("?")===-1?"?":"&")+E.join("&")}var b=/\{ *([\w_ -]+) *\}/g;function w(f,p){return f.replace(b,function(_,E){var A=p[E];if(A===void 0)throw new Error("No value provided for variable "+_);return typeof A=="function"&&(A=A(p)),A})}var S=Array.isArray||function(f){return Object.prototype.toString.call(f)==="[object Array]"};function k(f,p){for(var _=0;_<f.length;_++)if(f[_]===p)return _;return-1}var R="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function M(f){return window["webkit"+f]||window["moz"+f]||window["ms"+f]}var T=0;function N(f){var p=+new Date,_=Math.max(0,16-(p-T));return T=p+_,window.setTimeout(f,_)}var D=window.requestAnimationFrame||M("RequestAnimationFrame")||N,I=window.cancelAnimationFrame||M("CancelAnimationFrame")||M("CancelRequestAnimationFrame")||function(f){window.clearTimeout(f)};function z(f,p,_){if(_&&D===N)f.call(p);else return D.call(window,a(f,p))}function X(f){f&&I.call(window,f)}var W={__proto__:null,extend:r,create:o,bind:a,get lastId(){return s},stamp:l,throttle:u,wrapNum:c,falseFn:d,formatNum:h,trim:m,splitWords:g,setOptions:y,getParamString:x,template:w,isArray:S,indexOf:k,emptyImageUrl:R,requestFn:D,cancelFn:I,requestAnimFrame:z,cancelAnimFrame:X};function U(){}U.extend=function(f){var p=function(){y(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},_=p.__super__=this.prototype,E=o(_);E.constructor=p,p.prototype=E;for(var A in this)Object.prototype.hasOwnProperty.call(this,A)&&A!=="prototype"&&A!=="__super__"&&(p[A]=this[A]);return f.statics&&r(p,f.statics),f.includes&&(B(f.includes),r.apply(null,[E].concat(f.includes))),r(E,f),delete E.statics,delete E.includes,E.options&&(E.options=_.options?o(_.options):{},r(E.options,f.options)),E._initHooks=[],E.callInitHooks=function(){if(!this._initHooksCalled){_.callInitHooks&&_.callInitHooks.call(this),this._initHooksCalled=!0;for(var O=0,Y=E._initHooks.length;O<Y;O++)E._initHooks[O].call(this)}},p},U.include=function(f){var p=this.prototype.options;return r(this.prototype,f),f.options&&(this.prototype.options=p,this.mergeOptions(f.options)),this},U.mergeOptions=function(f){return r(this.prototype.options,f),this},U.addInitHook=function(f){var p=Array.prototype.slice.call(arguments,1),_=typeof f=="function"?f:function(){this[f].apply(this,p)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(_),this};function B(f){if(!(typeof L>"u"||!L||!L.Mixin)){f=S(f)?f:[f];for(var p=0;p<f.length;p++)f[p]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var V={on:function(f,p,_){if(typeof f=="object")for(var E in f)this._on(E,f[E],p);else{f=g(f);for(var A=0,O=f.length;A<O;A++)this._on(f[A],p,_)}return this},off:function(f,p,_){if(!arguments.length)delete this._events;else if(typeof f=="object")for(var E in f)this._off(E,f[E],p);else{f=g(f);for(var A=arguments.length===1,O=0,Y=f.length;O<Y;O++)A?this._off(f[O]):this._off(f[O],p,_)}return this},_on:function(f,p,_,E){if(typeof p!="function"){console.warn("wrong listener type: "+typeof p);return}if(this._listens(f,p,_)===!1){_===this&&(_=void 0);var A={fn:p,ctx:_};E&&(A.once=!0),this._events=this._events||{},this._events[f]=this._events[f]||[],this._events[f].push(A)}},_off:function(f,p,_){var E,A,O;if(this._events&&(E=this._events[f],!!E)){if(arguments.length===1){if(this._firingCount)for(A=0,O=E.length;A<O;A++)E[A].fn=d;delete this._events[f];return}if(typeof p!="function"){console.warn("wrong listener type: "+typeof p);return}var Y=this._listens(f,p,_);if(Y!==!1){var ee=E[Y];this._firingCount&&(ee.fn=d,this._events[f]=E=E.slice()),E.splice(Y,1)}}},fire:function(f,p,_){if(!this.listens(f,_))return this;var E=r({},p,{type:f,target:this,sourceTarget:p&&p.sourceTarget||this});if(this._events){var A=this._events[f];if(A){this._firingCount=this._firingCount+1||1;for(var O=0,Y=A.length;O<Y;O++){var ee=A[O],te=ee.fn;ee.once&&this.off(f,te,ee.ctx),te.call(ee.ctx||this,E)}this._firingCount--}}return _&&this._propagateEvent(E),this},listens:function(f,p,_,E){typeof f!="string"&&console.warn('"string" type argument expected');var A=p;typeof p!="function"&&(E=!!p,A=void 0,_=void 0);var O=this._events&&this._events[f];if(O&&O.length&&this._listens(f,A,_)!==!1)return!0;if(E){for(var Y in this._eventParents)if(this._eventParents[Y].listens(f,p,_,E))return!0}return!1},_listens:function(f,p,_){if(!this._events)return!1;var E=this._events[f]||[];if(!p)return!!E.length;_===this&&(_=void 0);for(var A=0,O=E.length;A<O;A++)if(E[A].fn===p&&E[A].ctx===_)return A;return!1},once:function(f,p,_){if(typeof f=="object")for(var E in f)this._on(E,f[E],p,!0);else{f=g(f);for(var A=0,O=f.length;A<O;A++)this._on(f[A],p,_,!0)}return this},addEventParent:function(f){return this._eventParents=this._eventParents||{},this._eventParents[l(f)]=f,this},removeEventParent:function(f){return this._eventParents&&delete this._eventParents[l(f)],this},_propagateEvent:function(f){for(var p in this._eventParents)this._eventParents[p].fire(f.type,r({layer:f.target,propagatedFrom:f.target},f),!0)}};V.addEventListener=V.on,V.removeEventListener=V.clearAllEventListeners=V.off,V.addOneTimeEventListener=V.once,V.fireEvent=V.fire,V.hasEventListeners=V.listens;var K=U.extend(V);function H(f,p,_){this.x=_?Math.round(f):f,this.y=_?Math.round(p):p}var J=Math.trunc||function(f){return f>0?Math.floor(f):Math.ceil(f)};H.prototype={clone:function(){return new H(this.x,this.y)},add:function(f){return this.clone()._add(Q(f))},_add:function(f){return this.x+=f.x,this.y+=f.y,this},subtract:function(f){return this.clone()._subtract(Q(f))},_subtract:function(f){return this.x-=f.x,this.y-=f.y,this},divideBy:function(f){return this.clone()._divideBy(f)},_divideBy:function(f){return this.x/=f,this.y/=f,this},multiplyBy:function(f){return this.clone()._multiplyBy(f)},_multiplyBy:function(f){return this.x*=f,this.y*=f,this},scaleBy:function(f){return new H(this.x*f.x,this.y*f.y)},unscaleBy:function(f){return new H(this.x/f.x,this.y/f.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=J(this.x),this.y=J(this.y),this},distanceTo:function(f){f=Q(f);var p=f.x-this.x,_=f.y-this.y;return Math.sqrt(p*p+_*_)},equals:function(f){return f=Q(f),f.x===this.x&&f.y===this.y},contains:function(f){return f=Q(f),Math.abs(f.x)<=Math.abs(this.x)&&Math.abs(f.y)<=Math.abs(this.y)},toString:function(){return"Point("+h(this.x)+", "+h(this.y)+")"}};function Q(f,p,_){return f instanceof H?f:S(f)?new H(f[0],f[1]):f==null?f:typeof f=="object"&&"x"in f&&"y"in f?new H(f.x,f.y):new H(f,p,_)}function oe(f,p){if(f)for(var _=p?[f,p]:f,E=0,A=_.length;E<A;E++)this.extend(_[E])}oe.prototype={extend:function(f){var p,_;if(!f)return this;if(f instanceof H||typeof f[0]=="number"||"x"in f)p=_=Q(f);else if(f=me(f),p=f.min,_=f.max,!p||!_)return this;return!this.min&&!this.max?(this.min=p.clone(),this.max=_.clone()):(this.min.x=Math.min(p.x,this.min.x),this.max.x=Math.max(_.x,this.max.x),this.min.y=Math.min(p.y,this.min.y),this.max.y=Math.max(_.y,this.max.y)),this},getCenter:function(f){return Q((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,f)},getBottomLeft:function(){return Q(this.min.x,this.max.y)},getTopRight:function(){return Q(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(f){var p,_;return typeof f[0]=="number"||f instanceof H?f=Q(f):f=me(f),f instanceof oe?(p=f.min,_=f.max):p=_=f,p.x>=this.min.x&&_.x<=this.max.x&&p.y>=this.min.y&&_.y<=this.max.y},intersects:function(f){f=me(f);var p=this.min,_=this.max,E=f.min,A=f.max,O=A.x>=p.x&&E.x<=_.x,Y=A.y>=p.y&&E.y<=_.y;return O&&Y},overlaps:function(f){f=me(f);var p=this.min,_=this.max,E=f.min,A=f.max,O=A.x>p.x&&E.x<_.x,Y=A.y>p.y&&E.y<_.y;return O&&Y},isValid:function(){return!!(this.min&&this.max)},pad:function(f){var p=this.min,_=this.max,E=Math.abs(p.x-_.x)*f,A=Math.abs(p.y-_.y)*f;return me(Q(p.x-E,p.y-A),Q(_.x+E,_.y+A))},equals:function(f){return f?(f=me(f),this.min.equals(f.getTopLeft())&&this.max.equals(f.getBottomRight())):!1}};function me(f,p){return!f||f instanceof oe?f:new oe(f,p)}function ke(f,p){if(f)for(var _=p?[f,p]:f,E=0,A=_.length;E<A;E++)this.extend(_[E])}ke.prototype={extend:function(f){var p=this._southWest,_=this._northEast,E,A;if(f instanceof Se)E=f,A=f;else if(f instanceof ke){if(E=f._southWest,A=f._northEast,!E||!A)return this}else return f?this.extend(Me(f)||ge(f)):this;return!p&&!_?(this._southWest=new Se(E.lat,E.lng),this._northEast=new Se(A.lat,A.lng)):(p.lat=Math.min(E.lat,p.lat),p.lng=Math.min(E.lng,p.lng),_.lat=Math.max(A.lat,_.lat),_.lng=Math.max(A.lng,_.lng)),this},pad:function(f){var p=this._southWest,_=this._northEast,E=Math.abs(p.lat-_.lat)*f,A=Math.abs(p.lng-_.lng)*f;return new ke(new Se(p.lat-E,p.lng-A),new Se(_.lat+E,_.lng+A))},getCenter:function(){return new Se((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Se(this.getNorth(),this.getWest())},getSouthEast:function(){return new Se(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(f){typeof f[0]=="number"||f instanceof Se||"lat"in f?f=Me(f):f=ge(f);var p=this._southWest,_=this._northEast,E,A;return f instanceof ke?(E=f.getSouthWest(),A=f.getNorthEast()):E=A=f,E.lat>=p.lat&&A.lat<=_.lat&&E.lng>=p.lng&&A.lng<=_.lng},intersects:function(f){f=ge(f);var p=this._southWest,_=this._northEast,E=f.getSouthWest(),A=f.getNorthEast(),O=A.lat>=p.lat&&E.lat<=_.lat,Y=A.lng>=p.lng&&E.lng<=_.lng;return O&&Y},overlaps:function(f){f=ge(f);var p=this._southWest,_=this._northEast,E=f.getSouthWest(),A=f.getNorthEast(),O=A.lat>p.lat&&E.lat<_.lat,Y=A.lng>p.lng&&E.lng<_.lng;return O&&Y},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(f,p){return f?(f=ge(f),this._southWest.equals(f.getSouthWest(),p)&&this._northEast.equals(f.getNorthEast(),p)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ge(f,p){return f instanceof ke?f:new ke(f,p)}function Se(f,p,_){if(isNaN(f)||isNaN(p))throw new Error("Invalid LatLng object: ("+f+", "+p+")");this.lat=+f,this.lng=+p,_!==void 0&&(this.alt=+_)}Se.prototype={equals:function(f,p){if(!f)return!1;f=Me(f);var _=Math.max(Math.abs(this.lat-f.lat),Math.abs(this.lng-f.lng));return _<=(p===void 0?1e-9:p)},toString:function(f){return"LatLng("+h(this.lat,f)+", "+h(this.lng,f)+")"},distanceTo:function(f){return Et.distance(this,Me(f))},wrap:function(){return Et.wrapLatLng(this)},toBounds:function(f){var p=180*f/40075017,_=p/Math.cos(Math.PI/180*this.lat);return ge([this.lat-p,this.lng-_],[this.lat+p,this.lng+_])},clone:function(){return new Se(this.lat,this.lng,this.alt)}};function Me(f,p,_){return f instanceof Se?f:S(f)&&typeof f[0]!="object"?f.length===3?new Se(f[0],f[1],f[2]):f.length===2?new Se(f[0],f[1]):null:f==null?f:typeof f=="object"&&"lat"in f?new Se(f.lat,"lng"in f?f.lng:f.lon,f.alt):p===void 0?null:new Se(f,p,_)}var It={latLngToPoint:function(f,p){var _=this.projection.project(f),E=this.scale(p);return this.transformation._transform(_,E)},pointToLatLng:function(f,p){var _=this.scale(p),E=this.transformation.untransform(f,_);return this.projection.unproject(E)},project:function(f){return this.projection.project(f)},unproject:function(f){return this.projection.unproject(f)},scale:function(f){return 256*Math.pow(2,f)},zoom:function(f){return Math.log(f/256)/Math.LN2},getProjectedBounds:function(f){if(this.infinite)return null;var p=this.projection.bounds,_=this.scale(f),E=this.transformation.transform(p.min,_),A=this.transformation.transform(p.max,_);return new oe(E,A)},infinite:!1,wrapLatLng:function(f){var p=this.wrapLng?c(f.lng,this.wrapLng,!0):f.lng,_=this.wrapLat?c(f.lat,this.wrapLat,!0):f.lat,E=f.alt;return new Se(_,p,E)},wrapLatLngBounds:function(f){var p=f.getCenter(),_=this.wrapLatLng(p),E=p.lat-_.lat,A=p.lng-_.lng;if(E===0&&A===0)return f;var O=f.getSouthWest(),Y=f.getNorthEast(),ee=new Se(O.lat-E,O.lng-A),te=new Se(Y.lat-E,Y.lng-A);return new ke(ee,te)}},Et=r({},It,{wrapLng:[-180,180],R:6371e3,distance:function(f,p){var _=Math.PI/180,E=f.lat*_,A=p.lat*_,O=Math.sin((p.lat-f.lat)*_/2),Y=Math.sin((p.lng-f.lng)*_/2),ee=O*O+Math.cos(E)*Math.cos(A)*Y*Y,te=2*Math.atan2(Math.sqrt(ee),Math.sqrt(1-ee));return this.R*te}}),Re=6378137,Ye={R:Re,MAX_LATITUDE:85.0511287798,project:function(f){var p=Math.PI/180,_=this.MAX_LATITUDE,E=Math.max(Math.min(_,f.lat),-_),A=Math.sin(E*p);return new H(this.R*f.lng*p,this.R*Math.log((1+A)/(1-A))/2)},unproject:function(f){var p=180/Math.PI;return new Se((2*Math.atan(Math.exp(f.y/this.R))-Math.PI/2)*p,f.x*p/this.R)},bounds:function(){var f=Re*Math.PI;return new oe([-f,-f],[f,f])}()};function Be(f,p,_,E){if(S(f)){this._a=f[0],this._b=f[1],this._c=f[2],this._d=f[3];return}this._a=f,this._b=p,this._c=_,this._d=E}Be.prototype={transform:function(f,p){return this._transform(f.clone(),p)},_transform:function(f,p){return p=p||1,f.x=p*(this._a*f.x+this._b),f.y=p*(this._c*f.y+this._d),f},untransform:function(f,p){return p=p||1,new H((f.x/p-this._b)/this._a,(f.y/p-this._d)/this._c)}};function de(f,p,_,E){return new Be(f,p,_,E)}var Tt=r({},Et,{code:"EPSG:3857",projection:Ye,transformation:function(){var f=.5/(Math.PI*Ye.R);return de(f,.5,-f,.5)}()}),ft=r({},Tt,{code:"EPSG:900913"});function tt(f){return document.createElementNS("http://www.w3.org/2000/svg",f)}function Yt(f,p){var _="",E,A,O,Y,ee,te;for(E=0,O=f.length;E<O;E++){for(ee=f[E],A=0,Y=ee.length;A<Y;A++)te=ee[A],_+=(A?"L":"M")+te.x+" "+te.y;_+=p?Ze.svg?"z":"x":""}return _||"M0 0"}var vn=document.documentElement.style,ir="ActiveXObject"in window,Ys=ir&&!document.addEventListener,Ii="msLaunchUri"in navigator&&!("documentMode"in document),kr=Ao("webkit"),aa=Ao("android"),io=Ao("android 2")||Ao("android 3"),Rr=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),bt=aa&&Ao("Google")&&Rr<537&&!("AudioNode"in window),ai=!!window.opera,To=!Ii&&Ao("chrome"),Xa=Ao("gecko")&&!kr&&!ai&&!ir,th=!To&&Ao("safari"),iu=Ao("phantom"),Yc="OTransition"in vn,dt=navigator.platform.indexOf("Win")===0,Gt=ir&&"transition"in vn,Di="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!io,sa="MozPerspective"in vn,nh=!window.L_DISABLE_3D&&(Gt||Di||sa)&&!Yc&&!iu,ru=typeof orientation<"u"||Ao("mobile"),p1=ru&&kr,m1=ru&&Di,Ym=!window.PointerEvent&&window.MSPointerEvent,Zm=!!(window.PointerEvent||Ym),Xm="ontouchstart"in window||!!window.TouchEvent,g1=!window.L_NO_TOUCH&&(Xm||Zm),Zc=ru&&ai,y1=ru&&Xa,ZC=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,XC=function(){var f=!1;try{var p=Object.defineProperty({},"passive",{get:function(){f=!0}});window.addEventListener("testPassiveEventSupport",d,p),window.removeEventListener("testPassiveEventSupport",d,p)}catch{}return f}(),v1=function(){return!!document.createElement("canvas").getContext}(),Km=!!(document.createElementNS&&tt("svg").createSVGRect),KC=!!Km&&function(){var f=document.createElement("div");return f.innerHTML="<svg/>",(f.firstChild&&f.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),x1=!Km&&function(){try{var f=document.createElement("div");f.innerHTML='<v:shape adj="1"/>';var p=f.firstChild;return p.style.behavior="url(#default#VML)",p&&typeof p.adj=="object"}catch{return!1}}(),_1=navigator.platform.indexOf("Mac")===0,JC=navigator.platform.indexOf("Linux")===0;function Ao(f){return navigator.userAgent.toLowerCase().indexOf(f)>=0}var Ze={ie:ir,ielt9:Ys,edge:Ii,webkit:kr,android:aa,android23:io,androidStock:bt,opera:ai,chrome:To,gecko:Xa,safari:th,phantom:iu,opera12:Yc,win:dt,ie3d:Gt,webkit3d:Di,gecko3d:sa,any3d:nh,mobile:ru,mobileWebkit:p1,mobileWebkit3d:m1,msPointer:Ym,pointer:Zm,touch:g1,touchNative:Xm,mobileOpera:Zc,mobileGecko:y1,retina:ZC,passiveEvents:XC,canvas:v1,svg:Km,vml:x1,inlineSvg:KC,mac:_1,linux:JC},b1=Ze.msPointer?"MSPointerDown":"pointerdown",w1=Ze.msPointer?"MSPointerMove":"pointermove",S1=Ze.msPointer?"MSPointerUp":"pointerup",C1=Ze.msPointer?"MSPointerCancel":"pointercancel",Jm={touchstart:b1,touchmove:w1,touchend:S1,touchcancel:C1},E1={touchstart:tE,touchmove:ih,touchend:ih,touchcancel:ih},Zs={},Qm=!1;function eg(f,p,_){return p==="touchstart"&&eE(),E1[p]?(_=E1[p].bind(this,_),f.addEventListener(Jm[p],_,!1),_):(console.warn("wrong event specified:",p),d)}function Xc(f,p,_){if(!Jm[p]){console.warn("wrong event specified:",p);return}f.removeEventListener(Jm[p],_,!1)}function k1(f){Zs[f.pointerId]=f}function QC(f){Zs[f.pointerId]&&(Zs[f.pointerId]=f)}function tg(f){delete Zs[f.pointerId]}function eE(){Qm||(document.addEventListener(b1,k1,!0),document.addEventListener(w1,QC,!0),document.addEventListener(S1,tg,!0),document.addEventListener(C1,tg,!0),Qm=!0)}function ih(f,p){if(p.pointerType!==(p.MSPOINTER_TYPE_MOUSE||"mouse")){p.touches=[];for(var _ in Zs)p.touches.push(Zs[_]);p.changedTouches=[p],f(p)}}function tE(f,p){p.MSPOINTER_TYPE_TOUCH&&p.pointerType===p.MSPOINTER_TYPE_TOUCH&&Zn(p),ih(f,p)}function R1(f){var p={},_,E;for(E in f)_=f[E],p[E]=_&&_.bind?_.bind(f):_;return f=p,p.type="dblclick",p.detail=2,p.isTrusted=!1,p._simulated=!0,p}var T1=200;function nE(f,p){f.addEventListener("dblclick",p);var _=0,E;function A(O){if(O.detail!==1){E=O.detail;return}if(!(O.pointerType==="mouse"||O.sourceCapabilities&&!O.sourceCapabilities.firesTouchEvents)){var Y=P1(O);if(!(Y.some(function(te){return te instanceof HTMLLabelElement&&te.attributes.for})&&!Y.some(function(te){return te instanceof HTMLInputElement||te instanceof HTMLSelectElement}))){var ee=Date.now();ee-_<=T1?(E++,E===2&&p(R1(O))):E=1,_=ee}}}return f.addEventListener("click",A),{dblclick:p,simDblclick:A}}function iE(f,p){f.removeEventListener("dblclick",p.dblclick),f.removeEventListener("click",p.simDblclick)}var rh=lh(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ou=lh(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),A1=ou==="webkitTransition"||ou==="OTransition"?ou+"End":"transitionend";function M1(f){return typeof f=="string"?document.getElementById(f):f}function Kc(f,p){var _=f.style[p]||f.currentStyle&&f.currentStyle[p];if((!_||_==="auto")&&document.defaultView){var E=document.defaultView.getComputedStyle(f,null);_=E?E[p]:null}return _==="auto"?null:_}function Dt(f,p,_){var E=document.createElement(f);return E.className=p||"",_&&_.appendChild(E),E}function dn(f){var p=f.parentNode;p&&p.removeChild(f)}function oh(f){for(;f.firstChild;)f.removeChild(f.firstChild)}function au(f){var p=f.parentNode;p&&p.lastChild!==f&&p.appendChild(f)}function su(f){var p=f.parentNode;p&&p.firstChild!==f&&p.insertBefore(f,p.firstChild)}function ng(f,p){if(f.classList!==void 0)return f.classList.contains(p);var _=sh(f);return _.length>0&&new RegExp("(^|\\s)"+p+"(\\s|$)").test(_)}function vt(f,p){if(f.classList!==void 0)for(var _=g(p),E=0,A=_.length;E<A;E++)f.classList.add(_[E]);else if(!ng(f,p)){var O=sh(f);ah(f,(O?O+" ":"")+p)}}function En(f,p){f.classList!==void 0?f.classList.remove(p):ah(f,m((" "+sh(f)+" ").replace(" "+p+" "," ")))}function ah(f,p){f.className.baseVal===void 0?f.className=p:f.className.baseVal=p}function sh(f){return f.correspondingElement&&(f=f.correspondingElement),f.className.baseVal===void 0?f.className:f.className.baseVal}function Tr(f,p){"opacity"in f.style?f.style.opacity=p:"filter"in f.style&&rE(f,p)}function rE(f,p){var _=!1,E="DXImageTransform.Microsoft.Alpha";try{_=f.filters.item(E)}catch{if(p===1)return}p=Math.round(p*100),_?(_.Enabled=p!==100,_.Opacity=p):f.style.filter+=" progid:"+E+"(opacity="+p+")"}function lh(f){for(var p=document.documentElement.style,_=0;_<f.length;_++)if(f[_]in p)return f[_];return!1}function Xs(f,p,_){var E=p||new H(0,0);f.style[rh]=(Ze.ie3d?"translate("+E.x+"px,"+E.y+"px)":"translate3d("+E.x+"px,"+E.y+"px,0)")+(_?" scale("+_+")":"")}function Mn(f,p){f._leaflet_pos=p,Ze.any3d?Xs(f,p):(f.style.left=p.x+"px",f.style.top=p.y+"px")}function Ka(f){return f._leaflet_pos||new H(0,0)}var lu,uu,ig;if("onselectstart"in document)lu=function(){gt(window,"selectstart",Zn)},uu=function(){Qt(window,"selectstart",Zn)};else{var Jc=lh(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);lu=function(){if(Jc){var f=document.documentElement.style;ig=f[Jc],f[Jc]="none"}},uu=function(){Jc&&(document.documentElement.style[Jc]=ig,ig=void 0)}}function rg(){gt(window,"dragstart",Zn)}function uh(){Qt(window,"dragstart",Zn)}var ch,og;function ag(f){for(;f.tabIndex===-1;)f=f.parentNode;f.style&&(Qc(),ch=f,og=f.style.outlineStyle,f.style.outlineStyle="none",gt(window,"keydown",Qc))}function Qc(){ch&&(ch.style.outlineStyle=og,ch=void 0,og=void 0,Qt(window,"keydown",Qc))}function F1(f){do f=f.parentNode;while((!f.offsetWidth||!f.offsetHeight)&&f!==document.body);return f}function sg(f){var p=f.getBoundingClientRect();return{x:p.width/f.offsetWidth||1,y:p.height/f.offsetHeight||1,boundingClientRect:p}}var oE={__proto__:null,TRANSFORM:rh,TRANSITION:ou,TRANSITION_END:A1,get:M1,getStyle:Kc,create:Dt,remove:dn,empty:oh,toFront:au,toBack:su,hasClass:ng,addClass:vt,removeClass:En,setClass:ah,getClass:sh,setOpacity:Tr,testProp:lh,setTransform:Xs,setPosition:Mn,getPosition:Ka,get disableTextSelection(){return lu},get enableTextSelection(){return uu},disableImageDrag:rg,enableImageDrag:uh,preventOutline:ag,restoreOutline:Qc,getSizedParentNode:F1,getScale:sg};function gt(f,p,_,E){if(p&&typeof p=="object")for(var A in p)nf(f,A,p[A],_);else{p=g(p);for(var O=0,Y=p.length;O<Y;O++)nf(f,p[O],_,E)}return this}var Ar="_leaflet_events";function Qt(f,p,_,E){if(arguments.length===1)ef(f),delete f[Ar];else if(p&&typeof p=="object")for(var A in p)fh(f,A,p[A],_);else if(p=g(p),arguments.length===2)ef(f,function(ee){return k(p,ee)!==-1});else for(var O=0,Y=p.length;O<Y;O++)fh(f,p[O],_,E);return this}function ef(f,p){for(var _ in f[Ar]){var E=_.split(/\d/)[0];(!p||p(E))&&fh(f,E,null,null,_)}}var tf={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function nf(f,p,_,E){var A=p+l(_)+(E?"_"+l(E):"");if(f[Ar]&&f[Ar][A])return this;var O=function(ee){return _.call(E||f,ee||window.event)},Y=O;!Ze.touchNative&&Ze.pointer&&p.indexOf("touch")===0?O=eg(f,p,O):Ze.touch&&p==="dblclick"?O=nE(f,O):"addEventListener"in f?p==="touchstart"||p==="touchmove"||p==="wheel"||p==="mousewheel"?f.addEventListener(tf[p]||p,O,Ze.passiveEvents?{passive:!1}:!1):p==="mouseenter"||p==="mouseleave"?(O=function(ee){ee=ee||window.event,cg(f,ee)&&Y(ee)},f.addEventListener(tf[p],O,!1)):f.addEventListener(p,Y,!1):f.attachEvent("on"+p,O),f[Ar]=f[Ar]||{},f[Ar][A]=O}function fh(f,p,_,E,A){A=A||p+l(_)+(E?"_"+l(E):"");var O=f[Ar]&&f[Ar][A];if(!O)return this;!Ze.touchNative&&Ze.pointer&&p.indexOf("touch")===0?Xc(f,p,O):Ze.touch&&p==="dblclick"?iE(f,O):"removeEventListener"in f?f.removeEventListener(tf[p]||p,O,!1):f.detachEvent("on"+p,O),f[Ar][A]=null}function Ja(f){return f.stopPropagation?f.stopPropagation():f.originalEvent?f.originalEvent._stopped=!0:f.cancelBubble=!0,this}function lg(f){return nf(f,"wheel",Ja),this}function Ks(f){return gt(f,"mousedown touchstart dblclick contextmenu",Ja),f._leaflet_disable_click=!0,this}function Zn(f){return f.preventDefault?f.preventDefault():f.returnValue=!1,this}function Js(f){return Zn(f),Ja(f),this}function P1(f){if(f.composedPath)return f.composedPath();for(var p=[],_=f.target;_;)p.push(_),_=_.parentNode;return p}function ug(f,p){if(!p)return new H(f.clientX,f.clientY);var _=sg(p),E=_.boundingClientRect;return new H((f.clientX-E.left)/_.x-p.clientLeft,(f.clientY-E.top)/_.y-p.clientTop)}var aE=Ze.linux&&Ze.chrome?window.devicePixelRatio:Ze.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function N1(f){return Ze.edge?f.wheelDeltaY/2:f.deltaY&&f.deltaMode===0?-f.deltaY/aE:f.deltaY&&f.deltaMode===1?-f.deltaY*20:f.deltaY&&f.deltaMode===2?-f.deltaY*60:f.deltaX||f.deltaZ?0:f.wheelDelta?(f.wheelDeltaY||f.wheelDelta)/2:f.detail&&Math.abs(f.detail)<32765?-f.detail*20:f.detail?f.detail/-32765*60:0}function cg(f,p){var _=p.relatedTarget;if(!_)return!0;try{for(;_&&_!==f;)_=_.parentNode}catch{return!1}return _!==f}var sE={__proto__:null,on:gt,off:Qt,stopPropagation:Ja,disableScrollPropagation:lg,disableClickPropagation:Ks,preventDefault:Zn,stop:Js,getPropagationPath:P1,getMousePosition:ug,getWheelDelta:N1,isExternalTarget:cg,addListener:gt,removeListener:Qt},dh=K.extend({run:function(f,p,_,E){this.stop(),this._el=f,this._inProgress=!0,this._duration=_||.25,this._easeOutPower=1/Math.max(E||.5,.2),this._startPos=Ka(f),this._offset=p.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=z(this._animate,this),this._step()},_step:function(f){var p=+new Date-this._startTime,_=this._duration*1e3;p<_?this._runFrame(this._easeOut(p/_),f):(this._runFrame(1),this._complete())},_runFrame:function(f,p){var _=this._startPos.add(this._offset.multiplyBy(f));p&&_._round(),Mn(this._el,_),this.fire("step")},_complete:function(){X(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(f){return 1-Math.pow(1-f,this._easeOutPower)}}),C=K.extend({options:{crs:Tt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(f,p){p=y(this,p),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(f),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),p.maxBounds&&this.setMaxBounds(p.maxBounds),p.zoom!==void 0&&(this._zoom=this._limitZoom(p.zoom)),p.center&&p.zoom!==void 0&&this.setView(Me(p.center),p.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ou&&Ze.any3d&&!Ze.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),gt(this._proxy,A1,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(f,p,_){if(p=p===void 0?this._zoom:this._limitZoom(p),f=this._limitCenter(Me(f),p,this.options.maxBounds),_=_||{},this._stop(),this._loaded&&!_.reset&&_!==!0){_.animate!==void 0&&(_.zoom=r({animate:_.animate},_.zoom),_.pan=r({animate:_.animate,duration:_.duration},_.pan));var E=this._zoom!==p?this._tryAnimatedZoom&&this._tryAnimatedZoom(f,p,_.zoom):this._tryAnimatedPan(f,_.pan);if(E)return clearTimeout(this._sizeTimer),this}return this._resetView(f,p,_.pan&&_.pan.noMoveStart),this},setZoom:function(f,p){return this._loaded?this.setView(this.getCenter(),f,{zoom:p}):(this._zoom=f,this)},zoomIn:function(f,p){return f=f||(Ze.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+f,p)},zoomOut:function(f,p){return f=f||(Ze.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-f,p)},setZoomAround:function(f,p,_){var E=this.getZoomScale(p),A=this.getSize().divideBy(2),O=f instanceof H?f:this.latLngToContainerPoint(f),Y=O.subtract(A).multiplyBy(1-1/E),ee=this.containerPointToLatLng(A.add(Y));return this.setView(ee,p,{zoom:_})},_getBoundsCenterZoom:function(f,p){p=p||{},f=f.getBounds?f.getBounds():ge(f);var _=Q(p.paddingTopLeft||p.padding||[0,0]),E=Q(p.paddingBottomRight||p.padding||[0,0]),A=this.getBoundsZoom(f,!1,_.add(E));if(A=typeof p.maxZoom=="number"?Math.min(p.maxZoom,A):A,A===1/0)return{center:f.getCenter(),zoom:A};var O=E.subtract(_).divideBy(2),Y=this.project(f.getSouthWest(),A),ee=this.project(f.getNorthEast(),A),te=this.unproject(Y.add(ee).divideBy(2).add(O),A);return{center:te,zoom:A}},fitBounds:function(f,p){if(f=ge(f),!f.isValid())throw new Error("Bounds are not valid.");var _=this._getBoundsCenterZoom(f,p);return this.setView(_.center,_.zoom,p)},fitWorld:function(f){return this.fitBounds([[-90,-180],[90,180]],f)},panTo:function(f,p){return this.setView(f,this._zoom,{pan:p})},panBy:function(f,p){if(f=Q(f).round(),p=p||{},!f.x&&!f.y)return this.fire("moveend");if(p.animate!==!0&&!this.getSize().contains(f))return this._resetView(this.unproject(this.project(this.getCenter()).add(f)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new dh,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),p.noMoveStart||this.fire("movestart"),p.animate!==!1){vt(this._mapPane,"leaflet-pan-anim");var _=this._getMapPanePos().subtract(f).round();this._panAnim.run(this._mapPane,_,p.duration||.25,p.easeLinearity)}else this._rawPanBy(f),this.fire("move").fire("moveend");return this},flyTo:function(f,p,_){if(_=_||{},_.animate===!1||!Ze.any3d)return this.setView(f,p,_);this._stop();var E=this.project(this.getCenter()),A=this.project(f),O=this.getSize(),Y=this._zoom;f=Me(f),p=p===void 0?Y:p;var ee=Math.max(O.x,O.y),te=ee*this.getZoomScale(Y,p),he=A.distanceTo(E)||1,Le=1.42,ct=Le*Le;function kt(Wn){var H1=Wn?-1:1,gie=Wn?te:ee,yie=te*te-ee*ee+H1*ct*ct*he*he,vie=2*gie*ct*he,mE=yie/vie,IL=Math.sqrt(mE*mE+1)-mE,xie=IL<1e-9?-18:Math.log(IL);return xie}function rr(Wn){return(Math.exp(Wn)-Math.exp(-Wn))/2}function li(Wn){return(Math.exp(Wn)+Math.exp(-Wn))/2}function Mo(Wn){return rr(Wn)/li(Wn)}var Nr=kt(0);function yh(Wn){return ee*(li(Nr)/li(Nr+Le*Wn))}function die(Wn){return ee*(li(Nr)*Mo(Nr+Le*Wn)-rr(Nr))/ct}function hie(Wn){return 1-Math.pow(1-Wn,1.5)}var pie=Date.now(),$L=(kt(1)-Nr)/Le,mie=_.duration?1e3*_.duration:1e3*$L*.8;function OL(){var Wn=(Date.now()-pie)/mie,H1=hie(Wn)*$L;Wn<=1?(this._flyToFrame=z(OL,this),this._move(this.unproject(E.add(A.subtract(E).multiplyBy(die(H1)/he)),Y),this.getScaleZoom(ee/yh(H1),Y),{flyTo:!0})):this._move(f,p)._moveEnd(!0)}return this._moveStart(!0,_.noMoveStart),OL.call(this),this},flyToBounds:function(f,p){var _=this._getBoundsCenterZoom(f,p);return this.flyTo(_.center,_.zoom,p)},setMaxBounds:function(f){return f=ge(f),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),f.isValid()?(this.options.maxBounds=f,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(f){var p=this.options.minZoom;return this.options.minZoom=f,this._loaded&&p!==f&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(f):this},setMaxZoom:function(f){var p=this.options.maxZoom;return this.options.maxZoom=f,this._loaded&&p!==f&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(f):this},panInsideBounds:function(f,p){this._enforcingBounds=!0;var _=this.getCenter(),E=this._limitCenter(_,this._zoom,ge(f));return _.equals(E)||this.panTo(E,p),this._enforcingBounds=!1,this},panInside:function(f,p){p=p||{};var _=Q(p.paddingTopLeft||p.padding||[0,0]),E=Q(p.paddingBottomRight||p.padding||[0,0]),A=this.project(this.getCenter()),O=this.project(f),Y=this.getPixelBounds(),ee=me([Y.min.add(_),Y.max.subtract(E)]),te=ee.getSize();if(!ee.contains(O)){this._enforcingBounds=!0;var he=O.subtract(ee.getCenter()),Le=ee.extend(O).getSize().subtract(te);A.x+=he.x<0?-Le.x:Le.x,A.y+=he.y<0?-Le.y:Le.y,this.panTo(this.unproject(A),p),this._enforcingBounds=!1}return this},invalidateSize:function(f){if(!this._loaded)return this;f=r({animate:!1,pan:!0},f===!0?{animate:!0}:f);var p=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var _=this.getSize(),E=p.divideBy(2).round(),A=_.divideBy(2).round(),O=E.subtract(A);return!O.x&&!O.y?this:(f.animate&&f.pan?this.panBy(O):(f.pan&&this._rawPanBy(O),this.fire("move"),f.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:p,newSize:_}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(f){if(f=this._locateOptions=r({timeout:1e4,watch:!1},f),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var p=a(this._handleGeolocationResponse,this),_=a(this._handleGeolocationError,this);return f.watch?this._locationWatchId=navigator.geolocation.watchPosition(p,_,f):navigator.geolocation.getCurrentPosition(p,_,f),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(f){if(this._container._leaflet_id){var p=f.code,_=f.message||(p===1?"permission denied":p===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:p,message:"Geolocation error: "+_+"."})}},_handleGeolocationResponse:function(f){if(this._container._leaflet_id){var p=f.coords.latitude,_=f.coords.longitude,E=new Se(p,_),A=E.toBounds(f.coords.accuracy*2),O=this._locateOptions;if(O.setView){var Y=this.getBoundsZoom(A);this.setView(E,O.maxZoom?Math.min(Y,O.maxZoom):Y)}var ee={latlng:E,bounds:A,timestamp:f.timestamp};for(var te in f.coords)typeof f.coords[te]=="number"&&(ee[te]=f.coords[te]);this.fire("locationfound",ee)}},addHandler:function(f,p){if(!p)return this;var _=this[f]=new p(this);return this._handlers.push(_),this.options[f]&&_.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),dn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(X(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var f;for(f in this._layers)this._layers[f].remove();for(f in this._panes)dn(this._panes[f]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(f,p){var _="leaflet-pane"+(f?" leaflet-"+f.replace("Pane","")+"-pane":""),E=Dt("div",_,p||this._mapPane);return f&&(this._panes[f]=E),E},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var f=this.getPixelBounds(),p=this.unproject(f.getBottomLeft()),_=this.unproject(f.getTopRight());return new ke(p,_)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(f,p,_){f=ge(f),_=Q(_||[0,0]);var E=this.getZoom()||0,A=this.getMinZoom(),O=this.getMaxZoom(),Y=f.getNorthWest(),ee=f.getSouthEast(),te=this.getSize().subtract(_),he=me(this.project(ee,E),this.project(Y,E)).getSize(),Le=Ze.any3d?this.options.zoomSnap:1,ct=te.x/he.x,kt=te.y/he.y,rr=p?Math.max(ct,kt):Math.min(ct,kt);return E=this.getScaleZoom(rr,E),Le&&(E=Math.round(E/(Le/100))*(Le/100),E=p?Math.ceil(E/Le)*Le:Math.floor(E/Le)*Le),Math.max(A,Math.min(O,E))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new H(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(f,p){var _=this._getTopLeftPoint(f,p);return new oe(_,_.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(f){return this.options.crs.getProjectedBounds(f===void 0?this.getZoom():f)},getPane:function(f){return typeof f=="string"?this._panes[f]:f},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(f,p){var _=this.options.crs;return p=p===void 0?this._zoom:p,_.scale(f)/_.scale(p)},getScaleZoom:function(f,p){var _=this.options.crs;p=p===void 0?this._zoom:p;var E=_.zoom(f*_.scale(p));return isNaN(E)?1/0:E},project:function(f,p){return p=p===void 0?this._zoom:p,this.options.crs.latLngToPoint(Me(f),p)},unproject:function(f,p){return p=p===void 0?this._zoom:p,this.options.crs.pointToLatLng(Q(f),p)},layerPointToLatLng:function(f){var p=Q(f).add(this.getPixelOrigin());return this.unproject(p)},latLngToLayerPoint:function(f){var p=this.project(Me(f))._round();return p._subtract(this.getPixelOrigin())},wrapLatLng:function(f){return this.options.crs.wrapLatLng(Me(f))},wrapLatLngBounds:function(f){return this.options.crs.wrapLatLngBounds(ge(f))},distance:function(f,p){return this.options.crs.distance(Me(f),Me(p))},containerPointToLayerPoint:function(f){return Q(f).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(f){return Q(f).add(this._getMapPanePos())},containerPointToLatLng:function(f){var p=this.containerPointToLayerPoint(Q(f));return this.layerPointToLatLng(p)},latLngToContainerPoint:function(f){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Me(f)))},mouseEventToContainerPoint:function(f){return ug(f,this._container)},mouseEventToLayerPoint:function(f){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(f))},mouseEventToLatLng:function(f){return this.layerPointToLatLng(this.mouseEventToLayerPoint(f))},_initContainer:function(f){var p=this._container=M1(f);if(p){if(p._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");gt(p,"scroll",this._onScroll,this),this._containerId=l(p)},_initLayout:function(){var f=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ze.any3d,vt(f,"leaflet-container"+(Ze.touch?" leaflet-touch":"")+(Ze.retina?" leaflet-retina":"")+(Ze.ielt9?" leaflet-oldie":"")+(Ze.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var p=Kc(f,"position");p!=="absolute"&&p!=="relative"&&p!=="fixed"&&p!=="sticky"&&(f.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var f=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Mn(this._mapPane,new H(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(vt(f.markerPane,"leaflet-zoom-hide"),vt(f.shadowPane,"leaflet-zoom-hide"))},_resetView:function(f,p,_){Mn(this._mapPane,new H(0,0));var E=!this._loaded;this._loaded=!0,p=this._limitZoom(p),this.fire("viewprereset");var A=this._zoom!==p;this._moveStart(A,_)._move(f,p)._moveEnd(A),this.fire("viewreset"),E&&this.fire("load")},_moveStart:function(f,p){return f&&this.fire("zoomstart"),p||this.fire("movestart"),this},_move:function(f,p,_,E){p===void 0&&(p=this._zoom);var A=this._zoom!==p;return this._zoom=p,this._lastCenter=f,this._pixelOrigin=this._getNewPixelOrigin(f),E?_&&_.pinch&&this.fire("zoom",_):((A||_&&_.pinch)&&this.fire("zoom",_),this.fire("move",_)),this},_moveEnd:function(f){return f&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return X(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(f){Mn(this._mapPane,this._getMapPanePos().subtract(f))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(f){this._targets={},this._targets[l(this._container)]=this;var p=f?Qt:gt;p(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&p(window,"resize",this._onResize,this),Ze.any3d&&this.options.transform3DLimit&&(f?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){X(this._resizeRequest),this._resizeRequest=z(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var f=this._getMapPanePos();Math.max(Math.abs(f.x),Math.abs(f.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(f,p){for(var _=[],E,A=p==="mouseout"||p==="mouseover",O=f.target||f.srcElement,Y=!1;O;){if(E=this._targets[l(O)],E&&(p==="click"||p==="preclick")&&this._draggableMoved(E)){Y=!0;break}if(E&&E.listens(p,!0)&&(A&&!cg(O,f)||(_.push(E),A))||O===this._container)break;O=O.parentNode}return!_.length&&!Y&&!A&&this.listens(p,!0)&&(_=[this]),_},_isClickDisabled:function(f){for(;f&&f!==this._container;){if(f._leaflet_disable_click)return!0;f=f.parentNode}},_handleDOMEvent:function(f){var p=f.target||f.srcElement;if(!(!this._loaded||p._leaflet_disable_events||f.type==="click"&&this._isClickDisabled(p))){var _=f.type;_==="mousedown"&&ag(p),this._fireDOMEvent(f,_)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(f,p,_){if(f.type==="click"){var E=r({},f);E.type="preclick",this._fireDOMEvent(E,E.type,_)}var A=this._findEventTargets(f,p);if(_){for(var O=[],Y=0;Y<_.length;Y++)_[Y].listens(p,!0)&&O.push(_[Y]);A=O.concat(A)}if(A.length){p==="contextmenu"&&Zn(f);var ee=A[0],te={originalEvent:f};if(f.type!=="keypress"&&f.type!=="keydown"&&f.type!=="keyup"){var he=ee.getLatLng&&(!ee._radius||ee._radius<=10);te.containerPoint=he?this.latLngToContainerPoint(ee.getLatLng()):this.mouseEventToContainerPoint(f),te.layerPoint=this.containerPointToLayerPoint(te.containerPoint),te.latlng=he?ee.getLatLng():this.layerPointToLatLng(te.layerPoint)}for(Y=0;Y<A.length;Y++)if(A[Y].fire(p,te,!0),te.originalEvent._stopped||A[Y].options.bubblingMouseEvents===!1&&k(this._mouseEvents,p)!==-1)return}},_draggableMoved:function(f){return f=f.dragging&&f.dragging.enabled()?f:this,f.dragging&&f.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var f=0,p=this._handlers.length;f<p;f++)this._handlers[f].disable()},whenReady:function(f,p){return this._loaded?f.call(p||this,{target:this}):this.on("load",f,p),this},_getMapPanePos:function(){return Ka(this._mapPane)||new H(0,0)},_moved:function(){var f=this._getMapPanePos();return f&&!f.equals([0,0])},_getTopLeftPoint:function(f,p){var _=f&&p!==void 0?this._getNewPixelOrigin(f,p):this.getPixelOrigin();return _.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(f,p){var _=this.getSize()._divideBy(2);return this.project(f,p)._subtract(_)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(f,p,_){var E=this._getNewPixelOrigin(_,p);return this.project(f,p)._subtract(E)},_latLngBoundsToNewLayerBounds:function(f,p,_){var E=this._getNewPixelOrigin(_,p);return me([this.project(f.getSouthWest(),p)._subtract(E),this.project(f.getNorthWest(),p)._subtract(E),this.project(f.getSouthEast(),p)._subtract(E),this.project(f.getNorthEast(),p)._subtract(E)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(f){return this.latLngToLayerPoint(f).subtract(this._getCenterLayerPoint())},_limitCenter:function(f,p,_){if(!_)return f;var E=this.project(f,p),A=this.getSize().divideBy(2),O=new oe(E.subtract(A),E.add(A)),Y=this._getBoundsOffset(O,_,p);return Math.abs(Y.x)<=1&&Math.abs(Y.y)<=1?f:this.unproject(E.add(Y),p)},_limitOffset:function(f,p){if(!p)return f;var _=this.getPixelBounds(),E=new oe(_.min.add(f),_.max.add(f));return f.add(this._getBoundsOffset(E,p))},_getBoundsOffset:function(f,p,_){var E=me(this.project(p.getNorthEast(),_),this.project(p.getSouthWest(),_)),A=E.min.subtract(f.min),O=E.max.subtract(f.max),Y=this._rebound(A.x,-O.x),ee=this._rebound(A.y,-O.y);return new H(Y,ee)},_rebound:function(f,p){return f+p>0?Math.round(f-p)/2:Math.max(0,Math.ceil(f))-Math.max(0,Math.floor(p))},_limitZoom:function(f){var p=this.getMinZoom(),_=this.getMaxZoom(),E=Ze.any3d?this.options.zoomSnap:1;return E&&(f=Math.round(f/E)*E),Math.max(p,Math.min(_,f))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){En(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(f,p){var _=this._getCenterOffset(f)._trunc();return(p&&p.animate)!==!0&&!this.getSize().contains(_)?!1:(this.panBy(_,p),!0)},_createAnimProxy:function(){var f=this._proxy=Dt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(f),this.on("zoomanim",function(p){var _=rh,E=this._proxy.style[_];Xs(this._proxy,this.project(p.center,p.zoom),this.getZoomScale(p.zoom,1)),E===this._proxy.style[_]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){dn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var f=this.getCenter(),p=this.getZoom();Xs(this._proxy,this.project(f,p),this.getZoomScale(p,1))},_catchTransitionEnd:function(f){this._animatingZoom&&f.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(f,p,_){if(this._animatingZoom)return!0;if(_=_||{},!this._zoomAnimated||_.animate===!1||this._nothingToAnimate()||Math.abs(p-this._zoom)>this.options.zoomAnimationThreshold)return!1;var E=this.getZoomScale(p),A=this._getCenterOffset(f)._divideBy(1-1/E);return _.animate!==!0&&!this.getSize().contains(A)?!1:(z(function(){this._moveStart(!0,_.noMoveStart||!1)._animateZoom(f,p,!0)},this),!0)},_animateZoom:function(f,p,_,E){this._mapPane&&(_&&(this._animatingZoom=!0,this._animateToCenter=f,this._animateToZoom=p,vt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:f,zoom:p,noUpdate:E}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&En(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function P(f,p){return new C(f,p)}var $=U.extend({options:{position:"topright"},initialize:function(f){y(this,f)},getPosition:function(){return this.options.position},setPosition:function(f){var p=this._map;return p&&p.removeControl(this),this.options.position=f,p&&p.addControl(this),this},getContainer:function(){return this._container},addTo:function(f){this.remove(),this._map=f;var p=this._container=this.onAdd(f),_=this.getPosition(),E=f._controlCorners[_];return vt(p,"leaflet-control"),_.indexOf("bottom")!==-1?E.insertBefore(p,E.firstChild):E.appendChild(p),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(dn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(f){this._map&&f&&f.screenX>0&&f.screenY>0&&this._map.getContainer().focus()}}),j=function(f){return new $(f)};C.include({addControl:function(f){return f.addTo(this),this},removeControl:function(f){return f.remove(),this},_initControlPos:function(){var f=this._controlCorners={},p="leaflet-",_=this._controlContainer=Dt("div",p+"control-container",this._container);function E(A,O){var Y=p+A+" "+p+O;f[A+O]=Dt("div",Y,_)}E("top","left"),E("top","right"),E("bottom","left"),E("bottom","right")},_clearControlPos:function(){for(var f in this._controlCorners)dn(this._controlCorners[f]);dn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var q=$.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(f,p,_,E){return _<E?-1:E<_?1:0}},initialize:function(f,p,_){y(this,_),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var E in f)this._addLayer(f[E],E);for(E in p)this._addLayer(p[E],E,!0)},onAdd:function(f){this._initLayout(),this._update(),this._map=f,f.on("zoomend",this._checkDisabledLayers,this);for(var p=0;p<this._layers.length;p++)this._layers[p].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(f){return $.prototype.addTo.call(this,f),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var f=0;f<this._layers.length;f++)this._layers[f].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(f,p){return this._addLayer(f,p),this._map?this._update():this},addOverlay:function(f,p){return this._addLayer(f,p,!0),this._map?this._update():this},removeLayer:function(f){f.off("add remove",this._onLayerChange,this);var p=this._getLayer(l(f));return p&&this._layers.splice(this._layers.indexOf(p),1),this._map?this._update():this},expand:function(){vt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var f=this._map.getSize().y-(this._container.offsetTop+50);return f<this._section.clientHeight?(vt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=f+"px"):En(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return En(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var f="leaflet-control-layers",p=this._container=Dt("div",f),_=this.options.collapsed;p.setAttribute("aria-haspopup",!0),Ks(p),lg(p);var E=this._section=Dt("section",f+"-list");_&&(this._map.on("click",this.collapse,this),gt(p,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var A=this._layersLink=Dt("a",f+"-toggle",p);A.href="#",A.title="Layers",A.setAttribute("role","button"),gt(A,{keydown:function(O){O.keyCode===13&&this._expandSafely()},click:function(O){Zn(O),this._expandSafely()}},this),_||this.expand(),this._baseLayersList=Dt("div",f+"-base",E),this._separator=Dt("div",f+"-separator",E),this._overlaysList=Dt("div",f+"-overlays",E),p.appendChild(E)},_getLayer:function(f){for(var p=0;p<this._layers.length;p++)if(this._layers[p]&&l(this._layers[p].layer)===f)return this._layers[p]},_addLayer:function(f,p,_){this._map&&f.on("add remove",this._onLayerChange,this),this._layers.push({layer:f,name:p,overlay:_}),this.options.sortLayers&&this._layers.sort(a(function(E,A){return this.options.sortFunction(E.layer,A.layer,E.name,A.name)},this)),this.options.autoZIndex&&f.setZIndex&&(this._lastZIndex++,f.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;oh(this._baseLayersList),oh(this._overlaysList),this._layerControlInputs=[];var f,p,_,E,A=0;for(_=0;_<this._layers.length;_++)E=this._layers[_],this._addItem(E),p=p||E.overlay,f=f||!E.overlay,A+=E.overlay?0:1;return this.options.hideSingleBase&&(f=f&&A>1,this._baseLayersList.style.display=f?"":"none"),this._separator.style.display=p&&f?"":"none",this},_onLayerChange:function(f){this._handlingClick||this._update();var p=this._getLayer(l(f.target)),_=p.overlay?f.type==="add"?"overlayadd":"overlayremove":f.type==="add"?"baselayerchange":null;_&&this._map.fire(_,p)},_createRadioElement:function(f,p){var _='<input type="radio" class="leaflet-control-layers-selector" name="'+f+'"'+(p?' checked="checked"':"")+"/>",E=document.createElement("div");return E.innerHTML=_,E.firstChild},_addItem:function(f){var p=document.createElement("label"),_=this._map.hasLayer(f.layer),E;f.overlay?(E=document.createElement("input"),E.type="checkbox",E.className="leaflet-control-layers-selector",E.defaultChecked=_):E=this._createRadioElement("leaflet-base-layers_"+l(this),_),this._layerControlInputs.push(E),E.layerId=l(f.layer),gt(E,"click",this._onInputClick,this);var A=document.createElement("span");A.innerHTML=" "+f.name;var O=document.createElement("span");p.appendChild(O),O.appendChild(E),O.appendChild(A);var Y=f.overlay?this._overlaysList:this._baseLayersList;return Y.appendChild(p),this._checkDisabledLayers(),p},_onInputClick:function(){if(!this._preventClick){var f=this._layerControlInputs,p,_,E=[],A=[];this._handlingClick=!0;for(var O=f.length-1;O>=0;O--)p=f[O],_=this._getLayer(p.layerId).layer,p.checked?E.push(_):p.checked||A.push(_);for(O=0;O<A.length;O++)this._map.hasLayer(A[O])&&this._map.removeLayer(A[O]);for(O=0;O<E.length;O++)this._map.hasLayer(E[O])||this._map.addLayer(E[O]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var f=this._layerControlInputs,p,_,E=this._map.getZoom(),A=f.length-1;A>=0;A--)p=f[A],_=this._getLayer(p.layerId).layer,p.disabled=_.options.minZoom!==void 0&&E<_.options.minZoom||_.options.maxZoom!==void 0&&E>_.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var f=this._section;this._preventClick=!0,gt(f,"click",Zn),this.expand();var p=this;setTimeout(function(){Qt(f,"click",Zn),p._preventClick=!1})}}),G=function(f,p,_){return new q(f,p,_)},Z=$.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(f){var p="leaflet-control-zoom",_=Dt("div",p+" leaflet-bar"),E=this.options;return this._zoomInButton=this._createButton(E.zoomInText,E.zoomInTitle,p+"-in",_,this._zoomIn),this._zoomOutButton=this._createButton(E.zoomOutText,E.zoomOutTitle,p+"-out",_,this._zoomOut),this._updateDisabled(),f.on("zoomend zoomlevelschange",this._updateDisabled,this),_},onRemove:function(f){f.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(f){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(f.shiftKey?3:1))},_zoomOut:function(f){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(f.shiftKey?3:1))},_createButton:function(f,p,_,E,A){var O=Dt("a",_,E);return O.innerHTML=f,O.href="#",O.title=p,O.setAttribute("role","button"),O.setAttribute("aria-label",p),Ks(O),gt(O,"click",Js),gt(O,"click",A,this),gt(O,"click",this._refocusOnMap,this),O},_updateDisabled:function(){var f=this._map,p="leaflet-disabled";En(this._zoomInButton,p),En(this._zoomOutButton,p),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||f._zoom===f.getMinZoom())&&(vt(this._zoomOutButton,p),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||f._zoom===f.getMaxZoom())&&(vt(this._zoomInButton,p),this._zoomInButton.setAttribute("aria-disabled","true"))}});C.mergeOptions({zoomControl:!0}),C.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Z,this.addControl(this.zoomControl))});var ie=function(f){return new Z(f)},re=$.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(f){var p="leaflet-control-scale",_=Dt("div",p),E=this.options;return this._addScales(E,p+"-line",_),f.on(E.updateWhenIdle?"moveend":"move",this._update,this),f.whenReady(this._update,this),_},onRemove:function(f){f.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(f,p,_){f.metric&&(this._mScale=Dt("div",p,_)),f.imperial&&(this._iScale=Dt("div",p,_))},_update:function(){var f=this._map,p=f.getSize().y/2,_=f.distance(f.containerPointToLatLng([0,p]),f.containerPointToLatLng([this.options.maxWidth,p]));this._updateScales(_)},_updateScales:function(f){this.options.metric&&f&&this._updateMetric(f),this.options.imperial&&f&&this._updateImperial(f)},_updateMetric:function(f){var p=this._getRoundNum(f),_=p<1e3?p+" m":p/1e3+" km";this._updateScale(this._mScale,_,p/f)},_updateImperial:function(f){var p=f*3.2808399,_,E,A;p>5280?(_=p/5280,E=this._getRoundNum(_),this._updateScale(this._iScale,E+" mi",E/_)):(A=this._getRoundNum(p),this._updateScale(this._iScale,A+" ft",A/p))},_updateScale:function(f,p,_){f.style.width=Math.round(this.options.maxWidth*_)+"px",f.innerHTML=p},_getRoundNum:function(f){var p=Math.pow(10,(Math.floor(f)+"").length-1),_=f/p;return _=_>=10?10:_>=5?5:_>=3?3:_>=2?2:1,p*_}}),ue=function(f){return new re(f)},Te='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ye=$.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ze.inlineSvg?Te+" ":"")+"Leaflet</a>"},initialize:function(f){y(this,f),this._attributions={}},onAdd:function(f){f.attributionControl=this,this._container=Dt("div","leaflet-control-attribution"),Ks(this._container);for(var p in f._layers)f._layers[p].getAttribution&&this.addAttribution(f._layers[p].getAttribution());return this._update(),f.on("layeradd",this._addAttribution,this),this._container},onRemove:function(f){f.off("layeradd",this._addAttribution,this)},_addAttribution:function(f){f.layer.getAttribution&&(this.addAttribution(f.layer.getAttribution()),f.layer.once("remove",function(){this.removeAttribution(f.layer.getAttribution())},this))},setPrefix:function(f){return this.options.prefix=f,this._update(),this},addAttribution:function(f){return f?(this._attributions[f]||(this._attributions[f]=0),this._attributions[f]++,this._update(),this):this},removeAttribution:function(f){return f?(this._attributions[f]&&(this._attributions[f]--,this._update()),this):this},_update:function(){if(this._map){var f=[];for(var p in this._attributions)this._attributions[p]&&f.push(p);var _=[];this.options.prefix&&_.push(this.options.prefix),f.length&&_.push(f.join(", ")),this._container.innerHTML=_.join(' <span aria-hidden="true">|</span> ')}}});C.mergeOptions({attributionControl:!0}),C.addInitHook(function(){this.options.attributionControl&&new ye().addTo(this)});var Ce=function(f){return new ye(f)};$.Layers=q,$.Zoom=Z,$.Scale=re,$.Attribution=ye,j.layers=G,j.zoom=ie,j.scale=ue,j.attribution=Ce;var ce=U.extend({initialize:function(f){this._map=f},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ce.addTo=function(f,p){return f.addHandler(p,this),this};var Ee={Events:V},Ne=Ze.touch?"touchstart mousedown":"mousedown",Pe=K.extend({options:{clickTolerance:3},initialize:function(f,p,_,E){y(this,E),this._element=f,this._dragStartTarget=p||f,this._preventOutline=_},enable:function(){this._enabled||(gt(this._dragStartTarget,Ne,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Pe._dragging===this&&this.finishDrag(!0),Qt(this._dragStartTarget,Ne,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(f){if(this._enabled&&(this._moved=!1,!ng(this._element,"leaflet-zoom-anim"))){if(f.touches&&f.touches.length!==1){Pe._dragging===this&&this.finishDrag();return}if(!(Pe._dragging||f.shiftKey||f.which!==1&&f.button!==1&&!f.touches)&&(Pe._dragging=this,this._preventOutline&&ag(this._element),rg(),lu(),!this._moving)){this.fire("down");var p=f.touches?f.touches[0]:f,_=F1(this._element);this._startPoint=new H(p.clientX,p.clientY),this._startPos=Ka(this._element),this._parentScale=sg(_);var E=f.type==="mousedown";gt(document,E?"mousemove":"touchmove",this._onMove,this),gt(document,E?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(f){if(this._enabled){if(f.touches&&f.touches.length>1){this._moved=!0;return}var p=f.touches&&f.touches.length===1?f.touches[0]:f,_=new H(p.clientX,p.clientY)._subtract(this._startPoint);!_.x&&!_.y||Math.abs(_.x)+Math.abs(_.y)<this.options.clickTolerance||(_.x/=this._parentScale.x,_.y/=this._parentScale.y,Zn(f),this._moved||(this.fire("dragstart"),this._moved=!0,vt(document.body,"leaflet-dragging"),this._lastTarget=f.target||f.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),vt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(_),this._moving=!0,this._lastEvent=f,this._updatePosition())}},_updatePosition:function(){var f={originalEvent:this._lastEvent};this.fire("predrag",f),Mn(this._element,this._newPos),this.fire("drag",f)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(f){En(document.body,"leaflet-dragging"),this._lastTarget&&(En(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Qt(document,"mousemove touchmove",this._onMove,this),Qt(document,"mouseup touchend touchcancel",this._onUp,this),uh(),uu();var p=this._moved&&this._moving;this._moving=!1,Pe._dragging=!1,p&&this.fire("dragend",{noInertia:f,distance:this._newPos.distanceTo(this._startPos)})}});function Ge(f,p,_){var E,A=[1,4,2,8],O,Y,ee,te,he,Le,ct,kt;for(O=0,Le=f.length;O<Le;O++)f[O]._code=yt(f[O],p);for(ee=0;ee<4;ee++){for(ct=A[ee],E=[],O=0,Le=f.length,Y=Le-1;O<Le;Y=O++)te=f[O],he=f[Y],te._code&ct?he._code&ct||(kt=St(he,te,ct,p,_),kt._code=yt(kt,p),E.push(kt)):(he._code&ct&&(kt=St(he,te,ct,p,_),kt._code=yt(kt,p),E.push(kt)),E.push(te));f=E}return f}function pt(f,p){var _,E,A,O,Y,ee,te,he,Le;if(!f||f.length===0)throw new Error("latlngs not passed");ut(f)||(console.warn("latlngs are not flat! Only the first ring will be used"),f=f[0]);var ct=Me([0,0]),kt=ge(f),rr=kt.getNorthWest().distanceTo(kt.getSouthWest())*kt.getNorthEast().distanceTo(kt.getNorthWest());rr<1700&&(ct=He(f));var li=f.length,Mo=[];for(_=0;_<li;_++){var Nr=Me(f[_]);Mo.push(p.project(Me([Nr.lat-ct.lat,Nr.lng-ct.lng])))}for(ee=te=he=0,_=0,E=li-1;_<li;E=_++)A=Mo[_],O=Mo[E],Y=A.y*O.x-O.y*A.x,te+=(A.x+O.x)*Y,he+=(A.y+O.y)*Y,ee+=Y*3;ee===0?Le=Mo[0]:Le=[te/ee,he/ee];var yh=p.unproject(Q(Le));return Me([yh.lat+ct.lat,yh.lng+ct.lng])}function He(f){for(var p=0,_=0,E=0,A=0;A<f.length;A++){var O=Me(f[A]);p+=O.lat,_+=O.lng,E++}return Me([p/E,_/E])}var Fe={__proto__:null,clipPolygon:Ge,polygonCenter:pt,centroid:He};function lt(f,p){if(!p||!f.length)return f.slice();var _=p*p;return f=ot(f,_),f=wt(f,_),f}function je(f,p,_){return Math.sqrt(Ue(f,p,_,!0))}function at(f,p,_){return Ue(f,p,_)}function wt(f,p){var _=f.length,E=typeof Uint8Array<"u"?Uint8Array:Array,A=new E(_);A[0]=A[_-1]=1,Xe(f,A,p,0,_-1);var O,Y=[];for(O=0;O<_;O++)A[O]&&Y.push(f[O]);return Y}function Xe(f,p,_,E,A){var O=0,Y,ee,te;for(ee=E+1;ee<=A-1;ee++)te=Ue(f[ee],f[E],f[A],!0),te>O&&(Y=ee,O=te);O>_&&(p[Y]=1,Xe(f,p,_,E,Y),Xe(f,p,_,Y,A))}function ot(f,p){for(var _=[f[0]],E=1,A=0,O=f.length;E<O;E++)Zt(f[E],f[A])>p&&(_.push(f[E]),A=E);return A<O-1&&_.push(f[O-1]),_}var At;function st(f,p,_,E,A){var O=E?At:yt(f,_),Y=yt(p,_),ee,te,he;for(At=Y;;){if(!(O|Y))return[f,p];if(O&Y)return!1;ee=O||Y,te=St(f,p,ee,_,A),he=yt(te,_),ee===O?(f=te,O=he):(p=te,Y=he)}}function St(f,p,_,E,A){var O=p.x-f.x,Y=p.y-f.y,ee=E.min,te=E.max,he,Le;return _&8?(he=f.x+O*(te.y-f.y)/Y,Le=te.y):_&4?(he=f.x+O*(ee.y-f.y)/Y,Le=ee.y):_&2?(he=te.x,Le=f.y+Y*(te.x-f.x)/O):_&1&&(he=ee.x,Le=f.y+Y*(ee.x-f.x)/O),new H(he,Le,A)}function yt(f,p){var _=0;return f.x<p.min.x?_|=1:f.x>p.max.x&&(_|=2),f.y<p.min.y?_|=4:f.y>p.max.y&&(_|=8),_}function Zt(f,p){var _=p.x-f.x,E=p.y-f.y;return _*_+E*E}function Ue(f,p,_,E){var A=p.x,O=p.y,Y=_.x-A,ee=_.y-O,te=Y*Y+ee*ee,he;return te>0&&(he=((f.x-A)*Y+(f.y-O)*ee)/te,he>1?(A=_.x,O=_.y):he>0&&(A+=Y*he,O+=ee*he)),Y=f.x-A,ee=f.y-O,E?Y*Y+ee*ee:new H(A,O)}function ut(f){return!S(f[0])||typeof f[0][0]!="object"&&typeof f[0][0]<"u"}function hn(f){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ut(f)}function si(f,p){var _,E,A,O,Y,ee,te,he;if(!f||f.length===0)throw new Error("latlngs not passed");ut(f)||(console.warn("latlngs are not flat! Only the first ring will be used"),f=f[0]);var Le=Me([0,0]),ct=ge(f),kt=ct.getNorthWest().distanceTo(ct.getSouthWest())*ct.getNorthEast().distanceTo(ct.getNorthWest());kt<1700&&(Le=He(f));var rr=f.length,li=[];for(_=0;_<rr;_++){var Mo=Me(f[_]);li.push(p.project(Me([Mo.lat-Le.lat,Mo.lng-Le.lng])))}for(_=0,E=0;_<rr-1;_++)E+=li[_].distanceTo(li[_+1])/2;if(E===0)he=li[0];else for(_=0,O=0;_<rr-1;_++)if(Y=li[_],ee=li[_+1],A=Y.distanceTo(ee),O+=A,O>E){te=(O-E)/A,he=[ee.x-te*(ee.x-Y.x),ee.y-te*(ee.y-Y.y)];break}var Nr=p.unproject(Q(he));return Me([Nr.lat+Le.lat,Nr.lng+Le.lng])}var nt={__proto__:null,simplify:lt,pointToSegmentDistance:je,closestPointOnSegment:at,clipSegment:st,_getEdgeIntersection:St,_getBitCode:yt,_sqClosestPointOnSegment:Ue,isFlat:ut,_flat:hn,polylineCenter:si},rn={project:function(f){return new H(f.lng,f.lat)},unproject:function(f){return new Se(f.y,f.x)},bounds:new oe([-180,-90],[180,90])},xn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new oe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(f){var p=Math.PI/180,_=this.R,E=f.lat*p,A=this.R_MINOR/_,O=Math.sqrt(1-A*A),Y=O*Math.sin(E),ee=Math.tan(Math.PI/4-E/2)/Math.pow((1-Y)/(1+Y),O/2);return E=-_*Math.log(Math.max(ee,1e-10)),new H(f.lng*p*_,E)},unproject:function(f){for(var p=180/Math.PI,_=this.R,E=this.R_MINOR/_,A=Math.sqrt(1-E*E),O=Math.exp(-f.y/_),Y=Math.PI/2-2*Math.atan(O),ee=0,te=.1,he;ee<15&&Math.abs(te)>1e-7;ee++)he=A*Math.sin(Y),he=Math.pow((1-he)/(1+he),A/2),te=Math.PI/2-2*Math.atan(O*he)-Y,Y+=te;return new Se(Y*p,f.x*p/_)}},Si={__proto__:null,LonLat:rn,Mercator:xn,SphericalMercator:Ye},Un=r({},Et,{code:"EPSG:3395",projection:xn,transformation:function(){var f=.5/(Math.PI*xn.R);return de(f,.5,-f,.5)}()}),la=r({},Et,{code:"EPSG:4326",projection:rn,transformation:de(1/180,1,-1/180,.5)}),ua=r({},It,{projection:rn,transformation:de(1,0,-1,0),scale:function(f){return Math.pow(2,f)},zoom:function(f){return Math.log(f)/Math.LN2},distance:function(f,p){var _=p.lng-f.lng,E=p.lat-f.lat;return Math.sqrt(_*_+E*E)},infinite:!0});It.Earth=Et,It.EPSG3395=Un,It.EPSG3857=Tt,It.EPSG900913=ft,It.EPSG4326=la,It.Simple=ua;var Mr=K.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(f){return f.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(f){return f&&f.removeLayer(this),this},getPane:function(f){return this._map.getPane(f?this.options[f]||f:this.options.pane)},addInteractiveTarget:function(f){return this._map._targets[l(f)]=this,this},removeInteractiveTarget:function(f){return delete this._map._targets[l(f)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(f){var p=f.target;if(p.hasLayer(this)){if(this._map=p,this._zoomAnimated=p._zoomAnimated,this.getEvents){var _=this.getEvents();p.on(_,this),this.once("remove",function(){p.off(_,this)},this)}this.onAdd(p),this.fire("add"),p.fire("layeradd",{layer:this})}}});C.include({addLayer:function(f){if(!f._layerAdd)throw new Error("The provided object is not a Layer.");var p=l(f);return this._layers[p]?this:(this._layers[p]=f,f._mapToAdd=this,f.beforeAdd&&f.beforeAdd(this),this.whenReady(f._layerAdd,f),this)},removeLayer:function(f){var p=l(f);return this._layers[p]?(this._loaded&&f.onRemove(this),delete this._layers[p],this._loaded&&(this.fire("layerremove",{layer:f}),f.fire("remove")),f._map=f._mapToAdd=null,this):this},hasLayer:function(f){return l(f)in this._layers},eachLayer:function(f,p){for(var _ in this._layers)f.call(p,this._layers[_]);return this},_addLayers:function(f){f=f?S(f)?f:[f]:[];for(var p=0,_=f.length;p<_;p++)this.addLayer(f[p])},_addZoomLimit:function(f){(!isNaN(f.options.maxZoom)||!isNaN(f.options.minZoom))&&(this._zoomBoundLayers[l(f)]=f,this._updateZoomLevels())},_removeZoomLimit:function(f){var p=l(f);this._zoomBoundLayers[p]&&(delete this._zoomBoundLayers[p],this._updateZoomLevels())},_updateZoomLevels:function(){var f=1/0,p=-1/0,_=this._getZoomSpan();for(var E in this._zoomBoundLayers){var A=this._zoomBoundLayers[E].options;f=A.minZoom===void 0?f:Math.min(f,A.minZoom),p=A.maxZoom===void 0?p:Math.max(p,A.maxZoom)}this._layersMaxZoom=p===-1/0?void 0:p,this._layersMinZoom=f===1/0?void 0:f,_!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Qa=Mr.extend({initialize:function(f,p){y(this,p),this._layers={};var _,E;if(f)for(_=0,E=f.length;_<E;_++)this.addLayer(f[_])},addLayer:function(f){var p=this.getLayerId(f);return this._layers[p]=f,this._map&&this._map.addLayer(f),this},removeLayer:function(f){var p=f in this._layers?f:this.getLayerId(f);return this._map&&this._layers[p]&&this._map.removeLayer(this._layers[p]),delete this._layers[p],this},hasLayer:function(f){var p=typeof f=="number"?f:this.getLayerId(f);return p in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(f){var p=Array.prototype.slice.call(arguments,1),_,E;for(_ in this._layers)E=this._layers[_],E[f]&&E[f].apply(E,p);return this},onAdd:function(f){this.eachLayer(f.addLayer,f)},onRemove:function(f){this.eachLayer(f.removeLayer,f)},eachLayer:function(f,p){for(var _ in this._layers)f.call(p,this._layers[_]);return this},getLayer:function(f){return this._layers[f]},getLayers:function(){var f=[];return this.eachLayer(f.push,f),f},setZIndex:function(f){return this.invoke("setZIndex",f)},getLayerId:function(f){return l(f)}}),lE=function(f,p){return new Qa(f,p)},Fr=Qa.extend({addLayer:function(f){return this.hasLayer(f)?this:(f.addEventParent(this),Qa.prototype.addLayer.call(this,f),this.fire("layeradd",{layer:f}))},removeLayer:function(f){return this.hasLayer(f)?(f in this._layers&&(f=this._layers[f]),f.removeEventParent(this),Qa.prototype.removeLayer.call(this,f),this.fire("layerremove",{layer:f})):this},setStyle:function(f){return this.invoke("setStyle",f)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var f=new ke;for(var p in this._layers){var _=this._layers[p];f.extend(_.getBounds?_.getBounds():_.getLatLng())}return f}}),uE=function(f,p){return new Fr(f,p)},Qs=U.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(f){y(this,f)},createIcon:function(f){return this._createIcon("icon",f)},createShadow:function(f){return this._createIcon("shadow",f)},_createIcon:function(f,p){var _=this._getIconUrl(f);if(!_){if(f==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var E=this._createImg(_,p&&p.tagName==="IMG"?p:null);return this._setIconStyles(E,f),(this.options.crossOrigin||this.options.crossOrigin==="")&&(E.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),E},_setIconStyles:function(f,p){var _=this.options,E=_[p+"Size"];typeof E=="number"&&(E=[E,E]);var A=Q(E),O=Q(p==="shadow"&&_.shadowAnchor||_.iconAnchor||A&&A.divideBy(2,!0));f.className="leaflet-marker-"+p+" "+(_.className||""),O&&(f.style.marginLeft=-O.x+"px",f.style.marginTop=-O.y+"px"),A&&(f.style.width=A.x+"px",f.style.height=A.y+"px")},_createImg:function(f,p){return p=p||document.createElement("img"),p.src=f,p},_getIconUrl:function(f){return Ze.retina&&this.options[f+"RetinaUrl"]||this.options[f+"Url"]}});function hh(f){return new Qs(f)}var es=Qs.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(f){return typeof es.imagePath!="string"&&(es.imagePath=this._detectIconPath()),(this.options.imagePath||es.imagePath)+Qs.prototype._getIconUrl.call(this,f)},_stripUrl:function(f){var p=function(_,E,A){var O=E.exec(_);return O&&O[A]};return f=p(f,/^url\((['"])?(.+)\1\)$/,2),f&&p(f,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var f=Dt("div","leaflet-default-icon-path",document.body),p=Kc(f,"background-image")||Kc(f,"backgroundImage");if(document.body.removeChild(f),p=this._stripUrl(p),p)return p;var _=document.querySelector('link[href$="leaflet.css"]');return _?_.href.substring(0,_.href.length-11-1):""}}),fg=ce.extend({initialize:function(f){this._marker=f},addHooks:function(){var f=this._marker._icon;this._draggable||(this._draggable=new Pe(f,f,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),vt(f,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&En(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(f){var p=this._marker,_=p._map,E=this._marker.options.autoPanSpeed,A=this._marker.options.autoPanPadding,O=Ka(p._icon),Y=_.getPixelBounds(),ee=_.getPixelOrigin(),te=me(Y.min._subtract(ee).add(A),Y.max._subtract(ee).subtract(A));if(!te.contains(O)){var he=Q((Math.max(te.max.x,O.x)-te.max.x)/(Y.max.x-te.max.x)-(Math.min(te.min.x,O.x)-te.min.x)/(Y.min.x-te.min.x),(Math.max(te.max.y,O.y)-te.max.y)/(Y.max.y-te.max.y)-(Math.min(te.min.y,O.y)-te.min.y)/(Y.min.y-te.min.y)).multiplyBy(E);_.panBy(he,{animate:!1}),this._draggable._newPos._add(he),this._draggable._startPos._add(he),Mn(p._icon,this._draggable._newPos),this._onDrag(f),this._panRequest=z(this._adjustPan.bind(this,f))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(f){this._marker.options.autoPan&&(X(this._panRequest),this._panRequest=z(this._adjustPan.bind(this,f)))},_onDrag:function(f){var p=this._marker,_=p._shadow,E=Ka(p._icon),A=p._map.layerPointToLatLng(E);_&&Mn(_,E),p._latlng=A,f.latlng=A,f.oldLatLng=this._oldLatLng,p.fire("move",f).fire("drag",f)},_onDragEnd:function(f){X(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",f)}}),rf=Mr.extend({options:{icon:new es,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(f,p){y(this,p),this._latlng=Me(f)},onAdd:function(f){this._zoomAnimated=this._zoomAnimated&&f.options.markerZoomAnimation,this._zoomAnimated&&f.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(f){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&f.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(f){var p=this._latlng;return this._latlng=Me(f),this.update(),this.fire("move",{oldLatLng:p,latlng:this._latlng})},setZIndexOffset:function(f){return this.options.zIndexOffset=f,this.update()},getIcon:function(){return this.options.icon},setIcon:function(f){return this.options.icon=f,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var f=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(f)}return this},_initIcon:function(){var f=this.options,p="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),_=f.icon.createIcon(this._icon),E=!1;_!==this._icon&&(this._icon&&this._removeIcon(),E=!0,f.title&&(_.title=f.title),_.tagName==="IMG"&&(_.alt=f.alt||"")),vt(_,p),f.keyboard&&(_.tabIndex="0",_.setAttribute("role","button")),this._icon=_,f.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&gt(_,"focus",this._panOnFocus,this);var A=f.icon.createShadow(this._shadow),O=!1;A!==this._shadow&&(this._removeShadow(),O=!0),A&&(vt(A,p),A.alt=""),this._shadow=A,f.opacity<1&&this._updateOpacity(),E&&this.getPane().appendChild(this._icon),this._initInteraction(),A&&O&&this.getPane(f.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Qt(this._icon,"focus",this._panOnFocus,this),dn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&dn(this._shadow),this._shadow=null},_setPos:function(f){this._icon&&Mn(this._icon,f),this._shadow&&Mn(this._shadow,f),this._zIndex=f.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(f){this._icon&&(this._icon.style.zIndex=this._zIndex+f)},_animateZoom:function(f){var p=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center).round();this._setPos(p)},_initInteraction:function(){if(this.options.interactive&&(vt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),fg)){var f=this.options.draggable;this.dragging&&(f=this.dragging.enabled(),this.dragging.disable()),this.dragging=new fg(this),f&&this.dragging.enable()}},setOpacity:function(f){return this.options.opacity=f,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var f=this.options.opacity;this._icon&&Tr(this._icon,f),this._shadow&&Tr(this._shadow,f)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var f=this._map;if(f){var p=this.options.icon.options,_=p.iconSize?Q(p.iconSize):Q(0,0),E=p.iconAnchor?Q(p.iconAnchor):Q(0,0);f.panInside(this._latlng,{paddingTopLeft:E,paddingBottomRight:_.subtract(E)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function cE(f,p){return new rf(f,p)}var ts=Mr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(f){this._renderer=f.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(f){return y(this,f),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&f&&Object.prototype.hasOwnProperty.call(f,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Ci=ts.extend({options:{fill:!0,radius:10},initialize:function(f,p){y(this,p),this._latlng=Me(f),this._radius=this.options.radius},setLatLng:function(f){var p=this._latlng;return this._latlng=Me(f),this.redraw(),this.fire("move",{oldLatLng:p,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(f){return this.options.radius=this._radius=f,this.redraw()},getRadius:function(){return this._radius},setStyle:function(f){var p=f&&f.radius||this._radius;return ts.prototype.setStyle.call(this,f),this.setRadius(p),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var f=this._radius,p=this._radiusY||f,_=this._clickTolerance(),E=[f+_,p+_];this._pxBounds=new oe(this._point.subtract(E),this._point.add(E))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(f){return f.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function dg(f,p){return new Ci(f,p)}var hg=Ci.extend({initialize:function(f,p,_){if(typeof p=="number"&&(p=r({},_,{radius:p})),y(this,p),this._latlng=Me(f),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(f){return this._mRadius=f,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var f=[this._radius,this._radiusY||this._radius];return new ke(this._map.layerPointToLatLng(this._point.subtract(f)),this._map.layerPointToLatLng(this._point.add(f)))},setStyle:ts.prototype.setStyle,_project:function(){var f=this._latlng.lng,p=this._latlng.lat,_=this._map,E=_.options.crs;if(E.distance===Et.distance){var A=Math.PI/180,O=this._mRadius/Et.R/A,Y=_.project([p+O,f]),ee=_.project([p-O,f]),te=Y.add(ee).divideBy(2),he=_.unproject(te).lat,Le=Math.acos((Math.cos(O*A)-Math.sin(p*A)*Math.sin(he*A))/(Math.cos(p*A)*Math.cos(he*A)))/A;(isNaN(Le)||Le===0)&&(Le=O/Math.cos(Math.PI/180*p)),this._point=te.subtract(_.getPixelOrigin()),this._radius=isNaN(Le)?0:te.x-_.project([he,f-Le]).x,this._radiusY=te.y-Y.y}else{var ct=E.unproject(E.project(this._latlng).subtract([this._mRadius,0]));this._point=_.latLngToLayerPoint(this._latlng),this._radius=this._point.x-_.latLngToLayerPoint(ct).x}this._updateBounds()}});function ph(f,p,_){return new hg(f,p,_)}var Xt=ts.extend({options:{smoothFactor:1,noClip:!1},initialize:function(f,p){y(this,p),this._setLatLngs(f)},getLatLngs:function(){return this._latlngs},setLatLngs:function(f){return this._setLatLngs(f),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(f){for(var p=1/0,_=null,E=Ue,A,O,Y=0,ee=this._parts.length;Y<ee;Y++)for(var te=this._parts[Y],he=1,Le=te.length;he<Le;he++){A=te[he-1],O=te[he];var ct=E(f,A,O,!0);ct<p&&(p=ct,_=E(f,A,O))}return _&&(_.distance=Math.sqrt(p)),_},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return si(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(f,p){return p=p||this._defaultShape(),f=Me(f),p.push(f),this._bounds.extend(f),this.redraw()},_setLatLngs:function(f){this._bounds=new ke,this._latlngs=this._convertLatLngs(f)},_defaultShape:function(){return ut(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(f){for(var p=[],_=ut(f),E=0,A=f.length;E<A;E++)_?(p[E]=Me(f[E]),this._bounds.extend(p[E])):p[E]=this._convertLatLngs(f[E]);return p},_project:function(){var f=new oe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,f),this._bounds.isValid()&&f.isValid()&&(this._rawPxBounds=f,this._updateBounds())},_updateBounds:function(){var f=this._clickTolerance(),p=new H(f,f);this._rawPxBounds&&(this._pxBounds=new oe([this._rawPxBounds.min.subtract(p),this._rawPxBounds.max.add(p)]))},_projectLatlngs:function(f,p,_){var E=f[0]instanceof Se,A=f.length,O,Y;if(E){for(Y=[],O=0;O<A;O++)Y[O]=this._map.latLngToLayerPoint(f[O]),_.extend(Y[O]);p.push(Y)}else for(O=0;O<A;O++)this._projectLatlngs(f[O],p,_)},_clipPoints:function(){var f=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(f))){if(this.options.noClip){this._parts=this._rings;return}var p=this._parts,_,E,A,O,Y,ee,te;for(_=0,A=0,O=this._rings.length;_<O;_++)for(te=this._rings[_],E=0,Y=te.length;E<Y-1;E++)ee=st(te[E],te[E+1],f,E,!0),ee&&(p[A]=p[A]||[],p[A].push(ee[0]),(ee[1]!==te[E+1]||E===Y-2)&&(p[A].push(ee[1]),A++))}},_simplifyPoints:function(){for(var f=this._parts,p=this.options.smoothFactor,_=0,E=f.length;_<E;_++)f[_]=lt(f[_],p)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(f,p){var _,E,A,O,Y,ee,te=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(f))return!1;for(_=0,O=this._parts.length;_<O;_++)for(ee=this._parts[_],E=0,Y=ee.length,A=Y-1;E<Y;A=E++)if(!(!p&&E===0)&&je(f,ee[A],ee[E])<=te)return!0;return!1}});function $1(f,p){return new Xt(f,p)}Xt._flat=hn;var cu=Xt.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return pt(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(f){var p=Xt.prototype._convertLatLngs.call(this,f),_=p.length;return _>=2&&p[0]instanceof Se&&p[0].equals(p[_-1])&&p.pop(),p},_setLatLngs:function(f){Xt.prototype._setLatLngs.call(this,f),ut(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ut(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var f=this._renderer._bounds,p=this.options.weight,_=new H(p,p);if(f=new oe(f.min.subtract(_),f.max.add(_)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(f))){if(this.options.noClip){this._parts=this._rings;return}for(var E=0,A=this._rings.length,O;E<A;E++)O=Ge(this._rings[E],f,!0),O.length&&this._parts.push(O)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(f){var p=!1,_,E,A,O,Y,ee,te,he;if(!this._pxBounds||!this._pxBounds.contains(f))return!1;for(O=0,te=this._parts.length;O<te;O++)for(_=this._parts[O],Y=0,he=_.length,ee=he-1;Y<he;ee=Y++)E=_[Y],A=_[ee],E.y>f.y!=A.y>f.y&&f.x<(A.x-E.x)*(f.y-E.y)/(A.y-E.y)+E.x&&(p=!p);return p||Xt.prototype._containsPoint.call(this,f,!0)}});function fE(f,p){return new cu(f,p)}var Pr=Fr.extend({initialize:function(f,p){y(this,p),this._layers={},f&&this.addData(f)},addData:function(f){var p=S(f)?f:f.features,_,E,A;if(p){for(_=0,E=p.length;_<E;_++)A=p[_],(A.geometries||A.geometry||A.features||A.coordinates)&&this.addData(A);return this}var O=this.options;if(O.filter&&!O.filter(f))return this;var Y=fu(f,O);return Y?(Y.feature=D1(f),Y.defaultOptions=Y.options,this.resetStyle(Y),O.onEachFeature&&O.onEachFeature(f,Y),this.addLayer(Y)):this},resetStyle:function(f){return f===void 0?this.eachLayer(this.resetStyle,this):(f.options=r({},f.defaultOptions),this._setLayerStyle(f,this.options.style),this)},setStyle:function(f){return this.eachLayer(function(p){this._setLayerStyle(p,f)},this)},_setLayerStyle:function(f,p){f.setStyle&&(typeof p=="function"&&(p=p(f.feature)),f.setStyle(p))}});function fu(f,p){var _=f.type==="Feature"?f.geometry:f,E=_?_.coordinates:null,A=[],O=p&&p.pointToLayer,Y=p&&p.coordsToLatLng||dE,ee,te,he,Le;if(!E&&!_)return null;switch(_.type){case"Point":return ee=Y(E),pg(O,f,ee,p);case"MultiPoint":for(he=0,Le=E.length;he<Le;he++)ee=Y(E[he]),A.push(pg(O,f,ee,p));return new Fr(A);case"LineString":case"MultiLineString":return te=O1(E,_.type==="LineString"?0:1,Y),new Xt(te,p);case"Polygon":case"MultiPolygon":return te=O1(E,_.type==="Polygon"?1:2,Y),new cu(te,p);case"GeometryCollection":for(he=0,Le=_.geometries.length;he<Le;he++){var ct=fu({geometry:_.geometries[he],type:"Feature",properties:f.properties},p);ct&&A.push(ct)}return new Fr(A);case"FeatureCollection":for(he=0,Le=_.features.length;he<Le;he++){var kt=fu(_.features[he],p);kt&&A.push(kt)}return new Fr(A);default:throw new Error("Invalid GeoJSON object.")}}function pg(f,p,_,E){return f?f(p,_):new rf(_,E&&E.markersInheritOptions&&E)}function dE(f){return new Se(f[1],f[0],f[2])}function O1(f,p,_){for(var E=[],A=0,O=f.length,Y;A<O;A++)Y=p?O1(f[A],p-1,_):(_||dE)(f[A]),E.push(Y);return E}function hE(f,p){return f=Me(f),f.alt!==void 0?[h(f.lng,p),h(f.lat,p),h(f.alt,p)]:[h(f.lng,p),h(f.lat,p)]}function I1(f,p,_,E){for(var A=[],O=0,Y=f.length;O<Y;O++)A.push(p?I1(f[O],ut(f[O])?0:p-1,_,E):hE(f[O],E));return!p&&_&&A.length>0&&A.push(A[0].slice()),A}function mh(f,p){return f.feature?r({},f.feature,{geometry:p}):D1(p)}function D1(f){return f.type==="Feature"||f.type==="FeatureCollection"?f:{type:"Feature",properties:{},geometry:f}}var pE={toGeoJSON:function(f){return mh(this,{type:"Point",coordinates:hE(this.getLatLng(),f)})}};rf.include(pE),hg.include(pE),Ci.include(pE),Xt.include({toGeoJSON:function(f){var p=!ut(this._latlngs),_=I1(this._latlngs,p?1:0,!1,f);return mh(this,{type:(p?"Multi":"")+"LineString",coordinates:_})}}),cu.include({toGeoJSON:function(f){var p=!ut(this._latlngs),_=p&&!ut(this._latlngs[0]),E=I1(this._latlngs,_?2:p?1:0,!0,f);return p||(E=[E]),mh(this,{type:(_?"Multi":"")+"Polygon",coordinates:E})}}),Qa.include({toMultiPoint:function(f){var p=[];return this.eachLayer(function(_){p.push(_.toGeoJSON(f).geometry.coordinates)}),mh(this,{type:"MultiPoint",coordinates:p})},toGeoJSON:function(f){var p=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(p==="MultiPoint")return this.toMultiPoint(f);var _=p==="GeometryCollection",E=[];return this.eachLayer(function(A){if(A.toGeoJSON){var O=A.toGeoJSON(f);if(_)E.push(O.geometry);else{var Y=D1(O);Y.type==="FeatureCollection"?E.push.apply(E,Y.features):E.push(Y)}}}),_?mh(this,{geometries:E,type:"GeometryCollection"}):{type:"FeatureCollection",features:E}}});function yL(f,p){return new Pr(f,p)}var Qne=yL,L1=Mr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(f,p,_){this._url=f,this._bounds=ge(p),y(this,_)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(vt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){dn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(f){return this.options.opacity=f,this._image&&this._updateOpacity(),this},setStyle:function(f){return f.opacity&&this.setOpacity(f.opacity),this},bringToFront:function(){return this._map&&au(this._image),this},bringToBack:function(){return this._map&&su(this._image),this},setUrl:function(f){return this._url=f,this._image&&(this._image.src=f),this},setBounds:function(f){return this._bounds=ge(f),this._map&&this._reset(),this},getEvents:function(){var f={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},setZIndex:function(f){return this.options.zIndex=f,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var f=this._url.tagName==="IMG",p=this._image=f?this._url:Dt("img");if(vt(p,"leaflet-image-layer"),this._zoomAnimated&&vt(p,"leaflet-zoom-animated"),this.options.className&&vt(p,this.options.className),p.onselectstart=d,p.onmousemove=d,p.onload=a(this.fire,this,"load"),p.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),f){this._url=p.src;return}p.src=this._url,p.alt=this.options.alt},_animateZoom:function(f){var p=this._map.getZoomScale(f.zoom),_=this._map._latLngBoundsToNewLayerBounds(this._bounds,f.zoom,f.center).min;Xs(this._image,_,p)},_reset:function(){var f=this._image,p=new oe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),_=p.getSize();Mn(f,p.min),f.style.width=_.x+"px",f.style.height=_.y+"px"},_updateOpacity:function(){Tr(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var f=this.options.errorOverlayUrl;f&&this._url!==f&&(this._url=f,this._image.src=f)},getCenter:function(){return this._bounds.getCenter()}}),eie=function(f,p,_){return new L1(f,p,_)},vL=L1.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var f=this._url.tagName==="VIDEO",p=this._image=f?this._url:Dt("video");if(vt(p,"leaflet-image-layer"),this._zoomAnimated&&vt(p,"leaflet-zoom-animated"),this.options.className&&vt(p,this.options.className),p.onselectstart=d,p.onmousemove=d,p.onloadeddata=a(this.fire,this,"load"),f){for(var _=p.getElementsByTagName("source"),E=[],A=0;A<_.length;A++)E.push(_[A].src);this._url=_.length>0?E:[p.src];return}S(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(p.style,"objectFit")&&(p.style.objectFit="fill"),p.autoplay=!!this.options.autoplay,p.loop=!!this.options.loop,p.muted=!!this.options.muted,p.playsInline=!!this.options.playsInline;for(var O=0;O<this._url.length;O++){var Y=Dt("source");Y.src=this._url[O],p.appendChild(Y)}}});function tie(f,p,_){return new vL(f,p,_)}var xL=L1.extend({_initImage:function(){var f=this._image=this._url;vt(f,"leaflet-image-layer"),this._zoomAnimated&&vt(f,"leaflet-zoom-animated"),this.options.className&&vt(f,this.options.className),f.onselectstart=d,f.onmousemove=d}});function nie(f,p,_){return new xL(f,p,_)}var ns=Mr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(f,p){f&&(f instanceof Se||S(f))?(this._latlng=Me(f),y(this,p)):(y(this,f),this._source=p),this.options.content&&(this._content=this.options.content)},openOn:function(f){return f=arguments.length?f:this._source._map,f.hasLayer(this)||f.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(f){return this._map?this.close():(arguments.length?this._source=f:f=this._source,this._prepareOpen(),this.openOn(f._map)),this},onAdd:function(f){this._zoomAnimated=f._zoomAnimated,this._container||this._initLayout(),f._fadeAnimated&&Tr(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),f._fadeAnimated&&Tr(this._container,1),this.bringToFront(),this.options.interactive&&(vt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(f){f._fadeAnimated?(Tr(this._container,0),this._removeTimeout=setTimeout(a(dn,void 0,this._container),200)):dn(this._container),this.options.interactive&&(En(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(f){return this._latlng=Me(f),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(f){return this._content=f,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var f={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&au(this._container),this},bringToBack:function(){return this._map&&su(this._container),this},_prepareOpen:function(f){var p=this._source;if(!p._map)return!1;if(p instanceof Fr){p=null;var _=this._source._layers;for(var E in _)if(_[E]._map){p=_[E];break}if(!p)return!1;this._source=p}if(!f)if(p.getCenter)f=p.getCenter();else if(p.getLatLng)f=p.getLatLng();else if(p.getBounds)f=p.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(f),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var f=this._contentNode,p=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof p=="string")f.innerHTML=p;else{for(;f.hasChildNodes();)f.removeChild(f.firstChild);f.appendChild(p)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var f=this._map.latLngToLayerPoint(this._latlng),p=Q(this.options.offset),_=this._getAnchor();this._zoomAnimated?Mn(this._container,f.add(_)):p=p.add(f).add(_);var E=this._containerBottom=-p.y,A=this._containerLeft=-Math.round(this._containerWidth/2)+p.x;this._container.style.bottom=E+"px",this._container.style.left=A+"px"}},_getAnchor:function(){return[0,0]}});C.include({_initOverlay:function(f,p,_,E){var A=p;return A instanceof f||(A=new f(E).setContent(p)),_&&A.setLatLng(_),A}}),Mr.include({_initOverlay:function(f,p,_,E){var A=_;return A instanceof f?(y(A,E),A._source=this):(A=p&&!E?p:new f(E,this),A.setContent(_)),A}});var j1=ns.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(f){return f=arguments.length?f:this._source._map,!f.hasLayer(this)&&f._popup&&f._popup.options.autoClose&&f.removeLayer(f._popup),f._popup=this,ns.prototype.openOn.call(this,f)},onAdd:function(f){ns.prototype.onAdd.call(this,f),f.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ts||this._source.on("preclick",Ja))},onRemove:function(f){ns.prototype.onRemove.call(this,f),f.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ts||this._source.off("preclick",Ja))},getEvents:function(){var f=ns.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(f.preclick=this.close),this.options.keepInView&&(f.moveend=this._adjustPan),f},_initLayout:function(){var f="leaflet-popup",p=this._container=Dt("div",f+" "+(this.options.className||"")+" leaflet-zoom-animated"),_=this._wrapper=Dt("div",f+"-content-wrapper",p);if(this._contentNode=Dt("div",f+"-content",_),Ks(p),lg(this._contentNode),gt(p,"contextmenu",Ja),this._tipContainer=Dt("div",f+"-tip-container",p),this._tip=Dt("div",f+"-tip",this._tipContainer),this.options.closeButton){var E=this._closeButton=Dt("a",f+"-close-button",p);E.setAttribute("role","button"),E.setAttribute("aria-label","Close popup"),E.href="#close",E.innerHTML='<span aria-hidden="true">&#215;</span>',gt(E,"click",function(A){Zn(A),this.close()},this)}},_updateLayout:function(){var f=this._contentNode,p=f.style;p.width="",p.whiteSpace="nowrap";var _=f.offsetWidth;_=Math.min(_,this.options.maxWidth),_=Math.max(_,this.options.minWidth),p.width=_+1+"px",p.whiteSpace="",p.height="";var E=f.offsetHeight,A=this.options.maxHeight,O="leaflet-popup-scrolled";A&&E>A?(p.height=A+"px",vt(f,O)):En(f,O),this._containerWidth=this._container.offsetWidth},_animateZoom:function(f){var p=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center),_=this._getAnchor();Mn(this._container,p.add(_))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var f=this._map,p=parseInt(Kc(this._container,"marginBottom"),10)||0,_=this._container.offsetHeight+p,E=this._containerWidth,A=new H(this._containerLeft,-_-this._containerBottom);A._add(Ka(this._container));var O=f.layerPointToContainerPoint(A),Y=Q(this.options.autoPanPadding),ee=Q(this.options.autoPanPaddingTopLeft||Y),te=Q(this.options.autoPanPaddingBottomRight||Y),he=f.getSize(),Le=0,ct=0;O.x+E+te.x>he.x&&(Le=O.x+E-he.x+te.x),O.x-Le-ee.x<0&&(Le=O.x-ee.x),O.y+_+te.y>he.y&&(ct=O.y+_-he.y+te.y),O.y-ct-ee.y<0&&(ct=O.y-ee.y),(Le||ct)&&(this.options.keepInView&&(this._autopanning=!0),f.fire("autopanstart").panBy([Le,ct]))}},_getAnchor:function(){return Q(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),iie=function(f,p){return new j1(f,p)};C.mergeOptions({closePopupOnClick:!0}),C.include({openPopup:function(f,p,_){return this._initOverlay(j1,f,p,_).openOn(this),this},closePopup:function(f){return f=arguments.length?f:this._popup,f&&f.close(),this}}),Mr.include({bindPopup:function(f,p){return this._popup=this._initOverlay(j1,this._popup,f,p),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(f){return this._popup&&(this instanceof Fr||(this._popup._source=this),this._popup._prepareOpen(f||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(f){return this._popup&&this._popup.setContent(f),this},getPopup:function(){return this._popup},_openPopup:function(f){if(!(!this._popup||!this._map)){Js(f);var p=f.layer||f.target;if(this._popup._source===p&&!(p instanceof ts)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(f.latlng);return}this._popup._source=p,this.openPopup(f.latlng)}},_movePopup:function(f){this._popup.setLatLng(f.latlng)},_onKeyPress:function(f){f.originalEvent.keyCode===13&&this._openPopup(f)}});var z1=ns.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(f){ns.prototype.onAdd.call(this,f),this.setOpacity(this.options.opacity),f.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(f){ns.prototype.onRemove.call(this,f),f.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var f=ns.prototype.getEvents.call(this);return this.options.permanent||(f.preclick=this.close),f},_initLayout:function(){var f="leaflet-tooltip",p=f+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Dt("div",p),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(f){var p,_,E=this._map,A=this._container,O=E.latLngToContainerPoint(E.getCenter()),Y=E.layerPointToContainerPoint(f),ee=this.options.direction,te=A.offsetWidth,he=A.offsetHeight,Le=Q(this.options.offset),ct=this._getAnchor();ee==="top"?(p=te/2,_=he):ee==="bottom"?(p=te/2,_=0):ee==="center"?(p=te/2,_=he/2):ee==="right"?(p=0,_=he/2):ee==="left"?(p=te,_=he/2):Y.x<O.x?(ee="right",p=0,_=he/2):(ee="left",p=te+(Le.x+ct.x)*2,_=he/2),f=f.subtract(Q(p,_,!0)).add(Le).add(ct),En(A,"leaflet-tooltip-right"),En(A,"leaflet-tooltip-left"),En(A,"leaflet-tooltip-top"),En(A,"leaflet-tooltip-bottom"),vt(A,"leaflet-tooltip-"+ee),Mn(A,f)},_updatePosition:function(){var f=this._map.latLngToLayerPoint(this._latlng);this._setPosition(f)},setOpacity:function(f){this.options.opacity=f,this._container&&Tr(this._container,f)},_animateZoom:function(f){var p=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center);this._setPosition(p)},_getAnchor:function(){return Q(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),rie=function(f,p){return new z1(f,p)};C.include({openTooltip:function(f,p,_){return this._initOverlay(z1,f,p,_).openOn(this),this},closeTooltip:function(f){return f.close(),this}}),Mr.include({bindTooltip:function(f,p){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(z1,this._tooltip,f,p),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(f){if(!(!f&&this._tooltipHandlersAdded)){var p=f?"off":"on",_={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?_.add=this._openTooltip:(_.mouseover=this._openTooltip,_.mouseout=this.closeTooltip,_.click=this._openTooltip,this._map?this._addFocusListeners():_.add=this._addFocusListeners),this._tooltip.options.sticky&&(_.mousemove=this._moveTooltip),this[p](_),this._tooltipHandlersAdded=!f}},openTooltip:function(f){return this._tooltip&&(this instanceof Fr||(this._tooltip._source=this),this._tooltip._prepareOpen(f)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(f){return this._tooltip&&this._tooltip.setContent(f),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(f){var p=typeof f.getElement=="function"&&f.getElement();p&&(gt(p,"focus",function(){this._tooltip._source=f,this.openTooltip()},this),gt(p,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(f){var p=typeof f.getElement=="function"&&f.getElement();p&&p.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(f){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var p=this;this._map.once("moveend",function(){p._openOnceFlag=!1,p._openTooltip(f)});return}this._tooltip._source=f.layer||f.target,this.openTooltip(this._tooltip.options.sticky?f.latlng:void 0)}},_moveTooltip:function(f){var p=f.latlng,_,E;this._tooltip.options.sticky&&f.originalEvent&&(_=this._map.mouseEventToContainerPoint(f.originalEvent),E=this._map.containerPointToLayerPoint(_),p=this._map.layerPointToLatLng(E)),this._tooltip.setLatLng(p)}});var _L=Qs.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(f){var p=f&&f.tagName==="DIV"?f:document.createElement("div"),_=this.options;if(_.html instanceof Element?(oh(p),p.appendChild(_.html)):p.innerHTML=_.html!==!1?_.html:"",_.bgPos){var E=Q(_.bgPos);p.style.backgroundPosition=-E.x+"px "+-E.y+"px"}return this._setIconStyles(p,"icon"),p},createShadow:function(){return null}});function oie(f){return new _L(f)}Qs.Default=es;var mg=Mr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ze.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(f){y(this,f)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(f){f._addZoomLimit(this)},onRemove:function(f){this._removeAllTiles(),dn(this._container),f._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(au(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(su(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(f){return this.options.opacity=f,this._updateOpacity(),this},setZIndex:function(f){return this.options.zIndex=f,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var f=this._clampZoom(this._map.getZoom());f!==this._tileZoom&&(this._tileZoom=f,this._updateLevels()),this._update()}return this},getEvents:function(){var f={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=u(this._onMoveEnd,this.options.updateInterval,this)),f.move=this._onMove),this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},createTile:function(){return document.createElement("div")},getTileSize:function(){var f=this.options.tileSize;return f instanceof H?f:new H(f,f)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(f){for(var p=this.getPane().children,_=-f(-1/0,1/0),E=0,A=p.length,O;E<A;E++)O=p[E].style.zIndex,p[E]!==this._container&&O&&(_=f(_,+O));isFinite(_)&&(this.options.zIndex=_+f(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ze.ielt9){Tr(this._container,this.options.opacity);var f=+new Date,p=!1,_=!1;for(var E in this._tiles){var A=this._tiles[E];if(!(!A.current||!A.loaded)){var O=Math.min(1,(f-A.loaded)/200);Tr(A.el,O),O<1?p=!0:(A.active?_=!0:this._onOpaqueTile(A),A.active=!0)}}_&&!this._noPrune&&this._pruneTiles(),p&&(X(this._fadeFrame),this._fadeFrame=z(this._updateOpacity,this))}},_onOpaqueTile:d,_initContainer:function(){this._container||(this._container=Dt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var f=this._tileZoom,p=this.options.maxZoom;if(f!==void 0){for(var _ in this._levels)_=Number(_),this._levels[_].el.children.length||_===f?(this._levels[_].el.style.zIndex=p-Math.abs(f-_),this._onUpdateLevel(_)):(dn(this._levels[_].el),this._removeTilesAtZoom(_),this._onRemoveLevel(_),delete this._levels[_]);var E=this._levels[f],A=this._map;return E||(E=this._levels[f]={},E.el=Dt("div","leaflet-tile-container leaflet-zoom-animated",this._container),E.el.style.zIndex=p,E.origin=A.project(A.unproject(A.getPixelOrigin()),f).round(),E.zoom=f,this._setZoomTransform(E,A.getCenter(),A.getZoom()),d(E.el.offsetWidth),this._onCreateLevel(E)),this._level=E,E}},_onUpdateLevel:d,_onRemoveLevel:d,_onCreateLevel:d,_pruneTiles:function(){if(this._map){var f,p,_=this._map.getZoom();if(_>this.options.maxZoom||_<this.options.minZoom){this._removeAllTiles();return}for(f in this._tiles)p=this._tiles[f],p.retain=p.current;for(f in this._tiles)if(p=this._tiles[f],p.current&&!p.active){var E=p.coords;this._retainParent(E.x,E.y,E.z,E.z-5)||this._retainChildren(E.x,E.y,E.z,E.z+2)}for(f in this._tiles)this._tiles[f].retain||this._removeTile(f)}},_removeTilesAtZoom:function(f){for(var p in this._tiles)this._tiles[p].coords.z===f&&this._removeTile(p)},_removeAllTiles:function(){for(var f in this._tiles)this._removeTile(f)},_invalidateAll:function(){for(var f in this._levels)dn(this._levels[f].el),this._onRemoveLevel(Number(f)),delete this._levels[f];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(f,p,_,E){var A=Math.floor(f/2),O=Math.floor(p/2),Y=_-1,ee=new H(+A,+O);ee.z=+Y;var te=this._tileCoordsToKey(ee),he=this._tiles[te];return he&&he.active?(he.retain=!0,!0):(he&&he.loaded&&(he.retain=!0),Y>E?this._retainParent(A,O,Y,E):!1)},_retainChildren:function(f,p,_,E){for(var A=2*f;A<2*f+2;A++)for(var O=2*p;O<2*p+2;O++){var Y=new H(A,O);Y.z=_+1;var ee=this._tileCoordsToKey(Y),te=this._tiles[ee];if(te&&te.active){te.retain=!0;continue}else te&&te.loaded&&(te.retain=!0);_+1<E&&this._retainChildren(A,O,_+1,E)}},_resetView:function(f){var p=f&&(f.pinch||f.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),p,p)},_animateZoom:function(f){this._setView(f.center,f.zoom,!0,f.noUpdate)},_clampZoom:function(f){var p=this.options;return p.minNativeZoom!==void 0&&f<p.minNativeZoom?p.minNativeZoom:p.maxNativeZoom!==void 0&&p.maxNativeZoom<f?p.maxNativeZoom:f},_setView:function(f,p,_,E){var A=Math.round(p);this.options.maxZoom!==void 0&&A>this.options.maxZoom||this.options.minZoom!==void 0&&A<this.options.minZoom?A=void 0:A=this._clampZoom(A);var O=this.options.updateWhenZooming&&A!==this._tileZoom;(!E||O)&&(this._tileZoom=A,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),A!==void 0&&this._update(f),_||this._pruneTiles(),this._noPrune=!!_),this._setZoomTransforms(f,p)},_setZoomTransforms:function(f,p){for(var _ in this._levels)this._setZoomTransform(this._levels[_],f,p)},_setZoomTransform:function(f,p,_){var E=this._map.getZoomScale(_,f.zoom),A=f.origin.multiplyBy(E).subtract(this._map._getNewPixelOrigin(p,_)).round();Ze.any3d?Xs(f.el,A,E):Mn(f.el,A)},_resetGrid:function(){var f=this._map,p=f.options.crs,_=this._tileSize=this.getTileSize(),E=this._tileZoom,A=this._map.getPixelWorldBounds(this._tileZoom);A&&(this._globalTileRange=this._pxBoundsToTileRange(A)),this._wrapX=p.wrapLng&&!this.options.noWrap&&[Math.floor(f.project([0,p.wrapLng[0]],E).x/_.x),Math.ceil(f.project([0,p.wrapLng[1]],E).x/_.y)],this._wrapY=p.wrapLat&&!this.options.noWrap&&[Math.floor(f.project([p.wrapLat[0],0],E).y/_.x),Math.ceil(f.project([p.wrapLat[1],0],E).y/_.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(f){var p=this._map,_=p._animatingZoom?Math.max(p._animateToZoom,p.getZoom()):p.getZoom(),E=p.getZoomScale(_,this._tileZoom),A=p.project(f,this._tileZoom).floor(),O=p.getSize().divideBy(E*2);return new oe(A.subtract(O),A.add(O))},_update:function(f){var p=this._map;if(p){var _=this._clampZoom(p.getZoom());if(f===void 0&&(f=p.getCenter()),this._tileZoom!==void 0){var E=this._getTiledPixelBounds(f),A=this._pxBoundsToTileRange(E),O=A.getCenter(),Y=[],ee=this.options.keepBuffer,te=new oe(A.getBottomLeft().subtract([ee,-ee]),A.getTopRight().add([ee,-ee]));if(!(isFinite(A.min.x)&&isFinite(A.min.y)&&isFinite(A.max.x)&&isFinite(A.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var he in this._tiles){var Le=this._tiles[he].coords;(Le.z!==this._tileZoom||!te.contains(new H(Le.x,Le.y)))&&(this._tiles[he].current=!1)}if(Math.abs(_-this._tileZoom)>1){this._setView(f,_);return}for(var ct=A.min.y;ct<=A.max.y;ct++)for(var kt=A.min.x;kt<=A.max.x;kt++){var rr=new H(kt,ct);if(rr.z=this._tileZoom,!!this._isValidTile(rr)){var li=this._tiles[this._tileCoordsToKey(rr)];li?li.current=!0:Y.push(rr)}}if(Y.sort(function(Nr,yh){return Nr.distanceTo(O)-yh.distanceTo(O)}),Y.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Mo=document.createDocumentFragment();for(kt=0;kt<Y.length;kt++)this._addTile(Y[kt],Mo);this._level.el.appendChild(Mo)}}}},_isValidTile:function(f){var p=this._map.options.crs;if(!p.infinite){var _=this._globalTileRange;if(!p.wrapLng&&(f.x<_.min.x||f.x>_.max.x)||!p.wrapLat&&(f.y<_.min.y||f.y>_.max.y))return!1}if(!this.options.bounds)return!0;var E=this._tileCoordsToBounds(f);return ge(this.options.bounds).overlaps(E)},_keyToBounds:function(f){return this._tileCoordsToBounds(this._keyToTileCoords(f))},_tileCoordsToNwSe:function(f){var p=this._map,_=this.getTileSize(),E=f.scaleBy(_),A=E.add(_),O=p.unproject(E,f.z),Y=p.unproject(A,f.z);return[O,Y]},_tileCoordsToBounds:function(f){var p=this._tileCoordsToNwSe(f),_=new ke(p[0],p[1]);return this.options.noWrap||(_=this._map.wrapLatLngBounds(_)),_},_tileCoordsToKey:function(f){return f.x+":"+f.y+":"+f.z},_keyToTileCoords:function(f){var p=f.split(":"),_=new H(+p[0],+p[1]);return _.z=+p[2],_},_removeTile:function(f){var p=this._tiles[f];p&&(dn(p.el),delete this._tiles[f],this.fire("tileunload",{tile:p.el,coords:this._keyToTileCoords(f)}))},_initTile:function(f){vt(f,"leaflet-tile");var p=this.getTileSize();f.style.width=p.x+"px",f.style.height=p.y+"px",f.onselectstart=d,f.onmousemove=d,Ze.ielt9&&this.options.opacity<1&&Tr(f,this.options.opacity)},_addTile:function(f,p){var _=this._getTilePos(f),E=this._tileCoordsToKey(f),A=this.createTile(this._wrapCoords(f),a(this._tileReady,this,f));this._initTile(A),this.createTile.length<2&&z(a(this._tileReady,this,f,null,A)),Mn(A,_),this._tiles[E]={el:A,coords:f,current:!0},p.appendChild(A),this.fire("tileloadstart",{tile:A,coords:f})},_tileReady:function(f,p,_){p&&this.fire("tileerror",{error:p,tile:_,coords:f});var E=this._tileCoordsToKey(f);_=this._tiles[E],_&&(_.loaded=+new Date,this._map._fadeAnimated?(Tr(_.el,0),X(this._fadeFrame),this._fadeFrame=z(this._updateOpacity,this)):(_.active=!0,this._pruneTiles()),p||(vt(_.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:_.el,coords:f})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ze.ielt9||!this._map._fadeAnimated?z(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(f){return f.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(f){var p=new H(this._wrapX?c(f.x,this._wrapX):f.x,this._wrapY?c(f.y,this._wrapY):f.y);return p.z=f.z,p},_pxBoundsToTileRange:function(f){var p=this.getTileSize();return new oe(f.min.unscaleBy(p).floor(),f.max.unscaleBy(p).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var f in this._tiles)if(!this._tiles[f].loaded)return!1;return!0}});function aie(f){return new mg(f)}var gh=mg.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(f,p){this._url=f,p=y(this,p),p.detectRetina&&Ze.retina&&p.maxZoom>0?(p.tileSize=Math.floor(p.tileSize/2),p.zoomReverse?(p.zoomOffset--,p.minZoom=Math.min(p.maxZoom,p.minZoom+1)):(p.zoomOffset++,p.maxZoom=Math.max(p.minZoom,p.maxZoom-1)),p.minZoom=Math.max(0,p.minZoom)):p.zoomReverse?p.minZoom=Math.min(p.maxZoom,p.minZoom):p.maxZoom=Math.max(p.minZoom,p.maxZoom),typeof p.subdomains=="string"&&(p.subdomains=p.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(f,p){return this._url===f&&p===void 0&&(p=!0),this._url=f,p||this.redraw(),this},createTile:function(f,p){var _=document.createElement("img");return gt(_,"load",a(this._tileOnLoad,this,p,_)),gt(_,"error",a(this._tileOnError,this,p,_)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(_.referrerPolicy=this.options.referrerPolicy),_.alt="",_.src=this.getTileUrl(f),_},getTileUrl:function(f){var p={r:Ze.retina?"@2x":"",s:this._getSubdomain(f),x:f.x,y:f.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var _=this._globalTileRange.max.y-f.y;this.options.tms&&(p.y=_),p["-y"]=_}return w(this._url,r(p,this.options))},_tileOnLoad:function(f,p){Ze.ielt9?setTimeout(a(f,this,null,p),0):f(null,p)},_tileOnError:function(f,p,_){var E=this.options.errorTileUrl;E&&p.getAttribute("src")!==E&&(p.src=E),f(_,p)},_onTileRemove:function(f){f.tile.onload=null},_getZoomForUrl:function(){var f=this._tileZoom,p=this.options.maxZoom,_=this.options.zoomReverse,E=this.options.zoomOffset;return _&&(f=p-f),f+E},_getSubdomain:function(f){var p=Math.abs(f.x+f.y)%this.options.subdomains.length;return this.options.subdomains[p]},_abortLoading:function(){var f,p;for(f in this._tiles)if(this._tiles[f].coords.z!==this._tileZoom&&(p=this._tiles[f].el,p.onload=d,p.onerror=d,!p.complete)){p.src=R;var _=this._tiles[f].coords;dn(p),delete this._tiles[f],this.fire("tileabort",{tile:p,coords:_})}},_removeTile:function(f){var p=this._tiles[f];if(p)return p.el.setAttribute("src",R),mg.prototype._removeTile.call(this,f)},_tileReady:function(f,p,_){if(!(!this._map||_&&_.getAttribute("src")===R))return mg.prototype._tileReady.call(this,f,p,_)}});function bL(f,p){return new gh(f,p)}var wL=gh.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(f,p){this._url=f;var _=r({},this.defaultWmsParams);for(var E in p)E in this.options||(_[E]=p[E]);p=y(this,p);var A=p.detectRetina&&Ze.retina?2:1,O=this.getTileSize();_.width=O.x*A,_.height=O.y*A,this.wmsParams=_},onAdd:function(f){this._crs=this.options.crs||f.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var p=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[p]=this._crs.code,gh.prototype.onAdd.call(this,f)},getTileUrl:function(f){var p=this._tileCoordsToNwSe(f),_=this._crs,E=me(_.project(p[0]),_.project(p[1])),A=E.min,O=E.max,Y=(this._wmsVersion>=1.3&&this._crs===la?[A.y,A.x,O.y,O.x]:[A.x,A.y,O.x,O.y]).join(","),ee=gh.prototype.getTileUrl.call(this,f);return ee+x(this.wmsParams,ee,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Y},setParams:function(f,p){return r(this.wmsParams,f),p||this.redraw(),this}});function sie(f,p){return new wL(f,p)}gh.WMS=wL,bL.wms=sie;var el=Mr.extend({options:{padding:.1},initialize:function(f){y(this,f),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),vt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var f={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(f.zoomanim=this._onAnimZoom),f},_onAnimZoom:function(f){this._updateTransform(f.center,f.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(f,p){var _=this._map.getZoomScale(p,this._zoom),E=this._map.getSize().multiplyBy(.5+this.options.padding),A=this._map.project(this._center,p),O=E.multiplyBy(-_).add(A).subtract(this._map._getNewPixelOrigin(f,p));Ze.any3d?Xs(this._container,O,_):Mn(this._container,O)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var f in this._layers)this._layers[f]._reset()},_onZoomEnd:function(){for(var f in this._layers)this._layers[f]._project()},_updatePaths:function(){for(var f in this._layers)this._layers[f]._update()},_update:function(){var f=this.options.padding,p=this._map.getSize(),_=this._map.containerPointToLayerPoint(p.multiplyBy(-f)).round();this._bounds=new oe(_,_.add(p.multiplyBy(1+f*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),SL=el.extend({options:{tolerance:0},getEvents:function(){var f=el.prototype.getEvents.call(this);return f.viewprereset=this._onViewPreReset,f},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){el.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var f=this._container=document.createElement("canvas");gt(f,"mousemove",this._onMouseMove,this),gt(f,"click dblclick mousedown mouseup contextmenu",this._onClick,this),gt(f,"mouseout",this._handleMouseOut,this),f._leaflet_disable_events=!0,this._ctx=f.getContext("2d")},_destroyContainer:function(){X(this._redrawRequest),delete this._ctx,dn(this._container),Qt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var f;this._redrawBounds=null;for(var p in this._layers)f=this._layers[p],f._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){el.prototype._update.call(this);var f=this._bounds,p=this._container,_=f.getSize(),E=Ze.retina?2:1;Mn(p,f.min),p.width=E*_.x,p.height=E*_.y,p.style.width=_.x+"px",p.style.height=_.y+"px",Ze.retina&&this._ctx.scale(2,2),this._ctx.translate(-f.min.x,-f.min.y),this.fire("update")}},_reset:function(){el.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(f){this._updateDashArray(f),this._layers[l(f)]=f;var p=f._order={layer:f,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=p),this._drawLast=p,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(f){this._requestRedraw(f)},_removePath:function(f){var p=f._order,_=p.next,E=p.prev;_?_.prev=E:this._drawLast=E,E?E.next=_:this._drawFirst=_,delete f._order,delete this._layers[l(f)],this._requestRedraw(f)},_updatePath:function(f){this._extendRedrawBounds(f),f._project(),f._update(),this._requestRedraw(f)},_updateStyle:function(f){this._updateDashArray(f),this._requestRedraw(f)},_updateDashArray:function(f){if(typeof f.options.dashArray=="string"){var p=f.options.dashArray.split(/[, ]+/),_=[],E,A;for(A=0;A<p.length;A++){if(E=Number(p[A]),isNaN(E))return;_.push(E)}f.options._dashArray=_}else f.options._dashArray=f.options.dashArray},_requestRedraw:function(f){this._map&&(this._extendRedrawBounds(f),this._redrawRequest=this._redrawRequest||z(this._redraw,this))},_extendRedrawBounds:function(f){if(f._pxBounds){var p=(f.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new oe,this._redrawBounds.extend(f._pxBounds.min.subtract([p,p])),this._redrawBounds.extend(f._pxBounds.max.add([p,p]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var f=this._redrawBounds;if(f){var p=f.getSize();this._ctx.clearRect(f.min.x,f.min.y,p.x,p.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var f,p=this._redrawBounds;if(this._ctx.save(),p){var _=p.getSize();this._ctx.beginPath(),this._ctx.rect(p.min.x,p.min.y,_.x,_.y),this._ctx.clip()}this._drawing=!0;for(var E=this._drawFirst;E;E=E.next)f=E.layer,(!p||f._pxBounds&&f._pxBounds.intersects(p))&&f._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(f,p){if(this._drawing){var _,E,A,O,Y=f._parts,ee=Y.length,te=this._ctx;if(ee){for(te.beginPath(),_=0;_<ee;_++){for(E=0,A=Y[_].length;E<A;E++)O=Y[_][E],te[E?"lineTo":"moveTo"](O.x,O.y);p&&te.closePath()}this._fillStroke(te,f)}}},_updateCircle:function(f){if(!(!this._drawing||f._empty())){var p=f._point,_=this._ctx,E=Math.max(Math.round(f._radius),1),A=(Math.max(Math.round(f._radiusY),1)||E)/E;A!==1&&(_.save(),_.scale(1,A)),_.beginPath(),_.arc(p.x,p.y/A,E,0,Math.PI*2,!1),A!==1&&_.restore(),this._fillStroke(_,f)}},_fillStroke:function(f,p){var _=p.options;_.fill&&(f.globalAlpha=_.fillOpacity,f.fillStyle=_.fillColor||_.color,f.fill(_.fillRule||"evenodd")),_.stroke&&_.weight!==0&&(f.setLineDash&&f.setLineDash(p.options&&p.options._dashArray||[]),f.globalAlpha=_.opacity,f.lineWidth=_.weight,f.strokeStyle=_.color,f.lineCap=_.lineCap,f.lineJoin=_.lineJoin,f.stroke())},_onClick:function(f){for(var p=this._map.mouseEventToLayerPoint(f),_,E,A=this._drawFirst;A;A=A.next)_=A.layer,_.options.interactive&&_._containsPoint(p)&&(!(f.type==="click"||f.type==="preclick")||!this._map._draggableMoved(_))&&(E=_);this._fireEvent(E?[E]:!1,f)},_onMouseMove:function(f){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var p=this._map.mouseEventToLayerPoint(f);this._handleMouseHover(f,p)}},_handleMouseOut:function(f){var p=this._hoveredLayer;p&&(En(this._container,"leaflet-interactive"),this._fireEvent([p],f,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(f,p){if(!this._mouseHoverThrottled){for(var _,E,A=this._drawFirst;A;A=A.next)_=A.layer,_.options.interactive&&_._containsPoint(p)&&(E=_);E!==this._hoveredLayer&&(this._handleMouseOut(f),E&&(vt(this._container,"leaflet-interactive"),this._fireEvent([E],f,"mouseover"),this._hoveredLayer=E)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,f),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(f,p,_){this._map._fireDOMEvent(p,_||p.type,f)},_bringToFront:function(f){var p=f._order;if(p){var _=p.next,E=p.prev;if(_)_.prev=E;else return;E?E.next=_:_&&(this._drawFirst=_),p.prev=this._drawLast,this._drawLast.next=p,p.next=null,this._drawLast=p,this._requestRedraw(f)}},_bringToBack:function(f){var p=f._order;if(p){var _=p.next,E=p.prev;if(E)E.next=_;else return;_?_.prev=E:E&&(this._drawLast=E),p.prev=null,p.next=this._drawFirst,this._drawFirst.prev=p,this._drawFirst=p,this._requestRedraw(f)}}});function CL(f){return Ze.canvas?new SL(f):null}var gg=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(f){return document.createElement("<lvml:"+f+' class="lvml">')}}catch{}return function(f){return document.createElement("<"+f+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),lie={_initContainer:function(){this._container=Dt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(el.prototype._update.call(this),this.fire("update"))},_initPath:function(f){var p=f._container=gg("shape");vt(p,"leaflet-vml-shape "+(this.options.className||"")),p.coordsize="1 1",f._path=gg("path"),p.appendChild(f._path),this._updateStyle(f),this._layers[l(f)]=f},_addPath:function(f){var p=f._container;this._container.appendChild(p),f.options.interactive&&f.addInteractiveTarget(p)},_removePath:function(f){var p=f._container;dn(p),f.removeInteractiveTarget(p),delete this._layers[l(f)]},_updateStyle:function(f){var p=f._stroke,_=f._fill,E=f.options,A=f._container;A.stroked=!!E.stroke,A.filled=!!E.fill,E.stroke?(p||(p=f._stroke=gg("stroke")),A.appendChild(p),p.weight=E.weight+"px",p.color=E.color,p.opacity=E.opacity,E.dashArray?p.dashStyle=S(E.dashArray)?E.dashArray.join(" "):E.dashArray.replace(/( *, *)/g," "):p.dashStyle="",p.endcap=E.lineCap.replace("butt","flat"),p.joinstyle=E.lineJoin):p&&(A.removeChild(p),f._stroke=null),E.fill?(_||(_=f._fill=gg("fill")),A.appendChild(_),_.color=E.fillColor||E.color,_.opacity=E.fillOpacity):_&&(A.removeChild(_),f._fill=null)},_updateCircle:function(f){var p=f._point.round(),_=Math.round(f._radius),E=Math.round(f._radiusY||_);this._setPath(f,f._empty()?"M0 0":"AL "+p.x+","+p.y+" "+_+","+E+" 0,"+65535*360)},_setPath:function(f,p){f._path.v=p},_bringToFront:function(f){au(f._container)},_bringToBack:function(f){su(f._container)}},B1=Ze.vml?gg:tt,yg=el.extend({_initContainer:function(){this._container=B1("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=B1("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){dn(this._container),Qt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){el.prototype._update.call(this);var f=this._bounds,p=f.getSize(),_=this._container;(!this._svgSize||!this._svgSize.equals(p))&&(this._svgSize=p,_.setAttribute("width",p.x),_.setAttribute("height",p.y)),Mn(_,f.min),_.setAttribute("viewBox",[f.min.x,f.min.y,p.x,p.y].join(" ")),this.fire("update")}},_initPath:function(f){var p=f._path=B1("path");f.options.className&&vt(p,f.options.className),f.options.interactive&&vt(p,"leaflet-interactive"),this._updateStyle(f),this._layers[l(f)]=f},_addPath:function(f){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(f._path),f.addInteractiveTarget(f._path)},_removePath:function(f){dn(f._path),f.removeInteractiveTarget(f._path),delete this._layers[l(f)]},_updatePath:function(f){f._project(),f._update()},_updateStyle:function(f){var p=f._path,_=f.options;p&&(_.stroke?(p.setAttribute("stroke",_.color),p.setAttribute("stroke-opacity",_.opacity),p.setAttribute("stroke-width",_.weight),p.setAttribute("stroke-linecap",_.lineCap),p.setAttribute("stroke-linejoin",_.lineJoin),_.dashArray?p.setAttribute("stroke-dasharray",_.dashArray):p.removeAttribute("stroke-dasharray"),_.dashOffset?p.setAttribute("stroke-dashoffset",_.dashOffset):p.removeAttribute("stroke-dashoffset")):p.setAttribute("stroke","none"),_.fill?(p.setAttribute("fill",_.fillColor||_.color),p.setAttribute("fill-opacity",_.fillOpacity),p.setAttribute("fill-rule",_.fillRule||"evenodd")):p.setAttribute("fill","none"))},_updatePoly:function(f,p){this._setPath(f,Yt(f._parts,p))},_updateCircle:function(f){var p=f._point,_=Math.max(Math.round(f._radius),1),E=Math.max(Math.round(f._radiusY),1)||_,A="a"+_+","+E+" 0 1,0 ",O=f._empty()?"M0 0":"M"+(p.x-_)+","+p.y+A+_*2+",0 "+A+-_*2+",0 ";this._setPath(f,O)},_setPath:function(f,p){f._path.setAttribute("d",p)},_bringToFront:function(f){au(f._path)},_bringToBack:function(f){su(f._path)}});Ze.vml&&yg.include(lie);function EL(f){return Ze.svg||Ze.vml?new yg(f):null}C.include({getRenderer:function(f){var p=f.options.renderer||this._getPaneRenderer(f.options.pane)||this.options.renderer||this._renderer;return p||(p=this._renderer=this._createRenderer()),this.hasLayer(p)||this.addLayer(p),p},_getPaneRenderer:function(f){if(f==="overlayPane"||f===void 0)return!1;var p=this._paneRenderers[f];return p===void 0&&(p=this._createRenderer({pane:f}),this._paneRenderers[f]=p),p},_createRenderer:function(f){return this.options.preferCanvas&&CL(f)||EL(f)}});var kL=cu.extend({initialize:function(f,p){cu.prototype.initialize.call(this,this._boundsToLatLngs(f),p)},setBounds:function(f){return this.setLatLngs(this._boundsToLatLngs(f))},_boundsToLatLngs:function(f){return f=ge(f),[f.getSouthWest(),f.getNorthWest(),f.getNorthEast(),f.getSouthEast()]}});function uie(f,p){return new kL(f,p)}yg.create=B1,yg.pointsToPath=Yt,Pr.geometryToLayer=fu,Pr.coordsToLatLng=dE,Pr.coordsToLatLngs=O1,Pr.latLngToCoords=hE,Pr.latLngsToCoords=I1,Pr.getFeature=mh,Pr.asFeature=D1,C.mergeOptions({boxZoom:!0});var RL=ce.extend({initialize:function(f){this._map=f,this._container=f._container,this._pane=f._panes.overlayPane,this._resetStateTimeout=0,f.on("unload",this._destroy,this)},addHooks:function(){gt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Qt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){dn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(f){if(!f.shiftKey||f.which!==1&&f.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),lu(),rg(),this._startPoint=this._map.mouseEventToContainerPoint(f),gt(document,{contextmenu:Js,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(f){this._moved||(this._moved=!0,this._box=Dt("div","leaflet-zoom-box",this._container),vt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(f);var p=new oe(this._point,this._startPoint),_=p.getSize();Mn(this._box,p.min),this._box.style.width=_.x+"px",this._box.style.height=_.y+"px"},_finish:function(){this._moved&&(dn(this._box),En(this._container,"leaflet-crosshair")),uu(),uh(),Qt(document,{contextmenu:Js,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(f){if(!(f.which!==1&&f.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var p=new ke(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(p).fire("boxzoomend",{boxZoomBounds:p})}},_onKeyDown:function(f){f.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});C.addInitHook("addHandler","boxZoom",RL),C.mergeOptions({doubleClickZoom:!0});var TL=ce.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(f){var p=this._map,_=p.getZoom(),E=p.options.zoomDelta,A=f.originalEvent.shiftKey?_-E:_+E;p.options.doubleClickZoom==="center"?p.setZoom(A):p.setZoomAround(f.containerPoint,A)}});C.addInitHook("addHandler","doubleClickZoom",TL),C.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var AL=ce.extend({addHooks:function(){if(!this._draggable){var f=this._map;this._draggable=new Pe(f._mapPane,f._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),f.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),f.on("zoomend",this._onZoomEnd,this),f.whenReady(this._onZoomEnd,this))}vt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){En(this._map._container,"leaflet-grab"),En(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var f=this._map;if(f._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var p=ge(this._map.options.maxBounds);this._offsetLimit=me(this._map.latLngToContainerPoint(p.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(p.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;f.fire("movestart").fire("dragstart"),f.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(f){if(this._map.options.inertia){var p=this._lastTime=+new Date,_=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(_),this._times.push(p),this._prunePositions(p)}this._map.fire("move",f).fire("drag",f)},_prunePositions:function(f){for(;this._positions.length>1&&f-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var f=this._map.getSize().divideBy(2),p=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=p.subtract(f).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(f,p){return f-(f-p)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var f=this._draggable._newPos.subtract(this._draggable._startPos),p=this._offsetLimit;f.x<p.min.x&&(f.x=this._viscousLimit(f.x,p.min.x)),f.y<p.min.y&&(f.y=this._viscousLimit(f.y,p.min.y)),f.x>p.max.x&&(f.x=this._viscousLimit(f.x,p.max.x)),f.y>p.max.y&&(f.y=this._viscousLimit(f.y,p.max.y)),this._draggable._newPos=this._draggable._startPos.add(f)}},_onPreDragWrap:function(){var f=this._worldWidth,p=Math.round(f/2),_=this._initialWorldOffset,E=this._draggable._newPos.x,A=(E-p+_)%f+p-_,O=(E+p+_)%f-p-_,Y=Math.abs(A+_)<Math.abs(O+_)?A:O;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Y},_onDragEnd:function(f){var p=this._map,_=p.options,E=!_.inertia||f.noInertia||this._times.length<2;if(p.fire("dragend",f),E)p.fire("moveend");else{this._prunePositions(+new Date);var A=this._lastPos.subtract(this._positions[0]),O=(this._lastTime-this._times[0])/1e3,Y=_.easeLinearity,ee=A.multiplyBy(Y/O),te=ee.distanceTo([0,0]),he=Math.min(_.inertiaMaxSpeed,te),Le=ee.multiplyBy(he/te),ct=he/(_.inertiaDeceleration*Y),kt=Le.multiplyBy(-ct/2).round();!kt.x&&!kt.y?p.fire("moveend"):(kt=p._limitOffset(kt,p.options.maxBounds),z(function(){p.panBy(kt,{duration:ct,easeLinearity:Y,noMoveStart:!0,animate:!0})}))}}});C.addInitHook("addHandler","dragging",AL),C.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ML=ce.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(f){this._map=f,this._setPanDelta(f.options.keyboardPanDelta),this._setZoomDelta(f.options.zoomDelta)},addHooks:function(){var f=this._map._container;f.tabIndex<=0&&(f.tabIndex="0"),gt(f,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Qt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var f=document.body,p=document.documentElement,_=f.scrollTop||p.scrollTop,E=f.scrollLeft||p.scrollLeft;this._map._container.focus(),window.scrollTo(E,_)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(f){var p=this._panKeys={},_=this.keyCodes,E,A;for(E=0,A=_.left.length;E<A;E++)p[_.left[E]]=[-1*f,0];for(E=0,A=_.right.length;E<A;E++)p[_.right[E]]=[f,0];for(E=0,A=_.down.length;E<A;E++)p[_.down[E]]=[0,f];for(E=0,A=_.up.length;E<A;E++)p[_.up[E]]=[0,-1*f]},_setZoomDelta:function(f){var p=this._zoomKeys={},_=this.keyCodes,E,A;for(E=0,A=_.zoomIn.length;E<A;E++)p[_.zoomIn[E]]=f;for(E=0,A=_.zoomOut.length;E<A;E++)p[_.zoomOut[E]]=-f},_addHooks:function(){gt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Qt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(f){if(!(f.altKey||f.ctrlKey||f.metaKey)){var p=f.keyCode,_=this._map,E;if(p in this._panKeys){if(!_._panAnim||!_._panAnim._inProgress)if(E=this._panKeys[p],f.shiftKey&&(E=Q(E).multiplyBy(3)),_.options.maxBounds&&(E=_._limitOffset(Q(E),_.options.maxBounds)),_.options.worldCopyJump){var A=_.wrapLatLng(_.unproject(_.project(_.getCenter()).add(E)));_.panTo(A)}else _.panBy(E)}else if(p in this._zoomKeys)_.setZoom(_.getZoom()+(f.shiftKey?3:1)*this._zoomKeys[p]);else if(p===27&&_._popup&&_._popup.options.closeOnEscapeKey)_.closePopup();else return;Js(f)}}});C.addInitHook("addHandler","keyboard",ML),C.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var FL=ce.extend({addHooks:function(){gt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Qt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(f){var p=N1(f),_=this._map.options.wheelDebounceTime;this._delta+=p,this._lastMousePos=this._map.mouseEventToContainerPoint(f),this._startTime||(this._startTime=+new Date);var E=Math.max(_-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),E),Js(f)},_performZoom:function(){var f=this._map,p=f.getZoom(),_=this._map.options.zoomSnap||0;f._stop();var E=this._delta/(this._map.options.wheelPxPerZoomLevel*4),A=4*Math.log(2/(1+Math.exp(-Math.abs(E))))/Math.LN2,O=_?Math.ceil(A/_)*_:A,Y=f._limitZoom(p+(this._delta>0?O:-O))-p;this._delta=0,this._startTime=null,Y&&(f.options.scrollWheelZoom==="center"?f.setZoom(p+Y):f.setZoomAround(this._lastMousePos,p+Y))}});C.addInitHook("addHandler","scrollWheelZoom",FL);var cie=600;C.mergeOptions({tapHold:Ze.touchNative&&Ze.safari&&Ze.mobile,tapTolerance:15});var PL=ce.extend({addHooks:function(){gt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Qt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(f){if(clearTimeout(this._holdTimeout),f.touches.length===1){var p=f.touches[0];this._startPos=this._newPos=new H(p.clientX,p.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(gt(document,"touchend",Zn),gt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",p))},this),cie),gt(document,"touchend touchcancel contextmenu",this._cancel,this),gt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function f(){Qt(document,"touchend",Zn),Qt(document,"touchend touchcancel",f)},_cancel:function(){clearTimeout(this._holdTimeout),Qt(document,"touchend touchcancel contextmenu",this._cancel,this),Qt(document,"touchmove",this._onMove,this)},_onMove:function(f){var p=f.touches[0];this._newPos=new H(p.clientX,p.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(f,p){var _=new MouseEvent(f,{bubbles:!0,cancelable:!0,view:window,screenX:p.screenX,screenY:p.screenY,clientX:p.clientX,clientY:p.clientY});_._simulated=!0,p.target.dispatchEvent(_)}});C.addInitHook("addHandler","tapHold",PL),C.mergeOptions({touchZoom:Ze.touch,bounceAtZoomLimits:!0});var NL=ce.extend({addHooks:function(){vt(this._map._container,"leaflet-touch-zoom"),gt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){En(this._map._container,"leaflet-touch-zoom"),Qt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(f){var p=this._map;if(!(!f.touches||f.touches.length!==2||p._animatingZoom||this._zooming)){var _=p.mouseEventToContainerPoint(f.touches[0]),E=p.mouseEventToContainerPoint(f.touches[1]);this._centerPoint=p.getSize()._divideBy(2),this._startLatLng=p.containerPointToLatLng(this._centerPoint),p.options.touchZoom!=="center"&&(this._pinchStartLatLng=p.containerPointToLatLng(_.add(E)._divideBy(2))),this._startDist=_.distanceTo(E),this._startZoom=p.getZoom(),this._moved=!1,this._zooming=!0,p._stop(),gt(document,"touchmove",this._onTouchMove,this),gt(document,"touchend touchcancel",this._onTouchEnd,this),Zn(f)}},_onTouchMove:function(f){if(!(!f.touches||f.touches.length!==2||!this._zooming)){var p=this._map,_=p.mouseEventToContainerPoint(f.touches[0]),E=p.mouseEventToContainerPoint(f.touches[1]),A=_.distanceTo(E)/this._startDist;if(this._zoom=p.getScaleZoom(A,this._startZoom),!p.options.bounceAtZoomLimits&&(this._zoom<p.getMinZoom()&&A<1||this._zoom>p.getMaxZoom()&&A>1)&&(this._zoom=p._limitZoom(this._zoom)),p.options.touchZoom==="center"){if(this._center=this._startLatLng,A===1)return}else{var O=_._add(E)._divideBy(2)._subtract(this._centerPoint);if(A===1&&O.x===0&&O.y===0)return;this._center=p.unproject(p.project(this._pinchStartLatLng,this._zoom).subtract(O),this._zoom)}this._moved||(p._moveStart(!0,!1),this._moved=!0),X(this._animRequest);var Y=a(p._move,p,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=z(Y,this,!0),Zn(f)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,X(this._animRequest),Qt(document,"touchmove",this._onTouchMove,this),Qt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});C.addInitHook("addHandler","touchZoom",NL),C.BoxZoom=RL,C.DoubleClickZoom=TL,C.Drag=AL,C.Keyboard=ML,C.ScrollWheelZoom=FL,C.TapHold=PL,C.TouchZoom=NL,n.Bounds=oe,n.Browser=Ze,n.CRS=It,n.Canvas=SL,n.Circle=hg,n.CircleMarker=Ci,n.Class=U,n.Control=$,n.DivIcon=_L,n.DivOverlay=ns,n.DomEvent=sE,n.DomUtil=oE,n.Draggable=Pe,n.Evented=K,n.FeatureGroup=Fr,n.GeoJSON=Pr,n.GridLayer=mg,n.Handler=ce,n.Icon=Qs,n.ImageOverlay=L1,n.LatLng=Se,n.LatLngBounds=ke,n.Layer=Mr,n.LayerGroup=Qa,n.LineUtil=nt,n.Map=C,n.Marker=rf,n.Mixin=Ee,n.Path=ts,n.Point=H,n.PolyUtil=Fe,n.Polygon=cu,n.Polyline=Xt,n.Popup=j1,n.PosAnimation=dh,n.Projection=Si,n.Rectangle=kL,n.Renderer=el,n.SVG=yg,n.SVGOverlay=xL,n.TileLayer=gh,n.Tooltip=z1,n.Transformation=Be,n.Util=W,n.VideoOverlay=vL,n.bind=a,n.bounds=me,n.canvas=CL,n.circle=ph,n.circleMarker=dg,n.control=j,n.divIcon=oie,n.extend=r,n.featureGroup=uE,n.geoJSON=yL,n.geoJson=Qne,n.gridLayer=aie,n.icon=hh,n.imageOverlay=eie,n.latLng=Me,n.latLngBounds=ge,n.layerGroup=lE,n.map=P,n.marker=cE,n.point=Q,n.polygon=fE,n.polyline=$1,n.popup=iie,n.rectangle=uie,n.setOptions=y,n.stamp=l,n.svg=EL,n.svgOverlay=nie,n.tileLayer=bL,n.tooltip=rie,n.transformation=de,n.version=i,n.videoOverlay=tie;var fie=window.L;n.noConflict=function(){return window.L=fie,this},window.L=n})})(tF,tF.exports);var ae=tF.exports;function vne(e){return e.split(" ").filter(Boolean)}function tL(e,t){vne(t).forEach(n=>{ae.DomUtil.addClass(e,n)})}function xne(e,t){vne(t).forEach(n=>{ae.DomUtil.removeClass(e,n)})}function nze(e,t,n){e!=null&&n!==t&&(t!=null&&t.length>0&&xne(e,t),n!=null&&n.length>0&&tL(e,n))}function HC(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function Vm(e,t){return t==null?function(i,r){const o=F.useRef();return o.current||(o.current=e(i,r)),o}:function(i,r){const o=F.useRef();o.current||(o.current=e(i,r));const a=F.useRef(i),{instance:s}=o.current;return F.useEffect(function(){a.current!==i&&(t(s,i,a.current),a.current=i)},[s,i,r]),o}}function nL(e,t){F.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var o;(o=t.layerContainer)==null||o.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function iL(e){return function(n){const i=Jd(),r=e(l1(n,i),i);return KD(i.map,n.attribution),BC(r.current,n.eventHandlers),nL(r.current,i),r}}function _ne(e,t){const n=F.useRef();F.useEffect(function(){if(t.pathOptions!==n.current){const r=t.pathOptions??{};e.instance.setStyle(r),n.current=r}},[e,t])}function bne(e){return function(n){const i=Jd(),r=e(l1(n,i),i);return BC(r.current,n.eventHandlers),nL(r.current,i),_ne(r.current,n),r}}function ize(e){function t(r,o){return HC(e(r),o)}const n=Vm(t),i=gne(n);return eL(i)}function rze(e,t){const n=Vm(e,t),i=iL(n);return QD(i)}function oze(e,t){const n=Vm(e),i=yne(n,t);return mne(i)}function wne(e,t){const n=Vm(e,t),i=bne(n);return QD(i)}function Sne(e,t){const n=Vm(e,t),i=iL(n);return eL(i)}function Cne(e,t,n){const{opacity:i,zIndex:r}=t;i!=null&&i!==n.opacity&&e.setOpacity(i),r!=null&&r!==n.zIndex&&e.setZIndex(r)}function aze(e,t,n){t.bounds instanceof ae.LatLngBounds&&t.bounds!==n.bounds&&e.setBounds(t.bounds),t.opacity!=null&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),t.zIndex!=null&&t.zIndex!==n.zIndex&&e.setZIndex(t.zIndex)}const sze=Object.freeze(Object.defineProperty({__proto__:null,CONTEXT_VERSION:dne,LeafletContext:JD,LeafletProvider:zC,addClassName:tL,createContainerComponent:QD,createControlComponent:ize,createControlHook:gne,createDivOverlayComponent:mne,createDivOverlayHook:yne,createElementHook:Vm,createElementObject:HC,createLayerComponent:rze,createLayerHook:iL,createLeafComponent:eL,createLeafletContext:hne,createOverlayComponent:oze,createPathComponent:wne,createPathHook:bne,createTileLayerComponent:Sne,extendContext:pne,removeClassName:xne,updateCircle:tze,updateClassName:nze,updateGridLayer:Cne,updateMediaOverlay:aze,useAttribution:KD,useEventHandlers:BC,useLayerLifecycle:nL,useLeafletContext:Jd,usePathOptions:_ne,withPane:l1},Symbol.toStringTag,{value:"Module"}));function lze(){return Jd().map}const t0=wne(function({data:t,...n},i){const r=new ae.GeoJSON(t,n);return HC(r,pne(i,{overlayContainer:r}))},function(t,n,i){n.style!==i.style&&(n.style==null?t.resetStyle():t.setStyle(n.style))});function nF(){return nF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},nF.apply(this,arguments)}function uze({bounds:e,boundsOptions:t,center:n,children:i,className:r,id:o,placeholder:a,style:s,whenReady:l,zoom:u,...c},d){const[h]=F.useState({className:r,id:o,style:s}),[m,g]=F.useState(null);F.useImperativeHandle(d,()=>(m==null?void 0:m.map)??null,[m]);const y=F.useCallback(b=>{if(b!==null&&m===null){const w=new ae.Map(b,c);n!=null&&u!=null?w.setView(n,u):e!=null&&w.fitBounds(e,t),l!=null&&w.whenReady(l),g(hne(w))}},[]);F.useEffect(()=>()=>{m==null||m.map.remove()},[m]);const x=m?Nt.createElement(zC,{value:m},i):a??null;return Nt.createElement("div",nF({},h,{ref:y}),x)}const cze=F.forwardRef(uze),fze=["mapPane","markerPane","overlayPane","popupPane","shadowPane","tilePane","tooltipPane"];function c8(e,t){const{[t]:n,...i}=e;return i}function dze(e,t,n){if(fze.indexOf(e)!==-1)throw new Error(`You must use a unique name for a pane that is not a default Leaflet pane: ${e}`);if(n.map.getPane(e)!=null)throw new Error(`A pane with this name already exists: ${e}`);const i=t.pane??n.pane,r=i?n.map.getPane(i):void 0,o=n.map.createPane(e,r);return t.className!=null&&tL(o,t.className),t.style!=null&&Object.keys(t.style).forEach(a=>{o.style[a]=t.style[a]}),o}function hze(e,t){const[n]=F.useState(e.name),[i,r]=F.useState(null);F.useImperativeHandle(t,()=>i,[i]);const o=Jd(),a=F.useMemo(()=>({...o,pane:n}),[o]);return F.useEffect(()=>(r(dze(n,e,o)),function(){var u;const l=o.map.getPane(n);(u=l==null?void 0:l.remove)==null||u.call(l),o.map._panes!=null&&(o.map._panes=c8(o.map._panes,n),o.map._paneRenderers=c8(o.map._paneRenderers,n))}),[]),e.children!=null&&i!=null?_2.createPortal(Nt.createElement(zC,{value:a},e.children),i):null}const Kx=F.forwardRef(hze),f8=Sne(function({url:t,...n},i){const r=new ae.TileLayer(t,l1(n,i));return HC(r,i)},function(t,n,i){Cne(t,n,i);const{url:r}=n;r!=null&&r!==i.url&&t.setUrl(r)});var lo={},Qd={};const pze="esri-leaflet",mze="Leaflet plugins for consuming ArcGIS Online and ArcGIS Server services.",gze="3.0.12",yze="Patrick Arlt <parlt@esri.com> (http://patrickarlt.com)",vze={url:"https://github.com/esri/esri-leaflet/issues"},xze=["Patrick Arlt <parlt@esri.com> (http://patrickarlt.com)","John Gravois (https://johngravois.com)","Gavin Rehkemper <grehkemper@esri.com> (https://gavinr.com)","Jacob Wasilkowski (https://jwasilgeo.github.io)"],_ze={"@terraformer/arcgis":"^2.1.0","tiny-binary-search":"^1.0.3"},bze={"@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.1","@rollup/plugin-terser":"^0.3.0",chai:"4.3.7","chokidar-cli":"^3.0.0","gh-release":"^7.0.1","highlight.js":"^11.7.0","http-server":"^14.1.1",husky:"^1.1.1",karma:"^6.4.1","karma-chrome-launcher":"^3.1.1","karma-coverage":"^2.2.0","karma-edgium-launcher":"github:matracey/karma-edgium-launcher","karma-firefox-launcher":"^2.1.2","karma-mocha":"^2.0.1","karma-mocha-reporter":"^2.2.5","karma-safari-launcher":"~1.0.0","karma-sinon-chai":"^2.0.2","karma-sourcemap-loader":"^0.3.8",leaflet:"^1.6.0",mkdirp:"^1.0.4",mocha:"^10.2.0","npm-run-all":"^4.1.5",rollup:"^2.79.1",semistandard:"^14.2.3",sinon:"^15.0.1","sinon-chai":"3.7.0",snazzy:"^9.0.0"},wze=["src/**/*.js","dist/esri-leaflet.js","dist/esri-leaflet.js.map","dist/esri-leaflet-debug.js.map","dist/siteData.json","profiles/*.js"],Sze="https://developers.arcgis.com/esri-leaflet/",Cze="src/EsriLeaflet.js",Eze={registry:"npm",format:"es6",main:"src/EsriLeaflet.js"},kze=["arcgis","esri","esri leaflet","gis","leaflet plugin","mapping"],Rze="Apache-2.0",Tze="dist/esri-leaflet-debug.js",Aze={leaflet:"^1.0.0"},Mze="README.md",Fze={type:"git",url:"git@github.com:Esri/esri-leaflet.git"},Pze={build:"rollup -c profiles/debug.js & rollup -c profiles/production.js",lint:"semistandard | snazzy",prebuild:"mkdirp dist",pretest:"npm run build",fix:"semistandard --fix",release:"./scripts/release.sh","start-watch":'chokidar src -c "npm run build"',start:"run-p start-watch serve",serve:"http-server -p 5000 -c-1 -o",test:"npm run lint && karma start"},Nze={globals:["expect","L","XMLHttpRequest","sinon","xhr","proj4"]},$ze="dist/esri-leaflet-debug.js",Oze={hooks:{"pre-commit":"npm run lint"}},Ize={name:pze,description:mze,version:gze,author:yze,bugs:vze,contributors:xze,dependencies:_ze,devDependencies:bze,files:wze,homepage:Sze,module:Cze,"jsnext:main":"src/EsriLeaflet.js",jspm:Eze,keywords:kze,license:Rze,main:Tze,peerDependencies:Aze,readmeFilename:Mze,repository:Fze,scripts:Pze,semistandard:Nze,unpkg:$ze,husky:Oze};var UC=window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest,vu=document.documentElement.style.pointerEvents==="",Mu={cors:UC,pointerEvents:vu},Ene={attributionWidthOffset:55},d8=0;function WC(e){var t="";e.f=e.f||"json";for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=e[n],r=Object.prototype.toString.call(i),o;t.length&&(t+="&"),r==="[object Array]"?o=Object.prototype.toString.call(i[0])==="[object Object]"?JSON.stringify(i):i.join(","):r==="[object Object]"?o=JSON.stringify(i):r==="[object Date]"?o=i.valueOf():o=i,t+=encodeURIComponent(n)+"="+encodeURIComponent(o)}return t.replaceAll("'","%27")}function rL(e,t){var n=new window.XMLHttpRequest;return n.onerror=function(i){n.onreadystatechange=ae.Util.falseFn,e.call(t,{error:{code:500,message:"XMLHttpRequest error"}},null)},n.onreadystatechange=function(){var i,r;if(n.readyState===4){try{i=JSON.parse(n.responseText)}catch{i=null,r={code:500,message:"Could not parse response as JSON. This could also be caused by a CORS or XMLHttpRequest error."}}!r&&i.error&&(r=i.error,i=null),n.onerror=ae.Util.falseFn,e.call(t,r,i)}},n.ontimeout=function(){this.onerror()},n}function kne(e,t,n,i){var r=rL(n,i);return r.open("POST",e),typeof i<"u"&&i!==null&&typeof i.options<"u"&&(r.timeout=i.options.timeout),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),r.send(WC(t)),r}function Rne(e,t,n,i){var r=rL(n,i);return r.open("GET",e+"?"+WC(t),!0),typeof i<"u"&&i!==null&&typeof i.options<"u"&&(r.timeout=i.options.timeout,i.options.withCredentials&&(r.withCredentials=!0)),r.send(null),r}function oL(e,t,n,i){var r=WC(t),o=rL(n,i),a=(e+"?"+r).length;if(a<=2e3&&Mu.cors?o.open("GET",e+"?"+r):a>2e3&&Mu.cors&&(o.open("POST",e),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8")),typeof i<"u"&&i!==null&&typeof i.options<"u"&&(o.timeout=i.options.timeout,i.options.withCredentials&&(o.withCredentials=!0)),a<=2e3&&Mu.cors)o.send(null);else if(a>2e3&&Mu.cors)o.send(r);else{if(a<=2e3&&!Mu.cors)return aL(e,t,n,i);Rc("a request to "+e+" was longer then 2000 characters and this browser cannot make a cross-domain post request. Please use a proxy https://developers.arcgis.com/esri-leaflet/api-reference/request/");return}return o}function aL(e,t,n,i){window._EsriLeafletCallbacks=window._EsriLeafletCallbacks||{};var r="c"+d8;t.callback="window._EsriLeafletCallbacks."+r,window._EsriLeafletCallbacks[r]=function(a){if(window._EsriLeafletCallbacks[r]!==!0){var s,l=Object.prototype.toString.call(a);l==="[object Object]"||l==="[object Array]"||(s={error:{code:500,message:"Expected array or object as JSONP response"}},a=null),!s&&a.error&&(s=a,a=null),n.call(i,s,a),window._EsriLeafletCallbacks[r]=!0}};var o=ae.DomUtil.create("script",null,document.body);return o.type="text/javascript",o.src=e+"?"+WC(t),o.id=r,o.onerror=function(a){if(a&&window._EsriLeafletCallbacks[r]!==!0){var s={error:{code:500,message:"An unknown error occurred"}};n.call(i,s),window._EsriLeafletCallbacks[r]=!0}},ae.DomUtil.addClass(o,"esri-leaflet-jsonp"),d8++,{id:r,url:o.src,abort:function(){window._EsriLeafletCallbacks._callback[r]({code:0,message:"Request aborted."})}}}var GC=Mu.cors?Rne:aL;GC.CORS=Rne;GC.JSONP=aL;function Rc(){console&&console.warn&&console.warn.apply(console,arguments)}var e2={request:oL,get:GC,post:kne};/* @preserve
* @terraformer/arcgis - v2.1.1 - MIT
* Copyright (c) 2012-2022 Environmental Systems Research Institute, Inc.
* Tue Aug 02 2022 14:23:48 GMT-0700 (Pacific Daylight Time)
*/var Dze=function(t,n,i,r){var o=(r[0]-i[0])*(t[1]-i[1])-(r[1]-i[1])*(t[0]-i[0]),a=(n[0]-t[0])*(t[1]-i[1])-(n[1]-t[1])*(t[0]-i[0]),s=(r[1]-i[1])*(n[0]-t[0])-(r[0]-i[0])*(n[1]-t[1]);if(s!==0){var l=o/s,u=a/s;if(l>=0&&l<=1&&u>=0&&u<=1)return!0}return!1},Lze=function(t,n){for(var i=!1,r=-1,o=t.length,a=o-1;++r<o;a=r)(t[r][1]<=n[1]&&n[1]<t[a][1]||t[a][1]<=n[1]&&n[1]<t[r][1])&&n[0]<(t[a][0]-t[r][0])*(n[1]-t[r][1])/(t[a][1]-t[r][1])+t[r][0]&&(i=!i);return i},jze=function(t,n){for(var i=0;i<t.length;i++)if(t[i]!==n[i])return!1;return!0},Tne=function(t,n){for(var i=0;i<t.length-1;i++)for(var r=0;r<n.length-1;r++)if(Dze(t[i],t[i+1],n[r],n[r+1]))return!0;return!1},iF=function(t){return jze(t[0],t[t.length-1])||t.push(t[0]),t},rF=function(t){var n=0,i=0,r=t.length,o=t[i],a;for(i;i<r-1;i++)a=t[i+1],n+=(a[0]-o[0])*(a[1]+o[1]),o=a;return n>=0},Ane=function(t){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n},zze=function(t,n){var i=Tne(t,n),r=Lze(t,n[0]);return!!(!i&&r)},Bze=function(t){for(var n=[],i=[],r,o,a,s=0;s<t.length;s++){var l=iF(t[s].slice(0));if(!(l.length<4))if(rF(l)){var u=[l.slice().reverse()];n.push(u)}else i.push(l.slice().reverse())}for(var c=[];i.length;){a=i.pop();var d=!1;for(r=n.length-1;r>=0;r--)if(o=n[r][0],zze(o,a)){n[r].push(a),d=!0;break}d||c.push(a)}for(;c.length;){a=c.pop();var h=!1;for(r=n.length-1;r>=0;r--)if(o=n[r][0],Tne(o,a)){n[r].push(a),h=!0;break}h||n.push([a.reverse()])}return n.length===1?{type:"Polygon",coordinates:n[0]}:{type:"MultiPolygon",coordinates:n}},Hze=function(t,n){for(var i=n?[n,"OBJECTID","FID"]:["OBJECTID","FID"],r=0;r<i.length;r++){var o=i[r];if(o in t&&(typeof t[o]=="string"||typeof t[o]=="number"))return t[o]}throw Error("No valid id attribute found")},Uze=function e(t,n){var i={};if(t.features){i.type="FeatureCollection",i.features=[];for(var r=0;r<t.features.length;r++)i.features.push(e(t.features[r],n))}if(typeof t.x=="number"&&typeof t.y=="number"&&(i.type="Point",i.coordinates=[t.x,t.y],typeof t.z=="number"&&i.coordinates.push(t.z)),t.points&&(i.type="MultiPoint",i.coordinates=t.points.slice(0)),t.paths&&(t.paths.length===1?(i.type="LineString",i.coordinates=t.paths[0].slice(0)):(i.type="MultiLineString",i.coordinates=t.paths.slice(0))),t.rings&&(i=Bze(t.rings.slice(0))),typeof t.xmin=="number"&&typeof t.ymin=="number"&&typeof t.xmax=="number"&&typeof t.ymax=="number"&&(i.type="Polygon",i.coordinates=[[[t.xmax,t.ymax],[t.xmin,t.ymax],[t.xmin,t.ymin],[t.xmax,t.ymin],[t.xmax,t.ymax]]]),(t.geometry||t.attributes)&&(i.type="Feature",i.geometry=t.geometry?e(t.geometry):null,i.properties=t.attributes?Ane(t.attributes):null,t.attributes))try{i.id=Hze(t.attributes,n)}catch{}return JSON.stringify(i.geometry)===JSON.stringify({})&&(i.geometry=null),t.spatialReference&&t.spatialReference.wkid&&t.spatialReference.wkid!==4326&&console.warn("Object converted in non-standard crs - "+JSON.stringify(t.spatialReference)),i},Mne=function(t){var n=[],i=t.slice(0),r=iF(i.shift().slice(0));if(r.length>=4){rF(r)||r.reverse(),n.push(r);for(var o=0;o<i.length;o++){var a=iF(i[o].slice(0));a.length>=4&&(rF(a)&&a.reverse(),n.push(a))}}return n},Wze=function(t){for(var n=[],i=0;i<t.length;i++)for(var r=Mne(t[i]),o=r.length-1;o>=0;o--){var a=r[o].slice(0);n.push(a)}return n},Gze=function e(t,n){n=n||"OBJECTID";var i={wkid:4326},r={},o;switch(t.type){case"Point":r.x=t.coordinates[0],r.y=t.coordinates[1],t.coordinates[2]!=null&&(r.z=t.coordinates[2]),r.spatialReference=i;break;case"MultiPoint":r.points=t.coordinates.slice(0),t.coordinates[0][2]!=null&&(r.hasZ=!0),r.spatialReference=i;break;case"LineString":r.paths=[t.coordinates.slice(0)],t.coordinates[0][2]!=null&&(r.hasZ=!0),r.spatialReference=i;break;case"MultiLineString":r.paths=t.coordinates.slice(0),t.coordinates[0][0][2]!=null&&(r.hasZ=!0),r.spatialReference=i;break;case"Polygon":r.rings=Mne(t.coordinates.slice(0)),t.coordinates[0][0][2]!=null&&(r.hasZ=!0),r.spatialReference=i;break;case"MultiPolygon":r.rings=Wze(t.coordinates.slice(0)),t.coordinates[0][0][0][2]!=null&&(r.hasZ=!0),r.spatialReference=i;break;case"Feature":t.geometry&&(r.geometry=e(t.geometry,n)),r.attributes=t.properties?Ane(t.properties):{},t.id&&(r.attributes[n]=t.id);break;case"FeatureCollection":for(r=[],o=0;o<t.features.length;o++)r.push(e(t.features[o],n));break;case"GeometryCollection":for(r=[],o=0;o<t.geometries.length;o++)r.push(e(t.geometries[o],n));break}return r},qze='Powered by <a href="https://www.esri.com">Esri</a>';function cv(e,t){return Gze(e,t)}function Fne(e,t){return Uze(e,t)}function oF(e){if(e.xmin!=="NaN"&&e.ymin!=="NaN"&&e.xmax!=="NaN"&&e.ymax!=="NaN"){var t=ae.latLng(e.ymin,e.xmin),n=ae.latLng(e.ymax,e.xmax);return ae.latLngBounds(t,n)}else return null}function sL(e){return e=ae.latLngBounds(e),{xmin:e.getSouthWest().lng,ymin:e.getSouthWest().lat,xmax:e.getNorthEast().lng,ymax:e.getNorthEast().lat,spatialReference:{wkid:4326}}}var Pne=/^(OBJECTID|FID|OID|ID)$/i;function Nne(e){var t;if(e.objectIdFieldName)t=e.objectIdFieldName;else if(e.fields){for(var n=0;n<=e.fields.length-1;n++)if(e.fields[n].type==="esriFieldTypeOID"){t=e.fields[n].name;break}if(!t){for(n=0;n<=e.fields.length-1;n++)if(e.fields[n].name.match(Pne)){t=e.fields[n].name;break}}}return t}function $ne(e){for(var t in e.attributes)if(t.match(Pne))return t}function u1(e,t){var n,i=e.features||e.results,r=i&&i.length;t?n=t:n=Nne(e);var o={type:"FeatureCollection",features:[]};if(r)for(var a=i.length-1;a>=0;a--){var s=Fne(i[a],n||$ne(i[a]));o.features.push(s)}return o}function qC(e){return e=ae.Util.trim(e),e[e.length-1]!=="/"&&(e+="/"),e}function eh(e){if(e.url.indexOf("?")!==-1){e.requestParams=e.requestParams||{};var t=e.url.substring(e.url.indexOf("?")+1);e.url=e.url.split("?")[0],e.requestParams=JSON.parse('{"'+decodeURI(t).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')}return e.url=qC(e.url.split("?")[0]),e}function One(e){return/^(?!.*utility\.arcgis\.com).*\.arcgis\.com.*FeatureServer/i.test(e)}function aF(e){var t;switch(e){case"Point":t="esriGeometryPoint";break;case"MultiPoint":t="esriGeometryMultipoint";break;case"LineString":t="esriGeometryPolyline";break;case"MultiLineString":t="esriGeometryPolyline";break;case"Polygon":t="esriGeometryPolygon";break;case"MultiPolygon":t="esriGeometryPolygon";break}return t}function t2(e){return e.getSize().x-Ene.attributionWidthOffset+"px"}function c1(e){if(e.attributionControl){if(e.attributionControl._esriAttributionLayerCount||(e.attributionControl._esriAttributionLayerCount=0),e.attributionControl._esriAttributionLayerCount===0){if(!e.attributionControl._esriAttributionAddedOnce){var t=document.createElement("style");t.type="text/css",t.innerHTML=".esri-truncated-attribution:hover {white-space: normal;}",document.getElementsByTagName("head")[0].appendChild(t);var n=document.createElement("style");n.type="text/css",n.innerHTML=".esri-truncated-attribution {vertical-align: -3px;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;display: inline-block;transition: 0s white-space;transition-delay: 1s;max-width: "+t2(e)+";}",document.getElementsByTagName("head")[0].appendChild(n),e.on("resize",function(i){e.attributionControl&&(e.attributionControl._container.style.maxWidth=t2(i.target))}),e.attributionControl._esriAttributionAddedOnce=!0}ae.DomUtil.addClass(e.attributionControl._container,"esri-truncated-attribution:hover"),ae.DomUtil.addClass(e.attributionControl._container,"esri-truncated-attribution")}e.attributionControl._esriAttributionLayerCount=e.attributionControl._esriAttributionLayerCount+1}}function f1(e){e.attributionControl&&(e.attributionControl._esriAttributionLayerCount&&e.attributionControl._esriAttributionLayerCount===1&&(ae.DomUtil.removeClass(e.attributionControl._container,"esri-truncated-attribution:hover"),ae.DomUtil.removeClass(e.attributionControl._container,"esri-truncated-attribution")),e.attributionControl._esriAttributionLayerCount=e.attributionControl._esriAttributionLayerCount-1)}function lL(e){var t={geometry:null,geometryType:null};if(e instanceof ae.LatLngBounds)return t.geometry=sL(e),t.geometryType="esriGeometryEnvelope",t;if(e.getLatLng&&(e=e.getLatLng()),e instanceof ae.LatLng&&(e={type:"Point",coordinates:[e.lng,e.lat]}),e instanceof ae.GeoJSON&&(e=e.getLayers()[0].feature.geometry,t.geometry=cv(e),t.geometryType=aF(e.type)),e.toGeoJSON&&(e=e.toGeoJSON()),e.type==="Feature"&&(e=e.geometry),e.type==="Point"||e.type==="LineString"||e.type==="Polygon"||e.type==="MultiPolygon")return t.geometry=cv(e),t.geometryType=aF(e.type),t;Rc("invalid geometry passed to spatial query. Should be L.LatLng, L.LatLngBounds, L.Marker or a GeoJSON Point, Line, Polygon or MultiPolygon object")}function Ine(e,t){Mu.cors&&oL(e,{},ae.Util.bind(function(n,i){if(!n){t._esriAttributions=[];for(var r=0;r<i.contributors.length;r++)for(var o=i.contributors[r],a=0;a<o.coverageAreas.length;a++){var s=o.coverageAreas[a],l=ae.latLng(s.bbox[0],s.bbox[1]),u=ae.latLng(s.bbox[2],s.bbox[3]);t._esriAttributions.push({attribution:o.attribution,score:s.score,bounds:ae.latLngBounds(l,u),minZoom:s.zoomMin,maxZoom:s.zoomMax})}t._esriAttributions.sort(function(d,h){return h.score-d.score});var c={target:t};n2(c)}},this))}function n2(e){var t=e.target,n=t._esriAttributions;if(!(!t||!t.attributionControl)){var i=t.attributionControl._container.querySelector(".esri-dynamic-attribution");if(i&&n){for(var r="",o=t.getBounds(),a=ae.latLngBounds(o.getSouthWest().wrap(),o.getNorthEast().wrap()),s=t.getZoom(),l=0;l<n.length;l++){var u=n[l],c=u.attribution;!r.match(c)&&u.bounds.intersects(a)&&s>=u.minZoom&&s<=u.maxZoom&&(r+=", "+c)}r=qze+" | "+r.substr(2),i.innerHTML=r,i.style.maxWidth=t2(t),t.fire("attributionupdated",{attribution:r})}}}var Vze={warn:Rc,cleanUrl:qC,getUrlParams:eh,isArcgisOnline:One,geojsonTypeToArcGIS:aF,responseToFeatureCollection:u1,geojsonToArcGIS:cv,arcgisToGeoJSON:Fne,boundsToExtent:sL,extentToBounds:oF,calcAttributionWidth:t2,setEsriAttribution:c1,removeEsriAttribution:f1,_setGeometry:lL,_getAttributionData:Ine,_updateMapAttribution:n2,_findIdAttributeFromFeature:$ne,_findIdAttributeFromResponse:Nne},d1=ae.Class.extend({options:{proxy:!1,useCors:UC},generateSetter:function(e,t){return ae.Util.bind(function(n){return this.params[e]=n,this},t)},initialize:function(e){if(e.request&&e.options?(this._service=e,ae.Util.setOptions(this,e.options)):(ae.Util.setOptions(this,e),this.options.url=qC(e.url)),this.params=ae.Util.extend({},this.params||{}),this.setters)for(var t in this.setters){var n=this.setters[t];this[t]=this.generateSetter(n,this)}},token:function(e){return this._service?this._service.authenticate(e):this.params.token=e,this},apikey:function(e){return this.token(e)},format:function(e){return this.params.returnUnformattedValues=!e,this},request:function(e,t){return this.options.requestParams&&ae.Util.extend(this.params,this.options.requestParams),this._service?this._service.request(this.path,this.params,e,t):this._request("request",this.path,this.params,e,t)},_request:function(e,t,n,i,r){var o=this.options.proxy?this.options.proxy+"?"+this.options.url+t:this.options.url+t;return(e==="get"||e==="request")&&!this.options.useCors?e2.get.JSONP(o,n,i,r):e2[e](o,n,i,r)}});function Yze(e){return e=eh(e),new d1(e)}var Dne=d1.extend({setters:{offset:"resultOffset",limit:"resultRecordCount",fields:"outFields",precision:"geometryPrecision",featureIds:"objectIds",returnGeometry:"returnGeometry",returnM:"returnM",transform:"datumTransformation",token:"token"},path:"query",params:{returnGeometry:!0,where:"1=1",outSR:4326,outFields:"*"},within:function(e){return this._setGeometryParams(e),this.params.spatialRel="esriSpatialRelContains",this},intersects:function(e){return this._setGeometryParams(e),this.params.spatialRel="esriSpatialRelIntersects",this},contains:function(e){return this._setGeometryParams(e),this.params.spatialRel="esriSpatialRelWithin",this},crosses:function(e){return this._setGeometryParams(e),this.params.spatialRel="esriSpatialRelCrosses",this},touches:function(e){return this._setGeometryParams(e),this.params.spatialRel="esriSpatialRelTouches",this},overlaps:function(e){return this._setGeometryParams(e),this.params.spatialRel="esriSpatialRelOverlaps",this},bboxIntersects:function(e){return this._setGeometryParams(e),this.params.spatialRel="esriSpatialRelEnvelopeIntersects",this},indexIntersects:function(e){return this._setGeometryParams(e),this.params.spatialRel="esriSpatialRelIndexIntersects",this},nearby:function(e,t){return e=ae.latLng(e),this.params.geometry=[e.lng,e.lat],this.params.geometryType="esriGeometryPoint",this.params.spatialRel="esriSpatialRelIntersects",this.params.units="esriSRUnit_Meter",this.params.distance=t,this.params.inSR=4326,this},where:function(e){return this.params.where=e,this},between:function(e,t){return this.params.time=[e.valueOf(),t.valueOf()],this},simplify:function(e,t){var n=Math.abs(e.getBounds().getWest()-e.getBounds().getEast());return this.params.maxAllowableOffset=n/e.getSize().y*t,this},orderBy:function(e,t){return t=t||"ASC",this.params.orderByFields=this.params.orderByFields?this.params.orderByFields+",":"",this.params.orderByFields+=[e,t].join(" "),this},run:function(e,t){return this._cleanParams(),this.options.isModern||One(this.options.url)&&this.options.isModern===void 0?(this.params.f="geojson",this.request(function(n,i){this._trapSQLerrors(n),e.call(t,n,i,i)},this)):this.request(function(n,i){this._trapSQLerrors(n),e.call(t,n,i&&u1(i),i)},this)},count:function(e,t){return this._cleanParams(),this.params.returnCountOnly=!0,this.request(function(n,i){e.call(this,n,i&&i.count,i)},t)},ids:function(e,t){return this._cleanParams(),this.params.returnIdsOnly=!0,this.request(function(n,i){e.call(this,n,i&&i.objectIds,i)},t)},bounds:function(e,t){return this._cleanParams(),this.params.returnExtentOnly=!0,this.request(function(n,i){i&&i.extent&&oF(i.extent)?e.call(t,n,oF(i.extent),i):(n={message:"Invalid Bounds"},e.call(t,n,null,i))},t)},distinct:function(){return this.params.returnGeometry=!1,this.params.returnDistinctValues=!0,this},pixelSize:function(e){var t=ae.point(e);return this.params.pixelSize=[t.x,t.y],this},layer:function(e){return this.path=e+"/query",this},_trapSQLerrors:function(e){e&&e.code==="400"&&Rc("one common syntax error in query requests is encasing string values in double quotes instead of single quotes")},_cleanParams:function(){delete this.params.returnIdsOnly,delete this.params.returnExtentOnly,delete this.params.returnCountOnly},_setGeometryParams:function(e){this.params.inSR=4326;var t=lL(e);this.params.geometry=t.geometry,this.params.geometryType=t.geometryType}});function VC(e){return new Dne(e)}var Lne=d1.extend({setters:{contains:"contains",text:"searchText",fields:"searchFields",spatialReference:"sr",sr:"sr",layers:"layers",returnGeometry:"returnGeometry",maxAllowableOffset:"maxAllowableOffset",precision:"geometryPrecision",dynamicLayers:"dynamicLayers",returnZ:"returnZ",returnM:"returnM",gdbVersion:"gdbVersion",token:"token"},path:"find",params:{sr:4326,contains:!0,returnGeometry:!0,returnZ:!0,returnM:!1},layerDefs:function(e,t){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[e,t].join(":"),this},simplify:function(e,t){var n=Math.abs(e.getBounds().getWest()-e.getBounds().getEast());return this.params.maxAllowableOffset=n/e.getSize().y*t,this},run:function(e,t){return this.request(function(n,i){e.call(t,n,i&&u1(i),i)},t)}});function jne(e){return new Lne(e)}var YC=d1.extend({path:"identify",between:function(e,t){return this.params.time=[e.valueOf(),t.valueOf()],this}});function Zze(e){return new YC(e)}var zne=YC.extend({setters:{layers:"layers",precision:"geometryPrecision",tolerance:"tolerance",returnGeometry:"returnGeometry"},params:{sr:4326,layers:"all",tolerance:3,returnGeometry:!0},on:function(e){var t=sL(e.getBounds()),n=e.getSize();return this.params.imageDisplay=[n.x,n.y,96],this.params.mapExtent=[t.xmin,t.ymin,t.xmax,t.ymax],this},at:function(e){return e.length===2&&(e=ae.latLng(e)),this._setGeometryParams(e),this},layerDef:function(e,t){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[e,t].join(":"),this},simplify:function(e,t){var n=Math.abs(e.getBounds().getWest()-e.getBounds().getEast());return this.params.maxAllowableOffset=n/e.getSize().y*t,this},run:function(e,t){return this.request(function(n,i){if(n)e.call(t,n,void 0,i);else{var r=u1(i);i.results=i.results.reverse();for(var o=0;o<r.features.length;o++){var a=r.features[o];a.layerId=i.results[o].layerId}e.call(t,void 0,r,i)}})},_setGeometryParams:function(e){var t=lL(e);this.params.geometry=t.geometry,this.params.geometryType=t.geometryType}});function Bne(e){return new zne(e)}var Hne=YC.extend({setters:{setMosaicRule:"mosaicRule",setRenderingRule:"renderingRule",setPixelSize:"pixelSize",returnCatalogItems:"returnCatalogItems",returnGeometry:"returnGeometry"},params:{returnGeometry:!1},at:function(e){return e=ae.latLng(e),this.params.geometry=JSON.stringify({x:e.lng,y:e.lat,spatialReference:{wkid:4326}}),this.params.geometryType="esriGeometryPoint",this},getMosaicRule:function(){return this.params.mosaicRule},getRenderingRule:function(){return this.params.renderingRule},getPixelSize:function(){return this.params.pixelSize},run:function(e,t){return this.request(function(n,i){e.call(t,n,i&&this._responseToGeoJSON(i),i)},this)},_responseToGeoJSON:function(e){var t=e.location,n=e.catalogItems,i=e.catalogItemVisibilities,r={pixel:{type:"Feature",geometry:{type:"Point",coordinates:[t.x,t.y]},crs:{type:"EPSG",properties:{code:t.spatialReference.wkid}},properties:{OBJECTID:e.objectId,name:e.name,value:e.value},id:e.objectId}};if(e.properties&&e.properties.Values&&(r.pixel.properties.values=e.properties.Values),n&&n.features&&(r.catalogItems=u1(n),i&&i.length===r.catalogItems.features.length))for(var o=i.length-1;o>=0;o--)r.catalogItems.features[o].properties.catalogItemVisibility=i[o];return r}});function Une(e){return new Hne(e)}var h1=ae.Evented.extend({options:{proxy:!1,useCors:UC,timeout:0},initialize:function(e){e=e||{},this._requestQueue=[],this._authenticating=!1,ae.Util.setOptions(this,e),this.options.url=qC(this.options.url)},get:function(e,t,n,i){return this._request("get",e,t,n,i)},post:function(e,t,n,i){return this._request("post",e,t,n,i)},request:function(e,t,n,i){return this._request("request",e,t,n,i)},metadata:function(e,t){return this._request("get","",{},e,t)},authenticate:function(e){return this._authenticating=!1,this.options.token=e,this._runQueue(),this},getTimeout:function(){return this.options.timeout},setTimeout:function(e){this.options.timeout=e},_request:function(e,t,n,i,r){this.fire("requeststart",{url:this.options.url+t,params:n,method:e},!0);var o=this._createServiceCallback(e,t,n,i,r);if(this.options.token&&(n.token=this.options.token),this.options.requestParams&&ae.Util.extend(n,this.options.requestParams),this._authenticating)this._requestQueue.push([e,t,n,i,r]);else{var a=this.options.proxy?this.options.proxy+"?"+this.options.url+t:this.options.url+t;return(e==="get"||e==="request")&&!this.options.useCors?e2.get.JSONP(a,n,o,r):e2[e](a,n,o,r)}},_createServiceCallback:function(e,t,n,i,r){return ae.Util.bind(function(o,a){o&&(o.code===499||o.code===498)&&(this._authenticating=!0,this._requestQueue.push([e,t,n,i,r]),this.fire("authenticationrequired",{authenticate:ae.Util.bind(this.authenticate,this)},!0),o.authenticate=ae.Util.bind(this.authenticate,this)),i.call(r,o,a),o?this.fire("requesterror",{url:this.options.url+t,params:n,message:o.message,code:o.code,method:e},!0):this.fire("requestsuccess",{url:this.options.url+t,params:n,response:a,method:e},!0),this.fire("requestend",{url:this.options.url+t,params:n,method:e},!0)},this)},_runQueue:function(){for(var e=this._requestQueue.length-1;e>=0;e--){var t=this._requestQueue[e],n=t.shift();this[n].apply(this,t)}this._requestQueue=[]}});function Xze(e){return e=eh(e),new h1(e)}var Wne=h1.extend({identify:function(){return Bne(this)},find:function(){return jne(this)},query:function(){return VC(this)}});function uL(e){return new Wne(e)}var Gne=h1.extend({query:function(){return VC(this)},identify:function(){return Une(this)}});function qne(e){return new Gne(e)}var Vne=h1.extend({options:{idAttribute:"OBJECTID"},query:function(){return VC(this)},addFeature:function(e,t,n){this.addFeatures(e,t,n)},addFeatures:function(e,t,n){for(var i=e.features?e.features:[e],r=i.length-1;r>=0;r--)delete i[r].id;return e=cv(e),e=i.length>1?e:[e],this.post("addFeatures",{features:e},function(o,a){var s=a&&a.addResults?a.addResults.length>1?a.addResults:a.addResults[0]:void 0;t&&t.call(n,o||a.addResults[0].error,s)},n)},updateFeature:function(e,t,n){this.updateFeatures(e,t,n)},updateFeatures:function(e,t,n){var i=e.features?e.features:[e];return e=cv(e,this.options.idAttribute),e=i.length>1?e:[e],this.post("updateFeatures",{features:e},function(r,o){var a=o&&o.updateResults?o.updateResults.length>1?o.updateResults:o.updateResults[0]:void 0;t&&t.call(n,r||o.updateResults[0].error,a)},n)},deleteFeature:function(e,t,n){this.deleteFeatures(e,t,n)},deleteFeatures:function(e,t,n){return this.post("deleteFeatures",{objectIds:e},function(i,r){var o=r&&r.deleteResults?r.deleteResults.length>1?r.deleteResults:r.deleteResults[0]:void 0;t&&t.call(n,i||r.deleteResults[0].error,o)},n)}});function Yne(e){return new Vne(e)}var Gn=window.location.protocol!=="https:"?"http:":"https:",i2=ae.TileLayer.extend({statics:{TILES:{Streets:{urlTemplate:Gn+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Street_Map"}},Topographic:{urlTemplate:Gn+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Topo_Map"}},Oceans:{urlTemplate:Gn+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/Ocean_Basemap"}},OceansLabels:{urlTemplate:Gn+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:vu?"esri-labels":"tilePane",attribution:""}},NationalGeographic:{urlTemplate:Gn+"//{s}.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"National Geographic, DeLorme, HERE, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, increment P Corp."}},DarkGray:{urlTemplate:Gn+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},DarkGrayLabels:{urlTemplate:Gn+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:vu?"esri-labels":"tilePane",attribution:""}},Gray:{urlTemplate:Gn+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},GrayLabels:{urlTemplate:Gn+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:vu?"esri-labels":"tilePane",attribution:""}},Imagery:{urlTemplate:Gn+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"DigitalGlobe, GeoEye, i-cubed, USDA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community",attributionUrl:"https://static.arcgis.com/attribution/World_Imagery"}},ImageryLabels:{urlTemplate:Gn+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:vu?"esri-labels":"tilePane",attribution:""}},ImageryTransportation:{urlTemplate:Gn+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Transportation/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:vu?"esri-labels":"tilePane",attribution:""}},ShadedRelief:{urlTemplate:Gn+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS"}},ShadedReliefLabels:{urlTemplate:Gn+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places_Alternate/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:12,subdomains:["server","services"],pane:vu?"esri-labels":"tilePane",attribution:""}},Terrain:{urlTemplate:Gn+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS, NOAA"}},TerrainLabels:{urlTemplate:Gn+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],pane:vu?"esri-labels":"tilePane",attribution:""}},USATopo:{urlTemplate:Gn+"//{s}.arcgisonline.com/ArcGIS/rest/services/USA_Topo_Maps/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:15,subdomains:["server","services"],attribution:"USGS, National Geographic Society, i-cubed"}},ImageryClarity:{urlTemplate:Gn+"//clarity.maptiles.arcgis.com/arcgis/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,attribution:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community"}},Physical:{urlTemplate:Gn+"//{s}.arcgisonline.com/arcgis/rest/services/World_Physical_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:8,subdomains:["server","services"],attribution:"U.S. National Park Service"}},ImageryFirefly:{urlTemplate:Gn+"//fly.maptiles.arcgis.com/arcgis/rest/services/World_Imagery_Firefly/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,attribution:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community",attributionUrl:"https://static.arcgis.com/attribution/World_Imagery"}}}},initialize:function(e,t){var n;if(typeof e=="object"&&e.urlTemplate&&e.options)n=e;else if(typeof e=="string"&&i2.TILES[e])n=i2.TILES[e];else throw new Error('L.esri.BasemapLayer: Invalid parameter. Use one of "Streets", "Topographic", "Oceans", "OceansLabels", "NationalGeographic", "Physical", "Gray", "GrayLabels", "DarkGray", "DarkGrayLabels", "Imagery", "ImageryLabels", "ImageryTransportation", "ImageryClarity", "ImageryFirefly", ShadedRelief", "ShadedReliefLabels", "Terrain", "TerrainLabels" or "USATopo"');var i=ae.Util.extend(n.options,t);ae.Util.setOptions(this,i),this.options.ignoreDeprecationWarning||console.warn("WARNING: L.esri.BasemapLayer uses data services that are in mature support and are not being updated. Please use L.esri.Vector.vectorBasemapLayer instead. More info: https://esriurl.com/esri-leaflet-basemap"),this.options.token&&n.urlTemplate.indexOf("token=")===-1&&(n.urlTemplate+="?token="+this.options.token),this.options.proxy&&(n.urlTemplate=this.options.proxy+"?"+n.urlTemplate),ae.TileLayer.prototype.initialize.call(this,n.urlTemplate,i)},onAdd:function(e){c1(e),this.options.pane==="esri-labels"&&this._initPane(),this.options.attributionUrl&&Ine((this.options.proxy?this.options.proxy+"?":"")+this.options.attributionUrl,e),e.on("moveend",n2),ae.TileLayer.prototype.onAdd.call(this,e)},onRemove:function(e){f1(e),e.off("moveend",n2),ae.TileLayer.prototype.onRemove.call(this,e)},_initPane:function(){if(!this._map.getPane(this.options.pane)){var e=this._map.createPane(this.options.pane);e.style.pointerEvents="none",e.style.zIndex=500}},getAttribution:function(){if(this.options.attribution)var e='<span class="esri-dynamic-attribution">'+this.options.attribution+"</span>";return e}});function Kze(e,t){return new i2(e,t)}var cL=ae.TileLayer.extend({options:{zoomOffsetAllowance:.1,errorTileUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEABAMAAACuXLVVAAAAA1BMVEUzNDVszlHHAAAAAXRSTlMAQObYZgAAAAlwSFlzAAAAAAAAAAAB6mUWpAAAADZJREFUeJztwQEBAAAAgiD/r25IQAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA7waBAAABw08RwAAAAABJRU5ErkJggg=="},statics:{MercatorZoomLevels:{0:156543.033928,1:78271.5169639999,2:39135.7584820001,3:19567.8792409999,4:9783.93962049996,5:4891.96981024998,6:2445.98490512499,7:1222.99245256249,8:611.49622628138,9:305.748113140558,10:152.874056570411,11:76.4370282850732,12:38.2185141425366,13:19.1092570712683,14:9.55462853563415,15:4.77731426794937,16:2.38865713397468,17:1.19432856685505,18:.597164283559817,19:.298582141647617,20:.14929107082381,21:.07464553541191,22:.0373227677059525,23:.0186613838529763}},initialize:function(e){e=ae.Util.setOptions(this,e),e=eh(e),this.tileUrl=(e.proxy?e.proxy+"?":"")+e.url+"tile/{z}/{y}/{x}"+(e.requestParams&&Object.keys(e.requestParams).length>0?ae.Util.getParamString(e.requestParams):""),e.url.indexOf("{s}")!==-1&&e.subdomains&&(e.url=e.url.replace("{s}",e.subdomains[0])),this.service=uL(e),this.service.addEventParent(this);var t=new RegExp(/tiles.arcgis(online)?\.com/g);t.test(e.url)&&(this.tileUrl=this.tileUrl.replace("://tiles","://tiles{s}"),e.subdomains=["1","2","3","4"]),this.options.token&&(this.tileUrl+="?token="+this.options.token),ae.TileLayer.prototype.initialize.call(this,this.tileUrl,e)},getTileUrl:function(e){var t=this._getZoomForUrl();return ae.Util.template(this.tileUrl,ae.Util.extend({s:this._getSubdomain(e),x:e.x,y:e.y,z:this._lodMap&&this._lodMap[t]!==void 0?this._lodMap[t]:t},this.options))},createTile:function(e,t){var n=document.createElement("img");return ae.DomEvent.on(n,"load",ae.Util.bind(this._tileOnLoad,this,t,n)),ae.DomEvent.on(n,"error",ae.Util.bind(this._tileOnError,this,t,n)),this.options.crossOrigin&&(n.crossOrigin=""),n.alt="",!this._lodMap||this._lodMap&&this._lodMap[this._getZoomForUrl()]!==void 0?n.src=this.getTileUrl(e):this.once("lodmap",function(){n.src=this.getTileUrl(e)},this),n},onAdd:function(e){c1(e),this._lodMap||this.metadata(function(t,n){if(!t&&n.spatialReference){var i=n.spatialReference.latestWkid||n.spatialReference.wkid;if(!this.options.attribution&&e.attributionControl&&n.copyrightText&&(this.options.attribution=n.copyrightText,e.attributionControl.addAttribution(this.getAttribution())),e.options.crs===ae.CRS.EPSG3857&&(i===102100||i===3857)){this._lodMap={};for(var r=n.tileInfo.lods,o=cL.MercatorZoomLevels,a=0;a<r.length;a++){var s=r[a];for(var l in o){var u=o[l];if(this._withinPercentage(s.resolution,u,this.options.zoomOffsetAllowance)){this._lodMap[l]=s.level;break}}}this.fire("lodmap")}else e.options.crs&&e.options.crs.code&&e.options.crs.code.indexOf(i)>-1||Rc("L.esri.TiledMapLayer is using a non-mercator spatial reference. Support may be available through Proj4Leaflet https://developers.arcgis.com/esri-leaflet/samples/non-mercator-projection/")}},this),ae.TileLayer.prototype.onAdd.call(this,e)},onRemove:function(e){f1(e),ae.TileLayer.prototype.onRemove.call(this,e)},metadata:function(e,t){return this.service.metadata(e,t),this},identify:function(){return this.service.identify()},find:function(){return this.service.find()},query:function(){return this.service.query()},authenticate:function(e){var t="?token="+e;return this.tileUrl=this.options.token?this.tileUrl.replace(/\?token=(.+)/g,t):this.tileUrl+t,this.options.token=e,this.service.authenticate(e),this},_withinPercentage:function(e,t,n){var i=Math.abs(e/t-1);return i<n}});function Jze(e,t){return new cL(e,t)}var Qze=ae.ImageOverlay.extend({onAdd:function(e){this._topLeft=e.getPixelBounds().min,ae.ImageOverlay.prototype.onAdd.call(this,e)},_reset:function(){this._map.options.crs===ae.CRS.EPSG3857?ae.ImageOverlay.prototype._reset.call(this):ae.DomUtil.setPosition(this._image,this._topLeft.subtract(this._map.getPixelOrigin()))}}),fL=ae.Layer.extend({options:{opacity:1,position:"front",f:"image",useCors:UC,attribution:null,interactive:!1,alt:""},onAdd:function(e){c1(e),this.options.zIndex&&(this.options.position=null),this._update=ae.Util.throttle(this._update,this.options.updateInterval,this),e.on("moveend",this._update,this),this._currentImage&&this._currentImage._bounds.equals(this._map.getBounds())?e.addLayer(this._currentImage):this._currentImage&&(this._map.removeLayer(this._currentImage),this._currentImage=null),this._update(),this._popup&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this.metadata(function(t,n){!t&&!this.options.attribution&&e.attributionControl&&n.copyrightText&&(this.options.attribution=n.copyrightText,e.attributionControl.addAttribution(this.getAttribution()))},this)},onRemove:function(e){f1(e),this._currentImage&&this._map.removeLayer(this._currentImage),this._popup&&(this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._map.off("moveend",this._update,this)},bindPopup:function(e,t){return this._shouldRenderPopup=!1,this._lastClick=!1,this._popup=ae.popup(t),this._popupFunction=e,this._map&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this},unbindPopup:function(){return this._map&&(this._map.closePopup(this._popup),this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._popup=!1,this},bringToFront:function(){return this.options.position="front",this._currentImage&&(this._currentImage.bringToFront(),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this.options.position="back",this._currentImage&&(this._currentImage.bringToBack(),this._setAutoZIndex(Math.min)),this},setZIndex:function(e){return this.options.zIndex=e,this._currentImage&&this._currentImage.setZIndex(e),this},_setAutoZIndex:function(e){if(this._currentImage){for(var t=this._currentImage.getPane().children,n=-e(-1/0,1/0),i=0,r=t.length,o;i<r;i++)o=t[i].style.zIndex,t[i]!==this._currentImage._image&&o&&(n=e(n,+o));isFinite(n)&&(this.options.zIndex=n+e(-1,1),this.setZIndex(this.options.zIndex))}},getAttribution:function(){return this.options.attribution},getOpacity:function(){return this.options.opacity},setOpacity:function(e){return this.options.opacity=e,this._currentImage&&this._currentImage.setOpacity(e),this},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(e,t){return this.options.from=e,this.options.to=t,this._update(),this},metadata:function(e,t){return this.service.metadata(e,t),this},authenticate:function(e){return this.service.authenticate(e),this},redraw:function(){this._update()},_renderImage:function(e,t,n){if(this._map){if(n&&(e="data:"+n+";base64,"+e),!e)return;var i=new Qze(e,t,{opacity:0,crossOrigin:this.options.withCredentials?"use-credentials":this.options.useCors,alt:this.options.alt,pane:this.options.pane||this.getPane(),interactive:this.options.interactive}).addTo(this._map),r=function(){this._map.removeLayer(i),this.fire("error"),i.off("load",o,this)},o=function(a){if(i.off("error",r,this),this._map){var s=a.target,l=this._currentImage;s._bounds.equals(t)&&s._bounds.equals(this._map.getBounds())?(this._currentImage=s,this.options.position==="front"?this.bringToFront():this.options.position==="back"&&this.bringToBack(),this.options.zIndex&&this.setZIndex(this.options.zIndex),this._map&&this._currentImage._map?this._currentImage.setOpacity(this.options.opacity):this._currentImage._map.removeLayer(this._currentImage),l&&this._map&&this._map.removeLayer(l),l&&l._map&&l._map.removeLayer(l)):this._map.removeLayer(s)}this.fire("load",{bounds:t})};i.once("error",r,this),i.once("load",o,this)}},_update:function(){if(this._map){var e=this._map.getZoom(),t=this._map.getBounds();if(!this._animatingZoom&&!(this._map._panTransition&&this._map._panTransition._inProgress)){if(e>this.options.maxZoom||e<this.options.minZoom){this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null);return}var n=this._buildExportParams();ae.Util.extend(n,this.options.requestParams),n?(this._requestExport(n,t),this.fire("loading",{bounds:t})):this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null)}}},_renderPopup:function(e,t,n,i){if(e=ae.latLng(e),this._shouldRenderPopup&&this._lastClick.equals(e)){var r=this._popupFunction(t,n,i);r&&this._popup.setLatLng(e).setContent(r).openOn(this._map)}},_resetPopupState:function(e){this._shouldRenderPopup=!1,this._lastClick=e.latlng},_calculateBbox:function(){var e=this._map.getPixelBounds(),t=this._map.unproject(e.getBottomLeft()),n=this._map.unproject(e.getTopRight()),i=this._map.options.crs.project(n),r=this._map.options.crs.project(t),o=ae.bounds(i,r);return[o.getBottomLeft().x,o.getBottomLeft().y,o.getTopRight().x,o.getTopRight().y].join(",")},_calculateImageSize:function(){var e=this._map.getPixelBounds(),t=this._map.getSize(),n=this._map.unproject(e.getBottomLeft()),i=this._map.unproject(e.getTopRight()),r=this._map.latLngToLayerPoint(i).y,o=this._map.latLngToLayerPoint(n).y;return(r>0||o<t.y)&&(t.y=o-r),t.x+","+t.y}}),Zne=fL.extend({options:{updateInterval:150,format:"jpgpng",transparent:!0,f:"image"},query:function(){return this.service.query()},identify:function(){return this.service.identify()},initialize:function(e){e=eh(e),this.service=qne(e),this.service.addEventParent(this),ae.Util.setOptions(this,e)},setPixelType:function(e){return this.options.pixelType=e,this._update(),this},getPixelType:function(){return this.options.pixelType},setBandIds:function(e){return ae.Util.isArray(e)?this.options.bandIds=e.join(","):this.options.bandIds=e.toString(),this._update(),this},getBandIds:function(){return this.options.bandIds},setNoData:function(e,t){return ae.Util.isArray(e)?this.options.noData=e.join(","):this.options.noData=e.toString(),t&&(this.options.noDataInterpretation=t),this._update(),this},getNoData:function(){return this.options.noData},getNoDataInterpretation:function(){return this.options.noDataInterpretation},setRenderingRule:function(e){this.options.renderingRule=e,this._update()},getRenderingRule:function(){return this.options.renderingRule},setMosaicRule:function(e){this.options.mosaicRule=e,this._update()},getMosaicRule:function(){return this.options.mosaicRule},_getPopupData:function(e){var t=ae.Util.bind(function(i,r,o){i||setTimeout(ae.Util.bind(function(){this._renderPopup(e.latlng,i,r,o)},this),300)},this),n=this.identify().at(e.latlng);this.options.mosaicRule&&n.setMosaicRule(this.options.mosaicRule),n.run(t),this._shouldRenderPopup=!0,this._lastClick=e.latlng},_buildExportParams:function(){var e=parseInt(this._map.options.crs.code.split(":")[1],10),t={bbox:this._calculateBbox(),size:this._calculateImageSize(),format:this.options.format,transparent:this.options.transparent,bboxSR:e,imageSR:e};return this.options.from&&this.options.to&&(t.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.options.pixelType&&(t.pixelType=this.options.pixelType),this.options.interpolation&&(t.interpolation=this.options.interpolation),this.options.compressionQuality&&(t.compressionQuality=this.options.compressionQuality),this.options.bandIds&&(t.bandIds=this.options.bandIds),(this.options.noData===0||this.options.noData)&&(t.noData=this.options.noData),this.options.noDataInterpretation&&(t.noDataInterpretation=this.options.noDataInterpretation),this.service.options.token&&(t.token=this.service.options.token),this.options.renderingRule&&(t.renderingRule=JSON.stringify(this.options.renderingRule)),this.options.mosaicRule&&(t.mosaicRule=JSON.stringify(this.options.mosaicRule)),t},_requestExport:function(e,t){if(this.options.f==="json")this.service.request("exportImage",e,function(i,r){i||(this.options.token&&(r.href+="?token="+this.options.token),this.options.proxy&&(r.href=this.options.proxy+"?"+r.href),this._renderImage(r.href,t))},this);else{e.f="image";var n=this.options.url+"exportImage"+ae.Util.getParamString(e);this.options.proxy&&(n=this.options.proxy+"?"+n),this._renderImage(n,t)}}});function e6e(e,t){return new Zne(e,t)}var Xne=fL.extend({options:{updateInterval:150,layers:!1,layerDefs:!1,timeOptions:!1,format:"png32",transparent:!0,f:"json"},initialize:function(e){e=eh(e),this.service=uL(e),this.service.addEventParent(this),ae.Util.setOptions(this,e)},getDynamicLayers:function(){return this.options.dynamicLayers},setDynamicLayers:function(e){return this.options.dynamicLayers=e,this._update(),this},getLayers:function(){return this.options.layers},setLayers:function(e){return this.options.layers=e,this._update(),this},getLayerDefs:function(){return this.options.layerDefs},setLayerDefs:function(e){return this.options.layerDefs=e,this._update(),this},getTimeOptions:function(){return this.options.timeOptions},setTimeOptions:function(e){return this.options.timeOptions=e,this._update(),this},query:function(){return this.service.query()},identify:function(){return this.service.identify()},find:function(){return this.service.find()},_getPopupData:function(e){var t=ae.Util.bind(function(r,o,a){r||setTimeout(ae.Util.bind(function(){this._renderPopup(e.latlng,r,o,a)},this),300)},this),n;if(this.options.popup?n=this.options.popup.on(this._map).at(e.latlng):n=this.identify().on(this._map).at(e.latlng),n.params.maxAllowableOffset||n.simplify(this._map,.5),this.options.popup&&this.options.popup.params&&this.options.popup.params.layers||(this.options.layers?n.layers("visible:"+this.options.layers.join(",")):n.layers("visible")),this.options.layerDefs&&typeof this.options.layerDefs!="string"&&!n.params.layerDefs)for(var i in this.options.layerDefs)Object.prototype.hasOwnProperty.call(this.options.layerDefs,i)&&n.layerDef(i,this.options.layerDefs[i]);n.run(t),this._shouldRenderPopup=!0,this._lastClick=e.latlng},_buildExportParams:function(){var e=parseInt(this._map.options.crs.code.split(":")[1],10),t={bbox:this._calculateBbox(),size:this._calculateImageSize(),dpi:96,format:this.options.format,transparent:this.options.transparent,bboxSR:e,imageSR:e};if(this.options.dynamicLayers&&(t.dynamicLayers=this.options.dynamicLayers),this.options.layers){if(this.options.layers.length===0)return;t.layers="show:"+this.options.layers.join(",")}return this.options.layerDefs&&(t.layerDefs=typeof this.options.layerDefs=="string"?this.options.layerDefs:JSON.stringify(this.options.layerDefs)),this.options.timeOptions&&(t.timeOptions=JSON.stringify(this.options.timeOptions)),this.options.from&&this.options.to&&(t.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.service.options.token&&(t.token=this.service.options.token),this.options.proxy&&(t.proxy=this.options.proxy),this.options.disableCache&&(t._ts=Date.now()),t},_requestExport:function(e,t){if(this.options.f==="json")this.service.request("export",e,function(i,r){i||(this.options.token&&r.href&&(r.href+="?token="+this.options.token),this.options.proxy&&r.href&&(r.href=this.options.proxy+"?"+r.href),r.href?this._renderImage(r.href,t):this._renderImage(r.imageData,t,r.contentType))},this);else{e.f="image";var n=this.options.url+"export"+ae.Util.getParamString(e);this.options.proxy&&(n=this.options.proxy+"?"+n),this._renderImage(n,t)}}});function t6e(e,t){return new Xne(e,t)}var Jx=ae.Layer.extend({options:{cellSize:512,updateWhenIdle:ae.Browser.mobile,updateInterval:150,noWrap:!1,keepBuffer:1.5},initialize:function(e){ae.Util.setOptions(this,e)},onAdd:function(e){this._cells={},this._activeCells={},this._resetView(),this._update()},onRemove:function(e){this._removeAllCells(),this._cellZoom=void 0},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllCells(),this._update()),this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=ae.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),e},createCell:function(){return document.createElement("div")},removeCell:function(){},reuseCell:function(){},cellLeave:function(){},cellEnter:function(){},getCellSize:function(){var e=this.options.cellSize;return e instanceof ae.Point?e:new ae.Point(e,e)},_pruneCells:function(){if(this._map){var e,t;for(e in this._cells)t=this._cells[e],t.retain=t.current;for(e in this._cells)if(t=this._cells[e],t.current&&!t.active){var n=t.coords;this._retainParent(n.x,n.y,n.z,n.z-5)||this._retainChildren(n.x,n.y,n.z,n.z+2)}for(e in this._cells)this._cells[e].retain||this._removeCell(e)}},_removeAllCells:function(){for(var e in this._cells)this._removeCell(e)},_invalidateAll:function(){this._removeAllCells(),this._cellZoom=void 0},_retainParent:function(e,t,n,i){var r=Math.floor(e/2),o=Math.floor(t/2),a=n-1,s=new ae.Point(+r,+o);s.z=+a;var l=this._cellCoordsToKey(s),u=this._cells[l];return u&&u.active?(u.retain=!0,!0):(u&&u.loaded&&(u.retain=!0),a>i?this._retainParent(r,o,a,i):!1)},_retainChildren:function(e,t,n,i){for(var r=2*e;r<2*e+2;r++)for(var o=2*t;o<2*t+2;o++){var a=new ae.Point(r,o);a.z=n+1;var s=this._cellCoordsToKey(a),l=this._cells[s];if(l&&l.active){l.retain=!0;continue}else l&&l.loaded&&(l.retain=!0);n+1<i&&this._retainChildren(r,o,n+1,i)}},_resetView:function(e){var t=e&&(e.pinch||e.flyTo);t||this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_setView:function(e,t,n,i){var r=Math.round(t);i||(this._cellZoom=r,this._abortLoading&&this._abortLoading(),this._resetGrid(),r!==void 0&&this._update(e),n||this._pruneCells(),this._noPrune=!!n)},_resetGrid:function(){var e=this._map,t=e.options.crs,n=this._cellSize=this.getCellSize(),i=this._cellZoom,r=this._map.getPixelWorldBounds(this._cellZoom);r&&(this._globalCellRange=this._pxBoundsToCellRange(r)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,t.wrapLng[0]],i).x/n.x),Math.ceil(e.project([0,t.wrapLng[1]],i).x/n.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([t.wrapLat[0],0],i).y/n.x),Math.ceil(e.project([t.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(e){var t=e&&(e.pinch||e.flyTo);t||!this._map||this._map._animatingZoom||this._update()},_getCelldPixelBounds:function(e){var t=this._map,n=t._animatingZoom?Math.max(t._animateToZoom,t.getZoom()):t.getZoom(),i=t.getZoomScale(n,this._cellZoom),r=t.project(e,this._cellZoom).floor(),o=t.getSize().divideBy(i*2);return new ae.Bounds(r.subtract(o),r.add(o))},_update:function(e){var t=this._map;if(t){var n=Math.round(t.getZoom());e===void 0&&(e=t.getCenter());var i=this._getCelldPixelBounds(e),r=this._pxBoundsToCellRange(i),o=r.getCenter(),a=[],s=this.options.keepBuffer,l=new ae.Bounds(r.getBottomLeft().subtract([s,-s]),r.getTopRight().add([s,-s]));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw new Error("Attempted to load an infinite number of cells");for(var u in this._cells){var c=this._cells[u].coords;(c.z!==this._cellZoom||!l.contains(new ae.Point(c.x,c.y)))&&(this._cells[u].current=!1)}if(Math.abs(n-this._cellZoom)>1){this._setView(e,n);return}for(var d=r.min.y;d<=r.max.y;d++)for(var h=r.min.x;h<=r.max.x;h++){var m=new ae.Point(h,d);if(m.z=this._cellZoom,!!this._isValidCell(m)){var g=this._cells[this._cellCoordsToKey(m)];g?g.current=!0:a.push(m)}}if(a.sort(function(b,w){return b.distanceTo(o)-w.distanceTo(o)}),a.length!==0)for(this._loading||(this._loading=!0),h=0;h<a.length;h++){var y=this._cellCoordsToKey(a[h]),x=this._keyToCellCoords(y);this._activeCells[x]?this._reuseCell(a[h]):this._createCell(a[h])}}},_isValidCell:function(e){var t=this._map.options.crs;if(!t.infinite){var n=this._globalCellRange;if(!t.wrapLng&&(e.x<n.min.x||e.x>n.max.x)||!t.wrapLat&&(e.y<n.min.y||e.y>n.max.y))return!1}if(!this.options.bounds)return!0;var i=this._cellCoordsToBounds(e);return ae.toLatLngBounds(this.options.bounds).overlaps(i)},_keyToBounds:function(e){return this._cellCoordsToBounds(this._keyToCellCoords(e))},_cellCoordsToNwSe:function(e){var t=this._map,n=this.getCellSize(),i=e.scaleBy(n),r=i.add(n),o=t.unproject(i,e.z),a=t.unproject(r,e.z);return[o,a]},_cellCoordsToBounds:function(e){var t=this._cellCoordsToNwSe(e),n=new ae.LatLngBounds(t[0],t[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_cellCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToCellCoords:function(e){var t=e.split(":"),n=new ae.Point(+t[0],+t[1]);return n.z=+t[2],n},_removeCell:function(e){var t=this._cells[e];if(t){var n=this._keyToCellCoords(e),i=this._wrapCoords(n),r=this._cellCoordsToBounds(this._wrapCoords(n));t.current=!1,delete this._cells[e],this._activeCells[e]=t,this.cellLeave(r,i,e),this.fire("cellleave",{key:e,coords:i,bounds:r})}},_reuseCell:function(e){var t=this._cellCoordsToKey(e);this._cells[t]=this._activeCells[t],this._cells[t].current=!0;var n=this._wrapCoords(e),i=this._cellCoordsToBounds(this._wrapCoords(e));this.cellEnter(i,n,t),this.fire("cellenter",{key:t,coords:n,bounds:i})},_createCell:function(e){var t=this._cellCoordsToKey(e),n=this._wrapCoords(e),i=this._cellCoordsToBounds(this._wrapCoords(e));this.createCell(i,n,t),this.fire("cellcreate",{key:t,coords:n,bounds:i}),this._cells[t]={coords:e,current:!0},ae.Util.requestAnimFrame(this._pruneCells,this)},_cellReady:function(e,t,n){var i=this._cellCoordsToKey(e);n=this._cells[i],n&&(n.loaded=+new Date,n.active=!0)},_getCellPos:function(e){return e.scaleBy(this.getCellSize())},_wrapCoords:function(e){var t=new ae.Point(this._wrapX?ae.Util.wrapNum(e.x,this._wrapX):e.x,this._wrapY?ae.Util.wrapNum(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToCellRange:function(e){var t=this.getCellSize();return new ae.Bounds(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))}});function Nl(e){this.values=[].concat(e||[])}Nl.prototype.query=function(e){var t=this.getIndex(e);return this.values[t]};Nl.prototype.getIndex=function(t){this.dirty&&this.sort();for(var n=0,i=this.values.length-1,r,o;n<=i;)if(r=(n+i)/2|0,o=this.values[Math.round(r)],+o.value<+t)n=r+1;else if(+o.value>+t)i=r-1;else return r;return Math.abs(~i)};Nl.prototype.between=function(t,n){var i=this.getIndex(t),r=this.getIndex(n);if(i===0&&r===0)return[];for(;this.values[i-1]&&this.values[i-1].value===t;)i--;for(;this.values[r+1]&&this.values[r+1].value===n;)r++;return this.values[r]&&this.values[r].value===n&&this.values[r+1]&&r++,this.values.slice(i,r)};Nl.prototype.insert=function(t){return this.values.splice(this.getIndex(t.value),0,t),this};Nl.prototype.bulkAdd=function(t,n){return this.values=this.values.concat([].concat(t||[])),n?this.sort():this.dirty=!0,this};Nl.prototype.sort=function(){return this.values.sort(function(t,n){return+n.value-+t.value}).reverse(),this.dirty=!1,this};var D_=Jx.extend({options:{attribution:null,where:"1=1",fields:["*"],from:!1,to:!1,timeField:!1,timeFilterMode:"server",simplifyFactor:0,precision:6,fetchAllFeatures:!1},initialize:function(e){if(Jx.prototype.initialize.call(this,e),e=eh(e),e=ae.Util.setOptions(this,e),this.service=Yne(e),this.service.addEventParent(this),this.options.fields[0]!=="*"){for(var t=!1,n=0;n<this.options.fields.length;n++)this.options.fields[n].match(/^(OBJECTID|FID|OID|ID)$/i)&&(t=!0);t===!1&&Rc("no known esriFieldTypeOID field detected in fields Array.  Please add an attribute field containing unique IDs to ensure the layer can be drawn correctly.")}this.options.timeField.start&&this.options.timeField.end?(this._startTimeIndex=new Nl,this._endTimeIndex=new Nl):this.options.timeField&&(this._timeIndex=new Nl),this._cache={},this._currentSnapshot=[],this._activeRequests=0},onAdd:function(e){return c1(e),this.service.metadata(function(t,n){if(!t){var i=n.supportedQueryFormats,r=!1;(this.service.options.isModern===!1||this.options.fetchAllFeatures)&&(r=!0),!r&&i&&i.indexOf("geoJSON")!==-1&&(this.service.options.isModern=!0),n.objectIdField&&(this.service.options.idAttribute=n.objectIdField),!this.options.attribution&&e.attributionControl&&n.copyrightText&&(this.options.attribution=n.copyrightText,e.attributionControl.addAttribution(this.getAttribution()))}},this),e.on("zoomend",this._handleZoomChange,this),Jx.prototype.onAdd.call(this,e)},onRemove:function(e){return f1(e),e.off("zoomend",this._handleZoomChange,this),Jx.prototype.onRemove.call(this,e)},getAttribution:function(){return this.options.attribution},createCell:function(e,t){this._visibleZoom()&&this._requestFeatures(e,t)},_requestFeatures:function(e,t,n,i){this._activeRequests++,i=i||0;var r=this.options.where;return this._activeRequests===1&&this.fire("loading",{bounds:e},!0),this._buildQuery(e,i).run(function(o,a,s){s&&s.exceededTransferLimit&&this.fire("drawlimitexceeded"),this.options.where===r&&(!o&&a&&a.features.length&&ae.Util.requestAnimFrame(ae.Util.bind(function(){this._addFeatures(a.features,t),this._postProcessFeatures(e)},this)),!o&&a&&!a.features.length&&this._postProcessFeatures(e),o&&this._postProcessFeatures(e),n&&n.call(this,o,a),s&&(s.exceededTransferLimit||s.properties&&s.properties.exceededTransferLimit)&&this.options.fetchAllFeatures&&this._requestFeatures(e,t,n,i+a.features.length))},this)},_postProcessFeatures:function(e){this._activeRequests--,this._activeRequests<=0&&this.fire("load",{bounds:e})},_cacheKey:function(e){return e.z+":"+e.x+":"+e.y},_addFeatures:function(e,t){if(t){var n=this._cacheKey(t);this._cache[n]=this._cache[n]||[]}for(var i=e.length-1;i>=0;i--){var r=e[i].id;this._currentSnapshot.indexOf(r)===-1&&this._currentSnapshot.push(r),typeof n<"u"&&this._cache[n].indexOf(r)===-1&&this._cache[n].push(r)}this.options.timeField&&this._buildTimeIndexes(e),this.createLayers(e)},_buildQuery:function(e,t){var n=this.service.query().intersects(e).where(this.options.where).fields(this.options.fields).precision(this.options.precision);return this.options.fetchAllFeatures&&!isNaN(parseInt(t))&&(n=n.offset(t)),n.params.resultType="tile",this.options.requestParams&&ae.Util.extend(n.params,this.options.requestParams),this.options.simplifyFactor&&n.simplify(this._map,this.options.simplifyFactor),this.options.timeFilterMode==="server"&&this.options.from&&this.options.to&&n.between(this.options.from,this.options.to),n},setWhere:function(e,t,n){this.options.where=e&&e.length?e:"1=1";for(var i=[],r=[],o=0,a=null,s=ae.Util.bind(function(h,m){if(h&&(a=h),m)for(var g=m.features.length-1;g>=0;g--)r.push(m.features[g].id);o--,o<=0&&this._visibleZoom()&&e===this.options.where&&(this._currentSnapshot=r,ae.Util.requestAnimFrame(ae.Util.bind(function(){this.removeLayers(i),this.addLayers(r),t&&t.call(n,a)},this)))},this),l=this._currentSnapshot.length-1;l>=0;l--)i.push(this._currentSnapshot[l]);this._cache={};for(var u in this._cells){o++;var c=this._keyToCellCoords(u),d=this._cellCoordsToBounds(c);this._requestFeatures(d,c,s)}return this},getWhere:function(){return this.options.where},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(e,t,n,i){var r=this.options.from,o=this.options.to,a=0,s=null,l=ae.Util.bind(function(h){h&&(s=h),this._filterExistingFeatures(r,o,e,t),a--,n&&a<=0&&n.call(i,s)},this);if(this.options.from=e,this.options.to=t,this._filterExistingFeatures(r,o,e,t),this.options.timeFilterMode==="server")for(var u in this._cells){a++;var c=this._keyToCellCoords(u),d=this._cellCoordsToBounds(c);this._requestFeatures(d,c,l)}return this},refresh:function(){this.setWhere(this.options.where)},_filterExistingFeatures:function(e,t,n,i){var r=e&&t?this._getFeaturesInTimeRange(e,t):this._currentSnapshot,o=this._getFeaturesInTimeRange(n,i);if(o.indexOf)for(var a=0;a<o.length;a++){var s=r.indexOf(o[a]);s>=0&&r.splice(s,1)}ae.Util.requestAnimFrame(ae.Util.bind(function(){this.removeLayers(r),this.addLayers(o)},this))},_getFeaturesInTimeRange:function(e,t){var n=[],i;if(this.options.timeField.start&&this.options.timeField.end){var r=this._startTimeIndex.between(e,t),o=this._endTimeIndex.between(e,t);i=r.concat(o)}else if(this._timeIndex)i=this._timeIndex.between(e,t);else return Rc("You must set timeField in the layer constructor in order to manipulate the start and end time filter."),[];for(var a=i.length-1;a>=0;a--)n.push(i[a].id);return n},_buildTimeIndexes:function(e){var t,n;if(this.options.timeField.start&&this.options.timeField.end){var i=[],r=[];for(t=e.length-1;t>=0;t--)n=e[t],i.push({id:n.id,value:new Date(n.properties[this.options.timeField.start])}),r.push({id:n.id,value:new Date(n.properties[this.options.timeField.end])});this._startTimeIndex.bulkAdd(i),this._endTimeIndex.bulkAdd(r)}else{var o=[];for(t=e.length-1;t>=0;t--)n=e[t],o.push({id:n.id,value:new Date(n.properties[this.options.timeField])});this._timeIndex.bulkAdd(o)}},_featureWithinTimeRange:function(e){if(!this.options.from||!this.options.to)return!0;var t=+this.options.from.valueOf(),n=+this.options.to.valueOf();if(typeof this.options.timeField=="string"){var i=+e.properties[this.options.timeField];return i>=t&&i<=n}if(this.options.timeField.start&&this.options.timeField.end){var r=+e.properties[this.options.timeField.start],o=+e.properties[this.options.timeField.end];return r>=t&&r<=n||o>=t&&o<=n||r<=t&&o>=n}},_visibleZoom:function(){if(!this._map)return!1;var e=this._map.getZoom();return!(e>this.options.maxZoom||e<this.options.minZoom)},_handleZoomChange:function(){if(!this._visibleZoom())this.removeLayers(this._currentSnapshot),this._currentSnapshot=[];else for(var e in this._cells){var t=this._cells[e].coords,n=this._cacheKey(t);this._cache[n]&&this.addLayers(this._cache[n])}},authenticate:function(e){return this.service.authenticate(e),this},metadata:function(e,t){return this.service.metadata(e,t),this},query:function(){return this.service.query()},_getMetadata:function(e){if(this._metadata){var t;e(t,this._metadata)}else this.metadata(ae.Util.bind(function(n,i){this._metadata=i,e(n,this._metadata)},this))},addFeature:function(e,t,n){this.addFeatures(e,t,n)},addFeatures:function(e,t,n){this._getMetadata(ae.Util.bind(function(i,r){if(i){t&&t.call(this,i,null);return}var o=e.features?e.features:[e];this.service.addFeatures(e,ae.Util.bind(function(a,s){if(!a){for(var l=o.length-1;l>=0;l--)o[l].properties[r.objectIdField]=o.length>1?s[l].objectId:s.objectId,o[l].id=o.length>1?s[l].objectId:s.objectId;this._addFeatures(o)}t&&t.call(n,a,s)},this))},this))},updateFeature:function(e,t,n){this.updateFeatures(e,t,n)},updateFeatures:function(e,t,n){var i=e.features?e.features:[e];this.service.updateFeatures(e,function(r,o){if(!r){for(var a=i.length-1;a>=0;a--)this.removeLayers([i[a].id],!0);this._addFeatures(i)}t&&t.call(n,r,o)},this)},deleteFeature:function(e,t,n){this.deleteFeatures(e,t,n)},deleteFeatures:function(e,t,n){return this.service.deleteFeatures(e,function(i,r){var o=r.length?r:[r];if(!i&&o.length>0)for(var a=o.length-1;a>=0;a--)this.removeLayers([o[a].objectId],!0);t&&t.call(n,i,r)},this)}}),Kne=D_.extend({options:{cacheLayers:!0},initialize:function(e){e.apikey&&(e.token=e.apikey),D_.prototype.initialize.call(this,e),this._originalStyle=this.options.style,this._layers={}},onRemove:function(e){for(var t in this._layers)e.removeLayer(this._layers[t]),this.fire("removefeature",{feature:this._layers[t].feature,permanent:!1},!0);return D_.prototype.onRemove.call(this,e)},createNewLayer:function(e){var t=ae.GeoJSON.geometryToLayer(e,this.options);return t&&(t.defaultOptions=t.options),t},_updateLayer:function(e,t){var n=[],i=this.options.coordsToLatLng||ae.GeoJSON.coordsToLatLng;switch(t.properties&&(e.feature.properties=t.properties),t.geometry.type){case"Point":n=ae.GeoJSON.coordsToLatLng(t.geometry.coordinates),e.setLatLng(n);break;case"LineString":n=ae.GeoJSON.coordsToLatLngs(t.geometry.coordinates,0,i),e.setLatLngs(n);break;case"MultiLineString":n=ae.GeoJSON.coordsToLatLngs(t.geometry.coordinates,1,i),e.setLatLngs(n);break;case"Polygon":n=ae.GeoJSON.coordsToLatLngs(t.geometry.coordinates,1,i),e.setLatLngs(n);break;case"MultiPolygon":n=ae.GeoJSON.coordsToLatLngs(t.geometry.coordinates,2,i),e.setLatLngs(n);break}this.redraw(e.feature.id)},createLayers:function(e){for(var t=e.length-1;t>=0;t--){var n=e[t],i=this._layers[n.id],r;this._visibleZoom()&&i&&!this._map.hasLayer(i)&&(!this.options.timeField||this._featureWithinTimeRange(n))&&(this._map.addLayer(i),this.fire("addfeature",{feature:i.feature},!0)),i&&(i.setLatLngs||i.setLatLng)&&this._updateLayer(i,n),i||(r=this.createNewLayer(n),r?(r.feature=n,r.addEventParent(this),this.options.onEachFeature&&this.options.onEachFeature(r.feature,r),this._layers[r.feature.id]=r,this.setFeatureStyle(r.feature.id,this.options.style),this.fire("createfeature",{feature:r.feature},!0),this._visibleZoom()&&(!this.options.timeField||this.options.timeField&&this._featureWithinTimeRange(n))&&this._map.addLayer(r)):Rc("invalid GeoJSON encountered"))}},addLayers:function(e){for(var t=e.length-1;t>=0;t--){var n=this._layers[e[t]];n&&(!this.options.timeField||this._featureWithinTimeRange(n.feature))&&(this._map.addLayer(n),this.fire("addfeature",{feature:n.feature},!0))}},removeLayers:function(e,t){for(var n=e.length-1;n>=0;n--){var i=e[n],r=this._layers[i];r&&(this.fire("removefeature",{feature:r.feature,permanent:t},!0),this._map.removeLayer(r)),r&&t&&delete this._layers[i]}},cellEnter:function(e,t){this._visibleZoom()&&!this._zooming&&this._map&&ae.Util.requestAnimFrame(ae.Util.bind(function(){var n=this._cacheKey(t),i=this._cellCoordsToKey(t),r=this._cache[n];this._activeCells[i]&&r&&this.addLayers(r)},this))},cellLeave:function(e,t){this._zooming||ae.Util.requestAnimFrame(ae.Util.bind(function(){if(this._map){var n=this._cacheKey(t),i=this._cellCoordsToKey(t),r=this._cache[n],o=this._map.getBounds();if(!this._activeCells[i]&&r){for(var a=!0,s=0;s<r.length;s++){var l=this._layers[r[s]];l&&l.getBounds&&o.intersects(l.getBounds())&&(a=!1)}a&&this.removeLayers(r,!this.options.cacheLayers),!this.options.cacheLayers&&a&&(delete this._cache[n],delete this._cells[i],delete this._activeCells[i])}}},this))},resetStyle:function(){return this.options.style=this._originalStyle,this.eachFeature(function(e){this.resetFeatureStyle(e.feature.id)},this),this},setStyle:function(e){return this.options.style=e,this.eachFeature(function(t){this.setFeatureStyle(t.feature.id,e)},this),this},resetFeatureStyle:function(e){var t=this._layers[e],n=this._originalStyle||ae.Path.prototype.options;return t&&(ae.Util.extend(t.options,t.defaultOptions),this.setFeatureStyle(e,n)),this},setFeatureStyle:function(e,t){var n=this._layers[e];return typeof t=="function"&&(t=t(n.feature)),n.setStyle&&n.setStyle(t),this},eachActiveFeature:function(e,t){if(this._map){var n=this._map.getBounds();for(var i in this._layers)this._currentSnapshot.indexOf(this._layers[i].feature.id)!==-1&&(typeof this._layers[i].getLatLng=="function"&&n.contains(this._layers[i].getLatLng())?e.call(t,this._layers[i]):typeof this._layers[i].getBounds=="function"&&n.intersects(this._layers[i].getBounds())&&e.call(t,this._layers[i]))}return this},eachFeature:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},getFeature:function(e){return this._layers[e]},bringToBack:function(){this.eachFeature(function(e){e.bringToBack&&e.bringToBack()})},bringToFront:function(){this.eachFeature(function(e){e.bringToFront&&e.bringToFront()})},redraw:function(e){return e&&this._redraw(e),this},_redraw:function(e){var t=this._layers[e],n=t.feature;if(t&&t.setIcon&&this.options.pointToLayer&&this.options.pointToLayer){var i=this.options.pointToLayer(n,ae.latLng(n.geometry.coordinates[1],n.geometry.coordinates[0])),r=i.options.icon;t.setIcon(r)}if(t&&t.setStyle&&this.options.pointToLayer){var o=this.options.pointToLayer(n,ae.latLng(n.geometry.coordinates[1],n.geometry.coordinates[0])),a=o.options;this.setFeatureStyle(n.id,a)}t&&t.setStyle&&this.options.style&&this.resetFeatureStyle(n.id)},openPopup(e){return this._popup&&this._popup._prepareOpen(e||this._latlng)&&this._popup.openOn(this._map),this},openTooltip(e){return this._tooltip&&this._tooltip._prepareOpen(e)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this)),this}});function n6e(e){return new Kne(e)}var i6e=Ize.version;const r6e=Object.freeze(Object.defineProperty({__proto__:null,BasemapLayer:i2,DynamicMapLayer:Xne,FeatureLayer:Kne,FeatureLayerService:Vne,FeatureManager:D_,Find:Lne,Identify:YC,IdentifyFeatures:zne,IdentifyImage:Hne,ImageMapLayer:Zne,ImageService:Gne,MapService:Wne,Query:Dne,RasterLayer:fL,Service:h1,Support:Mu,Task:d1,TiledMapLayer:cL,Util:Vze,VERSION:i6e,basemapLayer:Kze,dynamicMapLayer:t6e,featureLayer:n6e,featureLayerService:Yne,find:jne,get:GC,identify:Zze,identifyFeatures:Bne,identifyImage:Une,imageMapLayer:e6e,imageService:qne,mapService:uL,options:Ene,post:kne,query:VC,request:oL,service:Xze,task:Yze,tiledMapLayer:Jze},Symbol.toStringTag,{value:"Module"})),o6e=w8(r6e),a6e=w8(sze);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.updateEsriLayer=void 0;const t=o6e,n=a6e,i=(a,s)=>{var l;const{layerType:u,name:c}=a;switch(u){case"basemapLayer":l=t.basemapLayer(c,{...a});break;default:l=new t[u]({...a})}return{instance:l,context:s}},r=(a,s,l)=>{l.url!==s.url&&a.setUrl&&a.setUrl(s.url),l.opacity!==s.opacity&&a.setOpacity&&a.setOpacity(s.opacity),l.zIndex!==s.zIndex&&a.setZIndex&&a.setZIndex(s.zIndex),(l.to!==s.to||l.from!==s.from)&&a.setTimeRange&&a.setTimeRange(s.to,s.from,s.setTimeCallback||null),l.style!==s.style&&a.setStyle&&a.setStyle(s.style),l.where!==s.where&&a.setWhere&&a.setWhere(s.where),l.layers!==s.layers&&a.setLayers&&a.setLayers(s.layers),l.layerDefs!==s.layerDefs&&a.setLayerDefs&&a.setLayerDefs(s.layerDefs),l.dynamicLayers!==s.dynamicLayers&&a.setDynamicLayers&&a.setDynamicLayers(s.dynamicLayers),l.timeOptions!==s.timeOptions&&a.setTimeOptions&&a.setTimeOptions(s.timeOptions),l.bandIds!==s.bandIds&&a.setBandIds&&a.setBandIds(s.bandIds),l.noData!==s.noData&&a.setNoData&&a.setNoData(s.bandIds),l.pixelType!==s.pixelType&&a.setPixelType&&a.setPixelType(s.bandIds),l.renderingRule!==s.renderingRule&&a.setRenderingRule&&a.setRenderingRule(s.renderingRule),l.mosaicRule!==s.mosaicRule&&a.setMosaicRule&&a.setMosaicRule(s.mosaicRule)};e.updateEsriLayer=r;const o=(0,n.createLayerComponent)(i,e.updateEsriLayer);e.default=o})(Qd);var dL={};Object.defineProperty(dL,"__esModule",{value:!0});const h8=F,s6e=Qd,l6e=h8.forwardRef((e,t)=>h8.createElement(s6e.default,{ref:t,layerType:"basemapLayer",...e}));dL.default=l6e;var hL={};Object.defineProperty(hL,"__esModule",{value:!0});const p8=F,u6e=Qd,c6e=p8.forwardRef((e,t)=>p8.createElement(u6e.default,{ref:t,layerType:"featureLayer",...e}));hL.default=c6e;var pL={};Object.defineProperty(pL,"__esModule",{value:!0});const m8=F,f6e=Qd,d6e=m8.forwardRef((e,t)=>m8.createElement(f6e.default,{ref:t,layerType:"imageMapLayer",...e}));pL.default=d6e;var mL={};Object.defineProperty(mL,"__esModule",{value:!0});const g8=F,h6e=Qd,p6e=g8.forwardRef((e,t)=>g8.createElement(h6e.default,{ref:t,layerType:"dynamicMapLayer",...e}));mL.default=p6e;var gL={};Object.defineProperty(gL,"__esModule",{value:!0});const y8=F,m6e=Qd,g6e=y8.forwardRef((e,t)=>y8.createElement(m6e.default,{ref:t,layerType:"tiledMapLayer",...e}));gL.default=g6e;Object.defineProperty(lo,"__esModule",{value:!0});var Jne=lo.TiledMapLayer=lo.DynamicMapLayer=lo.ImageMapLayer=lo.FeatureLayer=lo.BasemapLayer=lo.EsriLeafletLayer=void 0;const y6e=Qd;lo.EsriLeafletLayer=y6e.default;const v6e=dL;lo.BasemapLayer=v6e.default;const x6e=hL;lo.FeatureLayer=x6e.default;const _6e=pL;lo.ImageMapLayer=_6e.default;const b6e=mL;lo.DynamicMapLayer=b6e.default;const w6e=gL;Jne=lo.TiledMapLayer=w6e.default;function S6e({param:e,opt:t}){let n=t==="CH"?[e.CHMin,e.CHMax]:[e.Min,e.Max];const i=t==="CH"?a8[e.Palette2]:a8[e.Palette1],r=[...Array(20).keys()],o=e.Unit==="per cent"?"value in %":e.Unit,a=e.Proportional?"increasing value means better condition":"increasing value means worse condition";let s=[.001,.002,.005,.01,.02,.05,.1,.2,.5,1,2,5,10,20],l=[3,3,3,2,2,2,2,1,1,0,0,0,0,0];const u=sne(s.map(g=>Math.abs(6-(n[1]-n[0])/g)));s=s[u],l=l[u];let c=[n[0]],d=[10];const h=80*s/(n[1]-n[0]);for(;c[c.length-1]<n[1];){const g=c.length;c.push(c[g-1]+s),d.push(d[g-1]+h)}const m=v.jsxs("div",{className:"text-center",children:[v.jsxs("svg",{width:"100%",height:"65",children:[r.slice(0,20).map(g=>v.jsx("rect",{x:10+g*4+"%",y:"0%",rx:"3px",ry:"3px",width:"4%",height:"30",stroke:"#2b2b2b",fill:i[g]},g)),v.jsx("line",{x1:"10%",x2:"90%",y1:"40",y2:"40",stroke:"black",weight:"2"}),d.map((g,y)=>v.jsx("line",{x1:g+"%",x2:g+"%",y1:"37",y2:"43",stroke:"black",weight:"2"},y)),c.map((g,y)=>v.jsx("text",{x:d[y]+"%",y:"55",textAnchor:"middle",fontSize:"90%",children:parseFloat(g).toFixed(l)},y))]}),v.jsx("span",{children:v.jsx("b",{children:o})}),v.jsx("br",{}),v.jsx("span",{children:v.jsx("i",{children:a})})]});return v.jsxs("div",{className:"row m-0 p-2 mb-2 rounded-3 bg-secondary-subtle",style:{maxWidth:"800px"},children:[v.jsx("div",{className:"p-0",children:v.jsx("h5",{children:v.jsx(fb,{bg:"danger",children:e.Indicator})})}),v.jsxs("div",{className:"row p-0 m-0",children:[v.jsxs("div",{className:"col-4 p-0 m-0",style:{fontSize:"75%"},children:[v.jsxs("p",{children:[v.jsx("b",{children:"Definition"}),v.jsx("br",{}),e.Definition]}),e.Remark?v.jsxs("p",{children:[v.jsx("b",{children:"Note"}),v.jsx(Gje,{content:e.Remark})]}):v.jsx(v.Fragment,{})]}),v.jsx("div",{className:"col-8",style:{fontSize:"75%"},children:v.jsxs("div",{className:"row p-0 m-0 justify-content-between",children:[v.jsxs("div",{className:"col-md-6 p-0 m-0",children:[v.jsx("b",{children:"Remarks"}),v.jsx("br",{}),v.jsxs("b",{children:["Round 2",""]})," ",e.R2?e.R2+", "+e.Y2:"NA",v.jsx("br",{}),v.jsxs("b",{children:["Round 1",""]})," ",e.R1?e.R1+", "+e.Y1:"NA",v.jsx("br",{}),v.jsxs("b",{children:["Change",""]})," ",e.R1&&e.R2?v.jsx(v.Fragment,{children:"Round 2 - Round 1"}):"NA"]}),v.jsxs("div",{className:"col-md-6 p-0 m-0",children:[v.jsx("div",{className:"float-end",children:v.jsx(XD,{about:"About this color bar"})}),m]})]})})]})]})}const v8={esri:"https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",label:"https://{s}.basemaps.cartocdn.com/light_only_labels/{z}/{x}/{y}{r}.png",positron:"https://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}{r}.png"};function C6e({param:e,data:t,boundary:n,func:i,filterFunc:r}){const o=Qw[e.country],a=o.indicators[e.indicator],s=o.NoR2.includes(e.indicator)?"R1":"R2",[l,u]=F.useState(),[c,d]=F.useState({round:s,field:e.indicator+"_"+s,showRaster:!1,showLabel:!1});F.useEffect(()=>{const U=o.NoR2.includes(e.indicator)?"R1":"R2";d({round:U,field:e.indicator+"_"+U,showRaster:!1,showLabel:!1}),u()},[e.indicator]);const h=F.useRef(),m=F.useRef(),g=F.useRef(),y=F.useRef();var x;const b=()=>(x=lze(),null),w=n.features.map(U=>U.properties);function S(U){x.fitBounds(U)}function k(){return v.jsx("div",{id:"zoomPanel",className:"leaflet-bottom leaflet-left",children:v.jsxs("div",{className:"leaflet-control btn-group-vertical",children:[v.jsx("button",{className:"map-btn",title:"Zoom-in",onClick:()=>x.zoomIn(),children:v.jsx(kje,{})}),v.jsx("button",{className:"map-btn",title:"Zoom-out",onClick:()=>x.zoomOut(),children:v.jsx(Eje,{})}),v.jsx("button",{className:"map-btn",title:"Reset View",onClick:()=>x.setView(o.Center,o.Zoom),children:v.jsx(Cje,{})})]})})}function R(){const[U,B]=F.useState(!0);let V=!!o.DistrictOnly.includes(e.indicator),K=!!o.NoR1.includes(e.indicator),H=!!o.NoR2.includes(e.indicator);function J(){let ke=document.getElementById("layerControl");ke.getAttribute("style")==="display: block;"?(ke.style.display="none",B(!1)):(ke.style.display="block",B(!0))}function Q(ke){let ge={...c};ge.round=ke,ge.field=e.indicator+"_"+ke,ge.showRaster=!1,d(ge,{replace:!0})}function oe(ke){let ge={...c};ge.showRaster=ke,d(ge,{replace:!0})}function me(){let ke={...c};ke.showLabel=!c.showLabel,d(ke,{replace:!0})}return v.jsx("div",{className:"leaflet-top leaflet-left",children:v.jsx("div",{className:"leaflet-control m-1 p-0 m-0",children:v.jsxs("div",{className:"p-1 m-0 mt-1 rounded-2 bg-secondary-subtle",style:{display:"block"},children:[v.jsxs("div",{className:"subtitle",onClick:J,style:{height:"25px",width:"125px"},children:[v.jsx("b",{children:"Control"}),v.jsx("i",{className:"float-end",children:U?v.jsx(wje,{title:"minimize"}):v.jsx(bje,{title:"maximize"})})]}),v.jsxs("div",{id:"layerControl",children:[v.jsxs(qt,{children:[v.jsx(qt.Check,{defaultChecked:c.round==="R2",disabled:H,type:"radio",id:"radio2",label:"Round 2",name:"optRound",title:H?"Unavailable for this indicator":"Show round 2 data",onClick:()=>Q("R2")}),v.jsx(qt.Check,{defaultChecked:c.round==="R1",disabled:K,type:"radio",id:"radio1",label:"Round 1",name:"optRound",title:K?"Unavailable for this indicator":"Show round 1 data",onClick:()=>Q("R1")}),v.jsx(qt.Check,{defaultChecked:c.round==="CH",disabled:H||K,type:"radio",id:"radio3",label:"Change",name:"optRound",title:H?"Unavailable for this indicator":"Show change",onClick:()=>Q("CH")})]}),v.jsx("hr",{className:"mb-2 mt-0"}),v.jsxs(qt,{children:[v.jsx(qt.Check,{defaultChecked:c.showRaster===!1,type:"radio",id:"radio_agg",label:"District Level",name:"optRaster",title:"Show aggregated data",onClick:()=>oe(!1)}),v.jsx(qt.Check,{defaultChecked:c.showRaster===!0,disabled:V,type:"radio",id:"radio_grid",label:"Grid Level",name:"optRaster",title:V?"Unavailable for this indicator":"Show gridded data",onClick:()=>oe(!0)})]}),v.jsx("hr",{className:"mb-2 mt-0"}),v.jsx(qt,{children:v.jsx(qt.Check,{type:"switch",id:"showLabel",label:"Show label",defaultChecked:c.showLabel,onChange:me})})]})]})})})}const M=F.useMemo(()=>(a.Definition=rc[e.indicator].Definition,a.Unit=rc[e.indicator].Unit,a.Proportional=rc[e.indicator].Proportional,v.jsx(S6e,{param:a,opt:c.round})),[e.indicator,c.round]),T=F.useMemo(()=>v.jsx(R,{}),[e.indicator,c]),N=F.useMemo(()=>{function U(B){u(B.target.value),i(B.target.value)}return v.jsxs("div",{children:[v.jsxs("b",{children:["Select ",e.config.Adm1]}),v.jsxs(qt.Select,{id:"selectState",onChange:U,value:l,children:[v.jsx("option",{value:""}),w.map((B,V)=>v.jsx("option",{value:B.state,x:B.x,y:B.y,children:B.state},V))]})]})},[l]);F.useMemo(()=>v.jsxs("div",{className:"row",children:[v.jsx("div",{className:"col-lg-7"}),v.jsx("div",{className:"col-lg-5",children:v.jsx("b",{children:"Inspect Map"})})]}),[c]);const D=F.useCallback(U=>{let B=a.Palette1,V=[a.Min,a.Max];return c.round==="CH"&&(B=a.Palette2,V=[a.CHMin,a.CHMax]),{zIndex:2,weight:.5,opacity:1,color:"#FFFFFF",fillOpacity:1,fillColor:lne(U.properties[c.field],V,B)}},[e.indicator,c]);let I=t?t.features.filter(U=>U.properties.state===l):[];I.forEach(U=>{const B=c.round==="CH"?{R1:U.properties[e.indicator+"_R1"],R2:U.properties[e.indicator+"_R2"],CH:U.properties[e.indicator+"_CH"]}:{[c.round]:U.properties[c.field]};U.properties.toDisplay=B}),F.useEffect(()=>{h.current&&(h.current.clearLayers(),h.current.addData(I))},[h,I]),F.useEffect(()=>{m.current&&(m.current.clearLayers(),m.current.addData(n))},[h,n]),F.useEffect(()=>{if(g.current){const U=n.features.filter(B=>B.properties.state===l);g.current.clearLayers(),g.current.addData(U)}},[g,l]),F.useEffect(()=>{let U={...t};U.features=t.features.filter(B=>r(B.properties)),y.current&&(y.current.clearLayers(),y.current.addData(U),y.current.setStyle(D))},[y,e.indicator,c,r]);const z=F.useMemo(()=>{if(c.showRaster){let U="https://tiles.arcgis.com/tiles/7vxqqNxnsIHE3EKt/arcgis/rest/services/";return U+=`${e.config.Prefix}${c.field}/MapServer`,v.jsx(Jne,{name:"thisRaster",url:U})}else return v.jsx(t0,{data:t,ref:y,style:D,attribution:'Powered by <a href="https://www.esri.com">Esri</a>'})},[c.showRaster,c.field,e.indicator,t]),X=(U,B)=>{B.on({mouseover:function(V){let H=`<div><b>${V.target.feature.properties.state}</b></div>`;B.setStyle({weight:3}),B.bindTooltip(H),B.openTooltip()},mouseout:function(V){B.setStyle({weight:.5}),B.closeTooltip()},click:function(V){const K=V.target.feature.properties.state;B.setStyle({weight:3}),S(V.target._bounds),u(K),i(K)}})},W=(U,B)=>{function V(K){let H=`<div><b>${K.district}</b>`;const J={R1:"R<sub>1</sub>",R2:"R<sub>2</sub>",CH:"Change"};return H+=`<br/>${K.state}<br/>`,Object.keys(K.toDisplay).forEach((Q,oe)=>{H+=`<br/> ${J[Q]} ${jh(K.toDisplay[Q],2)}`}),H+="</div>",H}B.on({mouseover:function(K){const H=K.target.feature.properties,J=V(H);B.setStyle({weight:3,fillOpacity:.7}),B.bindTooltip(J),B.openTooltip()},mouseout:function(K){B.setStyle({weight:.5,fillOpacity:0}),B.closeTooltip()}})};return v.jsxs("div",{id:"map-container",className:"row p-0 m-0",children:[M,v.jsx("div",{className:"row m-0 p-0 mb-2",children:v.jsxs(cze,{zoomControl:!1,center:e.config.Center,zoom:e.config.Zoom,minZoom:3,maxZoom:9,style:{width:"100%",height:"60vh",minHeight:"400px",background:"#fff",borderRadius:"10px"},children:[v.jsx(b,{}),v.jsx(k,{}),T,v.jsx(Kx,{name:"basemap",style:{zIndex:0},children:v.jsx(f8,{url:v8.positron})}),c.showLabel?v.jsx(f8,{url:v8.label,zIndex:500}):v.jsx(v.Fragment,{}),v.jsx(Kx,{name:"tiles",style:{zIndex:55},children:z}),v.jsxs(Kx,{name:"selected",style:{zIndex:60},children:[v.jsx(t0,{data:l,ref:g,style:qje,zIndex:400}),v.jsx(t0,{data:n,ref:m,style:o8,onEachFeature:X})]}),c.showLabel?null:v.jsxs(Kx,{name:"boundary",style:{zIndex:65},children:[v.jsx(t0,{data:n,style:o8,onEachFeature:X}),v.jsx(t0,{data:I,ref:h,style:Vje,onEachFeature:W})]})]})}),v.jsxs("div",{className:"row m-0 p-0 mb-2 bg-secondary-subtle rounded-3",children:[v.jsxs("div",{className:"col-5 p-2",style:{fontSize:"75%"},children:[e.config.Adm1," of interest can be selected by clicking the map or using dropdown menu on the right."]}),v.jsx("div",{className:"col-7 p-2",children:N})]})]})}const x8=Object.keys(Qw),E6e=["Burkina Faso","Kenya","Nigeria"],k6e=["Burkina Faso","Nigeria"],Oh=async(e,t)=>{await fetch(e).then(n=>n.json()).then(n=>t(n))};function CR(){let e=bae(),t=nP();const[n,i]=F.useState({country:"",indicator:"",config:"",showData:"all",probLimit:0}),[r,o]=F.useState(),[a,s]=F.useState(),[l,u]=F.useState(),[c,d]=F.useState(),[h,m]=F.useState();F.useEffect(()=>{const N=t.pathname.split("/");let D={country:"",indicator:"",config:"",showData:"all",probLimit:0};if(x8.includes(N[1])){D.country=N[1],D.config=Qw[N[1]];const I=Object.keys(D.config.indicators);N.length===3&I.includes(N[2])?D.indicator=N[2]:D.indicator="";const z=`./public/data/${D.country}`;Oh(`${z}/${D.config.TLC}_adm1.json`,o),Oh(`${z}/${D.config.TLC}_data.json`,s),Oh(`${z}/${D.config.TLC}_table.json`,u),console.log("fetch data",z)}i(D,{replace:!0})},[n.country]),F.useEffect(()=>{if(h){const N=l.filter(D=>D.state===h);d(N,{replace:!0})}},[h]),F.useMemo(()=>v.jsx("div",{children:v.jsx(Kse,{variant:"light"})}),[]);const g=F.useMemo(()=>{let N={rounds:""};if(n.indicator){const D=n.config.indicators[n.indicator],I=!n.config.NoR1.includes(n.indicator)&!n.config.NoR2.includes(n.indicator),z=n.config.NoR1.includes(n.indicator)?`Round 2 (${D.R2}, ${D.Y2})`:`Round 1 (${D.R1}, ${D.Y1})`;N={rounds:I?`Round 1 (${D.R1}, ${D.Y1}), Round 2 (${D.R2}, ${D.Y2}), or the change between rounds (Round 2 and Round 1)`:z}}return N},[n.indicator]),y=F.useCallback(N=>{const D=N[`${n.indicator}_CH`],I=N[`${n.indicator}_CH_P`];let z=!0;return eF.includes(n.indicator)?z=n.showData==="pos"?D>0&&I>n.probLimit:n.showData==="neg"?D<=0&&I<100-n.probLimit:!0:z=n.showData==="neg"?D>0&&I>n.probLimit:n.showData==="pos"?D<=0&&I<100-n.probLimit:!0,z},[n.showData,n.probLimit]);function x(N){const D=N.target.value;let I={country:D,indicator:"",config:Qw[D],showData:"all",probLimit:0};if(m(),s(),d(),i(I,{replace:!0}),e("/"+D,{replace:!0}),x8.includes(D[1])){const z=`./public/data/${I.country}`;console.log("fetch data",z),Oh(`${z}/${I.config.TLC}_adm1.json`,o),Oh(`${z}/${I.config.TLC}_data.json`,s),Oh(`${z}/${I.config.TLC}_table.json`,u)}document.getElementById("selectIndicator")&&(document.getElementById("selectIndicator").value="")}function b(N){const D=N.target.value;let I={...n};I.indicator=D,I.showData="all",I.probLimit=0,m(),d(),i(I,{replace:!0}),e(`/${n.country}/${D}`,{replace:!0});const z=document.getElementById("selectFilter");z&&(z.value="all")}function w(N){const D=N.target.value;let I={...n};D.slice(0,3)==="pos"?(I.showData="pos",I.probLimit=e0["Show Improvement"][D].limit):D.slice(0,3)==="neg"?(I.showData="neg",I.probLimit=e0["Show Worsening"][D].limit):(I.showData="all",I.probLimit=0),i(I,{replace:!0})}function S(){return v.jsxs("div",{children:[v.jsx("b",{children:"Select country"}),v.jsxs(qt.Select,{id:"selectCountry",onChange:x,defaultValue:n.country,children:[v.jsx("option",{value:""}),E6e.map((N,D)=>{const I=N.replace(" ","").toLowerCase();return v.jsx("option",{value:I,disabled:k6e.includes(N),children:N},D)})]})]})}const k=F.useMemo(()=>{function N(D,I){return D.Indicator<I.Indicator?-1:D.Indicator>I.Indicator?1:0}if(n.country!=""){let D={};return Object.keys(n.config.indicators).forEach(I=>{const z=n.config.indicators[I].Theme;Object.keys(D).includes(z)?D[z].push({Key:I,Indicator:n.config.indicators[I].Indicator}):D[z]=[{Key:I,Indicator:n.config.indicators[I].Indicator}]}),v.jsxs("div",{children:[v.jsx("b",{children:"Select indicator"}),v.jsxs(qt.Select,{id:"selectIndicator",onChange:b,defaultValue:n.indicator,children:[v.jsx("option",{value:""}),Object.keys(D).map((I,z)=>v.jsx("optgroup",{label:I,children:D[I].sort(N).map((X,W)=>v.jsx("option",{value:X.Key,children:X.Indicator},W))},z))]})]})}else return v.jsx(v.Fragment,{})},[n.country]),R=F.useMemo(()=>{const N=l?!(n.indicator+"_CH_P"in l[0]):!1;return N?v.jsx(v.Fragment,{}):v.jsxs("div",{className:"row rounded-3 m-0 bg-secondary-subtle",children:[v.jsx("div",{className:"col-5 p-2",style:{fontSize:"75%"},children:"The data displayed can also be filtered according to how significant the change is. This applies when the unit-level confidence interval is available."}),v.jsxs("div",{className:"col-7 p-2 ",id:"selection",children:[v.jsx("b",{children:"Filter by Change Significance"}),v.jsx(XD,{about:"Note on the change certainty",positive:!0}),v.jsxs(qt.Select,{id:"selectFilter",onChange:w,disabled:N,defaultValue:"all",children:[v.jsx("option",{value:"all",children:"Show all"}),Object.keys(e0).map((D,I)=>v.jsx("optgroup",{label:D,children:Object.keys(e0[D]).map((z,X)=>v.jsx("option",{value:z,children:e0[D][z].label},X))},I))]})]})]})},[n.indicator]),M=F.useMemo(()=>a?v.jsx(C6e,{param:n,boundary:r,data:a,func:m,filterFunc:y}):v.jsx("div",{className:"m-0 p-3",children:v.jsx("kbd",{children:"Refresh the page to reload the data"})}),[n,a]),T=F.useMemo(()=>c?v.jsx(eze,{data:c,param:n,filterFunc:y}):v.jsx(v.Fragment,{}),[c,n]);return v.jsxs("div",{className:"container-fluid",children:[v.jsx("blockquote",{className:"blockquote text-center p-2",children:v.jsx("h1",{className:"display-6",children:"Subnational mapping of child and maternal health and development indicators in selected low- and middle-income countries"})}),v.jsx("div",{className:"row mt-3 p-2 mb-3 rounded-3 bg-secondary-subtle",children:v.jsxs("div",{className:"row d-flex justify-content-between",children:[v.jsxs("div",{className:"col-lg-8",children:[v.jsx("p",{children:"This web application presents a summary of the child and maternal health and development indicators calculated at subnational level (geographic areas below the national level) for a selection of countries of interest to CIFF."}),v.jsx("p",{children:"Multiple indicators are presented in map, chart, and tabulated form, and for multiple time points based on data availability. Changes over time for each indicator are also presented."}),v.jsxs("p",{children:["Please consult the ",v.jsx("a",{href:"./#/guide",children:"Guide"})," and the ",v.jsx("a",{href:"./#/about",children:"About"})," sections for more information on how to use this portal."]})]}),v.jsxs("div",{className:"col-lg-4 px-3",id:"selection",children:[v.jsx(S,{}),v.jsx("br",{}),k]})]})}),n.indicator===""?v.jsx(v.Fragment,{}):v.jsxs("div",{className:"p-0 m-0",children:[v.jsx("div",{className:"row",children:v.jsxs("div",{className:"col p-2 mb-3 rounded-3 bg-secondary-subtle",children:[v.jsx("h3",{children:v.jsxs(fb,{bg:"danger",children:[n.config.indicators[n.indicator].Indicator," in ",n.config.Name]})}),v.jsx("hr",{}),v.jsxs("p",{children:["The map below displays surfaces of subnational areas (either at ",n.config.Adm1.toLowerCase()," and ",n.config.Adm2.toLowerCase()," level or high-resolution 5x5km - pixel level data) of a particular indicator in ",n.config.Name,"."]}),v.jsxs("p",{children:["Data from ",g.rounds," for ",n.config.Name," can be selected and displayed."]}),v.jsxs("p",{children:["To get deeper information on a specific ",n.config.Adm1.toLowerCase()," or ",n.config.Adm2.toLowerCase()," in ",n.config.Name,", click on an area on the map or use the drop-down menu below. Once an area on the map has been selected, an additional set of information including tables or graphs to facilitate the interpretation of the data is displayed on the right side panel (Summary, Chart, and Table tabs)."]})]})}),v.jsxs("div",{className:"row mt-3 p-0 mb-3",children:[v.jsxs("div",{className:"col-xl-7 p-0 m-0 px-1",children:[v.jsx(r8,{element:M,elemID:"map-container",param:["map",n],title:v.jsx("div",{className:"subtitle",children:v.jsxs("h4",{children:["Map of ",n.country]})})}),M,R]}),v.jsx("div",{className:"col-xl-5 p-0 m-0 px-1",children:h?v.jsxs(v.Fragment,{children:[v.jsx(r8,{element:T,param:["table",n],elemID:"chart-container"}),T]}):v.jsx(v.Fragment,{})})]})]})]})}const R6e="/temporary/assets/exceedance-2-zf-W3bHS.png",T6e="/temporary/assets/aggregation-25r2IAUX.png",A6e="/temporary/assets/disaggregation-2WkmDDpY.png",M6e="/temporary/assets/type-1-QWprYAVG.png",F6e="/temporary/assets/type-2-ICDnb6Aq.png",P6e="/temporary/assets/workflow-S-atE33Q.png";function n0({which:e}){return{zero:z6e(),boundary:B6e(),change:H6e(),ihme:U6e(),espen:W6e()}[e]}function zh({src:e,label:t,number:n,caption:i,width:r="80%"}){return v.jsxs("div",{id:t,className:"m-2 text-center",children:[v.jsx("div",{className:"text-center",children:v.jsx($ue,{alt:t,src:e})}),v.jsxs("figcaption",{className:"text-center",children:[v.jsxs("b",{children:["Figure ",n,"."]})," ",i]})]})}const N6e=[{State:"Andaman & Nicobar Islands",Count:"3"},{State:"Andhra Pradesh",Count:"13"},{State:"Bihar",Count:"38"},{State:"Chandigarh",Count:"1"},{State:"Dandra & Nagar Haveli & Daman & Diu",Count:"3"},{State:"Goa",Count:"2"},{State:"Himachal Pradesh",Count:"12"},{State:"Jammu and Kashmir",Count:"20"},{State:"Jharkhand",Count:"24"},{State:"Karnataka",Count:"30"},{State:"Kerala",Count:"2"},{State:"Ladakh",Count:"1"},{State:"Lakshadweep",Count:"14"},{State:"Manipur",Count:"9"},{State:"Mizoram",Count:"8"},{State:"Nagaland",Count:"11"},{State:"Odisha",Count:"30"},{State:"Puducherry",Count:"4"},{State:"Rajasthan",Count:"33"},{State:"Sikkim",Count:"4"},{State:"Tamil Nadu",Count:"32"},{State:"Uttarakhand",Count:"13"}],$6e=[{State:"Arunachal Pradesh",Type1:"6",Type2:"1",Count15:"16",Count19:"20",New:"4"},{State:"Assam",Type1:"12",Type2:"-",Count15:"27",Count19:"33",New:"6"},{State:"Chhattisgarh",Type1:"15",Type2:"-",Count15:"18",Count19:"27",New:"9"},{State:"Gujarat",Type1:"8",Type2:"3",Count15:"26",Count19:"33",New:"7"},{State:"Haryana",Type1:"1",Type2:"-",Count15:"21",Count19:"22",New:"1"},{State:"Madhya Pradesh",Type1:"2",Type2:"-",Count15:"50",Count19:"51",New:"1"},{State:"Maharashtra",Type1:"2",Type2:"-",Count15:"35",Count19:"36",New:"1"},{State:"Meghalaya",Type1:"8",Type2:"-",Count15:"7",Count19:"11",New:"4"},{State:"NCT of Delhi",Type1:"4",Type2:"4",Count15:"9",Count19:"11",New:"2"},{State:"Punjab",Type1:"4",Type2:"-",Count15:"20",Count19:"22",New:"2"},{State:"Telangana",Type1:"23",Type2:"7",Count15:"10",Count19:"31",New:"21"},{State:"Tripura",Type1:"7",Type2:"-",Count15:"4",Count19:"8",New:"4"},{State:"Uttar Pradesh",Type1:"4",Type2:"2",Count15:"71",Count19:"75",New:"4"},{State:"West Bengal",Type1:"2",Type2:"-",Count15:"19",Count19:"20",New:"1"}],O6e=[{title:"Arunachal Pradesh",items:["A new district (Kra Daadi) was formed from Kurung Kumey district.","Longding district was created from Tirap district.","Namsai district was created from Lohit district.","A new Siang district was created from Parent districts West Siang and East Siang."]},{title:"Assam",subtitle:"All 6 new districts created from type 1 Parent districts include:",items:["Biswanath district was created from Sonitpur","Charaideo from Sivasagar","Hojai from Nagaon","Majuli from Jorhat","South Salmara Mancachar from Dhubri","West Karbi Anglong from Karbi Anglong"]},{title:"Gujarat",subtitle:"New districts formed include:",items:["Botad from Bhavnagar and Ahmadabad","Chhota Udaipur from Vadodara","Devbhumi Dwarka from Jamnagar","Gir Somnath from Junagadh","Mahisagar from Panchmahal and Kheda","Morbi from Rajkot and Surrendranagar"]},{title:"Chhattisgarh",subtitle:"Dakshin Bastar Dantewada district in 2015-16 no longer exists, as two new districts: Dantewada and Sukma were created from it in 2019-21. Balod and Bemetara districts were also created from Durg district, thus forming three new districts including Durg.  Surguja district in 2015-16 has also been divided into three: Balarampur, Surajpur, and Surguja. Other districts formed include:",items:["Baloda Bazar from Raipur","Kodagaon from Bastar","Mungeli from Bilaspur"]},{title:"NCT of Delhi",subtitle:"Two entirely new districts: Shahdara (formed from North East and East districts), and South East Delhi (formed from South district) have been added. Although other districts bear the same name as in 2015-16, they have changed boundaries, for example,",items:["Central district and North district boundaries have been merged to form a new Central district in 2019-21","With the 2015-16 North merging as stated above, the 2015-16 North West district was also divided into new North and North West districts","New Delhi district in 2019-21 now includes a part of the 2015-16 South West boundaries with the 2015-16 New Delhi boundary","2015-16 South district is now divided into two 2019-21 districts- South and South East"]},{title:"Telangana",subtitle:"The following type 1 and type 2 districts exist in Telangana state in 2019-21:",items:["Komaram Bheem Asifabad, Mancherial, and Nirmal from Adilabad district in 2015-16","Jagitial, Peddapalli, and Rajanna Sircilla districts from Karimnagar 2015-16 district","Kothagudem from Khammam","Jogulamba Gadwal and Nagarkurnool from Mahbubnagar","Kamareddy from Nizamabad","Medchal-Malkajgiri from RangaReddy","Sangareddy from Medak","Suryapet and Yadadri Bhuvanagiri from Nalgonda","Warangal Rural from Warangal","Jangoan from Warangal and Nalgonda","Jayashankar Bhupalapally from Karimnagar, Warangal, and Khammam","Mahabubabad from Warangal and Khammam","Ranga Reddy and Vikarabad from RangaReddy and Mahabubnagar","Siddipet from Medak, Warangal, and Karimnagar","Warangal Urban from Warangal and Karimnagar"]},{title:"Haryana",subtitle:"The only new district formed is Charkhi Dadri from Bhiwani district.",items:""},{title:"Madhya Pradesh",subtitle:"Only one new district was formed: Agar Malwa from Shajapur district.",items:""},{title:"Punjab",subtitle:"The two new districts formed are:",items:["Fazilka from Firozpur","Pathankot from Gurdaspur"]},{title:"Meghalaya",subtitle:"Jaintia Hills no longer exists in 2015-16 as the district now includes two new districts: East Jaintia Hills and West Jaintia Hills. Other new districts formed include:",items:["North Garo Hills from East Garo Hills","South West Garo Hills from West Garo Hills","South West Khasi Hills from West Khasi Hills"]},{title:"Uttar Pradesh",subtitle:"Four new districts formed are:",items:["Amethi from Sultanpur and Rae Bareli","Hapur from Ghaziabad","Sambhal from Moradabad and Budaun","Shamli from Muzaffarnagar"]},{title:"West Bengal",subtitle:"Barddhaman district no longer exists, but has two new districts created from it:",items:["Paschim Barddhaman and Purba Barddhaman"]},{title:"Tripura",subtitle:"The new districts formed include:",items:["Khowai and Sepahijala from West district","Unakoti from North district"]}];function I6e({obj:e}){return v.jsx("div",{children:v.jsx(Dn,{border:"primary",children:v.jsxs(Dn.Body,{children:[v.jsx(Dn.Title,{children:e.title}),v.jsx(Dn.Subtitle,{children:e.subtitle?e.subtitle:""}),e.items?v.jsx(Dn.Text,{children:v.jsx("div",{children:v.jsx("ul",{children:e.items.map((t,n)=>v.jsx("li",{children:t},n))})})}):""]})})})}function D6e(){return v.jsx(Hf,{xs:1,md:3,className:"g-2",children:O6e.map((e,t)=>v.jsx(zf,{children:v.jsx(I6e,{obj:e},t)},t))})}function L6e(){return v.jsxs("div",{className:"bg-secondary-subtle rounded-4 p-3",children:[v.jsx("h4",{children:"Background"}),v.jsxs("p",{children:["The India NFHS surveys are constructed to be representative at national, province and district level for most of the indicators. In the case of rare events indicators such as stillbirth rates, or where more sophisticated estimation methods were needed such as mortality rates (child and neonatal mortality rates), indicators were constructed and mapped at district level using the surveys. Specifically, for four indicators named, unsafe abortion, neonatal mortality rate, child mortality rate and stillbirth rate we used a two-step approach: ",v.jsx("b",{children:"Step 1"}),". We followed the methods described in Subramaniam et al. (2021) and Ulahannan et al. (2022) to match the 2015-16 NFHS-4 data to 2019-21 NFHS-5 boundaries (ICF. The Demographic and Health Surveys Program Spatial Data Repository), in order to be able to compare changing districts over time; ",v.jsx("b",{children:"Step 2"}),". Once all data were available at NFHS-5 boundaries, we rasterised the data for the whole country and then aggregated the data using the district level official boundaries of India (Ministry of Science and Technology, Government of India), which were used for final display on the online portal. Average values for districts were used for aggregation."]}),v.jsx("p",{children:"For child worker, census estimates were used to calculate the indicator, and only had one point in time was available. Since census boundaries aligned with NFHS-4 boundaries, the same two-step approached as described above was applied."}),v.jsx("p",{children:"While the surveys were designed to be representative at the district level, caution is advised in interpreting and utilizing the findings due to the inherent limitations posed by small sample sizes for the mentioned indicators"}),v.jsx("p",{children:"Furthermore, it is important to note that the indicators discussed herein are rare events, further emphasizing the need for careful consideration and caution in their interpretation, given the limited sample sizes at the district level."}),v.jsx("h5",{children:"Step 1. Harmonising boundaries from round 1 (NFHS-4) to round 2 (NFHS-5) to match round 2 (NFHS-5)"}),v.jsx("p",{children:"The administrative boundaries of India for the year 2015-2016 (NFHS-4) count a total of 640 districts while the administrative boundaries of India for the year 2019-2021 (NFHS-5) count a total of 707 districts (67 additional districts) (ICF. The Demographic and Health Surveys Program Spatial Data Repository). However, there are 36 states in both years with changes. The boundary changes begin with the addition of new states and the removal of some states, for example, at the state level, a new state Ladakh was created in 2019-2021 from Jammu and Kashmir, as shown in Figure 1 below."}),v.jsx(zh,{src:A6e,label:"dissagregation",number:"1",width:"600px",caption:"States dissagregation example"}),v.jsx("p",{children:"Meanwhile, Dadra and Nagar Haveli and Daman and Diu, two distinct states have now merged to form a new state called Dadra & Nagar Haveli & Daman & Diu as shown below in Figure 2."}),v.jsx(zh,{src:T6e,label:"aggregation",number:"2",width:"550px",caption:"States agregation example"}),v.jsx("p",{children:"For the additional 67 districts, data from NFHS-4 are not available therefore, to be able to compare changes in indicators aggregated at the district level, we applied a simple methodology to harmonize geographical boundaries across the two time periods and assign the corresponding indicator value following Subramaniam et al. (2021) and Ulahannan et al. (2022). The methodology that we applied involves re-assigning indicators' values calculated from NFHS-4 data to all the 2019-21 NFHS-5 districts. This approach therefore does not make any alterations to the 2019-21 NFHS-5 data that are reported at the district level."}),v.jsx("p",{children:"The newly created 67 districts were formed from one or more districts included in the NFHS-4 dataset and can be divided into two different categories: type 1 and type 2. Type 1 districts (55 districts) were formed by altering the boundaries of one single district from 2015-16 NFHS-4 administrative boundaries and creating one new district. In comparison, type 2 districts (12 districts) were formed by adding geographical units from two or more parent districts. For the type 1 districts formed from one single parent district we assigned the same indicator's value as the parent district (Figure 3 and Table 1)"}),v.jsx(zh,{src:M6e,label:"type1",number:"3",width:"400px",caption:"Example of type 1 districts (Assam State)"}),v.jsx("p",{children:"In the example above the type 1 districts Biswanath and Hojai were formed from the parent district Sonitpur and Nagaon, respectively. For example, to calculate the NFHS-5 Unsafe abortion values, the new district (Biswanath) takes the same value for its parent district (Sonitpur). The same is applicable to the 95% Lower and Upper Confidence Intervals (CI) as shown in the table below:"}),v.jsxs("div",{id:"table1",className:"px-5",children:[v.jsxs("div",{className:"text-center",children:[v.jsx("b",{children:"Table 1."})," Example of indicator's value assignment for type 1 districts"]}),v.jsxs($u,{hover:!0,striped:"columns",children:[v.jsxs("thead",{children:[v.jsxs("tr",{children:[v.jsx("td",{}),v.jsx("td",{colSpan:4,className:"text-center",children:"Unsafe Abortion Value"})]}),v.jsxs("tr",{children:[v.jsx("td",{children:"District"}),v.jsx("td",{children:"NFHS-4 (mean)"}),v.jsx("td",{children:"NFHS-4 (lower CI)"}),v.jsx("td",{children:"NFHS-4 (upper CI)"}),v.jsx("td",{children:"NFHS-5 (mean)"})]})]}),v.jsxs("tbody",{children:[v.jsxs("tr",{children:[v.jsx("td",{children:"Sonitpur"}),v.jsx("td",{children:"21.3"}),v.jsx("td",{children:"8.8"}),v.jsx("td",{children:"43.0"}),v.jsx("td",{children:"35.9"})]}),v.jsxs("tr",{children:[v.jsx("td",{children:"Biswanath"}),v.jsx("td",{children:"21.3"}),v.jsx("td",{children:"8.8"}),v.jsx("td",{children:"43.0"}),v.jsx("td",{children:"35.9"})]}),v.jsxs("tr",{children:[v.jsx("td",{children:"*Sonitpur"}),v.jsx("td",{children:"21.3"}),v.jsx("td",{children:"8.8"}),v.jsx("td",{children:"43.0"}),v.jsx("td",{children:"35.9"})]})]}),v.jsx("tfoot",{children:v.jsx("tr",{children:v.jsx("td",{colSpan:5,children:"Notes: *Sonitpur is the altered version of Sonitpur from NFHS-4 after Biswanath was created from it."})})})]})]}),v.jsx("p",{children:"For type 2 districts, which were formed by adding areas from two or more parent districts, we assigned the average indicator's value of the respective parent district (Figure 4 and Table 2)."}),v.jsx(zh,{src:F6e,label:"type2",number:"4",width:"450px",caption:"Example of type 2 districts (Gujarat State)"}),v.jsx("p",{children:"In the example above the type 2 district Botad was formed from the parent districts Ahmadabad and Bhavnagar."}),v.jsxs("div",{id:"table2",className:"px-5",children:[v.jsxs("div",{className:"text-center",children:[v.jsx("b",{children:"Table 2."})," Example of indicator's value assignment for type 2 districts"]}),v.jsxs($u,{hover:!0,striped:"columns",children:[v.jsxs("thead",{children:[v.jsxs("tr",{children:[v.jsx("td",{}),v.jsx("td",{colSpan:4,className:"text-center",children:"Total Fertility Rate"})]}),v.jsxs("tr",{children:[v.jsx("td",{children:"District"}),v.jsx("td",{children:"NFHS-4 (mean)"}),v.jsx("td",{children:"NFHS-4 (lower CI)"}),v.jsx("td",{children:"NFHS-4 (upper CI)"}),v.jsx("td",{children:"NFHS-5 (mean)"})]})]}),v.jsxs("tbody",{children:[v.jsxs("tr",{children:[v.jsx("td",{children:"Ahmadabad"}),v.jsx("td",{children:"0.256"}),v.jsx("td",{children:"0.067"}),v.jsx("td",{children:"0.621"}),v.jsx("td",{children:"0.284"})]}),v.jsxs("tr",{children:[v.jsx("td",{children:"Bhavnagar"}),v.jsx("td",{children:"0.000"}),v.jsx("td",{children:"n/a"}),v.jsx("td",{children:"n/a"}),v.jsx("td",{children:"0.000"})]}),v.jsxs("tr",{children:[v.jsx("td",{children:"Botad"}),v.jsx("td",{children:"0.128"}),v.jsx("td",{children:"0.067"}),v.jsx("td",{children:"0.621"}),v.jsx("td",{children:"0.000"})]}),v.jsxs("tr",{children:[v.jsx("td",{children:"*Ahmadabad"}),v.jsx("td",{children:"0.256"}),v.jsx("td",{children:"0.067"}),v.jsx("td",{children:"0.621"}),v.jsx("td",{children:"1.712"})]}),v.jsxs("tr",{children:[v.jsx("td",{children:"*Bhavnagar"}),v.jsx("td",{children:"0.000"}),v.jsx("td",{children:"0.067"}),v.jsx("td",{children:"0.621"}),v.jsx("td",{children:"1.794"})]})]}),v.jsxs("tfoot",{children:[v.jsx("tr",{children:v.jsx("td",{colSpan:5,children:"Notes: *Ahmadabad and *Bhavnagar are the altered versions of Ahmadabad and Bhavnagar from NFHS-4 after Botad was created from it."})}),v.jsx("tr",{children:v.jsx("td",{colSpan:5,children:"n/a = not applicable, only *Ahmadabad and *Bhavnagar are part of NFHS-5"})})]})]})]}),v.jsx("p",{children:"Out of 36 states, 22 states have neither type 1 nor type 2 boundaries, these states are listed below with their numbers of unchanging district boundaries, that is, same number of boundaries in 2015-16 and 2019-21 (Table 3)."}),v.jsxs("div",{id:"table3",className:"px-5",children:[v.jsxs("div",{className:"text-center",children:[v.jsx("b",{children:"Table 3."})," Number of districts in each state in 2019-21"]}),v.jsxs($u,{hover:!0,striped:"columns",size:"lg",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("td",{children:"No."}),v.jsx("td",{children:"State"}),v.jsx("td",{children:"Total Districts in 2019-2021"})]})}),v.jsx("tbody",{children:N6e.map((e,t)=>v.jsxs("tr",{children:[v.jsx("td",{children:t+1}),v.jsx("td",{children:e.State}),v.jsx("td",{children:e.Count})]},t))}),v.jsx("tfoot",{children:v.jsxs("tr",{style:{fontWeight:"bold"},children:[v.jsx("td",{colSpan:2,children:"SUM"}),v.jsx("td",{children:"307"})]})})]})]}),v.jsx("p",{children:"These constitute 307 out of 707 districts that have not changed boundaries to either type 1 or type 2. The remaining 400 districts fall within 14 states, and all have type 1 districts, the only states without type 2 district boundaries are Assam, Chhattisgarh, Haryana, Madhya Pradesh, Maharashtra, Meghalaya, Punjab, Tripura, and West Bengal states."}),v.jsx("p",{children:"The following are the number of type 1 and type 2 districts with the total districts in each respective year, stating the number of new districts created in each state (Table 4)."}),v.jsxs("div",{id:"table4",className:"px-5",children:[v.jsxs("div",{className:"text-center",children:[v.jsx("b",{children:"Table 4."})," Number of districts in each state in 2019-21"]}),v.jsxs($u,{hover:!0,striped:"columns",size:"lg",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("td",{children:"No."}),v.jsx("td",{children:"State"}),v.jsx("td",{children:"Type-1 Districts"}),v.jsx("td",{children:"Type-2 Districts"}),v.jsx("td",{children:"Total Districts in 2015-2016"}),v.jsx("td",{children:"Total Districts in 2019-2021"}),v.jsx("td",{children:"New Districts"})]})}),v.jsx("tbody",{children:$6e.map((e,t)=>v.jsxs("tr",{children:[v.jsx("td",{children:t+1}),v.jsx("td",{children:e.State}),v.jsx("td",{children:e.Type1}),v.jsx("td",{children:e.Type2}),v.jsx("td",{children:e.Count15}),v.jsx("td",{children:e.Count19}),v.jsx("td",{children:e.New})]},t))}),v.jsx("tfoot",{children:v.jsxs("tr",{style:{fontWeight:"bold"},children:[v.jsx("td",{colSpan:2,children:"Total"}),v.jsx("td",{}),v.jsx("td",{}),v.jsx("td",{children:"333"}),v.jsx("td",{children:"400"}),v.jsx("td",{children:"67"})]})})]})]}),v.jsx(sx,{className:"mb-3",children:v.jsxs(sx.Item,{eventKey:"0",children:[v.jsx(sx.Header,{children:"Click to show the details on the changes."}),v.jsx(sx.Body,{children:v.jsx(D6e,{})})]})}),v.jsx("h5",{children:"Step 2. Rasterization and harmonisation to national official boundaries to enable over time comparisons"}),v.jsx("p",{children:"With indicator values for the 707 NFHS-5 districts in table format, these are joined to the NFHS-5 district boundary shapefile using a common attribute (State_District). For each indicator and confidence intervals within the joined table, the shapefile is rasterized, to match the raster properties (coordinate system, cell size and grid alignment) derived from a common mastergrid of the national boundaries (WorldPop et al, 2018). The rasterized indicator values are then summarized using the district level official boundaries of India (Ministry of Science and Technology, Government of India) by using a GIS tool that calculates the zonal statistics using R (2021) software. This produces statistics (mean and median) from all the raster cells that sit within each district boundary so that indicator values are generated for each of the 742 districts. Medians were used to summarise the indicators of interest. This outputted table can be exported as a csv file or shapefile. A flowchart of the steps can be found in Figure 5."}),v.jsx(zh,{src:P6e,label:"flowchart",number:"5",caption:"Flowchart illustrating the process of convering indicator values from NFHS-5 district boundaries to official distric boundaries"}),v.jsxs("div",{id:"reference",children:[v.jsx("h4",{children:"Reference"}),v.jsxs("ul",{children:[v.jsx("li",{id:"subramaniam2021",children:"Subramaniam SV, Kumar A, Tripathi N. Geographic insights lab. NFHS policy Tracker for districts. Cambridge, USA: Harvard Center for Population and Development Studies and Center for Geographic Analysis at Harvard, 2021."}),v.jsx("li",{id:"ulahannan2022",children:v.jsx("a",{href:"https://gh.bmj.com/content/7/4/e007798.abstract",target:"_blank",children:'Ulahannan, Sabu Kochupurackal, et al. "Alarming level of severe acute malnutrition in Indian districts." BMJ global health 7.4 (2022): e007798.'})}),v.jsx("li",{id:"worldpop2018",children:v.jsx("a",{href:"https://hub.worldpop.org/geodata/summary?id=29691",target:"_blank",children:"WorldPop (www.worldpop.org - School of Geography and Environmental Science, University of Southampton; Department of Geography and Geosciences, University of Louisville; Departement de Geographie, Universite de Namur) and Center for International Earth Science Information Network (CIESIN), Columbia University (2018). Global High Resolution Population Denominators Project - Funded by The Bill and Melinda Gates Foundation (OPP1134076). https://hub.worldpop.org/geodata/summary?id=29691 . [Accessed 09 January 2023]."})}),v.jsx("li",{id:"rcoreteam2021",children:v.jsx("a",{href:"https://R-project.org",target:"_blank",children:"R Core Team (2021). R: A language and environment for statistical. computing. R Foundation for Statistical Computing, Vienna, Austria"})})]})]}),v.jsx("br",{}),v.jsx("hr",{}),v.jsx("h4",{children:"."})]})}function j6e(){return v.jsxs("div",{className:"bg-secondary-subtle rounded-4 p-3",children:[v.jsxs("p",{children:["For this work, Population Division, United States Census Bureau (USCB) open access boundaries were used for geographical aggregations and for displaying purposes. USCB produced administrative level 1 and 2 boundaries in line with the subnational administrative structure used for Kenyas 2019 census. Kenya national boundaries as reported by the USCB datasets were made to align to the Large Scale International Boundary Line (LSIB) dataset from the United States. The U.S. Census Bureaus products are open access and can be accessed from ",v.jsx("a",{href:"https://www.census.gov/geographies/mapping-files/time-series/demo/international-programs/subnationalpopulation.html",children:"here"}),"."]}),v.jsx("p",{children:"For modelled-based indicators (5x5km high resolution maps), official national country boundaries were used to model and summarise the estimates at sub-county level (US Census Bureau). Pixels coinciding with known water bodies were left as NAs and were ignored when aggregating to administrative boundaries."}),v.jsx("p",{children:"For selected indicators where high resolution modelling of the DHS data was not appropriate (e.g. rare events indicators such as stillbirth rate and low birth weight), county level only estimates were used. The DHS data are representative of counties as defined by the DHS (KNBS and ICF, 2023). This required processing to join the tabular data to the DHS county-level boundaries used in the original data collection for both round 1 (Kenya DHS-7, 2014) and 2 (Kenya DHS-8, 2022, DHS Spatial Data Repository), before rasterizing in line with a Kenya mastergrid and re-summarising using the USCB county-level boundaries, taking the mean pixel value falling within a given boundary. KPHC data (Child Labour) was joined to the USCB county-level boundaries based on name. Changes in the areas between DHS-7 and DHS-8 in selected counties were inspected and considered negligible for this work. All GIS processing was carried out in ArcGIS Pro 2.7.3."}),v.jsxs("div",{id:"reference",children:[v.jsx("h4",{children:"Reference"}),v.jsx("div",{className:"row p-0 m-0 px-3",children:v.jsxs("ul",{style:{marginBottom:"20px"},children:[v.jsxs("li",{children:["Population Division, U.S. Census Bureau. The U.S. Census Bureau's products are open access and can be accessed from ",v.jsx("a",{href:"https://www.census.gov/geographies/mapping-files/time-series/demo/international-programs/subnationalpopulation.html",children:"here"}),"."]}),v.jsx("li",{children:"KNBS and ICF. 2023. Kenya Demographic and Health Survey 2022: Volume 1. Nairobi, Kenya, and Rockville, Maryland, USA: KNBS and ICF."}),v.jsxs("li",{children:["Spatial Data Repository: Kenya 2014 & 2020 DHS - National and Sub-National Boundaries. ",v.jsx("a",{href:"spatialdata.dhsprogram.com",children:"spatialdata.dhsprogram.com"}),". [Accessed 01-01-2024]. ICF, The Demographic and Health Surveys Program Spatial Data Repository. Funded by USAID."]})]})})]}),v.jsx("br",{}),v.jsx("hr",{}),v.jsx("h4",{children:"."})]})}function z6e(){return v.jsxs("div",{className:"bg-secondary-subtle rounded-4 p-3",children:[v.jsx("h2",{children:"Technical Notes"}),v.jsxs(Hf,{xs:1,md:3,className:"g-2",children:[v.jsx(Dn,{style:{width:"18rem"},children:v.jsxs(Dn.Body,{children:[v.jsx(Dn.Title,{children:v.jsx("a",{href:"#/technote-1",className:"subtitle",children:"Technical Note 1"})}),v.jsx(Dn.Text,{children:"This note explains how we manage and harmonise the changes of administrative boundaries from round 1 to round 2. Careful harmonisation of the boundaries enables us to examine how a particular indicator changes over time."}),v.jsxs("a",{href:"#/technote-1",children:["Go to note",v.jsx("i",{className:"pi pi-arrow-circle-right mx-1"})]})]})}),v.jsx(Dn,{style:{width:"18rem"},children:v.jsxs(Dn.Body,{children:[v.jsx(Dn.Title,{children:v.jsx("a",{href:"#/technote-2",className:"subtitle",children:"Technical Note 2"})}),v.jsx(Dn.Text,{children:"Change of an indicator over time can be appreciated as either improvement or worsening. In this technical note, we explain the use of Exceedance Probability to statistically determine the direction of the change."}),v.jsxs("a",{href:"#/technote-2",children:["Go to note",v.jsx("i",{className:"pi pi-arrow-circle-right mx-1"})]})]})}),v.jsx(Dn,{style:{width:"18rem"},children:v.jsxs(Dn.Body,{children:[v.jsx(Dn.Title,{children:v.jsx("a",{href:"#/technote-3",className:"subtitle",children:"Technical Note 3"})}),v.jsx(Dn.Text,{children:"Technical note on the use of the Institute for Health Metrics and Evaluation (IHME) data in the modeling."}),v.jsxs("a",{href:"#/technote-3",children:["Go to note",v.jsx("i",{className:"pi pi-arrow-circle-right mx-1"})]})]})}),v.jsx(Dn,{style:{width:"18rem"},children:v.jsxs(Dn.Body,{children:[v.jsx(Dn.Title,{children:v.jsx("a",{href:"#/technote-4",className:"subtitle",children:"Technical Note 4"})}),v.jsx(Dn.Text,{children:"Technical note on the use of the WHO's Expanded Special Project for Elimination of Tropical Diseases (WHO-ESPEN) data in the modeling."}),v.jsxs("a",{href:"#/technote-4",children:["Go to note",v.jsx("i",{className:"pi pi-arrow-circle-right mx-1"})]})]})})]})]})}function B6e(){const e=["Kenya"],t={India:L6e(),Kenya:j6e()};return v.jsxs("div",{className:"bg-secondary-subtle rounded-4 p-3",children:[v.jsx("h2",{children:"Technical Note 1"}),v.jsx("h3",{children:"National and subnational boundaries"}),v.jsx("hr",{}),v.jsx(DT,{className:"mb-3",children:e.map((n,i)=>v.jsx(Ih,{eventKey:n,title:n,children:t[n]},i))})]})}function H6e(){return v.jsxs("div",{className:"bg-secondary-subtle rounded-4 p-3",children:[v.jsx("h2",{children:"Technical Note 2"}),v.jsx("h3",{children:"Exceedance probability and confidence in changes over time"}),v.jsx("hr",{}),v.jsx("h4",{children:"Background"}),v.jsx("p",{children:"We have produced 5x5km high-resolution (also referred to as grid level) prediction and uncertainty maps illustrating changes over time for health and development indicators within specific subnational areas, such as districts or similar administrative divisions varying by country. Our methodology relies on data from the two most recent rounds of the nationally representative Demographic and Health Surveys (DHS), which are available at the cluster level, and mapped through GPS coordinates of the cluster centres. In the case of India, we utilised the National Family Health Surveys (NFHS), specifically NFHS-4 (2015-16) denoted as Round 1, and NFHS-5 (2019-22) denoted as Round 2. Measuring changes between these survey rounds allows us to track and assess the progress of the health and development indicators over time"}),v.jsx("p",{children:"To ensure the reliability of our estimates of the changes within each subnational area, we employed exceedance probability to quantify our confidence in these observed changes. Exceedance probability, commonly applied in environmental and risk analysis Richards et al., 2014, assesses the likelihood of an event surpassing a specific limit within a defined period (Soch, 2020). In simpler terms, exceedance probability helps us assess potential improvements or worsening of our health and development indicators. We express this likelihood as a percentage, indicating the probability of an indicator exceeding our defined threshold. For this work, we use the statistical significance levels of 90% (likely), 95% (highly likely), and 99% (almost certain)."}),v.jsx("h4",{children:"Outline"}),v.jsx("p",{children:'We outline the entire process of implementing and applying exceedance probability using the indicator "Percentage of women who had 4 or more antenatal visits" (ANC4+) in India as an example. For India, the subnational areas are the districts. This outline unfolds in three main steps: (1) preparation, (2) implementation, and (3) application. Further detail can be found in the Methods section.'}),v.jsxs("div",{className:"border border-secondary rounded-4 p-3 mb-4",children:[v.jsx("h5",{children:"Preparation"}),v.jsx("div",{className:"row p-0 m-0 px-3",children:v.jsxs("ol",{children:[v.jsx("li",{children:"Sample grid-level estimates from the posterior distributions of the models. These models, processed through the Integrated Nested Laplace Approximation  Stochastic Partial Differential Equation method (INLA-SPDE) (Rue et al., 2009; Lindgren et al., 2011; Martins et al., 2013), pertain to the two rounds of survey data for ANC4+."}),v.jsx("li",{children:"Derive grid-level change estimate samples by calculating the difference between the grid-level estimate samples of Round 2 and Round 1."}),v.jsx("li",{children:"Aggregate the grid level change estimate samples to the subnational level, specifically at the district level, to obtain district level change estimate samples (see Figure 1a)."})]})}),v.jsx("h5",{children:"Implementation"}),v.jsx("div",{className:"row p-0 m-0 px-3",children:v.jsxs("ol",{children:[v.jsx("li",{children:"The district level change estimate samples can be depicted using an empirical cumulative density function (ECDF) (Dekking et al., 2005). The ECDF offers insights into the probability, given the data, that the true change is equal to or less than a specified value. It derives from the proportion of samples that are equal to or less than the specified value. For change in ANC4+, we are interested in the district estimate value zero, because we want to observe where there have been meaningful improvements for ANC4+."}),v.jsx("li",{children:"The ECDF at zero for each district indicates the proportion of samples equal to or less than zero. This informs us of the probability, given the data, that the true change is less than or equal to zero."}),v.jsx("li",{children:"The complement of the ECDF at zero, calculated as 1 - ECDF(0), tells us the proportion of samples greater than zero. This provides the probability, given the data, that the true change is greater than zero (see Figure 1b)."})]})}),v.jsx("h5",{children:"Application"}),v.jsx("div",{className:"row p-0 m-0 px-3",children:v.jsxs("ol",{children:[v.jsx("li",{children:"To ensure a high level of certainty (95% certain) that district level estimates are greater than zero, compare the probability (or proportion) obtained with 95% (or 0.95). Adjust the slider in the Portal to highlight districts where improvements are highly certain (95% certain)."}),v.jsx("li",{children:"Conversely, if the probability (or proportion) is below 95% (less than 0.95), it indicates a lack of high certainty (95% certain) regarding meaningful improvements in those districts."}),v.jsx("li",{children:"Steps 1 and 2 can be repeated for various certainty levels (see Figure 1c)."})]})}),v.jsx("br",{}),v.jsx(zh,{src:R6e,label:"fig-exceedance",number:"1",caption:"Workflow highlighting some of the key steps of the process described in the Outline for implementing and applying exceedance probability using the indicator ANC4+ in selected districts in India. Panel (a) links to Step 1.3 in the Outline and shows the samples of district level estimates for the change over time between NFHS-4 (Round 1) and NFHS-5 (Round2) for the ANC4+ indicator in the state of Odisha, India. Panel (b) links to Step 2.3 in the Outline and shows the histograms and proportions of samples for estimates of change over time in two districts within the state of Odisha, India. Panel (c) links to Step 3 in the Outline and is a visual representation of how changing significance levels affect the confidence (uncertainty) around the estimated improvement of ANC4+ over time for the selected districts."})]}),v.jsx("h4",{children:"Methods"}),v.jsx("p",{children:'In examining changes in ANC4, we employed the statistical method INLA-SPDE to estimate ANC4+ values. This method generates "best estimations" (posterior distributions) based on available data, enabling us to predict potential ANC4 values. By comparing these values across different survey rounds, we obtain samples representing changes at grid and district levels.'}),v.jsx("p",{children:"To ensure reliability in these estimates, we utilised the ECDF. The ECDF visually represents the likelihood of observing specific changes in ANC4+. For example, the ECDF at zero indicates the likelihood of observing changes equal to or less than zero in ANC4+. Its complement, calculated as 1 minus the ECDF value at zero, informs us about the probability, given the data, of observing changes greater than zero (see Figure 1c). We then apply this information by comparing probabilities from the ECDF at zero against a 95% threshold, illustrated in Figure 1d, to highlight districts where improvements are highly certain (95% certain)."}),v.jsx("h4",{children:"Conclusion"}),v.jsx("p",{children:"Our utilisation of exceedance probability establishes a robust framework for interpreting changes over time, offering critical insights into trends and the potential for achieving significant improvements within specified timeframes. For example, assessing the exceedance probability associated with the prevalence of stunting provides valuable insights into the reduction of stunting over time. This methodology empowers policymakers by providing a credible assessment of trends, enabling informed decisions for effective interventions."}),v.jsxs("div",{id:"reference",children:[v.jsx("h4",{children:"Reference"}),v.jsx("div",{className:"row p-0 m-0 px-3",children:v.jsxs("ul",{children:[v.jsxs("li",{children:["Dekking, F. M., Kraaikamp, C., Lopuha, H. P., & Meester, L. E. (2005). A Modern Introduction to Probability and Statistics: Understanding why and how (Vol. 488). London: springer. DOI: ",v.jsx("a",{href:"https://link.springer.com/book/10.1007/1-84628-168-7",target:"_blank",children:"10.1007/1-84628-168-7"}),"."]}),v.jsxs("li",{children:["Lindgren, F., Rue, H., & Lindstrm, J. (2011). An explicit link between Gaussian fields and Gaussian Markov random fields: the stochastic partial differential equation approach. Journal of the Royal Statistical Society Series B: Statistical Methodology, 73(4), 423-498. DOI: ",v.jsx("a",{href:"https://doi.org/10.1111/j.1467-9868.2011.00777.x",children:"10.1111/j.1467-9868.2011.00777.x"}),"."]}),v.jsxs("li",{children:["Martins, T. G., Simpson, D., Lindgren, F., & Rue, H. (2013). Bayesian computing with INLA: new features. Computational Statistics & Data Analysis, 67, 68-83. DOI: ",v.jsx("a",{href:"https://doi.org/10.1016/j.csda.2013.04.014",children:"10.1016/j.csda.2013.04.014"}),"."]}),v.jsxs("li",{children:["Richards, K. K., Hazelton, M. L., Stevenson, M. A., Lockhart, C. Y., Pinto, J., & Nguyen, L. (2014). Using exceedance probabilities to detect anomalies in routinely recorded animal health data, with particular reference to foot-and-mouth disease in Viet Nam. Spatial and Spatio-Temporal Epidemiology, 11, 125-133. DOI: ",v.jsx("a",{href:"https://doi.org/10.1016/j.sste.2014.08.002",target:"_blank",children:"10.1016/j.sste.2014.08.002"})]}),v.jsxs("li",{children:["Rue, H., Martino, S., & Chopin, N. (2009). Approximate Bayesian inference for latent Gaussian models by using integrated nested Laplace approximations. Journal of the Royal Statistical Society Series B: Statistical Methodology, 71(2), 319-392. DOI: ",v.jsx("a",{href:"https://doi.org/10.1111/j.1467-9868.2008.00700.x",children:"10.1111/j.1467-9868.2008.00700.x"}),"."]}),v.jsxs("li",{children:["Soch, J. (2020). Definition: Exceedance probability. The Book of Statistical Proofs. Url: ",v.jsx("a",{href:"https://statproofbook.github.io/D/prob-exc.html",target:"_blank",children:"https://statproofbook.github.io/D/prob-exc.html"})]})]})})]})]})}function U6e(){return v.jsxs("div",{className:"bg-secondary-subtle rounded-4 p-3",children:[v.jsx("h2",{children:"Technical Note 3"}),v.jsx("h3",{children:"Data sourced from the Institute for Health Metrics and Evaluation (IHME) - Kenya"}),v.jsx("hr",{}),v.jsx("div",{id:"table1",className:"px-5",children:v.jsxs($u,{striped:!0,children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("td",{children:"Indicator"}),v.jsx("td",{children:"Definition"}),v.jsx("td",{children:"Year(s)"}),v.jsx("td",{children:"Geographical level"})]})}),v.jsxs("tbody",{children:[v.jsxs("tr",{children:[v.jsx("td",{children:"Onchocerciasis infection"}),v.jsx("td",{children:"Prevalence (%) of onchocerciasis infection in the population"}),v.jsx("td",{children:"2014 and 2018"}),v.jsx("td",{children:"5x5km and sub-county"})]}),v.jsxs("tr",{children:[v.jsx("td",{children:"Lymphatic filariasis infection"}),v.jsx("td",{children:"Prevalence (%) of lymphatic filariasis infection in the population"}),v.jsx("td",{children:"2014 and 2018"}),v.jsx("td",{children:"5x5km and sub-county"})]}),v.jsxs("tr",{children:[v.jsx("td",{children:"Under five mortality"}),v.jsx("td",{children:"Probability of death amongst children aged under 5 years, multiplied by 1,000 to calculate mortality rates. The indicator is therefore expressed as a mortality rate per 1,000 live births."}),v.jsx("td",{children:"2014 and 2017"}),v.jsx("td",{children:"5x5km and sub-county"})]}),v.jsxs("tr",{children:[v.jsx("td",{children:"Neonatal mortality"}),v.jsx("td",{children:"Probability of death amongst children aged 0-28 days, multiplied by 1,000 to calculate mortality rates. The indicator is therefore expressed as a mortality rate per 1,000 live births."}),v.jsx("td",{children:"2014 and 2017"}),v.jsx("td",{children:"5x5km and sub-county"})]})]})]})}),v.jsx("h4",{children:"Introduction"}),v.jsxs("p",{children:["In this work, 5x5 km cell-level estimates for two separate time points2014 and 2018 for the two NTDs, and 2014 and 2017 for the two mortality indicatorswere sourced and downloaded from ",v.jsx("a",{href:"https://ghdx.healthdata.org/",children:"the IHME websites"}),". The data were further aggregated to sub-counties (second-level administrative units) of Kenya using the Population Division. US Census Bureau national and subnational boundaries."]}),v.jsx("h4",{children:"Data"}),v.jsx("h5",{children:"Prevalence (%) of onchocerciasis infection in the population"}),v.jsx("p",{children:'The source data used to populate this indicator describe onchocerciasis prevalence across Africa and Yemen from 2000 to 2018, and were produced by the Institute for Health Metrics and Evaluation (IHME, 2022; Schmidt et al. 2022). To produce these data a systematic review of published literature on onchocerciasis-related infection and prevalence from 1975-2017 was first undertaken by IHME. Prevalence data linked to 14,043 unique locations across the Americas, Africa and Yemen were extracted from 259 peer-reviewed articles identified by the review. These data were modelled alongside several ecological, environmental and epidemiological covariates in a Bayesian geostatistical framework to estimate the annual prevalence of onchocerciasis from 2000 to 2018 in 5km2 spatial resolution grid cells. Mean, 2.5% quantile (lower) and 97.5% quantile (upper) cell-level estimates were extracted from the predictive posterior distribution, and represent the estimated percentage of the (all ages and both sexes) population at that location who are prevalent with onchocerciasis at the relevant timepoint. Prevalent cases are those with presence of microfiladermia, detected by skin snip microscopy. Estimates were not generated for any cells whose: (i) land cover was classified as "barren or sparsely vegetated" by Moderate Resolution Imaging Spectroradiometer satellite data for 2015; or (ii) total population density was less than ten persons per 1km2 grid cell according to WorldPop population estimates for 2015.'}),v.jsx("p",{children:"The data shown represent the prevalence (%) of onchocerciasis infection in the population, indicated by the presence of microfiladermia as detected by skin snip microscopy (%)"}),v.jsx("h5",{children:"Prevalence (%) of lymphatic filariasis infection in the population"}),v.jsx("p",{children:`The source data used to populate this indicator describe global lymphatic filariasis prevalence from 2000 to 2018 and were produced by the Institute for Health Metrics and Evaluation (IHME, 2020; Local burden of Disease NTD collaborators, 2020). To produce these data a systematic review of published literature on lymphatic filariasis-related infection and prevalence from 1990 onwards was first undertaken by IHME. This was further supplemented by additional programme monitoring data obtained from: (i) the WHO's Global Programme to Eliminate Lymphatic Filariasis; and (ii) the WHO's Expanded Special Project for Elimination of Neglected Tropical Diseases. Prevalence data linked to 15,829 unique global locations were extracted from 301 peer-reviewed articles identified by the review. These data were modelled alongside several covariates representing ecological, demographic, and programmatic factors related to lymphatic filariasis in a Bayesian geostatistical framework to estimate the annual prevalence from 2000 to 2018 in 5km2 spatial resolution grid cells. Mean, 2.5% quantile (lower) and 97.5% quantile (upper) cell-level estimates were extracted from the predictive posterior distribution, and represent the estimated percentage of the (all ages and both sexes) population at that location who are prevalent at the relevant timepoint. Prevalent cases are those with lymphatic filariasis as measured by the immunochromatographic (ICT) antigen test. Estimates were not generated for any cells whose: (i) land cover was classified as "barren or sparsely vegetated" by Moderate Resolution Imaging Spectroradiometer satellite data for 2015; or (ii) total population density was less than ten persons per 1km2 grid cell according to WorldPop population estimates for 2015.`}),v.jsx("p",{children:"The data shown represent the prevalence (%) of lymphatic filariasis infection in the population, as measured by the ICT antigen test."}),v.jsx("h5",{children:"Under five mortality"}),v.jsx("p",{children:'The source data used to populate this indicator describe estimated child mortality rates across 99 low-and middle-income countries from 2000 to 2017 and were produced by the Institute for Health Metrics and Evaluation (IHME, 2019; Burstein et al. 2019). To produce estimates in 5km2 spatial resolution grid cells, input data from the Global Burden of Disease study were modelled by IHME alongside several sociodemographic, environmental and epidemiological covariates in a Bayesian geostatistical framework. Mean, 2.5% quantile (lower) and 97.5% quantile (upper) cell-level mortality probabilities amongst children aged 0-28 days (neonates), under 1 year (infants), and under 5 years (under 5s) were separately estimated from the posterior probability distribution. Estimated probabilities were not generated for any cells whose: (i) land cover was classified as "barren or sparsely vegetated" by Moderate Resolution Imaging Spectroradiometer satellite data for 2015; or (ii) total population density was less than ten persons per 1km2 grid cell according to WorldPop population estimates for 2015.'}),v.jsx("p",{children:"The data shown represent the modelled probability of death amongst children aged under 5 years, multiplied by 1,000 to calculate mortality rates. The indicator is therefore expressed as a mortality rate per 1,000 live births."}),v.jsx("h5",{children:"Neonatal mortality"}),v.jsx("p",{children:'The source data used to populate this indicator describe estimated child mortality rates across 99 low-and middle-income countries from 2000 to 2017 and were produced by the Institute for Health Metrics and Evaluation (IHME, 2019; Burstein et al. 2019). To produce estimates in 5km2 spatial resolution grid cells, input data from the Global Burden of Disease study were modelled by IHME alongside several sociodemographic, environmental and epidemiological covariates in a Bayesian geostatistical framework. Mean, 2.5% quantile (lower) and 97.5% quantile (upper) cell-level mortality probabilities amongst children aged 0-28 days (neonates), under 1 year (infants), and under 5 years (under 5s) were separately estimated from the posterior probability distribution. Estimated probabilities were not generated for any cells whose: (i) land cover was classified as "barren or sparsely vegetated" by Moderate Resolution Imaging Spectroradiometer satellite data for 2015; or (ii) total population density was less than ten persons per 1km2 grid cell according to WorldPop population estimates for 2015.'}),v.jsx("p",{children:"The data shown represent the modelled probability of death amongst children aged 0-28 days, multiplied by 1,000 to calculate mortality rates. The indicator is therefore expressed as a mortality rate per 1,000 live births."}),v.jsx("h4",{children:"Processing"}),v.jsx("p",{children:"IHME data is provided at a resolution of 5km. Data was resampled and re-projected to align with a 1km mastergrid covering the full extent of Kenya. Sub-county level summaries were captured using this resampled 1km data, whilst high-resolution output maps (raster) were produced from the original 5km resolution data aligned to the mastergrid."}),v.jsx("p",{children:"Where there were missing/NA pixels in the original raster's due to differing coastline definitions between datasets, cell values were interpolated. Otherwise, all other missing/NA pixels present in the original data were left as missing/NA."}),v.jsx("p",{children:"All processing was carried out in ArcGIS Pro 2.7.3"}),v.jsx("h4",{children:"References"}),v.jsx("div",{className:"row p-0 m-0 px-3",children:v.jsxs("ul",{style:{marginBottom:"20px"},children:[v.jsxs("li",{children:["Population Division, U.S. Census Bureau. The U.S. Census Bureau's products are open access and can be accessed from ",v.jsx("a",{href:"https://www.census.gov/geographies/mapping-files/time-series/demo/international-programs/subnationalpopulation.html",children:"here"}),"."]}),v.jsxs("li",{children:["Institute for Health Metrics and Evaluation (IHME). Africa and Yemen Onchocerciasis Prevalence Geospatial Estimates 2000-2018. Seattle, United States of America: Institute for Health Metrics and Evaluation (IHME), 2022. DOI: ",v.jsx("a",{href:"https://doi.org/10.6069/11JK-D224",children:"10.6069/11JK-D224"}),". Data are visualised ",v.jsx("a",{href:"https://vizhub.healthdata.org/lbd/oncho#",children:"here"}),"."]}),v.jsxs("li",{children:["Schmidt et al. (2022) The prevalence of onchocerciasis in Africa and Yemen, 20002018: a geospatial analysis. BMC Med 20, 293. DOI: ",v.jsx("a",{href:"https://doi.org/10.1186/s12916-022-02486-y",children:"10.1186/s12916-022-02486-y"}),"."]}),v.jsxs("li",{children:["Institute for Health Metrics and Evaluation (IHME). Global Lymphatic Filariasis Prevalence Geospatial Estimates 2000-2018. Seattle, United States of America: Institute for Health Metrics and Evaluation (IHME), 2020. DOI:",v.jsx("a",{href:"https://doi.org/10.6069/8NA6-6Z2",children:"10.6069/8NA6-6Z2"}),". Data are visualised ",v.jsx("a",{href:"https://vizhub.healthdata.org/lbd/lf#",children:"here"}),"."]}),v.jsxs("li",{children:["Local Burden of Disease 2019 Neglected Tropical Diseases Collaborators (2020) The global distribution of lymphatic filariasis, 200018: a geospatial analysis. The Lancet Global Health 8(9): e1186-e1194. DOI: ",v.jsx("a",{href:"https://doi.org/10.1016/S2214-109X(20)30286-2",children:"10.1016/S2214-109X(20)30286-2"})]}),v.jsxs("li",{children:["Institute for Health Metrics and Evaluation (IHME). Low- and Middle-Income Country Neonatal, Infant, and Under-5 Mortality Geospatial Estimates 2000-2017. Seattle, United States of America: Institute for Health Metrics and Evaluation (IHME), 2019. DOI:",v.jsx("a",{href:"https://doi.org/10.6069/9ABZ-XG84",children:"10.6069/9ABZ-XG84"}),". Data are visualised ",v.jsx("a",{href:"https://vizhub.healthdata.org/lbd/under5#",children:"here"})]}),v.jsxs("li",{children:["Burstein et al. (2019) Mapping 123 million neonatal, infant, and child deaths between 2000 and 2017. Nature 574: 353358. DOI: ",v.jsx("a",{href:"https://doi.org/10.1038/s41586-019-1545-0",children:"10.1038/s41586-019-1545-0"}),"."]})]})}),v.jsx("h4",{children:"IHME Data license"}),v.jsxs("p",{children:["IHME specify that the data made available for download on IHME Websites can be used, shared, modified, or built upon by non-commercial users in accordance with the IHME Free-Of-Charge Non-Commercial User Agreement. ",v.jsx("a",{href:"https://www.healthdata.org/Data-tools-practices/data-practices/ihme-free-charge-non-commercial-user-agreement",children:v.jsx("i",{className:"pi pi-external-link"})})]})]})}function W6e(){return v.jsxs("div",{className:"bg-secondary-subtle rounded-4 p-3",children:[v.jsx("h2",{children:"Technical Note 4"}),v.jsx("h3",{children:"Data sourced from ESPEN programme from WHO - Kenya"}),v.jsx("hr",{}),v.jsx("div",{id:"table1",className:"px-5",children:v.jsxs($u,{striped:!0,children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("td",{children:"Indicator"}),v.jsx("td",{children:"Definition"}),v.jsx("td",{children:"Year(s)"}),v.jsx("td",{children:"Geographical level"})]})}),v.jsxs("tbody",{children:[v.jsxs("tr",{children:[v.jsx("td",{children:"Soil-transmitted helminth infections"}),v.jsx("td",{children:"Prevalence (%) of soil-transmitted helminth infection in the population (STH)"}),v.jsx("td",{children:"2010-2015"}),v.jsx("td",{children:"5x5km and sub-county"})]}),v.jsxs("tr",{children:[v.jsx("td",{children:"Schistosomiasis"}),v.jsx("td",{children:"Prevalence (%) of schistosomiasis infection (SCHI)"}),v.jsx("td",{children:"2010-2018"}),v.jsx("td",{children:"5x5km and sub-county"})]})]})]})}),v.jsx("h4",{children:"Introduction"}),v.jsx("p",{children:"In this work, 5x5 km high spatial resolution surfaces for Soil-transmitted helminth infection (STH) and Schistosomiasis (SCHI) in Kenya were produced using Bayesian geostatistical models. These geostatistical models were constructed using WHOs Expanded Special Project for Elimination of Tropical Diseases (ESPEN) site units locations for a range of years (WHO-ESPEN). All clusters surveyed between 2010 and 2015 (for soil-transmitted helminth infection) and between 2010 and 2018 (for schistosomiasis infection) were employed as input data in the model; while we used a range of environmental, climatic, geographical, and socio-economic datasets as covariates."}),v.jsx("p",{children:"A Bayesian geostatistical modeling approach was employed to construct 5x5 km high spatial resolution surfaces, including the prediction (mean) and uncertainty (standard deviation) surfaces. Also, using the grid-level high-resolution modelled outputs and uncertainty surfaces produced, we performed population-weighted aggregation up to the county and subcounty levels (US Census Bureau)."}),v.jsx("h4",{children:"Data"}),v.jsx("p",{children:"The source data used to populate this indicator describe STH and SCHI in Kenya, and were sourced from the WHOs Expanded Special Project for Elimination of Tropical Diseases (ESPEN) database. ESPEN covers all 47 countries of the WHO AFRO region and five countries of the WHO EMRO region (Sudan, Egypt, Somalia, Djibouti and Yemen). The source STH and SCHI prevalence data had been extracted from the Global Atlas of Helminth Infections (see Pullan et al., 2011) and were available at the level of site units, which are the sites of cross-sectional prevalence surveys conducted in representative research or sentinel populations. Relevant surveys were identified through structured searches of electronic bibliographic databases, manual searches of local archives and libraries, and direct contact with researchers. Any data based on hospital or clinic surveys, post-intervention surveys, or surveys among sub-populations (such as refugees, prisoners or nomads) were excluded from the ESPEN database. The database collects all surveys found to meet the inclusion criteria, regardless of the year of collection/publication, many of which reported a prevalence value linked to GPS coordinates. While most surveys had included participants of all ages, some were limited to a specific age group only; surveys of the latter type usually involved a population of children and/or adolescents, but alternate age ranges were sometimes used. All available survey data were used to fit the models described below."}),v.jsx("p",{children:"Also, a range of environmental, climatic, geographical, and socioeconomic covariates were selected and incorporated within the statistical models for predicting the health indicators."}),v.jsx("h4",{children:"Methods"}),v.jsx("p",{children:"The geospatial modelling methodology utilised in this work made use of data for the STH and SCHI from WHO ESPEN, along with environmental, climatic, geographical, and socioeconomic variables incorporated as predictors within the statistical model for predicting health and development indicators from household surveys. These covariates represent the candidate covariates on which robust covariate selection was performed."}),v.jsx("p",{children:"These data were employed using the disease site units' locations as inputs in our analyses, with the indicator being STH and SCHI used as the outcome variables to be predicted, and the geospatial covariates used as predictors in the model."}),v.jsx("p",{children:"For STH the modelled indicator was the cumulative infection by any of the soil transmitted helminths Ascaris lumbricoides, Trichuris trichiura and the hookworms Ancylostoma duodenale and Necator americanus. This was calculated from the individual infection rates using the method suggested in de Silva and Hall (2010)."}),v.jsx("p",{children:"A geostatistical model was fitted using the integrated nested Laplace approximation  stochastic partial differential equations (INLA-SPDE) method. From this model 5x5 km high spatial resolution surfaces, including the prediction (mean) and uncertainty (standard deviation) surfaces, were constructed (Rue et al., 2009; Lindgren et al., 2011; Martins et al., 2013). The high-resolution outputs of the model were also aggregated to county and subcounty level using population weighted averaging using unadjusted population counts for Kenya."}),v.jsx("h4",{children:"Notes"}),v.jsx("p",{children:"Estimates for counties for which there were fewer than 5 clusters were disregarded, while counties where surveyed points were between 5 and 30 were flagged as showing high uncertainty."}),v.jsx("p",{children:"Counties which do not have environmental suitability for STH infection (defined as maximum daytime land surface temperature exceeding 40 degrees Celsius) were not modelled and are marked grey. This is based on indications described in the Pullan et al. (2011)."}),v.jsx("h4",{children:"References"}),v.jsx("div",{className:"row p-0 m-0 px-3",children:v.jsxs("ul",{style:{marginBottom:"20px"},children:[v.jsxs("li",{children:["Population Division, U.S. Census Bureau. The U.S. Census Bureau's products are open access and can be accessed from ",v.jsx("a",{href:"https://www.census.gov/geographies/mapping-files/time-series/demo/international-programs/subnationalpopulation.html",children:"here"}),"."]}),v.jsxs("li",{children:["World Health Organisation Regional Office for Africa (2024) Expanded Special Project for Elimination of Neglected Tropical Diseases. Data and more information can be accessed from ",v.jsx("a",{href:"https://espen.afro.who.int/",children:"here"}),"."]}),v.jsxs("li",{children:["Rue, H., Martino, S., & Chopin, N. (2009). Approximate Bayesian inference for latent Gaussian models by using integrated nested Laplace approximations. Journal of the Royal Statistical Society Series B: Statistical Methodology, 71(2), 319-392. DOI: ",v.jsx("a",{href:"https://doi.org/10.1111/j.1467-9868.2008.00700.x",children:"10.1111/j.1467-9868.2008.00700.x"}),"."]}),v.jsxs("li",{children:["Lindgren, F., Rue, H., & Lindstrm, J. (2011). An explicit link between Gaussian fields and Gaussian Markov random fields: the stochastic partial differential equation approach. Journal of the Royal Statistical Society Series B: Statistical Methodology, 73(4), 423-498. DOI: ",v.jsx("a",{href:"https://doi.org/10.1111/j.1467-9868.2011.00777.x",children:"10.1111/j.1467-9868.2011.00777.x"}),"."]}),v.jsxs("li",{children:["Martins, T. G., Simpson, D., Lindgren, F., & Rue, H. (2013). Bayesian computing with INLA: new features. Computational Statistics & Data Analysis, 67, 68-83. DOI: ",v.jsx("a",{href:"https://doi.org/10.1016/j.csda.2013.04.014",children:"10.1016/j.csda.2013.04.014"})]}),v.jsxs("li",{children:["de Silva N, Hall A. Using the prevalence of individual species of intestinal nematode worms to estimate the combined prevalence of any species. PLoS Negl Trop Dis. 2010 Apr 13;4(4):e655. DOI: ",v.jsx("a",{href:"https://doi.org/10.1371/journal.pntd.0000655",children:"10.1371/journal.pntd.0000655"}),"."]})]})})]})}function G6e(){return v.jsxs("div",{className:"bg-secondary-subtle rounded-4 p-3",children:[v.jsx("h2",{children:"About"}),v.jsx("hr",{}),v.jsx("p",{children:"This web application presents a summary of maternal and child health characteristics alongside socio-economic and Sustainable Development Goals (SDG)-related indicators at subnational scales. Multiple indicators are presented in map, chart, and tabulated form, and for different time points and data sources."}),v.jsx("h3",{children:"Methods"}),v.jsx("p",{children:"We have produced 5x5km high-resolution (also referred to as grid level) prediction and uncertainty maps illustrating changes over time for health and development indicators within specific subnational areas, such as districts or similar administrative divisions varying by country."}),v.jsx("p",{children:"The methodology employs a Bayesian geostatistical modeling approach using the Integrated Nested Laplace Approximation  Stochastic Partial Differential Equation method (INLA-SPDE) statistical method (Rue et al., 2009; Lindgren et al., 2011; Martins et al., 2013) to estimate the indicators."}),v.jsx("p",{children:"This approach relies on data from the two most recent rounds of the nationally representative Demographic and Health Surveys (DHS), which are available at the cluster level (primary sampling unit), and mapped through GPS coordinates of the cluster centroids. In the modelling process, the cluster locations serve as the primary input data; open-access, raster-based geographical, climatic, and socio-economic datasets are used as covariates."}),v.jsx("p",{children:"The estimates presented in this portal are the result of a standard modelling approach for estimating high resolution maps and there may be deviations from aggregated measures published elsewhere."}),v.jsx("h3",{children:"Disclaimer"}),v.jsx("p",{children:"Maps used on this website are for general illustration only, and are not intended to be used for reference purposes."}),v.jsx("p",{children:"The representation of political boundaries does not necessarily reflect the organization's view on the legal status of a country or territory."}),v.jsx("h3",{children:"Acknowledgement"}),v.jsx("h5",{children:"Kenya"}),v.jsx("div",{className:"row m-0 p-0 px-3",children:v.jsxs("ul",{children:[v.jsxs("li",{children:["Administrative Boundary of Kenya: Population Division, U.S. Census Bureau. The U.S. Census Bureau's products are open access and can be accessed from ",v.jsx("a",{href:"https://www.census.gov/geographies/mapping-files/time-series/demo/international-programs/subnationalpopulation.html",children:"here"}),"."]}),v.jsx("li",{children:"2014 Kenya DHS: Kenya National Bureau of Statistics, Ministry of Health/Kenya, National AIDS Control Council/Kenya, Kenya Medical Research Institute, National Council for Population and Development/Kenya, and ICF International. 2015. Kenya Demographic and Health Survey 2014 [DATASETS]. Rockville, MD, USA: Kenya National Bureau of Statistics, Ministry of Health/Kenya, National AIDS Control Council/Kenya, Kenya Medical Research Institute, National Council for Population and Development/Kenya, and ICF International."}),v.jsx("li",{children:"2022 Kenya DHS: KNBS and ICF. 2023. Kenya Demographic and Health Survey 2022: [DATASETS]. Nairobi, Kenya, and Rockville, Maryland, USA: KNBS and ICF."}),v.jsxs("li",{children:["World Health Organisation Regional Office for Africa (2024) Expanded Special Project for Elimination of Neglected Tropical Diseases. Data and more information can be accessed ",v.jsx("a",{href:"https://espen.afro.who.int/",children:"here"}),"."]}),v.jsxs("li",{children:["Institute for Health Metrics and Evaluation (2024) Global Health Data Exchange (GHDx). Data and more information can be accessed from ",v.jsx("a",{href:"https://ghdx.healthdata.org/",children:"here"}),"."]}),v.jsxs("li",{children:["Rue, H., Martino, S., & Chopin, N. (2009). Approximate Bayesian inference for latent Gaussian models by using integrated nested Laplace approximations. Journal of the Royal Statistical Society Series B: Statistical Methodology, 71(2), 319-392. DOI: ",v.jsx("a",{href:"https://doi.org/10.1111/j.1467-9868.2008.00700.x",children:"10.1111/j.1467-9868.2008.00700.x"}),"."]}),v.jsxs("li",{children:["Lindgren, F., Rue, H., & Lindstrm, J. (2011). An explicit link between Gaussian fields and Gaussian Markov random fields: the stochastic partial differential equation approach. Journal of the Royal Statistical Society Series B: Statistical Methodology, 73(4), 423-498. DOI: ",v.jsx("a",{href:"https://doi.org/10.1111/j.1467-9868.2011.00777.x",children:"10.1111/j.1467-9868.2011.00777.x"}),"."]}),v.jsxs("li",{children:["Martins, T. G., Simpson, D., Lindgren, F., & Rue, H. (2013). Bayesian computing with INLA: new features. Computational Statistics & Data Analysis, 67, 68-83. DOI: ",v.jsx("a",{href:"https://doi.org/10.1016/j.csda.2013.04.014",children:"10.1016/j.csda.2013.04.014"}),"."]})]})}),v.jsxs("p",{children:["Please consult the ",v.jsx("a",{href:"#/technote-0",children:"Technical Notes"})," section for more information on data sources and specific indicators."]})]})}const q6e="/temporary/assets/guide-1-kqAcHqte.png",V6e="/temporary/assets/guide-2-evoF8DQF.png",Y6e="/temporary/assets/guide-3-kE-7SdtC.png";function Z6e(){return v.jsxs("div",{className:"bg-secondary-subtle rounded-4 p-3",children:[v.jsx("h2",{children:"Guide"}),v.jsx("hr",{}),v.jsx("div",{className:"row",children:v.jsxs("div",{className:"row",children:[v.jsx("div",{className:"col-lg-5 pb-3",children:v.jsxs("div",{className:"row",children:[v.jsxs("div",{className:"pb-3",children:[v.jsx("h4",{children:"Basic Usage"}),v.jsxs("ol",{children:[v.jsx("li",{children:"Select a country and indicator to display. A subnational map of the indicator will be displayed on the left."}),v.jsx("li",{children:"By default, indicator value from the Round 2 survey is displayed on the map."}),v.jsxs("ul",{children:[v.jsxs("li",{children:["Click ",v.jsx("kbd",{children:"Round 1"})," to see the value from the Round 1 survey."]}),v.jsxs("li",{children:["Click ",v.jsx("kbd",{children:"Change"})," to see the difference between the values from two rounds."]}),v.jsxs("li",{children:["Click ",v.jsx("kbd",{children:"Grid Level"})," to load the grid level data (5x5 km)."]})]}),v.jsxs("li",{children:["Click ",v.jsx("i",{className:"pi pi-plus-circle"})," or ",v.jsx("i",{className:"pi pi-minus-circle"})," to zoom-in or zoom-out the map. Click ",v.jsx("i",{className:"pi pi-home"})," to reset the map view."]}),v.jsx("li",{children:"Select an administrative unit by clicking any region on the map or use the dropdown menu available below the map."}),v.jsx("li",{children:"Chart and tabulated data for the selected unit is displayed on the right. The data can be sorted according to the sub-unit name or the indicator values."}),v.jsxs("li",{children:["By clicking ",v.jsx("i",{className:"pi pi-arrow-circle-right"}),", the aggregated values of all indicators from the selected unit can be displayed."]}),v.jsxs("li",{children:["Throughout the site, additional information can be accessed by hovering over or clicking on the ",v.jsx("i",{className:"pi pi-question-circle"})," icon where available."]}),v.jsx("li",{children:"For a selected number of indicators, additional technical notes were created. These notes can be accessed here and through the menu bar on the top of this site."})]})]}),v.jsxs("div",{children:[v.jsx("h4",{children:"Filtering by change"}),v.jsxs("ol",{start:9,children:[v.jsx("li",{children:'If the underlying dataset is statistically sufficient to estimate the significance in change between rounds, "Filtering by change" can be performed. Use the dropdown to display subnational units with significant improvement or worsening through time for the selected indicator. This allows the user to choose the probability that there is meaningful improvement/worsening. The map filters out units where it is unlikely that there have been meaningful improvements.'}),v.jsxs("li",{children:["Additional information can be found by clicking on the ",v.jsx("i",{className:"pi pi-question-circle"})," icon on top of the change significance slider. ",v.jsx("a",{href:"#/technote-2",children:"Technical Note 2"}),' provides details on "Exceedance Probability and Confidence in Changes Over Time", which is the basis of the filtering.']})]})]})]})}),v.jsxs("div",{className:"col-lg-7 text-center",children:[v.jsx("img",{alt:"guide",src:q6e,width:"100%"}),v.jsx("img",{alt:"guide",src:V6e,width:"100%"}),v.jsx("img",{alt:"guide",src:Y6e,width:"100%"})]})]})})]})}function X6e(){return v.jsx(Hae,{children:v.jsx(zae,{children:v.jsxs(No,{path:"/",element:v.jsx(K6e,{}),exact:!0,children:[v.jsx(No,{index:!0,element:v.jsx(CR,{})}),v.jsx(No,{path:":country",element:v.jsx(CR,{}),children:v.jsx(No,{path:":indicator",element:v.jsx(CR,{})})}),v.jsx(No,{path:"about",element:v.jsx(G6e,{})}),v.jsx(No,{path:"guide",element:v.jsx(Z6e,{})}),v.jsx(No,{path:"technote-0",element:v.jsx(n0,{which:"zero"})}),v.jsx(No,{path:"technote-1",element:v.jsx(n0,{which:"boundary"})}),v.jsx(No,{path:"technote-2",element:v.jsx(n0,{which:"change"})}),v.jsx(No,{path:"technote-3",element:v.jsx(n0,{which:"ihme"})}),v.jsx(No,{path:"technote-4",element:v.jsx(n0,{which:"espen"})})]})})})}function K6e(){return v.jsxs("div",{children:[v.jsx("div",{className:"shadow mb-2",children:v.jsx("div",{className:"container-xl px-2",children:v.jsxs(cx,{expand:"md",children:[v.jsx(cx.Toggle,{}),v.jsx(cx.Collapse,{children:v.jsxs(pu,{children:[v.jsxs(pu.Link,{href:"./",children:[v.jsx("i",{className:"pi pi-home mx-1"}),"Home"]}),v.jsxs(pu.Link,{href:"#/about",children:[v.jsx("i",{className:"pi pi-info-circle mx-1"}),"About"]}),v.jsxs(pu.Link,{href:"#/guide",children:[v.jsx("i",{className:"pi pi-question-circle mx-1"}),"Guide"]}),v.jsxs(pu.Link,{href:"#/technote-0",children:[v.jsx("i",{className:"pi pi-question-circle mx-1"}),"Technical Note"]})]})}),v.jsx(cx,{className:"justify-content-end",children:v.jsx(pu,{children:v.jsxs(pu.Link,{href:"/ciff_portal/",disabled:!0,children:[v.jsx("i",{className:"pi pi-sign-out mx-1"}),"Logout"]})})})]})})}),v.jsx("div",{className:"container-xl px-2",style:{paddingBottom:"50px"},children:v.jsx(Lae,{})}),v.jsxs("div",{className:"footer fixed-bottom p-2",children:[" 2024 ",v.jsx("a",{href:"https://sdi.worldpop.org",children:"WorldPop SDI"})]})]})}ER.createRoot(document.getElementById("root")).render(v.jsx(Nt.StrictMode,{children:v.jsx(X6e,{})}));
